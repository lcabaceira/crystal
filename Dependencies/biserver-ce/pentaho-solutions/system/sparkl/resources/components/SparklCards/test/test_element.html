<html>
  <head>
    <title>Test</title>

    <link rel='stylesheet' type='text/css' href='../component_element.css' />
  </head>
<body>
  <h1>Testing Sparkl Elements Card</h1>
  <div id='faa' class='fool'></div>

  <script src='lib/jquery.js' type='text/javascript'></script>
  <script src='lib/underscore.js' type='text/javascript'></script>
  <script src='lib/backbone.js' type='text/javascript'></script>
  <script src='lib/mustache.js' type='text/javascript'></script>
  <script src='../component_element.js' type='text/javascript'></script>
  <script type='text/javascript'>


  var elementOptsButton = {}
  
  elementOptsButton.dashboard = [
    {
      id: "viewOption",
      label: "View"
    },
    {
      id: "editOption",
      label: "Edit"
    },
    {
      id: "deleteOption",
      label: "Delete"      
    }
  ]

  elementOptsButton.endpoint = [
    {
      id: "runOption",
      label: "Run"
    },
    {
      id: "deleteOption",
      label: "Delete"      
    }
  ]

  var elements = [
    {
      elementName: 'element1',
      elementType: 'Dashboard',
      adminOnly: true,
      actionOpts: elementOptsButton.dashboard
    },
    {
      elementName: 'element2',
      elementType: 'Endpoint',
      adminOnly: true,
      actionOpts: elementOptsButton.endpoint
    },
    {
      elementName: 'element3',
      elementType: 'Dashboard',
      adminOnly: true,
      actionOpts: elementOptsButton.dashboard
    },
    {
      elementName: 'element4',
      elementType: 'Dashboard',
      adminOnly: true,
      actionOpts: elementOptsButton.dashboard
    },    
    {
      elementName: 'element5',
      elementType: 'Endpoint',
      adminOnly: true,
      actionOpts: elementOptsButton.endpoint
    },
    {
      elementName: 'element6',
      elementType: 'Endpoint',
      adminOnly: true,
      actionOpts: elementOptsButton.endpoint
    }
  ]

  _.each( elements , function(elementOpts){
    var card = new wd.cpk.models.sparklElementCard( elementOpts );

    var cardView = new wd.cpk.views.sparklElementCard({
      model: card,
      tagName: 'div'
    });

    cardView.render( '#faa' );

    card.on('action:deleteOption',function(id){
      alert('Deleting '+id);
    },this);
    card.on('action:runOption',function(id){
      alert('Running '+id);
    },this);
    card.on('action:viewOption',function(id){
      alert('Viewing '+id);
    },this);
    card.on('action:editOption',function(id){
      alert('Editing '+id);
    },this);

  });


   /* opts.on('change:selection', function (){
      var selection = opts.get('selection');
      console.log(selection.start + '  --->  ' + selection.end);
    }); */
  

  </script>
</body>
</html>
