/*!
* Copyright 2010 - 2013 Pentaho Corporation.  All rights reserved.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*/

/*!
 * Copyright 2010 - 2013 Pentaho Corporation.  All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/*
  Based on Base.js 1.1a (c) 2006-2010, Dean Edwards
  Updated to pass JSHint and converted into a module by Kenneth Powers
  License: http://www.opensource.org/licenses/mit-license.php
*/

/*!
 * Copyright 2010 - 2015 Pentaho Corporation.  All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/*!
 * Copyright 2002 - 2015 Webdetails, a Pentaho company. All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */

/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */

/*!
 * jQuery Migrate - v1.2.1 - 2013-05-08
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */

/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

//! moment.js
//! version : 2.9.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*!
 * Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2002 - 2015 Webdetails, a Pentaho company.  All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*! Copyright 2010 Stanford Visualization Group, Mike Bostock, BSD license. */

/*! 98fb2ca8c55dc1584e37f7fad58361bce016a6f2 */

/*
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * - Neither the name of the author nor the names of contributors may be used to
 *   endorse or promote products derived from this software without specific
 *   prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

/*!
 * Copyright 2002 - 2015 Webdetails, a Pentaho company. All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*
 * This program is free software; you can redistribute it and/or modify it under the
 * terms of the GNU Lesser General Public License, version 2.1 as published by the Free Software
 * Foundation.
 *
 * You should have received a copy of the GNU Lesser General Public License along with this
 * program; if not, you can obtain a copy at http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html
 * or from the Free Software Foundation, Inc.,
 * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details.
 *
 * Copyright 2014 Pentaho Corporation. All rights reserved.
 */

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*!
 * Copyright 2010 - 2014 Pentaho Corporation.  All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/*! *
*
*  Base64 encode / decode
*  http://www.webtoolkit.info
*  http://www.webtoolkit.info/license
*
**/

/*!
* This program is free software; you can redistribute it and/or modify it under the
* terms of the GNU Lesser General Public License, version 2.1 as published by the Free Software
* Foundation.
*
* You should have received a copy of the GNU Lesser General Public License along with this
* program; if not, you can obtain a copy at http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html
* or from the Free Software Foundation, Inc.,
* 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
*
* This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
* without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
* See the GNU Lesser General Public License for more details.
*
* Copyright (c) 2002-2013 Pentaho Corporation..  All rights reserved.
*/

/*!
 * This program is free software; you can redistribute it and/or modify it under the
 * terms of the GNU Lesser General Public License, version 2.1 as published by the Free Software
 * Foundation.
 *
 * You should have received a copy of the GNU Lesser General Public License along with this
 * program; if not, you can obtain a copy at http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html
 * or from the Free Software Foundation, Inc.,
 * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details.
 *
 * Copyright (c) 2002-2013 Pentaho Corporation..  All rights reserved.
 */

function pentahoAction(e,t,n,r,i){var s=WEB_CONTEXT_BASE+"ViewAction",o="wrapper=false&solution="+e+"&path="+t+"&action="+n;if(r){var u;for(u=0;u<r.length;u++)o+="&"+encodeURIComponent(r[u][0])+"="+encodeURIComponent(r[u][1])}return pentahoPost(s,o,i)}function pentahoService(e,t,n,r){var i=WEB_CONTEXT_BASE+"ServiceAction",s="ajax=true&";e&&(s+="component="+e+"&");if(t){var o;for(o=0;o<t.length;o++)s+="&"+encodeURIComponent(t[o][0])+"="+encodeURIComponent(t[o][1])}return pentahoPost(i,s,n,r)}function pentahoGet(e,t,n,r,i){var s=undefined!=n&&null!=n,o=null,u="text/xml";r&&(u=r);if(window.XMLHttpRequest)o=new XMLHttpRequest,o.overrideMimeType&&o.overrideMimeType(u);else if(window.ActiveXObject)try{o=new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{o=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){o=null}}if(!o)throw new Error("Cannot create an XMLHTTP instance");s&&(o.onreadystatechange=function(){pentahoResponse(o,n)});if(i!==!0){var f=(new Date).getTime();t=t+(t.length===0?"":"&")+f+"="+f}return o.open("GET",e+"?"+t,s),o.send(null),s?null:getResponse(o)}function getUnauthorizedMsg(){return"<web-service><unauthorized/></web-service>"}function getNotFoundMsg(){return"<web-service><not-found/></web-service>"}function pentahoPost(e,t,n,r){var i=undefined!=n&&null!=n,s=null,o="text/xml";r&&(o=r);if(window.XMLHttpRequest)s=new XMLHttpRequest,s.overrideMimeType&&s.overrideMimeType(o);else if(window.ActiveXObject)try{s=new ActiveXObject("Msxml2.XMLHTTP")}catch(u){try{s=new ActiveXObject("Microsoft.XMLHTTP")}catch(u){s=null}}if(!s)throw new Error("Cannot create XMLHTTP instance");return i&&(s.onreadystatechange=function(){pentahoResponse(s,n)}),s.open("POST",e,i),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.send(t),i?null:getResponse(s)}function pentahoResponse(http_request,func){if(http_request.readyState==COMPLETE)try{var content=getResponse(http_request);if(typeof func=="function")func(content);else if(typeof func=="object"&&undefined!=func.obj)func.method.call(func.obj,content);else{if(typeof func!="string")throw new Error("Invalid state in pentahoResponse, unrecognized callback function.");eval(func+"( content );")}}catch(e){var msg=e.message;throw alert("pentaho-ajax.js.pentahoResponse(): "+e),e}}function getResponse(e){switch(e.status){case STATUS_OK:return e.responseText;case STATUS_UNAUTHORIZED:return getUnauthorizedMsg();case STATUS_NOT_FOUND:return getNotFoundMsg();default:return null}}pen.define("common-repo/pentaho-ajax",[],function(){});var COMPLETE=4,STATUS_OK=200,STATUS_UNAUTHORIZED=401,STATUS_NOT_FOUND=404,base="",pathArray=window.location.pathname.split("/"),webAppPath="/"+pathArray[1];pen.define("dojo/has",["require","module"],function(e,t){var n=e.has||function(){};if(!n("dojo-has-api")){var r=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location==location&&window.document==document,i=this,s=r&&document,o=s&&s.createElement("DiV"),u=t.config&&t.config()||{};n=function(e){return typeof u[e]=="function"?u[e]=u[e](i,s,o):u[e]},n.cache=u,n.add=function(e,t,r,i){return(typeof u[e]=="undefined"||i)&&(u[e]=t),r&&n(e)},n.add("host-browser",r),n.add("dom",r),n.add("dojo-dom-ready-api",1),n.add("dojo-sniff",1)}if(n("host-browser")){n.add("dom-addeventlistener",!!document.addEventListener),n.add("touch","ontouchstart"in document||window.navigator.msMaxTouchPoints>0),n.add("device-width",screen.availWidth||innerWidth);var a=document.createElement("form");n.add("dom-attributes-explicit",a.attributes.length==0),n.add("dom-attributes-specified-flag",a.attributes.length>0&&a.attributes.length<40)}return n.clearElement=function(e){return e.innerHTML="",e},n.normalize=function(e,t){var r=e.match(/[\?:]|[^:\?]*/g),i=0,s=function(e){var t=r[i++];return t==":"?0:r[i++]=="?"?!e&&n(t)?s():(s(!0),s(e)):t||0};return e=s(),e&&t(e)},n.load=function(e,t,n){e?t([e],n):n()},n}),pen.define("dojo/_base/config",["../has","require"],function(e,t){var n={};if(e("dojo-config-api")){var r=t.rawConfig,i;for(i in r)n[i]=r[i]}else{var s=function(t,n,r){for(i in t)i!="has"&&e.add(n+i,t[i],0,r)};n=e("dojo-loader")?t.rawConfig:this.dojoConfig||this.djConfig||{},s(n,"config",1),s(n.has,"",1)}return!n.locale&&typeof navigator!="undefined"&&(n.locale=(navigator.language||navigator.userLanguage).toLowerCase()),n}),pen.define("dojo/_base/kernel",["../has","./config","require","module"],function(e,t,n,r){var i,s,o={},u={},a={config:t,global:window,dijit:o,dojox:u},f={dojo:["dojo",a],dijit:["dijit",o],dojox:["dojox",u]},l=n.map&&n.map[r.id.match(/[^\/]+/)[0]],c;for(s in l)f[s]?f[s][0]=l[s]:f[s]=[l[s],{}];for(s in f)c=f[s],c[1]._scopeName=c[0],t.noGlobals||(this[c[0]]=c[1]);a.scopeMap=f,a.baseUrl=a.config.baseUrl=n.baseUrl,a.isAsync=!e("dojo-loader")||n.async,a.locale=t.locale;var h="$Rev: f774568 $".match(/[0-9a-f]{7,}/);a.version={major:1,minor:9,patch:2,flag:"",revision:h?h[0]:NaN,toString:function(){var e=a.version;return e.major+"."+e.minor+"."+e.patch+e.flag+" ("+e.revision+")"}},e.add("extend-dojo",1),Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(a),e("host-rhino")?a.exit=function(e){quit(e)}:a.exit=function(){},e.add("dojo-guarantee-console",1);if(e("dojo-guarantee-console")){typeof console!="undefined"||(console={});var p=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"],d;i=0;while(d=p[i++])console[d]||function(){var e=d+"";console[e]="log"in console?function(){var t=Array.apply({},arguments);t.unshift(e+":"),console.log(t.join(" "))}:function(){},console[e]._fake=!0}()}e.add("dojo-debug-messages",!!t.isDebug),a.deprecated=a.experimental=function(){},e("dojo-debug-messages")&&(a.deprecated=function(e,t,n){var r="DEPRECATED: "+e;t&&(r+=" "+t),n&&(r+=" -- will be removed in version: "+n),console.warn(r)},a.experimental=function(e,t){var n="EXPERIMENTAL: "+e+" -- APIs subject to change without notice.";t&&(n+=" "+t),console.warn(n)}),e.add("dojo-modulePaths",1);if(e("dojo-modulePaths")&&t.modulePaths){a.deprecated("dojo.modulePaths","use paths configuration");var v={};for(s in t.modulePaths)v[s.replace(/\./g,"/")]=t.modulePaths[s];n({paths:v})}return e.add("dojo-moduleUrl",1),e("dojo-moduleUrl")&&(a.moduleUrl=function(e,t){a.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var r=null;return e&&(r=n.toUrl(e.replace(/\./g,"/")+(t?"/"+t:"")+"/*.*").replace(/\/\*\.\*/,"")+(t?"":"/")),r}),a._hasResource={},a}),pen.define("dojo/sniff",["./has"],function(e){if(e("host-browser")){var t=navigator,n=t.userAgent,r=t.appVersion,i=parseFloat(r);e.add("air",n.indexOf("AdobeAIR")>=0),e.add("msapp",parseFloat(n.split("MSAppHost/")[1])||undefined),e.add("khtml",r.indexOf("Konqueror")>=0?i:undefined),e.add("webkit",parseFloat(n.split("WebKit/")[1])||undefined),e.add("chrome",parseFloat(n.split("Chrome/")[1])||undefined),e.add("safari",r.indexOf("Safari")>=0&&!e("chrome")?parseFloat(r.split("Version/")[1]):undefined),e.add("mac",r.indexOf("Macintosh")>=0),e.add("quirks",document.compatMode=="BackCompat");if(n.match(/(iPhone|iPod|iPad)/)){var s=RegExp.$1.replace(/P/,"p"),o=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",u=parseFloat(o.replace(/_/,".").replace(/_/g,""));e.add(s,u),e.add("ios",u)}e.add("android",parseFloat(n.split("Android ")[1])||undefined),e.add("bb",(n.indexOf("BlackBerry")>=0||n.indexOf("BB10")>=0)&&parseFloat(n.split("Version/")[1])||undefined),e.add("trident",parseFloat(r.split("Trident/")[1])||undefined),e.add("svg",typeof SVGAngle!="undefined");if(!e("webkit")){n.indexOf("Opera")>=0&&e.add("opera",i>=9.8?parseFloat(n.split("Version/")[1])||i:i),n.indexOf("Gecko")>=0&&!e("khtml")&&!e("webkit")&&!e("trident")&&e.add("mozilla",i),e("mozilla")&&e.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||undefined);if(document.all&&!e("opera")){var a=parseFloat(r.split("MSIE ")[1])||undefined,f=document.documentMode;f&&f!=5&&Math.floor(a)!=f&&(a=f),e.add("ie",a)}e.add("wii",typeof opera!="undefined"&&opera.wiiremote)}}return e}),pen.define("dojo/_base/lang",["./kernel","../has","../sniff"],function(e,t){t.add("bug-for-in-skips-shadowed",function(){for(var e in{toString:1})return 0;return 1});var n=t("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],r=n.length,i=function(t,n,r){var i,s=0,o=e.global;if(!r){if(!t.length)return o;i=t[s++];try{r=e.scopeMap[i]&&e.scopeMap[i][1]}catch(u){}r=r||(i in o?o[i]:n?o[i]={}:undefined)}while(r&&(i=t[s++]))r=i in r?r[i]:n?r[i]={}:undefined;return r},s=Object.prototype.toString,o=function(e,t,n){return(n||[]).concat(Array.prototype.slice.call(e,t||0))},u=/\{([^\}]+)\}/g,a={_extraNames:n,_mixin:function(e,i,s){var o,u,a,f={};for(o in i){u=i[o];if(!(o in e)||e[o]!==u&&(!(o in f)||f[o]!==u))e[o]=s?s(u):u}if(t("bug-for-in-skips-shadowed")&&i)for(a=0;a<r;++a){o=n[a],u=i[o];if(!(o in e)||e[o]!==u&&(!(o in f)||f[o]!==u))e[o]=s?s(u):u}return e},mixin:function(e,t){e||(e={});for(var n=1,r=arguments.length;n<r;n++)a._mixin(e,arguments[n]);return e},setObject:function(e,t,n){var r=e.split("."),s=r.pop(),o=i(r,!0,n);return o&&s?o[s]=t:undefined},getObject:function(e,t,n){return i(e.split("."),t,n)},exists:function(e,t){return a.getObject(e,!1,t)!==undefined},isString:function(e){return typeof e=="string"||e instanceof String},isArray:function(e){return e&&(e instanceof Array||typeof e=="array")},isFunction:function(e){return s.call(e)==="[object Function]"},isObject:function(e){return e!==undefined&&(e===null||typeof e=="object"||a.isArray(e)||a.isFunction(e))},isArrayLike:function(e){return e&&e!==undefined&&!a.isString(e)&&!a.isFunction(e)&&(!e.tagName||e.tagName.toLowerCase()!="form")&&(a.isArray(e)||isFinite(e.length))},isAlien:function(e){return e&&!a.isFunction(e)&&/\{\s*\[native code\]\s*\}/.test(String(e))},extend:function(e,t){for(var n=1,r=arguments.length;n<r;n++)a._mixin(e.prototype,arguments[n]);return e},_hitchArgs:function(t,n){var r=a._toArray(arguments,2),i=a.isString(n);return function(){var s=a._toArray(arguments),o=i?(t||e.global)[n]:n;return o&&o.apply(t||this,r.concat(s))}},hitch:function(t,n){if(arguments.length>2)return a._hitchArgs.apply(e,arguments);n||(n=t,t=null);if(a.isString(n)){t=t||e.global;if(!t[n])throw['lang.hitch: scope["',n,'"] is null (scope="',t,'")'].join("");return function(){return t[n].apply(t,arguments||[])}}return t?function(){return n.apply(t,arguments||[])}:n},delegate:function(){function e(){}return function(t,n){e.prototype=t;var r=new e;return e.prototype=null,n&&a._mixin(r,n),r}}(),_toArray:t("ie")?function(){function e(e,t,n){var r=n||[];for(var i=t||0;i<e.length;i++)r.push(e[i]);return r}return function(t){return(t.item?e:o).apply(this,arguments)}}():o,partial:function(t){var n=[null];return a.hitch.apply(e,n.concat(a._toArray(arguments)))},clone:function(e){if(!e||typeof e!="object"||a.isFunction(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,n,r;if(a.isArray(e)){t=[];for(n=0,r=e.length;n<r;++n)n in e&&t.push(a.clone(e[n]))}else t=e.constructor?new e.constructor:{};return a._mixin(t,e,a.clone)},trim:String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(e,t,n){return e.replace(n||u,a.isFunction(t)?t:function(e,n){return a.getObject(n,!1,t)})}};return t("extend-dojo")&&a.mixin(e,a),a}),pen.define("dojo/_base/array",["./kernel","../has","./lang"],function(e,t,n){function s(e){return r[e]=new Function("item","index","array",e)}function o(e){var t=!e;return function(n,i,o){var u=0,a=n&&n.length||0,f;a&&typeof n=="string"&&(n=n.split("")),typeof i=="string"&&(i=r[i]||s(i));if(o)for(;u<a;++u){f=!i.call(o,n[u],u,n);if(e^f)return!f}else for(;u<a;++u){f=!i(n[u],u,n);if(e^f)return!f}return t}}function u(e){var t=1,n=0,r=0;return e||(t=n=r=-1),function(s,o,u,f){if(f&&t>0)return a.lastIndexOf(s,o,u);var l=s&&s.length||0,c=e?l+r:n,h;u===i?h=e?n:l+r:u<0?(h=l+u,h<0&&(h=n)):h=u>=l?l+r:u,l&&typeof s=="string"&&(s=s.split(""));for(;h!=c;h+=t)if(s[h]==o)return h;return-1}}var r={},i,a={every:o(!1),some:o(!0),indexOf:u(!0),lastIndexOf:u(!1),forEach:function(e,t,n){var i=0,o=e&&e.length||0;o&&typeof e=="string"&&(e=e.split("")),typeof t=="string"&&(t=r[t]||s(t));if(n)for(;i<o;++i)t.call(n,e[i],i,e);else for(;i<o;++i)t(e[i],i,e)},map:function(e,t,n,i){var o=0,u=e&&e.length||0,a=new(i||Array)(u);u&&typeof e=="string"&&(e=e.split("")),typeof t=="string"&&(t=r[t]||s(t));if(n)for(;o<u;++o)a[o]=t.call(n,e[o],o,e);else for(;o<u;++o)a[o]=t(e[o],o,e);return a},filter:function(e,t,n){var i=0,o=e&&e.length||0,u=[],a;o&&typeof e=="string"&&(e=e.split("")),typeof t=="string"&&(t=r[t]||s(t));if(n)for(;i<o;++i)a=e[i],t.call(n,a,i,e)&&u.push(a);else for(;i<o;++i)a=e[i],t(a,i,e)&&u.push(a);return u},clearCache:function(){r={}}};return t("extend-dojo")&&n.mixin(e,a),a}),pen.define("dojo/_base/window",["./kernel","./lang","../sniff"],function(e,t,n){var r={global:e.global,doc:this.document||null,body:function(t){return t=t||e.doc,t.body||t.getElementsByTagName("body")[0]},setContext:function(t,n){e.global=r.global=t,e.doc=r.doc=n},withGlobal:function(t,n,i,s){var o=e.global;try{return e.global=r.global=t,r.withDoc.call(null,t.document,n,i,s)}finally{e.global=r.global=o}},withDoc:function(t,i,s,o){var u=r.doc,a=n("quirks"),f=n("ie"),l,c,h;try{return e.doc=r.doc=t,e.isQuirks=n.add("quirks",e.doc.compatMode=="BackCompat",!0,!0),n("ie")&&(h=t.parentWindow)&&h.navigator&&(l=parseFloat(h.navigator.appVersion.split("MSIE ")[1])||undefined,c=t.documentMode,c&&c!=5&&Math.floor(l)!=c&&(l=c),e.isIE=n.add("ie",l,!0,!0)),s&&typeof i=="string"&&(i=s[i]),i.apply(s,o||[])}finally{e.doc=r.doc=u,e.isQuirks=n.add("quirks",a,!0,!0),e.isIE=n.add("ie",f,!0,!0)}}};return n("extend-dojo")&&t.mixin(e,r),r}),pen.define("dijit/main",["dojo/_base/kernel"],function(e){return e.dijit}),pen.define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/window","./main"],function(e,t,n,r){var i={},s={},o={length:0,add:function(e){if(s[e.id])throw new Error("Tried to register widget with id=="+e.id+" but that id is already registered");s[e.id]=e,this.length++},remove:function(e){s[e]&&(delete s[e],this.length--)},byId:function(e){return typeof e=="string"?s[e]:e},byNode:function(e){return s[e.getAttribute("widgetId")]},toArray:function(){var e=[];for(var t in s)e.push(s[t]);return e},getUniqueId:function(e){var t;do t=e+"_"+(e in i?++i[e]:i[e]=0);while(s[t]);return r._scopeName=="dijit"?t:r._scopeName+"_"+t},findWidgets:function(e,t){function r(e){for(var i=e.firstChild;i;i=i.nextSibling)if(i.nodeType==1){var o=i.getAttribute("widgetId");if(o){var u=s[o];u&&n.push(u)}else i!==t&&r(i)}}var n=[];return r(e),n},_destroyAll:function(){r._curFocus=null,r._prevFocus=null,r._activeStack=[],e.forEach(o.findWidgets(n.body()),function(e){e._destroyed||(e.destroyRecursive?e.destroyRecursive():e.destroy&&e.destroy())})},getEnclosingWidget:function(e){while(e){var t=e.nodeType==1&&e.getAttribute("widgetId");if(t)return s[t];e=e.parentNode}return null},_hash:s};return r.registry=o,o}),pen.define("dojo/dom",["./sniff","./_base/window"],function(e,t){if(e("ie")<=7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}var r={};e("ie")?r.byId=function(e,n){if(typeof e!="string")return e;var r=n||t.doc,i=e&&r.getElementById(e);if(!(!i||i.attributes.id.value!=e&&i.id!=e))return i;var s=r.all[e];if(!s||s.nodeName)s=[s];var o=0;while(i=s[o++])if(i.attributes&&i.attributes.id&&i.attributes.id.value==e||i.id==e)return i}:r.byId=function(e,n){return(typeof e=="string"?(n||t.doc).getElementById(e):e)||null},r.isDescendant=function(e,t){try{e=r.byId(e),t=r.byId(t);while(e){if(e==t)return!0;e=e.parentNode}}catch(n){}return!1},e.add("css-user-select",function(e,t,n){if(!n)return!1;var r=n.style,i=["Khtml","O","ms","Moz","Webkit"],s=i.length,o="userSelect",u;do if(typeof r[o]!="undefined")return o;while(s--&&(o=i[s]+"UserSelect"));return!1});var i=e("css-user-select");return r.setSelectable=i?function(e,t){r.byId(e).style[i]=t?"":"none"}:function(e,t){e=r.byId(e);var n=e.getElementsByTagName("*"),i=n.length;if(t){e.removeAttribute("unselectable");while(i--)n[i].removeAttribute("unselectable")}else{e.setAttribute("unselectable","on");while(i--)n[i].setAttribute("unselectable","on")}},r}),pen.define("common-ui/util/util",["dijit/registry","dojo/dom"],function(e,t){return{getUrlParameters:function(){var e={},t,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(n," "))},s=window.location.search.substring(1);while(t=r.exec(s)){var o=i(t[1]),u=i(t[2]);e[o]!==undefined&&(u=$.isArray(e[o])?e[o].concat([u]):[e[o],u]),e[o]=u}return e},getLocale:function(){var e=this.getUrlParameters().locale;return e&&e.length>2&&(e=e.substring(0,2)),e},localizeDomCtrl:function(n,r,i){var s=null,o=null,u=null,a=i||"";n.indexOf("_label")==n.length-6?(u=n.substr(0,n.length-6),s="label"):n.indexOf("_title")==n.length-6?(u=n.substr(0,n.length-6),s="title"):n.indexOf("_content")==n.length-8?(u=n.substr(0,n.length-8),s="inner"):n.indexOf("_legend")==n.length-7?(u=n.substr(0,n.length-7),s="legend"):n.indexOf("_header")==n.length-7?(u=n.substr(0,n.length-7),s="header"):n.indexOf("_button")==n.length-7&&(u=n.substr(0,n.length-7),s="inner"),u!=null&&(u=a+u,this[u]?o=this[u]:(o=e.byId(u),o||(o=t.byId(u))));var f=-1;o||(o=t.byId(u+"1"),o&&(f=1));while(o&&s){if(s=="inner")o.domNode&&(o=o.domNode),o.innerHTML=r;else if(s=="legend")if(o.firstElementChild===undefined){var l=o.firstChild;while(l){if(l.nodeType==1){l.innerHTML=r;break}l=l.nextSibling}}else o.firstElementChild.innerHTML=r;else s=="label"&&o.setLabel?o.setLabel(r):s=="title"&&o.setTitle?o.setTitle(r):o.set?o.set(s,r):s=="title"&&o.title&&(o.title=r);f!=-1?(f++,o=dojo.byId(u+f)):o=null}},localizeDom:function(e,t){var n;if(pentaho&&pentaho.common&&pentaho.common.Messages){var r=pentaho.common.Messages.getBundle(e);if(r)for(n in r)r.hasOwnProperty(n)&&this.localizeDomCtrl(n,pentaho.common.Messages.getString(n),t)}else console.log("pentaho.common.Messages not available for localizing the DOM")},isNumberType:function(e){var t=["java.lang.Number","java.lang.Byte","java.lang.Double","java.lang.Float","java.lang.Integer","java.lang.Long","java.lang.Short","java.math.BigDecimal","java.math.BigInteger"];return t.indexOf(e)>=0}}}),pen.define("dojo/_base/declare",["./kernel","../has","./lang"],function(e,t,n){function f(e,t){throw new Error("declare"+(t?" "+t:"")+": "+e)}function l(e,t){var n=[],r=[{cls:0,refs:[]}],i={},o=1,a=e.length,l=0,c,h,p,d,v,m,g,y;for(;l<a;++l){p=e[l],p?s.call(p)!="[object Function]"&&f("mixin #"+l+" is not a callable constructor.",t):f("mixin #"+l+" is unknown. Did you use dojo.require to pull it in?",t),h=p._meta?p._meta.bases:[p],d=0;for(c=h.length-1;c>=0;--c)v=h[c].prototype,v.hasOwnProperty("declaredClass")||(v.declaredClass="uniqName_"+u++),g=v.declaredClass,i.hasOwnProperty(g)||(i[g]={count:0,refs:[],cls:h[c]},++o),m=i[g],d&&d!==m&&(m.refs.push(d),++d.count),d=m;++d.count,r[0].refs.push(d)}while(r.length){d=r.pop(),n.push(d.cls),--o;while(y=d.refs,y.length==1){d=y[0];if(!d||--d.count){d=0;break}n.push(d.cls),--o}if(d)for(l=0,a=y.length;l<a;++l)d=y[l],--d.count||r.push(d)}return o&&f("can't build consistent linearization",t),p=e[0],n[0]=p?p._meta&&p===n[n.length-p._meta.bases.length]?p._meta.bases.length:1:0,n}function c(e,t,n){var r,s,o,u,l,c,h,p,d,v=this._inherited=this._inherited||{};typeof e=="string"&&(r=e,e=t,t=n),n=0,u=e.callee,r=r||u.nom,r||f("can't deduce a name to call inherited()",this.declaredClass),l=this.constructor._meta,o=l.bases,d=v.p;if(r!=a){if(v.c!==u){d=0,c=o[0],l=c._meta;if(l.hidden[r]!==u){s=l.chains,s&&typeof s[r]=="string"&&f("calling chained method with inherited: "+r,this.declaredClass);do{l=c._meta,h=c.prototype;if(l&&(h[r]===u&&h.hasOwnProperty(r)||l.hidden[r]===u))break}while(c=o[++d]);d=c?d:-1}}c=o[++d];if(c){h=c.prototype;if(c._meta&&h.hasOwnProperty(r))n=h[r];else{p=i[r];do{h=c.prototype,n=h[r];if(n&&(c._meta?h.hasOwnProperty(r):n!==p))break}while(c=o[++d])}}n=c&&n||i[r]}else{if(v.c!==u){d=0,l=o[0]._meta;if(l&&l.ctor!==u){s=l.chains,(!s||s.constructor!=="manual")&&f("calling chained constructor with inherited",this.declaredClass);while(c=o[++d]){l=c._meta;if(l&&l.ctor===u)break}d=c?d:-1}}while(c=o[++d]){l=c._meta,n=l?l.ctor:c;if(n)break}n=c&&n}v.c=n,v.p=d;if(n)return t===!0?n:n.apply(this,t||e)}function h(e,t){return typeof e=="string"?this.__inherited(e,t,!0):this.__inherited(e,!0)}function p(e,t,n){var r=this.getInherited(e,t);if(r)return r.apply(this,n||t||e)}function v(e){var t=this.constructor._meta.bases;for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return this instanceof e}function m(e,r){for(var i in r)i!=a&&r.hasOwnProperty(i)&&(e[i]=r[i]);if(t("bug-for-in-skips-shadowed"))for(var s=n._extraNames,o=s.length;o;)i=s[--o],i!=a&&r.hasOwnProperty(i)&&(e[i]=r[i])}function g(e,r){var o,u;for(o in r)u=r[o],(u!==i[o]||!(o in i))&&o!=a&&(s.call(u)=="[object Function]"&&(u.nom=o),e[o]=u);if(t("bug-for-in-skips-shadowed"))for(var f=n._extraNames,l=f.length;l;)o=f[--l],u=r[o],(u!==i[o]||!(o in i))&&o!=a&&(s.call(u)=="[object Function]"&&(u.nom=o),e[o]=u);return e}function y(e){return C.safeMixin(this.prototype,e),this}function b(e,t){return C([this].concat(e),t||{})}function w(e,t){return function(){var n=arguments,r=n,i=n[0],s,o,u,a=e.length,f;if(!(this instanceof n.callee))return N(n);if(t&&(i&&i.preamble||this.preamble)){f=new Array(e.length),f[0]=n;for(o=0;;){i=n[0],i&&(s=i.preamble,s&&(n=s.apply(this,n)||n)),s=e[o].prototype,s=s.hasOwnProperty("preamble")&&s.preamble,s&&(n=s.apply(this,n)||n);if(++o==a)break;f[o]=n}}for(o=a-1;o>=0;--o)s=e[o],u=s._meta,s=u?u.ctor:s,s&&s.apply(this,f?f[o]:n);s=this.postscript,s&&s.apply(this,r)}}function E(e,t){return function(){var n=arguments,r=n,i=n[0],s;if(!(this instanceof n.callee))return N(n);t&&(i&&(s=i.preamble,s&&(r=s.apply(this,r)||r)),s=this.preamble,s&&s.apply(this,r)),e&&e.apply(this,n),s=this.postscript,s&&s.apply(this,n)}}function S(e){return function(){var t=arguments,n=0,r,i;if(!(this instanceof t.callee))return N(t);for(;r=e[n];++n){i=r._meta,r=i?i.ctor:r;if(r){r.apply(this,t);break}}r=this.postscript,r&&r.apply(this,t)}}function x(e,t,n){return function(){var r,i,s,o=0,u=1;n&&(o=t.length-1,u=-1);for(;r=t[o];o+=u)i=r._meta,s=(i?i.hidden:r.prototype)[e],s&&s.apply(this,arguments)}}function T(e){o.prototype=e.prototype;var t=new o;return o.prototype=null,t}function N(e){var t=e.callee,n=T(t);return t.apply(n,e),n}function C(e,t,o){typeof e!="string"&&(o=t,t=e,e=""),o=o||{};var u,p,g,N,k,L,A,O=1,M=t;s.call(t)=="[object Array]"?(L=l(t,e),g=L[0],O=L.length-g,t=L[O]):(L=[0],t?s.call(t)=="[object Function]"?(g=t._meta,L=L.concat(g?g.bases:t)):f("base class is not a callable constructor.",e):t!==null&&f("unknown base class. Did you use dojo.require to pull it in?",e));if(t)for(p=O-1;;--p){u=T(t);if(!p)break;g=L[p],(g._meta?m:r)(u,g.prototype),N=new Function,N.superclass=t,N.prototype=u,t=u.constructor=N}else u={};C.safeMixin(u,o),g=o.constructor,g!==i.constructor&&(g.nom=a,u.constructor=g);for(p=O-1;p;--p)g=L[p]._meta,g&&g.chains&&(A=r(A||{},g.chains));u["-chains-"]&&(A=r(A||{},u["-chains-"])),g=!A||!A.hasOwnProperty(a),L[0]=N=A&&A.constructor==="manual"?S(L):L.length==1?E(o.constructor,g):w(L,g),N._meta={bases:L,hidden:o,chains:A,parents:M,ctor:o.constructor},N.superclass=t&&t.prototype,N.extend=y,N.createSubclass=b,N.prototype=u,u.constructor=N,u.getInherited=h,u.isInstanceOf=v,u.inherited=d,u.__inherited=c,e&&(u.declaredClass=e,n.setObject(e,N));if(A)for(k in A)u[k]&&typeof A[k]=="string"&&k!=a&&(g=u[k]=x(k,L,A[k]==="after"),g.nom=k);return N}var r=n.mixin,i=Object.prototype,s=i.toString,o=new Function,u=0,a="constructor",d=e.config.isDebug?p:c;return e.safeMixin=C.safeMixin=g,e.declare=C,C}),pen.define("dojo/aspect",[],function(){function n(e,n,r,i){var s=e[n],o=n=="around",u;if(o){var a=r(function(){return s.advice(this,arguments)});u={remove:function(){a&&(a=e=r=null)},advice:function(e,t){return a?a.apply(e,t):s.advice(e,t)}}}else u={remove:function(){if(u.advice){var t=u.previous,i=u.next;!i&&!t?delete e[n]:(t?t.next=i:e[n]=i,i&&(i.previous=t)),e=r=u.advice=null}},id:t++,advice:r,receiveArguments:i};if(s&&!o)if(n=="after"){while(s.next&&(s=s.next));s.next=u,u.previous=s}else n=="before"&&(e[n]=u,u.next=s,s.previous=u);else e[n]=u;return u}function r(r){return function(i,s,o,u){var a=i[s],f;if(!a||a.target!=i)i[s]=f=function(){var n=t,r=arguments,i=f.before;while(i)r=i.advice.apply(this,r)||r,i=i.next;if(f.around)var s=f.around.advice(this,r);var o=f.after;while(o&&o.id<n){if(o.receiveArguments){var u=o.advice.apply(this,r);s=u===e?s:u}else s=o.advice.call(this,s,r);o=o.next}return s},a&&(f.around={advice:function(e,t){return a.apply(e,t)}}),f.target=i;var l=n(f||a,r,o,u);return o=null,l}}var e,t=0,i=r("after"),s=r("before"),o=r("around");return{before:s,around:o,after:i}}),pen.define("dojo/on",["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(e,t,n){function o(e,t,r,o,u){var a=t.match(/(.*):(.*)/);if(a)return t=a[2],a=a[1],i.selector(a,t).call(u,e,r);n("touch")&&(s.test(t)&&(r=x(r)),!n("event-orientationchange")&&t=="orientationchange"&&(t="resize",e=window,r=x(r))),p&&(r=p(r));if(e.addEventListener){var f=t in c,l=f?c[t]:t;return e.addEventListener(l,r,f),{remove:function(){e.removeEventListener(l,r,f)}}}t="on"+t;if(g&&e.attachEvent)return g(e,t,r);throw new Error("Target must be an event emitter")}function u(){this.cancelable=!1,this.defaultPrevented=!0}function a(){this.bubbles=!1}if(n("dom")){var r=window.ScriptEngineMajorVersion;n.add("jscript",r&&r()+ScriptEngineMinorVersion()/10),n.add("event-orientationchange",n("touch")&&!n("android")),n.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation),n.add("event-focusin",function(e,t,n){return"onfocusin"in n}),n("touch")&&n.add("touch-can-modify-event-delegate",function(){var e=function(){};e.prototype=document.createEvent("MouseEvents");try{return(new e).target=null,!0}catch(t){return!1}})}var i=function(e,t,n,r){return typeof e.on=="function"&&typeof t!="function"&&!e.nodeType?e.on(t,n):i.parse(e,t,n,o,r,this)};i.pausable=function(e,t,n,r){var s,o=i(e,t,function(){if(!s)return n.apply(this,arguments)},r);return o.pause=function(){s=!0},o.resume=function(){s=!1},o},i.once=function(e,t,n,r){var s=i(e,t,function(){return s.remove(),n.apply(this,arguments)});return s},i.parse=function(e,t,n,r,s,o){if(t.call)return t.call(o,e,n);if(t instanceof Array)u=t;else if(t.indexOf(",")>-1)var u=t.split(/\s*,\s*/);if(u){var a=[],f=0,l;while(l=u[f++])a.push(i.parse(e,l,n,r,s,o));return a.remove=function(){for(var e=0;e<a.length;e++)a[e].remove()},a}return r(e,t,n,s,o)};var s=/^touch/;i.matches=function(e,n,r,i,s){s=s&&s.matches?s:t.query,i=i!==!1,e.nodeType!=1&&(e=e.parentNode);while(!s.matches(e,n,r))if(e==r||i===!1||!(e=e.parentNode)||e.nodeType!=1)return!1;return e},i.selector=function(e,t,n){return function(r,s){function a(t){return i.matches(t,e,r,n,o)}var o=typeof e=="function"?{matches:e}:this,u=t.bubble;return u?i(r,u(a),s):i(r,t,function(e){var t=a(e.target);return t&&s.call(t,e)})}};var f=[].slice,l=i.emit=function(e,t,n){var r=f.call(arguments,2),i="on"+t;if("parentNode"in e){var s=r[0]={};for(var o in n)s[o]=n[o];s.preventDefault=u,s.stopPropagation=a,s.target=e,s.type=t,n=s}do e[i]&&e[i].apply(e,r);while(n&&n.bubbles&&(e=e.parentNode));return n&&n.cancelable&&n},c=n("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!n("event-stopimmediatepropagation"))var h=function(){this.immediatelyStopped=!0,this.modified=!0},p=function(e){return function(t){if(!t.immediatelyStopped)return t.stopImmediatePropagation=h,e.apply(this,arguments)}};if(n("dom-addeventlistener"))i.emit=function(e,t,n){if(e.dispatchEvent&&document.createEvent){var r=e.ownerDocument||document,s=r.createEvent("HTMLEvents");s.initEvent(t,!!n.bubbles,!!n.cancelable);for(var o in n)o in s||(s[o]=n[o]);return e.dispatchEvent(s)&&s}return l.apply(i,arguments)};else{i._fixEvent=function(e,t){if(!e){var n=t&&(t.ownerDocument||t.document||t).parentWindow||window;e=n.event}if(!e)return e;try{d&&e.type==d.type&&e.srcElement==d.target&&(e=d)}catch(r){}if(!e.target){e.target=e.srcElement,e.currentTarget=t||e.srcElement,e.type=="mouseover"&&(e.relatedTarget=e.fromElement),e.type=="mouseout"&&(e.relatedTarget=e.toElement),e.stopPropagation||(e.stopPropagation=b,e.preventDefault=w);switch(e.type){case"keypress":var i="charCode"in e?e.charCode:e.keyCode;i==10?(i=0,e.keyCode=13):i==13||i==27?i=0:i==3&&(i=99),e.charCode=i,y(e)}}return e};var d,v=function(e){this.handle=e};v.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var m=function(e){return function(t){t=i._fixEvent(t,this);var n=e.call(this,t);return t.modified&&(d||setTimeout(function(){d=null}),d=t),n}},g=function(t,r,i){i=m(i);if(((t.ownerDocument?t.ownerDocument.parentWindow:t.parentWindow||t.window||window)!=top||n("jscript")<5.8)&&!n("config-_allow_leaks")){typeof _dojoIEListeners_=="undefined"&&(_dojoIEListeners_=[]);var s=t[r];if(!s||!s.listeners){var o=s;s=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}"),s.listeners=[],t[r]=s,s.global=this,o&&s.listeners.push(_dojoIEListeners_.push(o)-1)}var u;return s.listeners.push(u=s.global._dojoIEListeners_.push(i)-1),new v(u)}return e.after(t,r,i,!0)},y=function(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode},b=function(){this.cancelBubble=!0},w=i._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(e){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(n("touch"))var E=function(){},S=window.orientation,x=function(e){return function(t){var r=t.corrected;if(!r){var i=t.type;try{delete t.type}catch(s){}if(t.type){if(n("touch-can-modify-event-delegate"))E.prototype=t,r=new E;else{r={};for(var o in t)r[o]=t[o]}r.preventDefault=function(){t.preventDefault()},r.stopPropagation=function(){t.stopPropagation()}}else r=t,r.type=i;t.corrected=r;if(i=="resize")return S==window.orientation?null:(S=window.orientation,r.type="orientationchange",e.call(this,r));"rotation"in r||(r.rotation=0,r.scale=1);var u=r.changedTouches[0];for(var a in u)delete r[a],r[a]=u[a]}return e.call(this,r)}};return i}),pen.define("dojo/Evented",["./aspect","./on"],function(e,t){function r(){}var n=e.after;return r.prototype={on:function(e,r){return t.parse(this,e,r,function(e,t){return n(e,"on"+t,r,!0)})},emit:function(e,n){var r=[this];return r.push.apply(r,arguments),t.emit.apply(t,r)}},r}),pen.define("dojo/topic",["./Evented"],function(e){var t=new e;return{publish:function(e,n){return t.emit.apply(t,arguments)},subscribe:function(e,n){return t.on.apply(t,arguments)}}}),pen.define("dojo/dom-style",["./sniff","./dom"],function(e,t){function c(t,n,r){n=n.toLowerCase();if(e("ie")){if(r=="auto"){if(n=="height")return t.offsetHeight;if(n=="width")return t.offsetWidth}if(n=="fontweight")switch(r){case 700:return"bold";case 400:default:return"normal"}}return n in f||(f[n]=l.test(n)),f[n]?i(t,r):r}var n,r={};e("webkit")?n=function(e){var t;if(e.nodeType==1){var n=e.ownerDocument.defaultView;t=n.getComputedStyle(e,null),!t&&e.style&&(e.style.display="",t=n.getComputedStyle(e,null))}return t||{}}:e("ie")&&(e("ie")<9||e("quirks"))?n=function(e){return e.nodeType==1&&e.currentStyle?e.currentStyle:{}}:n=function(e){return e.nodeType==1?e.ownerDocument.defaultView.getComputedStyle(e,null):{}},r.getComputedStyle=n;var i;e("ie")?i=function(e,t){if(!t)return 0;if(t=="medium")return 4;if(t.slice&&t.slice(-2)=="px")return parseFloat(t);var n=e.style,r=e.runtimeStyle,i=e.currentStyle,s=n.left,o=r.left;r.left=i.left;try{n.left=t,t=n.pixelLeft}catch(u){t=0}return n.left=s,r.left=o,t}:i=function(e,t){return parseFloat(t)||0},r.toPixelValue=i;var s="DXImageTransform.Microsoft.Alpha",o=function(e,t){try{return e.filters.item(s)}catch(n){return t?{}:null}},u=e("ie")<9||e("ie")<10&&e("quirks")?function(e){try{return o(e).Opacity/100}catch(t){return 1}}:function(e){return n(e).opacity},a=e("ie")<9||e("ie")<10&&e("quirks")?function(e,t){t===""&&(t=1);var n=t*100,r=t===1;r?(e.style.zoom="",o(e)&&(e.style.filter=e.style.filter.replace(new RegExp("\\s*progid:"+s+"\\([^\\)]+?\\)","i"),""))):(e.style.zoom=1,o(e)?o(e,1).Opacity=n:e.style.filter+=" progid:"+s+"(Opacity="+n+")",o(e,1).Enabled=!0);if(e.tagName.toLowerCase()=="tr")for(var i=e.firstChild;i;i=i.nextSibling)i.tagName.toLowerCase()=="td"&&a(i,t);return t}:function(e,t){return e.style.opacity=t},f={left:!0,top:!0},l=/margin|padding|width|height|max|min|offset/,h={cssFloat:1,styleFloat:1,"float":1};return r.get=function(n,i){var s=t.byId(n),o=arguments.length,a=i=="opacity";if(o==2&&a)return u(s);i=h[i]?"cssFloat"in s.style?"cssFloat":"styleFloat":i;var f=r.getComputedStyle(s);return o==1?f:c(s,i,f[i]||s.style[i])},r.set=function(n,i,s){var o=t.byId(n),u=arguments.length,f=i=="opacity";i=h[i]?"cssFloat"in o.style?"cssFloat":"styleFloat":i;if(u==3)return f?a(o,s):o.style[i]=s;for(var l in i)r.set(n,l,i[l]);return r.getComputedStyle(o)},r}),pen.define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(e,t,n,r){function o(e,t,n,r,i,s){s=s||"px";var o=e.style;isNaN(t)||(o.left=t+s),isNaN(n)||(o.top=n+s),r>=0&&(o.width=r+s),i>=0&&(o.height=i+s)}function u(e){return e.tagName.toLowerCase()=="button"||e.tagName.toLowerCase()=="input"&&(e.getAttribute("type")||"").toLowerCase()=="button"}function a(e){return i.boxModel=="border-box"||e.tagName.toLowerCase()=="table"||u(e)}var i={};i.boxModel="content-box",e("ie")&&(i.boxModel=document.compatMode=="BackCompat"?"border-box":"content-box"),i.getPadExtents=function(t,i){t=n.byId(t);var s=i||r.getComputedStyle(t),o=r.toPixelValue,u=o(t,s.paddingLeft),a=o(t,s.paddingTop),f=o(t,s.paddingRight),l=o(t,s.paddingBottom);return{l:u,t:a,r:f,b:l,w:u+f,h:a+l}};var s="none";i.getBorderExtents=function(t,i){t=n.byId(t);var o=r.toPixelValue,u=i||r.getComputedStyle(t),a=u.borderLeftStyle!=s?o(t,u.borderLeftWidth):0,f=u.borderTopStyle!=s?o(t,u.borderTopWidth):0,l=u.borderRightStyle!=s?o(t,u.borderRightWidth):0,c=u.borderBottomStyle!=s?o(t,u.borderBottomWidth):0;return{l:a,t:f,r:l,b:c,w:a+l,h:f+c}},i.getPadBorderExtents=function(t,s){t=n.byId(t);var o=s||r.getComputedStyle(t),u=i.getPadExtents(t,o),a=i.getBorderExtents(t,o);return{l:u.l+a.l,t:u.t+a.t,r:u.r+a.r,b:u.b+a.b,w:u.w+a.w,h:u.h+a.h}},i.getMarginExtents=function(t,i){t=n.byId(t);var s=i||r.getComputedStyle(t),o=r.toPixelValue,u=o(t,s.marginLeft),a=o(t,s.marginTop),f=o(t,s.marginRight),l=o(t,s.marginBottom);return{l:u,t:a,r:f,b:l,w:u+f,h:a+l}},i.getMarginBox=function(o,u){o=n.byId(o);var a=u||r.getComputedStyle(o),f=i.getMarginExtents(o,a),l=o.offsetLeft-f.l,c=o.offsetTop-f.t,h=o.parentNode,p=r.toPixelValue,d;if(e("mozilla")){var v=parseFloat(a.left),m=parseFloat(a.top);!isNaN(v)&&!isNaN(m)?(l=v,c=m):h&&h.style&&(d=r.getComputedStyle(h),d.overflow!="visible"&&(l+=d.borderLeftStyle!=s?p(o,d.borderLeftWidth):0,c+=d.borderTopStyle!=s?p(o,d.borderTopWidth):0))}else(e("opera")||e("ie")==8&&!e("quirks"))&&h&&(d=r.getComputedStyle(h),l-=d.borderLeftStyle!=s?p(o,d.borderLeftWidth):0,c-=d.borderTopStyle!=s?p(o,d.borderTopWidth):0);return{l:l,t:c,w:o.offsetWidth+f.w,h:o.offsetHeight+f.h}},i.getContentBox=function(s,o){s=n.byId(s);var u=o||r.getComputedStyle(s),a=s.clientWidth,f,l=i.getPadExtents(s,u),c=i.getBorderExtents(s,u);return a?(f=s.clientHeight,c.w=c.h=0):(a=s.offsetWidth,f=s.offsetHeight),e("opera")&&(l.l+=c.l,l.t+=c.t),{l:l.l,t:l.t,w:a-l.w-c.w,h:f-l.h-c.h}},i.setContentSize=function(t,r,s){t=n.byId(t);var u=r.w,f=r.h;if(a(t)){var l=i.getPadBorderExtents(t,s);u>=0&&(u+=l.w),f>=0&&(f+=l.h)}o(t,NaN,NaN,u,f)};var f={l:0,t:0,w:0,h:0};return i.setMarginBox=function(s,l,c){s=n.byId(s);var h=c||r.getComputedStyle(s),p=l.w,d=l.h,v=a(s)?f:i.getPadBorderExtents(s,h),m=i.getMarginExtents(s,h);if(e("webkit")&&u(s)){var g=s.style;p>=0&&!g.width&&(g.width="4px"),d>=0&&!g.height&&(g.height="4px")}p>=0&&(p=Math.max(p-v.w-m.w,0)),d>=0&&(d=Math.max(d-v.h-m.h,0)),o(s,l.l,l.t,p,d)},i.isBodyLtr=function(n){return n=n||t.doc,(t.body(n).dir||n.documentElement.dir||"ltr").toLowerCase()=="ltr"},i.docScroll=function(r){r=r||t.doc;var s=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in s?{x:s.pageXOffset,y:s.pageYOffset}:(s=e("quirks")?t.body(r):r.documentElement)&&{x:i.fixIeBiDiScrollLeft(s.scrollLeft||0,r),y:s.scrollTop||0}},e("ie")&&(i.getIeDocumentElementOffset=function(r){r=r||t.doc;var i=r.documentElement;if(e("ie")<8){var s=i.getBoundingClientRect(),o=s.left,u=s.top;return e("ie")<7&&(o+=i.clientLeft,u+=i.clientTop),{x:o<0?0:o,y:u<0?0:u}}return{x:0,y:0}}),i.fixIeBiDiScrollLeft=function(r,s){s=s||t.doc;var o=e("ie");if(o&&!i.isBodyLtr(s)){var u=e("quirks"),a=u?t.body(s):s.documentElement,f=t.global;return o==6&&!u&&f.frameElement&&a.scrollHeight>a.clientHeight&&(r+=a.clientLeft),o<8||u?r+a.clientWidth-a.scrollWidth:-r}return r},i.position=function(r,s){r=n.byId(r);var o=t.body(r.ownerDocument),u;try{u=r.getBoundingClientRect()}catch(a){return{x:0,y:0,w:0,h:0}}u={x:u.left,y:u.top,w:u.right-u.left,h:u.bottom-u.top};if(e("ie")<9){var f=i.getIeDocumentElementOffset(r.ownerDocument);u.x-=f.x+(e("quirks")?o.clientLeft+o.offsetLeft:0),u.y-=f.y+(e("quirks")?o.clientTop+o.offsetTop:0)}if(s){var l=i.docScroll(r.ownerDocument);u.x+=l.x,u.y+=l.y}return u},i.getMarginSize=function(t,s){t=n.byId(t);var o=i.getMarginExtents(t,s||r.getComputedStyle(t)),u=t.getBoundingClientRect();return{w:u.right-u.left+o.w,h:u.bottom-u.top+o.h}},i.normalizeEvent=function(t){"layerX"in t||(t.layerX=t.offsetX,t.layerY=t.offsetY);if(!e("dom-addeventlistener")){var n=t.target,r=n&&n.ownerDocument||document,s=e("quirks")?r.body:r.documentElement,o=i.getIeDocumentElementOffset(r);t.pageX=t.clientX+i.fixIeBiDiScrollLeft(s.scrollLeft||0,r)-o.x,t.pageY=t.clientY+(s.scrollTop||0)-o.y}},i}),pen.define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(e,t,n,r){if(t._fixEvent){var i=t._fixEvent;t._fixEvent=function(e,t){return e=i(e,t),e&&r.normalizeEvent(e),e}}var s={fix:function(e,n){return t._fixEvent?t._fixEvent(e,n):e},stop:function(e){n("dom-addeventlistener")||e&&e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e=e||window.event,e.cancelBubble=!0,t._preventDefault.call(e))}};return n("extend-dojo")&&(e.fixEvent=s.fix,e.stopEvent=s.stop),s}),pen.define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(e,t,n,r,i){function o(e,n){var i=function(i,s){return t(i,e,function(e){if(n)return n(e,s);if(!r.isDescendant(e.relatedTarget,i))return s.call(this,e)})};return i.bubble=function(t){return o(e,function(e,n){var r=t(e.target),i=e.relatedTarget;if(r&&r!=(i&&i.nodeType==1&&t(i)))return n.call(r,e)})},i}n.add("dom-quirks",i.doc&&i.doc.compatMode=="BackCompat"),n.add("events-mouseenter",i.doc&&"onmouseenter"in i.doc.createElement("div")),n.add("events-mousewheel",i.doc&&"onmousewheel"in i.doc);var s;n("dom-quirks")&&n("ie")||!n("dom-addeventlistener")?s={LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,t){return e.button&t},isLeft:function(e){return e.button&1},isMiddle:function(e){return e.button&4},isRight:function(e){return e.button&2}}:s={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,t){return e.button==t},isLeft:function(e){return e.button==0},isMiddle:function(e){return e.button==1},isRight:function(e){return e.button==2}},e.mouseButtons=s;var u;return n("events-mousewheel")?u="mousewheel":u=function(e,n){return t(e,"DOMMouseScroll",function(e){e.wheelDelta=-e.detail,n.call(this,e)})},{_eventHandler:o,enter:o("mouseover"),leave:o("mouseout"),wheel:u,isLeft:s.isLeft,isMiddle:s.isMiddle,isRight:s.isRight}}),pen.define("dojo/_base/sniff",["./kernel","./lang","../sniff"],function(e,t,n){return n("host-browser")?(e._name="browser",t.mixin(e,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:n("khtml"),isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:n("android"),isWii:n("wii"),isQuirks:n("quirks"),isAir:n("air")}),n):n}),pen.define("dojo/keys",["./_base/kernel","./sniff"],function(e,t){return e.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")&&!t("air")?t("safari")?91:224:17}}),pen.define("dojo/_base/connect",["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(e,t,n,r,i,s,o,u){function a(n,i,o,a,f){a=u.hitch(o,a);if(!n||!n.addEventListener&&!n.attachEvent)return r.after(n||e.global,i,a,!0);typeof i=="string"&&i.substring(0,2)=="on"&&(i=i.substring(2)),n||(n=e.global);if(!f)switch(i){case"keypress":i=p;break;case"mouseenter":i=s.enter;break;case"mouseleave":i=s.leave}return t(n,i,a,f)}function h(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode}o.add("events-keypress-typed",function(){var e={charCode:0};try{e=document.createEvent("KeyboardEvent"),(e.initKeyboardEvent||e.initKeyEvent).call(e,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(t){}return e.charCode==0&&!o("opera")});var f={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},l=o("mac")?"metaKey":"ctrlKey",c=function(e,t){var n=u.mixin({},e,t);return h(n),n.preventDefault=function(){e.preventDefault()},n.stopPropagation=function(){e.stopPropagation()},n},p;if(o("events-keypress-typed")){var d=function(e,t){try{return e.keyCode=t}catch(e){return 0}};p=function(e,n){var r=t(e,"keydown",function(e){var t=e.keyCode,r=t!=13&&t!=32&&(t!=27||!o("ie"))&&(t<48||t>90)&&(t<96||t>111)&&(t<186||t>192)&&(t<219||t>222)&&t!=229;if(r||e.ctrlKey){var i=r?0:t;if(e.ctrlKey){if(t==3||t==13)return n.call(e.currentTarget,e);i>95&&i<106?i-=48:!e.shiftKey&&i>=65&&i<=90?i+=32:i=f[i]||i}var s=c(e,{type:"keypress",faux:!0,charCode:i});n.call(e.currentTarget,s),o("ie")&&d(e,s.keyCode)}}),i=t(e,"keypress",function(e){var t=e.charCode;return t=t>=32?t:0,e=c(e,{charCode:t,faux:!0}),n.call(this,e)});return{remove:function(){r.remove(),i.remove()}}}}else o("opera")?p=function(e,n){return t(e,"keypress",function(e){var t=e.which;return t==3&&(t=99),t=t<32&&!e.shiftKey?0:t,e.ctrlKey&&!e.shiftKey&&t>=65&&t<=90&&(t+=32),n.call(this,c(e,{charCode:t}))})}:p=function(e,n){return t(e,"keypress",function(e){return h(e),n.call(this,e)})};var v={_keypress:p,connect:function(e,t,n,r,i){var s=arguments,o=[],u=0;o.push(typeof s[0]=="string"?null:s[u++],s[u++]);var f=s[u+1];o.push(typeof f=="string"||typeof f=="function"?s[u++]:null,s[u++]);for(var l=s.length;u<l;u++)o.push(s[u]);return a.apply(this,o)},disconnect:function(e){e&&e.remove()},subscribe:function(e,t,r){return n.subscribe(e,u.hitch(t,r))},publish:function(e,t){return n.publish.apply(n,[e].concat(t))},connectPublisher:function(e,t,n){var r=function(){v.publish(e,arguments)};return n?v.connect(t,n,r):v.connect(t,r)},isCopyKey:function(e){return e[l]}};return v.unsubscribe=v.disconnect,o("extend-dojo")&&u.mixin(e,v),v}),pen.define("dojo/dom-construct",["exports","./_base/kernel","./sniff","./_base/window","./dom","./dom-attr"],function(e,t,n,r,i,s){function d(e,t){var n=t.parentNode;n&&n.insertBefore(e,t)}function v(e,t){var n=t.parentNode;n&&(n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling))}function g(e){if(e.canHaveChildren)try{e.innerHTML="";return}catch(t){}for(var n;n=e.lastChild;)y(n,e)}function y(e,t){e.firstChild&&g(e),t&&(n("ie")&&t.canHaveChildren&&"removeNode"in e?e.removeNode(!1):t.removeChild(e))}var o={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},u=/<\s*([\w\:]+)/,a={},f=0,l="__"+t._scopeName+"ToDomId";for(var c in o)if(o.hasOwnProperty(c)){var h=o[c];h.pre=c=="option"?'<select multiple="multiple">':"<"+h.join("><")+">",h.post="</"+h.reverse().join("></")+">"}var p;n("ie")<=8&&(p=function(e){e.__dojo_html5_tested="yes";var t=m("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},e.body);t.childNodes.length!==1&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(t){e.createElement(t)}),b(t)}),e.toDom=function(t,i){i=i||r.doc;var s=i[l];s||(i[l]=s=++f+"",a[s]=i.createElement("div")),n("ie")<=8&&!i.__dojo_html5_tested&&i.body&&p(i),t+="";var c=t.match(u),h=c?c[1].toLowerCase():"",d=a[s],v,m,g,y;if(c&&o[h]){v=o[h],d.innerHTML=v.pre+t+v.post;for(m=v.length;m;--m)d=d.firstChild}else d.innerHTML=t;if(d.childNodes.length==1)return d.removeChild(d.firstChild);y=i.createDocumentFragment();while(g=d.firstChild)y.appendChild(g);return y},e.place=function(n,r,s){r=i.byId(r),typeof n=="string"&&(n=/^\s*</.test(n)?e.toDom(n,r.ownerDocument):i.byId(n));if(typeof s=="number"){var o=r.childNodes;!o.length||o.length<=s?r.appendChild(n):d(n,o[s<0?0:s])}else switch(s){case"before":d(n,r);break;case"after":v(n,r);break;case"replace":r.parentNode.replaceChild(n,r);break;case"only":e.empty(r),r.appendChild(n);break;case"first":if(r.firstChild){d(n,r.firstChild);break};default:r.appendChild(n)}return n};var m=e.create=function(n,o,u,a){var f=r.doc;return u&&(u=i.byId(u),f=u.ownerDocument),typeof n=="string"&&(n=f.createElement(n)),o&&s.set(n,o),u&&e.place(n,u,a),n};e.empty=function(t){g(i.byId(t))};var b=e.destroy=function(t){t=i.byId(t);if(!t)return;y(t,t.parentNode)}}),pen.define("dojo/dom-prop",["exports","./_base/kernel","./sniff","./_base/lang","./dom","./dom-style","./dom-construct","./_base/connect"],function(e,t,n,r,i,s,o,u){var a={},f=0,l=t._scopeName+"attrid";e.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},e.get=function(n,r){n=i.byId(n);var s=r.toLowerCase(),o=e.names[s]||r;return n[o]},e.set=function(c,h,p){if(typeof c=="undefined"||c==null)return c;c=i.byId(c);var d=arguments.length;if(d==2&&typeof h!="string"){for(var v in h)e.set(c,v,h[v]);return c}var m=h.toLowerCase(),g=e.names[m]||h;if(g=="style"&&typeof p!="string")return s.set(c,p),c;if(g=="innerHTML")return n("ie")&&c.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(o.empty(c),c.appendChild(o.toDom(p,c.ownerDocument))):c[g]=p,c;if(r.isFunction(p)){var y=c[l];y||(y=f++,c[l]=y),a[y]||(a[y]={});var b=a[y][g];if(b)u.disconnect(b);else try{delete c[g]}catch(w){}return p?a[y][g]=u.connect(c,g,p):c[g]=null,c}return c[g]=p,c}}),pen.define("dojo/dom-attr",["exports","./sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(e,t,n,r,i,s){function a(e,t){var n=e.getAttributeNode&&e.getAttributeNode(t);return n&&n.specified}var o={innerHTML:1,className:1,htmlFor:t("ie"),value:1},u={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};e.has=function(t,n){var i=n.toLowerCase();return o[s.names[i]||n]||a(r.byId(t),u[i]||n)},e.get=function(t,i){t=r.byId(t);var f=i.toLowerCase(),l=s.names[f]||i,c=o[l],h=t[l];if(c&&typeof h!="undefined")return h;if(l=="href"||typeof h!="boolean"&&!n.isFunction(h)){var p=u[f]||i;return a(t,p)?t.getAttribute(p):null}return h},e.set=function(a,f,l){a=r.byId(a);if(arguments.length==2){for(var c in f)e.set(a,c,f[c]);return a}var h=f.toLowerCase(),p=s.names[h]||f,d=o[p];return p=="style"&&typeof l!="string"?(i.set(a,l),a):d||typeof l=="boolean"||n.isFunction(l)?s.set(a,f,l):(a.setAttribute(u[h]||f,l),a)},e.remove=function(t,n){r.byId(t).removeAttribute(u[n.toLowerCase()]||n)},e.getNodeProp=function(t,n){t=r.byId(t);var i=n.toLowerCase(),o=s.names[i]||n;if(o in t&&o!="href")return t[o];var f=u[i]||n;return a(t,f)?t.getAttribute(f):null}}),pen.define("dojo/dom-class",["./_base/lang","./_base/array","./dom"],function(e,t,n){function u(e){if(typeof e=="string"||e instanceof String){if(e&&!s.test(e))return o[0]=e,o;var n=e.split(s);return n.length&&!n[0]&&n.shift(),n.length&&!n[n.length-1]&&n.pop(),n}return e?t.filter(e,function(e){return e}):[]}var r="className",i,s=/\s+/,o=[""],a={};return i={contains:function(t,i){return(" "+n.byId(t)[r]+" ").indexOf(" "+i+" ")>=0},add:function(t,i){t=n.byId(t),i=u(i);var s=t[r],o;s=s?" "+s+" ":" ",o=s.length;for(var a=0,f=i.length,l;a<f;++a)l=i[a],l&&s.indexOf(" "+l+" ")<0&&(s+=l+" ");o<s.length&&(t[r]=s.substr(1,s.length-2))},remove:function(i,s){i=n.byId(i);var o;if(s!==undefined){s=u(s),o=" "+i[r]+" ";for(var a=0,f=s.length;a<f;++a)o=o.replace(" "+s[a]+" "," ");o=e.trim(o)}else o="";i[r]!=o&&(i[r]=o)},replace:function(t,s,o){t=n.byId(t),a[r]=t[r],i.remove(a,o),i.add(a,s),t[r]!==a[r]&&(t[r]=a[r])},toggle:function(t,r,s){t=n.byId(t);if(s===undefined){r=u(r);for(var o=0,a=r.length,f;o<a;++o)f=r[o],i[i.contains(t,f)?"remove":"add"](t,f)}else i[s?"add":"remove"](t,r);return s}},i}),pen.define("dojo/ready",["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(e,t,n,r,i){var s=0,o=[],u=0,a=function(){s=1,e._postLoad=e.config.afterOnLoad=!0,f()},f=function(){if(u)return;u=1;while(s&&(!r||r._Q.length==0)&&(n.idle?n.idle():!0)&&o.length){var e=o.shift();try{e()}catch(t){t.info=t.message;if(!n.signal)throw t;n.signal("error",t)}}u=0};n.on&&n.on("idle",f),r&&(r._onQEmpty=f);var l=e.ready=e.addOnLoad=function(t,n,r){var s=i._toArray(arguments);typeof t!="number"?(r=n,n=t,t=1e3):s.shift(),r=r?i.hitch.apply(e,s):function(){n()},r.priority=t;for(var u=0;u<o.length&&t>=o[u].priority;u++);o.splice(u,0,r),f()};t.add("dojo-config-addOnLoad",1);if(t("dojo-config-addOnLoad")){var c=e.config.addOnLoad;c&&l[i.isArray(c)?"apply":"call"](e,c)}return t("dojo-sync-loader")&&e.config.parseOnLoad&&!e.isAsync&&l(99,function(){e.parser||(e.deprecated("Add explicit require(['dojo/parser']);","","2.0"),pen.require(["dojo/parser"]))}),r?r(a):a(),l}),pen.define("dojo/errors/create",["../_base/lang"],function(e){return function(t,n,r,i){r=r||Error;var s=function(e){if(r===Error){Error.captureStackTrace&&Error.captureStackTrace(this,s);var t=Error.call(this,e),i;for(i in t)t.hasOwnProperty(i)&&(this[i]=t[i]);this.message=e,this.stack=t.stack}else r.apply(this,arguments);n&&n.apply(this,arguments)};return s.prototype=e.delegate(r.prototype,i),s.prototype.name=t,s.prototype.constructor=s,s}}),pen.define("dojo/errors/CancelError",["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel"})}),pen.define("dojo/promise/Promise",["../_base/lang"],function(e){function t(){throw new TypeError("abstract")}return e.extend(function(){},{then:function(e,n,r){t()},cancel:function(e,n){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(e){return this.then(e,e)},otherwise:function(e){return this.then(null,e)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})}),pen.define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise","./has!config-deferredInstrumentation?./promise/instrumentation"],function(e,t,n,r,i){var s=0,o=1,u=2,a="This deferred has already been fulfilled.",f=Object.freeze||function(){},l=function(t,n,r,i,s){e("config-deferredInstrumentation")&&n===u&&d.instrumentRejected&&t.length===0&&d.instrumentRejected(r,!1,i,s);for(var o=0;o<t.length;o++)c(t[o],n,r,i)},c=function(t,n,r,i){var a=t[n],f=t.deferred;if(a)try{var l=a(r);if(n===s)typeof l!="undefined"&&p(f,n,l);else{if(l&&typeof l.then=="function"){t.cancel=l.cancel,l.then(h(f,o),h(f,u),h(f,s));return}p(f,o,l)}}catch(c){p(f,u,c)}else p(f,n,r);e("config-deferredInstrumentation")&&n===u&&d.instrumentRejected&&d.instrumentRejected(r,!!a,i,f.promise)},h=function(e,t){return function(n){p(e,t,n)}},p=function(e,t,n){if(!e.isCanceled())switch(t){case s:e.progress(n);break;case o:e.resolve(n);break;case u:e.reject(n)}},d=function(t){var i=this.promise=new r,h=this,p,v,m,g=!1,y=[];e("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(h,d),Error.captureStackTrace(i,d)),this.isResolved=i.isResolved=function(){return p===o},this.isRejected=i.isRejected=function(){return p===u},this.isFulfilled=i.isFulfilled=function(){return!!p},this.isCanceled=i.isCanceled=function(){return g},this.progress=function(e,t){if(!p)return l(y,s,e,null,h),i;if(t===!0)throw new Error(a);return i},this.resolve=function(e,t){if(!p)return l(y,p=o,v=e,null,h),y=null,i;if(t===!0)throw new Error(a);return i};var b=this.reject=function(t,n){if(!p)return e("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(m={},b),l(y,p=u,v=t,m,h),y=null,i;if(n===!0)throw new Error(a);return i};this.then=i.then=function(e,t,n){var r=[n,e,t];return r.cancel=i.cancel,r.deferred=new d(function(e){return r.cancel&&r.cancel(e)}),p&&!y?c(r,p,v,m):y.push(r),r.deferred.promise},this.cancel=i.cancel=function(e,r){if(!p){if(t){var i=t(e);e=typeof i=="undefined"?e:i}g=!0;if(!p)return typeof e=="undefined"&&(e=new n),b(e),e;if(p===u&&v===e)return e}else if(r===!0)throw new Error(a)},f(i)};return d.prototype.toString=function(){return"[object Deferred]"},i&&i(d),d}),pen.define("dojo/when",["./Deferred","./promise/Promise"],function(e,t){return function(r,i,s,o){var u=r&&typeof r.then=="function",a=u&&r instanceof t;if(!u)return arguments.length>1?i?i(r):r:(new e).resolve(r);if(!a){var f=new e(r.cancel);r.then(f.resolve,f.reject,f.progress),r=f.promise}return i||s||o?r.then(i,s,o):r}}),pen.define("dojo/Stateful",["./_base/declare","./_base/lang","./_base/array","./when"],function(e,t,n,r){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;return t[e]?t[e]:t[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,t){return typeof this[t.g]=="function"?this[t.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,t){if(typeof e=="object"){for(var n in e)e.hasOwnProperty(n)&&n!="_watchCallbacks"&&this.set(n,e[n]);return this}var i=this._getAttrNames(e),s=this._get(e,i),o=this[i.s],u;typeof o=="function"?u=o.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=t;if(this._watchCallbacks){var a=this;r(u,function(){a._watchCallbacks(e,s,t)})}return this},_changeAttrValue:function(e,t){var n=this.get(e);return this[e]=t,this._watchCallbacks&&this._watchCallbacks(e,n,t),this},watch:function(e,t){var r=this._watchCallbacks;if(!r){var i=this;r=this._watchCallbacks=function(e,t,n,s){var o=function(r){if(r){r=r.slice();for(var s=0,o=r.length;s<o;s++)r[s].call(i,e,t,n)}};o(r["_"+e]),s||o(r["*"])}}!t&&typeof e=="function"?(t=e,e="*"):e="_"+e;var s=r[e];typeof s!="object"&&(s=r[e]=[]),s.push(t);var o={};return o.unwatch=o.remove=function(){var e=n.indexOf(s,t);e>-1&&s.splice(e,1)},o}})}),pen.define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(e,t,n){return n("dijit.Destroyable",null,{destroy:function(e){this._destroyed=!0},own:function(){return e.forEach(arguments,function(e){var n="destroyRecursive"in e?"destroyRecursive":"destroy"in e?"destroy":"remove",r=t.before(this,"destroy",function(t){e[n](t)}),i=t.after(e,n,function(){r.remove(),i.remove()},!0)},this),arguments}})}),pen.define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){function T(e){var t={};for(var n in e)t[n.toLowerCase()]=!0;return t}function N(e){return function(t){u[t?"set":"remove"](this.domNode,e,t),this._set(e,t)}}function C(e,t){return e===t||e!==e&&t!==t}h.add("dijit-legacy-requires",!p.isAsync),h.add("dojo-bidi",!1),h("dijit-legacy-requires")&&m(0,function(){var t=["dijit/_base/manager"];e(t)});var x={},k=s("dijit._WidgetBase",[g,w],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:N("lang"),dir:"",_setDirAttr:N("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(e){this._set("ownerDocument",e)},attributeMap:{},_blankGif:r.blankGif||e.toUrl("dojo/resources/blank.gif"),_introspect:function(){var e=this.constructor;if(!e._setterAttrs){var t=e.prototype,n=e._setterAttrs=[],r=e._onMap={};for(var i in t.attributeMap)n.push(i);for(i in t)/^on/.test(i)&&(r[i.substring(2).toLowerCase()]=i),/^_set[A-Z](.*)Attr$/.test(i)&&(i=i.charAt(4).toLowerCase()+i.substr(5,i.length-9),(!t.attributeMap||!(i in t.attributeMap))&&n.push(i))}},postscript:function(e,t){this.create(e,t)},create:function(e,t){this._introspect(),this.srcNodeRef=o.byId(t),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&typeof this.srcNodeRef.id=="string"&&(this.id=this.srcNodeRef.id),e&&(this.params=e,d.mixin(this,e)),this.postMixInProperties(),this.id||(this.id=S.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=b.body(this.ownerDocument),S.add(this),this.buildRendering();var n;if(this.domNode){this._applyAttributes();var r=this.srcNodeRef;r&&r.parentNode&&this.domNode!==r&&(r.parentNode.replaceChild(this.domNode,r),n=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),n&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var e={};for(var n in this.params||{})e[n]=this._get(n);t.forEach(this.constructor._setterAttrs,function(t){if(!(t in e)){var n=this._get(t);n&&this.set(t,n)}},this);for(n in e)this.set(n,e[n])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var e=this.baseClass.split(" ");this.isLeftToRight()||(e=e.concat(t.map(e,function(e){return e+"Rtl"}))),a.add(this.domNode,e)}},postCreate:function(){},startup:function(){if(this._started)return;this._started=!0,t.forEach(this.getChildren(),function(e){!e._started&&!e._destroyed&&d.isFunction(e.startup)&&(e.startup(),e._started=!0)})},destroyRecursive:function(e){this._beingDestroyed=!0,this.destroyDescendants(e),this.destroy(e)},destroy:function(e){function n(t){t.destroyRecursive?t.destroyRecursive(e):t.destroy&&t.destroy(e)}this._beingDestroyed=!0,this.uninitialize(),t.forEach(this._connects,d.hitch(this,"disconnect")),t.forEach(this._supportingWidgets,n),this.domNode&&t.forEach(S.findWidgets(this.domNode,this.containerNode),n),this.destroyRendering(e),S.remove(this.id),this._destroyed=!0},destroyRendering:function(e){this.bgIframe&&(this.bgIframe.destroy(e),delete this.bgIframe),this.domNode&&(e?u.remove(this.domNode,"widgetId"):f.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(e||f.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(e){t.forEach(this.getChildren(),function(t){t.destroyRecursive&&t.destroyRecursive(e)})},uninitialize:function(){return!1},_setStyleAttr:function(e){var t=this.domNode;d.isObject(e)?c.set(t,e):t.style.cssText?t.style.cssText+="; "+e:t.style.cssText=e,this._set("style",e)},_attrToDom:function(e,n,r){r=arguments.length>=3?r:this.attributeMap[e],t.forEach(d.isArray(r)?r:[r],function(t){var r=this[t.node||t||"domNode"],i=t.type||"attribute";switch(i){case"attribute":d.isFunction(n)&&(n=d.hitch(this,n));var s=t.attribute?t.attribute:/^on[A-Z][a-zA-Z]*$/.test(e)?e.toLowerCase():e;r.tagName?u.set(r,s,n):r.set(s,n);break;case"innerText":r.innerHTML="",r.appendChild(this.ownerDocument.createTextNode(n));break;case"innerHTML":r.innerHTML=n;break;case"class":a.replace(r,n,this[e])}},this)},get:function(e){var t=this._getAttrNames(e);return this[t.g]?this[t.g]():this._get(e)},set:function(e,t){if(typeof e=="object"){for(var n in e)this.set(n,e[n]);return this}var r=this._getAttrNames(e),i=this[r.s];if(d.isFunction(i))var s=i.apply(this,Array.prototype.slice.call(arguments,1));else{var o=this.focusNode&&!d.isFunction(this.focusNode)?"focusNode":"domNode",u=this[o]&&this[o].tagName,a=u&&(x[u]||(x[u]=T(this[o]))),f=e in this.attributeMap?this.attributeMap[e]:r.s in this?this[r.s]:a&&r.l in a&&typeof t!="function"||/^aria-|^data-|^role$/.test(e)?o:null;f!=null&&this._attrToDom(e,t,f),this._set(e,t)}return s||this},_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;if(t[e])return t[e];var n=e.replace(/^[a-z]|-[a-zA-Z]/g,function(e){return e.charAt(e.length-1).toUpperCase()});return t[e]={n:e+"Node",s:"_set"+n+"Attr",g:"_get"+n+"Attr",l:n.toLowerCase()}},_set:function(e,t){var n=this[e];this[e]=t,this._created&&!C(n,t)&&(this._watchCallbacks&&this._watchCallbacks(e,n,t),this.emit("attrmodified-"+e,{detail:{prevValue:n,newValue:t}}))},_get:function(e){return this[e]},emit:function(e,t,n){t=t||{},t.bubbles===undefined&&(t.bubbles=!0),t.cancelable===undefined&&(t.cancelable=!0),t.detail||(t.detail={}),t.detail.widget=this;var r,i=this["on"+e];return i&&(r=i.apply(this,n?n:[t])),this._started&&!this._beingDestroyed&&v.emit(this.domNode,e.toLowerCase(),t),r},on:function(e,t){var r=this._onMap(e);return r?n.after(this,r,t,!0):this.own(v(this.domNode,e,t))[0]},_onMap:function(e){var t=this.constructor,n=t._onMap;if(!n){n=t._onMap={};for(var r in t.prototype)/^on/.test(r)&&(n[r.replace(/^on/,"").toLowerCase()]=r)}return n[typeof e=="string"&&e.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?S.findWidgets(this.containerNode):[]},getParent:function(){return S.getEnclosingWidget(this.domNode.parentNode)},connect:function(e,t,n){return this.own(i.connect(e,t,this,n))[0]},disconnect:function(e){e.remove()},subscribe:function(e,t){return this.own(y.subscribe(e,d.hitch(this,t)))[0]},unsubscribe:function(e){e.remove()},isLeftToRight:function(){return this.dir?this.dir=="ltr":l.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&c.get(this.domNode,"display")!="none"},placeAt:function(e,t){var n=!e.tagName&&S.byId(e);if(n&&n.addChild&&(!t||typeof t=="number"))n.addChild(this,t);else{var r=n?n.containerNode&&!/after|before|replace/.test(t||"")?n.containerNode:n.domNode:o.byId(e,this.ownerDocument);f.place(this.domNode,r,t),!this._started&&(this.getParent()||{})._started&&this.startup()}return this},defer:function(e,t){var n=setTimeout(d.hitch(this,function(){if(!n)return;n=null,this._destroyed||d.hitch(this,e)()}),t||0);return{remove:function(){return n&&(clearTimeout(n),n=null),null}}}});return h("dojo-bidi")&&k.extend(E),k}),pen.define("dojo/_base/url",["./kernel"],function(e){var t=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),n=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),r=function(){var e=null,i=arguments,s=[i[0]];for(var o=1;o<i.length;o++){if(!i[o])continue;var u=new r(i[o]+""),a=new r(s[0]+"");if(u.path==""&&!u.scheme&&!u.authority&&!u.query)u.fragment!=e&&(a.fragment=u.fragment),u=a;else if(!u.scheme){u.scheme=a.scheme;if(!u.authority){u.authority=a.authority;if(u.path.charAt(0)!="/"){var f=a.path.substring(0,a.path.lastIndexOf("/")+1)+u.path,l=f.split("/");for(var c=0;c<l.length;c++)l[c]=="."?c==l.length-1?l[c]="":(l.splice(c,1),c--):c>0&&(c!=1||l[0]!="")&&l[c]==".."&&l[c-1]!=".."&&(c==l.length-1?(l.splice(c,1),l[c-1]=""):(l.splice(c-1,2),c-=2));u.path=l.join("/")}}}s=[],u.scheme&&s.push(u.scheme,":"),u.authority&&s.push("//",u.authority),s.push(u.path),u.query&&s.push("?",u.query),u.fragment&&s.push("#",u.fragment)}this.uri=s.join("");var h=this.uri.match(t);this.scheme=h[2]||(h[1]?"":e),this.authority=h[4]||(h[3]?"":e),this.path=h[5],this.query=h[7]||(h[6]?"":e),this.fragment=h[9]||(h[8]?"":e),this.authority!=e&&(h=this.authority.match(n),this.user=h[3]||e,this.password=h[4]||e,this.host=h[6]||h[7],this.port=h[9]||e)};return r.prototype.toString=function(){return this.uri},e._Url=r}),pen.define("dojo/promise/all",["../_base/array","../Deferred","../when"],function(e,t,n){var r=e.some;return function(i){var s,o;i instanceof Array?o=i:i&&typeof i=="object"&&(s=i);var u,a=[];if(s){o=[];for(var f in s)Object.hasOwnProperty.call(s,f)&&(a.push(f),o.push(s[f]));u={}}else o&&(u=[]);if(!o||!o.length)return(new t).resolve(u);var l=new t;l.promise.always(function(){u=a=null});var c=o.length;return r(o,function(e,t){return s||a.push(t),n(e,function(e){l.isFulfilled()||(u[a[t]]=e,--c===0&&l.resolve(u))},l.reject),l.isFulfilled()}),l.promise}}),pen.define("dojo/date/stamp",["../_base/lang","../_base/array"],function(e,t){var n={};return e.setObject("dojo.date.stamp",n),n.fromISOString=function(e,r){n._isoRegExp||(n._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var i=n._isoRegExp.exec(e),s=null;if(i){i.shift(),i[1]&&i[1]--,i[6]&&(i[6]*=1e3),r&&(r=new Date(r),t.forEach(t.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(e){return r["get"+e]()}),function(e,t){i[t]=i[t]||e})),s=new Date(i[0]||1970,i[1]||0,i[2]||1,i[3]||0,i[4]||0,i[5]||0,i[6]||0),i[0]<100&&s.setFullYear(i[0]||1970);var o=0,u=i[7]&&i[7].charAt(0);u!="Z"&&(o=(i[8]||0)*60+(Number(i[9])||0),u!="-"&&(o*=-1)),u&&(o-=s.getTimezoneOffset()),o&&s.setTime(s.getTime()+o*6e4)}return s},n.toISOString=function(e,t){var n=function(e){return e<10?"0"+e:e};t=t||{};var r=[],i=t.zulu?"getUTC":"get",s="";if(t.selector!="time"){var o=e[i+"FullYear"]();s=["0000".substr((o+"").length)+o,n(e[i+"Month"]()+1),n(e[i+"Date"]())].join("-")}r.push(s);if(t.selector!="date"){var u=[n(e[i+"Hours"]()),n(e[i+"Minutes"]()),n(e[i+"Seconds"]())].join(":"),a=e[i+"Milliseconds"]();t.milliseconds&&(u+="."+(a<100?"0":"")+n(a));if(t.zulu)u+="Z";else if(t.selector!="time"){var f=e.getTimezoneOffset(),l=Math.abs(f);u+=(f>0?"-":"+")+n(Math.floor(l/60))+":"+n(l%60)}r.push(u)}return r.join("T")},n}),pen.define("dojo/parser",["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./dom","./_base/window","./_base/url","./aspect","./promise/all","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(require,dojo,dlang,darray,config,dom,dwindow,_Url,aspect,all,dates,Deferred,has,query,don,ready){function myEval(text){return eval("("+text+")")}function getNameMap(e){var t=e._nameCaseMap,n=e.prototype;if(!t||t._extendCnt<extendCnt){t=e._nameCaseMap={};for(var r in n){if(r.charAt(0)==="_")continue;t[r.toLowerCase()]=r}t._extendCnt=extendCnt}return t}function getCtor(e,t){var n=e.join();if(!_ctorMap[n]){var r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i];r[r.length]=_ctorMap[o]=_ctorMap[o]||dlang.getObject(o)||~o.indexOf("/")&&(t?t(o):require(o))}var u=r.shift();_ctorMap[n]=r.length?u.createSubclass?u.createSubclass(r):u.extend.apply(u,r):u}return _ctorMap[n]}new Date("X");var extendCnt=0;aspect.after(dlang,"extend",function(){extendCnt++},!0);var _ctorMap={},parser={_clearCache:function(){extendCnt++,_ctorMap={}},_functionFromScript:function(e,t){var n="",r="",i=e.getAttribute(t+"args")||e.getAttribute("args"),s=e.getAttribute("with"),o=(i||"").split(/\s*,\s*/);return s&&s.length&&darray.forEach(s.split(/\s*,\s*/),function(e){n+="with("+e+"){",r+="}"}),new Function(o,n+e.innerHTML+r)},instantiate:function(e,t,n){t=t||{},n=n||{};var r=(n.scope||dojo._scopeName)+"Type",i="data-"+(n.scope||dojo._scopeName)+"-",s=i+"type",o=i+"mixins",u=[];return darray.forEach(e,function(e){var n=r in t?t[r]:e.getAttribute(s)||e.getAttribute(r);if(n){var i=e.getAttribute(o),a=i?[n].concat(i.split(/\s*,\s*/)):[n];u.push({node:e,types:a})}}),this._instantiate(u,t,n)},_instantiate:function(e,t,n,r){function s(e){return!t._started&&!n.noStart&&darray.forEach(e,function(e){typeof e.startup=="function"&&!e._started&&e.startup()}),e}var i=darray.map(e,function(e){var r=e.ctor||getCtor(e.types,n.contextRequire);if(!r)throw new Error("Unable to resolve constructor for: '"+e.types.join()+"'");return this.construct(r,e.node,t,n,e.scripts,e.inherited)},this);return r?all(i).then(s):s(i)},construct:function(e,t,n,r,i,s){function q(e){g&&dlang.setObject(g,e);for(d=0;d<k.length;d++)aspect[k[d].advice||"after"](e,k[d].method,dlang.hitch(e,k[d].func),!0);for(d=0;d<L.length;d++)L[d].call(e);for(d=0;d<A.length;d++)e.watch(A[d].prop,A[d].func);for(d=0;d<O.length;d++)don(e,O[d].event,O[d].func);return e}var o=e&&e.prototype;r=r||{};var u={};r.defaults&&dlang.mixin(u,r.defaults),s&&dlang.mixin(u,s);var a;if(has("dom-attributes-explicit"))a=t.attributes;else if(has("dom-attributes-specified-flag"))a=darray.filter(t.attributes,function(e){return e.specified});else{var f=/^input$|^img$/i.test(t.nodeName)?t:t.cloneNode(!1),l=f.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");a=darray.map(l.split(/\s+/),function(e){var n=e.toLowerCase();return{name:e,value:t.nodeName=="LI"&&e=="value"||n=="enctype"?t.getAttribute(n):t.getAttributeNode(n).value}})}var c=r.scope||dojo._scopeName,h="data-"+c+"-",p={};c!=="dojo"&&(p[h+"props"]="data-dojo-props",p[h+"type"]="data-dojo-type",p[h+"mixins"]="data-dojo-mixins",p[c+"type"]="dojoType",p[h+"id"]="data-dojo-id");var d=0,v,m=[],g,y;while(v=a[d++]){var b=v.name,w=b.toLowerCase(),E=v.value;switch(p[w]||w){case"data-dojo-type":case"dojotype":case"data-dojo-mixins":break;case"data-dojo-props":y=E;break;case"data-dojo-id":case"jsid":g=E;break;case"data-dojo-attach-point":case"dojoattachpoint":u.dojoAttachPoint=E;break;case"data-dojo-attach-event":case"dojoattachevent":u.dojoAttachEvent=E;break;case"class":u["class"]=t.className;break;case"style":u.style=t.style&&t.style.cssText;break;default:if(!(b in o)){var S=getNameMap(e);b=S[w]||b}if(b in o)switch(typeof o[b]){case"string":u[b]=E;break;case"number":u[b]=E.length?Number(E):NaN;break;case"boolean":u[b]=E.toLowerCase()!="false";break;case"function":E===""||E.search(/[^\w\.]+/i)!=-1?u[b]=new Function(E):u[b]=dlang.getObject(E,!1)||new Function(E),m.push(b);break;default:var x=o[b];u[b]=x&&"length"in x?E?E.split(/\s*,\s*/):[]:x instanceof Date?E==""?new Date(""):E=="now"?new Date:dates.fromISOString(E):x instanceof _Url?dojo.baseUrl+E:myEval(E)}else u[b]=E}}for(var T=0;T<m.length;T++){var N=m[T].toLowerCase();t.removeAttribute(N),t[N]=null}if(y)try{y=myEval.call(r.propsThis,"{"+y+"}"),dlang.mixin(u,y)}catch(C){throw new Error(C.toString()+" in data-dojo-props='"+y+"'")}dlang.mixin(u,n),i||(i=e&&(e._noScript||o._noScript)?[]:query("> script[type^='dojo/']",t));var k=[],L=[],A=[],O=[];if(i)for(d=0;d<i.length;d++){var M=i[d];t.removeChild(M);var _=M.getAttribute(h+"event")||M.getAttribute("event"),D=M.getAttribute(h+"prop"),P=M.getAttribute(h+"method"),H=M.getAttribute(h+"advice"),B=M.getAttribute("type"),j=this._functionFromScript(M,h);_?B=="dojo/connect"?k.push({method:_,func:j}):B=="dojo/on"?O.push({event:_,func:j}):u[_]=j:B=="dojo/aspect"?k.push({method:P,advice:H,func:j}):B=="dojo/watch"?A.push({prop:D,func:j}):L.push(j)}var F=e.markupFactory||o.markupFactory,I=F?F(u,t,e):new e(u,t);return I.then?I.then(q):q(I)},scan:function(e,t){function g(e){if(!e.inherited){e.inherited={};var t=e.node,n=g(e.parent),r={dir:t.getAttribute("dir")||n.dir,lang:t.getAttribute("lang")||n.lang,textDir:t.getAttribute(a)||n.textDir};for(var i in r)r[i]&&(e.inherited[i]=r[i])}return e.inherited}var n=[],r=[],i={},s=(t.scope||dojo._scopeName)+"Type",o="data-"+(t.scope||dojo._scopeName)+"-",u=o+"type",a=o+"textdir",f=o+"mixins",l=e.firstChild,c=t.inherited;if(!c){function h(e,t){return e.getAttribute&&e.getAttribute(t)||e.parentNode&&h(e.parentNode,t)}c={dir:h(e,"dir"),lang:h(e,"lang"),textDir:h(e,a)};for(var p in c)c[p]||delete c[p]}var d={inherited:c},v,m;for(;;){if(!l){if(!d||!d.node)break;l=d.node.nextSibling,m=!1,d=d.parent,v=d.scripts;continue}if(l.nodeType!=1){l=l.nextSibling;continue}if(v&&l.nodeName.toLowerCase()=="script"){y=l.getAttribute("type"),y&&/^dojo\/\w/i.test(y)&&v.push(l),l=l.nextSibling;continue}if(m){l=l.nextSibling;continue}var y=l.getAttribute(u)||l.getAttribute(s),b=l.firstChild;if(!y&&(!b||b.nodeType==3&&!b.nextSibling)){l=l.nextSibling;continue}var w,E=null;if(y){var S=l.getAttribute(f),x=S?[y].concat(S.split(/\s*,\s*/)):[y];try{E=getCtor(x,t.contextRequire)}catch(T){}E||darray.forEach(x,function(e){~e.indexOf("/")&&!i[e]&&(i[e]=!0,r[r.length]=e)});var N=E&&!E.prototype._noScript?[]:null;w={types:x,ctor:E,parent:d,node:l,scripts:N},w.inherited=g(w),n.push(w)}else w={node:l,scripts:v,parent:d};v=N,m=l.stopParser||E&&E.prototype.stopParser&&!t.template,d=w,l=b}var C=new Deferred;if(r.length){has("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+r.join(", "));var k=t.contextRequire||require;k(r,function(){C.resolve(darray.filter(n,function(e){if(!e.ctor)try{e.ctor=getCtor(e.types,t.contextRequire)}catch(n){}var r=e.parent;while(r&&!r.types)r=r.parent;var i=e.ctor&&e.ctor.prototype;return e.instantiateChildren=!(i&&i.stopParser&&!t.template),e.instantiate=!r||r.instantiate&&r.instantiateChildren,e.instantiate}))})}else C.resolve(n);return C.promise},_require:function(e,t){var n=myEval("{"+e.innerHTML+"}"),r=[],i=[],s=new Deferred,o=t&&t.contextRequire||require;for(var u in n)r.push(u),i.push(n[u]);return o(i,function(){for(var e=0;e<r.length;e++)dlang.setObject(r[e],arguments[e]);s.resolve(arguments)}),s.promise},_scanAmd:function(e,t){var n=new Deferred,r=n.promise;n.resolve(!0);var i=this;return query("script[type='dojo/require']",e).forEach(function(e){r=r.then(function(){return i._require(e,t)}),e.parentNode.removeChild(e)}),r},parse:function(e,t){var n;!t&&e&&e.rootNode?(t=e,n=t.rootNode):!e||!dlang.isObject(e)||"nodeType"in e?n=e:t=e,n=n?dom.byId(n):dwindow.body(),t=t||{};var r=t.template?{template:!0}:{},i=[],s=this,o=this._scanAmd(n,t).then(function(){return s.scan(n,t)}).then(function(e){return s._instantiate(e,r,t,!0)}).then(function(e){return i=i.concat(e)}).otherwise(function(e){throw console.error("dojo/parser::parse() error",e),e});return dlang.mixin(i,o),i}};return has("extend-dojo")&&(dojo.parser=parser),config.parseOnLoad&&ready(100,parser,"parse"),parser}),pen.define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(e,t,n,r,i){return n("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var e=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0),i.parse(e,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(r.hitch(this,function(e){this._startupWidgets=e;for(var t=0;t<e.length;t++)this._processTemplateNode(e[t],function(e,t){return e[t]},function(e,t,n){return t in e?e.connect(e,t,n):e.on(t,n,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.")}},_processTemplateNode:function(e,t,n){return t(e,"dojoType")||t(e,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){e.forEach(this._startupWidgets,function(e){e&&!e._started&&e.startup&&e.startup()}),this._startupWidgets=null,this.inherited(arguments)}})}),pen.define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(e,t,n,r,i,s,o){return s.extend(e,{waiRole:"",waiState:""}),i("dijit._Templated",[t,n],{widgetsInTemplate:!1,constructor:function(){o.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(e,t){var n=this.inherited(arguments),i=t(e,"waiRole");i&&e.setAttribute("role",i);var s=t(e,"waiState");return s&&r.forEach(s.split(/\s*,\s*/),function(t){if(t.indexOf("-")!=-1){var n=t.split("-");e.setAttribute("aria-"+n[0],n[1])}}),n}})}),pen.define("dojo/json",["./has"],function(has){var hasJSON=typeof JSON!="undefined";has.add("json-parse",hasJSON),has.add("json-stringify",hasJSON&&JSON.stringify({a:0},function(e,t){return t||1})=='{"a":1}');if(has("json-stringify"))return JSON;var escapeString=function(e){return('"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:has("json-parse")?JSON.parse:function(str,strict){if(strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(e,t,n){function i(e,s,o){t&&(e=t(o,e));var u,a=typeof e;if(a=="number")return isFinite(e)?e+"":"null";if(a=="boolean")return e+"";if(e===null)return"null";if(typeof e=="string")return escapeString(e);if(a=="function"||a=="undefined")return r;if(typeof e.toJSON=="function")return i(e.toJSON(o),s,o);if(e instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(t,n,r){var i=e["getUTC"+n]()+(r?1:0);return i<10?"0"+i:i});if(e.valueOf()!==e)return i(e.valueOf(),s,o);var f=n?s+n:"",l=n?" ":"",c=n?"\n":"";if(e instanceof Array){var h=e.length,p=[];for(o=0;o<h;o++){var d=e[o];u=i(d,f,o),typeof u!="string"&&(u="null"),p.push(c+f+u)}return"["+p.join(",")+c+s+"]"}var v=[];for(o in e){var m;if(e.hasOwnProperty(o)){if(typeof o=="number")m='"'+o+'"';else{if(typeof o!="string")continue;m=escapeString(o)}u=i(e[o],f,o);if(typeof u!="string")continue;v.push(c+f+m+":"+l+u)}}return"{"+v.join(",")+c+s+"}"}var r;return typeof t=="string"&&(n=t,t=null),i(e,"","")}}}),pen.define("dojo/i18n",["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./has!host-browser?./_base/xhr","./json","module"],function(e,t,n,r,i,s,o,u,a){n.add("dojo-preload-i18n-Api",1),n.add("dojo-v1x-i18n-Api",1);var f=e.i18n={},l=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,c=function(e,t,n,r){for(var i=[n+r],s=t.split("-"),o="",u=0;u<s.length;u++){o+=(o?"-":"")+s[u];if(!e||e[o])i.push(n+o+"/"+r),i.specificity=o}return i},h={},p=function(t,n,r){return r=r?r.toLowerCase():e.locale,t=t.replace(/\./g,"/"),n=n.replace(/\./g,"/"),/root/i.test(r)?t+"/nls/"+n:t+"/nls/"+r+"/"+n},d=e.getL10nName=function(e,t,n){return e=a.id+"!"+p(e,t,n)},v=function(e,t,n,r,i,o){e([t],function(u){var a=s.clone(u.root||u.ROOT),f=c(!u._v1x&&u,i,n,r);e(f,function(){for(var e=1;e<f.length;e++)a=s.mixin(s.clone(a),arguments[e]);var n=t+"/"+i;h[n]=a,a.$locale=f.specificity,o()})})},m=function(e,t){return/^\./.test(e)?t(e):e},g=function(e){var t=i.extraLocale||[];return t=s.isArray(t)?t:[t],t.push(e),t},y=function(t,i,o){if(n("dojo-preload-i18n-Api")){var a=t.split("*"),f=a[1]=="preload";f&&(h[t]||(h[t]=1,T(a[2],u.parse(a[3]),1,i)),o(1));if(f||N(t,i,o))return}var c=l.exec(t),p=c[1]+"/",d=c[5]||c[4],m=p+d,y=c[5]&&c[4],b=y||e.locale||"",w=m+"/"+b,E=y?[b]:g(b),S=E.length,x=function(){--S||o(s.delegate(h[w]))};r.forEach(E,function(e){var t=m+"/"+e;n("dojo-preload-i18n-Api")&&C(t),h[t]?x():v(i,m,p,d,e,x)})};if(n("dojo-unit-tests"))var b=f.unitTests=[];if(n("dojo-preload-i18n-Api")||n("dojo-v1x-i18n-Api"))var w=f.normalizeLocale=function(t){var n=t?t.toLowerCase():e.locale;return n=="root"?"ROOT":n},E=function(e,r){return n("dojo-sync-loader")&&n("dojo-v1x-i18n-Api")?r.isXdUrl(t.toUrl(e+".js")):!0},S=0,x=[],T=f._preloadLocalizations=function(n,i,s,o){function u(e,t){E(e,o)||s?o([e],t):A([e],t,o)}function a(e,t){var n=e.split("-");while(n.length){if(t(n.join("-")))return;n.pop()}t("ROOT")}function f(e){e=w(e),a(e,function(e){if(r.indexOf(i,e)>=0){var s=n.replace(/\./g,"/")+"_"+e;return S++,u(s,function(n){for(var r in n)h[t.toAbsMid(r)+"/"+e]=n[r];--S;while(!S&&x.length)y.apply(null,x.shift())}),!0}return!1})}o=o||t,f(),r.forEach(e.config.extraLocale,f)},N=function(e,t,n){return S&&x.push([e,t,n]),S},C=function(){};if(n("dojo-v1x-i18n-Api")){var k={},L=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},	   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),A=function(e,t,n){var i=[];r.forEach(e,function(e){function r(n){var r=L(n,C,e,k);r===k?i.push(h[t]=k.result):(r instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+t,r),r={}),i.push(h[t]=/nls\/[^\/]+\/[^\/]+$/.test(t)?r:{root:r,_v1x:1}))}var t=n.toUrl(e+".js");if(h[t])i.push(h[t]);else{var s=n.syncLoadNls(e);if(s)i.push(s);else if(!o)try{n.getText(t,!0,r)}catch(u){i.push(h[t]={})}else o.get({url:t,sync:!0,load:r,error:function(){i.push(h[t]={})}})}}),t&&t.apply(null,i)};C=function(t){for(var n,r=t.split("/"),i=e.global[r[0]],s=1;i&&s<r.length-1;i=i[r[s++]]);return i&&(n=i[r[s]],n||(n=i[r[s].replace(/-/g,"_")]),n&&(h[t]=n)),n},f.getLocalization=function(e,n,r){var i,s=p(e,n,r);return y(s,E(s,t)?t:function(e,n){A(e,n,t)},function(e){i=e}),i},n("dojo-unit-tests")&&b.push(function(e){e.register("tests.i18n.unit",function(e){var t;t=L("{prop:1}",C,"nonsense",k),e.is({prop:1},t),e.is(undefined,t[1]),t=L("({prop:1})",C,"nonsense",k),e.is({prop:1},t),e.is(undefined,t[1]),t=L("{'prop-x':1}",C,"nonsense",k),e.is({"prop-x":1},t),e.is(undefined,t[1]),t=L("({'prop-x':1})",C,"nonsense",k),e.is({"prop-x":1},t),e.is(undefined,t[1]),t=L("define({'prop-x':1})",C,"nonsense",k),e.is(k,t),e.is({"prop-x":1},k.result),t=L("define('some/module', {'prop-x':1})",C,"nonsense",k),e.is(k,t),e.is({"prop-x":1},k.result),t=L("this is total nonsense and should throw an error",C,"nonsense",k),e.is(t instanceof Error,!0)})})}return s.mixin(f,{dynamic:!0,normalize:m,load:y,cache:h,getL10nName:d})}),pen.define("dojo/string",["./_base/kernel","./_base/lang"],function(e,t){var n={};return t.setObject("dojo.string",n),n.rep=function(e,t){if(t<=0||!e)return"";var n=[];for(;;){t&1&&n.push(e);if(!(t>>=1))break;e+=e}return n.join("")},n.pad=function(e,t,r,i){r||(r="0");var s=String(e),o=n.rep(r,Math.ceil((t-s.length)/r.length));return i?s+o:o+s},n.substitute=function(n,r,i,s){return s=s||e.global,i=i?t.hitch(s,i):function(e){return e},n.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(e,n,o){var u=t.getObject(n,!1,r);return o&&(u=t.getObject(o,!1,s).call(s,u,n)),i(u,n).toString()})},n.trim=String.prototype.trim?t.trim:function(e){e=e.replace(/^\s+/,"");for(var t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e},n}),pen.define("pentaho/common/Messages",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/on","dojo/query","dojo/_base/lang","dojo/request","dojo/i18n","dojo/string"],function(e,t,n,r,i,s,o,u,a){var f=e("pentaho.common.Messages",[],{});f.init=function(){f.messageBundle===undefined&&(f.messageBundle={})},pentaho=typeof pentaho=="undefined"?{}:pentaho,pentaho.common=pentaho.common||{},pentaho.common.Messages=pentaho.common.Messages||f,f.addBundle=function(e,t){dojo.requireLocalization(e,t,"ROOT","ROOT"),f.messageBundle[e]=u.getLocalization(e,t)},f.getBundle=function(e){return f.messageBundle[e]},f.entityDecoder=document.createElement("textarea"),f.getString=function(e,t){var n,r,i=e;for(n in f.messageBundle)if(f.messageBundle.hasOwnProperty(n)){r=f.messageBundle[n];if(r.hasOwnProperty(e)){i=r[e];if(undefined!=t){var o={};if(typeof t=="string")o[0]=t;else if(typeof t=="array")for(var u=0;u<t.length;u++)o[""+u]=t[u];else s.isObject(t)&&(o=t);i=s.replace(i,o)}break}}return i};var l=0;return f.setElementText=function(e,t){var n;typeof e=="string"?n=document.getElementById(e):n=e,n&&(n.innerHTML=f.getString(t))},f.addUrlBundle=function(e,t,n){if(!n&&f.messageBundle.hasOwnProperty(e))return;var r=o(t,{handleAs:"json",sync:!0});r.then(function(t){f.messageBundle[e]=t},function(e){typeof console!="undefined"&&console.log("error loading message bundle at:"+t)})},f.init(),f.addUrlBundle("pentaho.common",CONTEXT_PATH+"i18n?plugin=common-ui&name=resources/web/dojo/pentaho/common/nls/messages"),f}),function(e,t,n){typeof module!="undefined"?module.exports=n():typeof define!="undefined"&&typeof define.amd=="object"?pen.define("cdf/lib/Base",n):t[e]=n()}("Base",this,function(){var e=function(){};return e.extend=function(t,n){var r=e.prototype.extend;e._prototyping=!0;var i=new this;r.call(i,t),i.base=function(){},delete e._prototyping;var s=i.constructor,o=i.constructor=function(){if(!e._prototyping)if(this._constructing||this.constructor===o)this._constructing=!0,s.apply(this,arguments),delete this._constructing;else if(arguments[0]!==null)return(arguments[0].extend||r).call(arguments[0],i)};return o.ancestor=this,o.extend=this.extend,o.forEach=this.forEach,o.implement=this.implement,o.prototype=i,o.toString=this.toString,o.valueOf=function(e){return e==="object"?o:s.valueOf()},r.call(o,n),typeof o.init=="function"&&o.init(),o},e.prototype={extend:function(t,n){if(arguments.length>1){var r=this[t];if(r&&typeof n=="function"&&(!r.valueOf||r.valueOf()!==n.valueOf())&&/\bbase\b/.test(n)){var i=n.valueOf();n=function(){var t=this.base||e.prototype.base;this.base=r;var n=i.apply(this,arguments);return this.base=t,n},n.valueOf=function(e){return e==="object"?n:i},n.toString=e.toString}this[t]=n}else if(t){var s=e.prototype.extend;!e._prototyping&&typeof this!="function"&&(s=this.extend||s);var o={toSource:null},u=["constructor","toString","valueOf"];for(var a=e._prototyping?0:1;a<u.length;a++){var f=u[a];t[f]!==o[f]&&s.call(this,f,t[f])}for(var l in t)o[l]||s.call(this,l,t[l])}return this}},e=e.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var r in e)this.prototype[r]===undefined&&t.call(n,e[r],r,e)},implement:function(){for(var e=0;e<arguments.length;e++)typeof arguments[e]=="function"?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),e}),pen.define("common-ui/util/base64",[],function(){return{base64Decode:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var n="",r,i,s,o,u,a,f,l=0;while(l<e.length)o=t.indexOf(e.charAt(l++)),u=t.indexOf(e.charAt(l++)),a=t.indexOf(e.charAt(l++)),f=t.indexOf(e.charAt(l++)),r=o<<2|u>>4,i=(u&15)<<4|a>>2,s=(a&3)<<6|f,n+=String.fromCharCode(r),a!==64&&(n+=String.fromCharCode(i)),f!==64&&(n+=String.fromCharCode(s));return this.utf8Decode(n)},utf8Decode:function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}}}),pen.define("common-ui/util/timeutil",[],function(){return{offsets:{ACT:570,AET:600,AGT:-180,ART:120,AST:-540,"Africa/Abidjan":0,"Africa/Accra":0,"Africa/Addis_Ababa":180,"Africa/Algiers":60,"Africa/Asmara":180,"Africa/Asmera":180,"Africa/Bamako":0,"Africa/Bangui":60,"Africa/Banjul":0,"Africa/Bissau":0,"Africa/Blantyre":120,"Africa/Brazzaville":60,"Africa/Bujumbura":120,"Africa/Cairo":120,"Africa/Casablanca":0,"Africa/Ceuta":60,"Africa/Conakry":0,"Africa/Dakar":0,"Africa/Dar_es_Salaam":180,"Africa/Djibouti":180,"Africa/Douala":60,"Africa/El_Aaiun":0,"Africa/Freetown":0,"Africa/Gaborone":120,"Africa/Harare":120,"Africa/Johannesburg":120,"Africa/Kampala":180,"Africa/Khartoum":180,"Africa/Kigali":120,"Africa/Kinshasa":60,"Africa/Lagos":60,"Africa/Libreville":60,"Africa/Lome":0,"Africa/Luanda":60,"Africa/Lubumbashi":120,"Africa/Lusaka":120,"Africa/Malabo":60,"Africa/Maputo":120,"Africa/Maseru":120,"Africa/Mbabane":120,"Africa/Mogadishu":180,"Africa/Monrovia":0,"Africa/Nairobi":180,"Africa/Ndjamena":60,"Africa/Niamey":60,"Africa/Nouakchott":0,"Africa/Ouagadougou":0,"Africa/Porto-Novo":60,"Africa/Sao_Tome":0,"Africa/Timbuktu":0,"Africa/Tripoli":120,"Africa/Tunis":60,"Africa/Windhoek":60,"America/Adak":-600,"America/Anchorage":-540,"America/Anguilla":-240,"America/Antigua":-240,"America/Araguaina":-180,"America/Argentina/Buenos_Aires":-180,"America/Argentina/Catamarca":-180,"America/Argentina/ComodRivadavia":-180,"America/Argentina/Cordoba":-180,"America/Argentina/Jujuy":-180,"America/Argentina/La_Rioja":-180,"America/Argentina/Mendoza":-180,"America/Argentina/Rio_Gallegos":-180,"America/Argentina/Salta":-180,"America/Argentina/San_Juan":-180,"America/Argentina/San_Luis":-240,"America/Argentina/Tucuman":-180,"America/Argentina/Ushuaia":-180,"America/Aruba":-240,"America/Asuncion":-240,"America/Atikokan":-300,"America/Atka":-600,"America/Bahia":-180,"America/Barbados":-240,"America/Belem":-180,"America/Belize":-360,"America/Blanc-Sablon":-240,"America/Boa_Vista":-240,"America/Bogota":-300,"America/Boise":-420,"America/Buenos_Aires":-180,"America/Cambridge_Bay":-420,"America/Campo_Grande":-240,"America/Cancun":-360,"America/Caracas":-270,"America/Catamarca":-180,"America/Cayenne":-180,"America/Cayman":-300,"America/Chicago":-360,"America/Chihuahua":-420,"America/Coral_Harbour":-300,"America/Cordoba":-180,"America/Costa_Rica":-360,"America/Cuiaba":-240,"America/Curacao":-240,"America/Danmarkshavn":0,"America/Dawson":-480,"America/Dawson_Creek":-420,"America/Denver":-420,"America/Detroit":-300,"America/Dominica":-240,"America/Edmonton":-420,"America/Eirunepe":-240,"America/El_Salvador":-360,"America/Ensenada":-480,"America/Fort_Wayne":-300,"America/Fortaleza":-180,"America/Glace_Bay":-240,"America/Godthab":-180,"America/Goose_Bay":-240,"America/Grand_Turk":-300,"America/Grenada":-240,"America/Guadeloupe":-240,"America/Guatemala":-360,"America/Guayaquil":-300,"America/Guyana":-240,"America/Halifax":-240,"America/Havana":-300,"America/Hermosillo":-420,"America/Indiana/Indianapolis":-300,"America/Indiana/Knox":-360,"America/Indiana/Marengo":-300,"America/Indiana/Petersburg":-300,"America/Indiana/Tell_City":-360,"America/Indiana/Vevay":-300,"America/Indiana/Vincennes":-300,"America/Indiana/Winamac":-300,"America/Indianapolis":-300,"America/Inuvik":-420,"America/Iqaluit":-300,"America/Jamaica":-300,"America/Jujuy":-180,"America/Juneau":-540,"America/Kentucky/Louisville":-300,"America/Kentucky/Monticello":-300,"America/Knox_IN":-360,"America/La_Paz":-240,"America/Lima":-300,"America/Los_Angeles":-480,"America/Louisville":-300,"America/Maceio":-180,"America/Managua":-360,"America/Manaus":-240,"America/Marigot":-240,"America/Martinique":-240,"America/Matamoros":-360,"America/Mazatlan":-420,"America/Mendoza":-180,"America/Menominee":-360,"America/Merida":-360,"America/Mexico_City":-360,"America/Miquelon":-180,"America/Moncton":-240,"America/Monterrey":-360,"America/Montevideo":-180,"America/Montreal":-300,"America/Montserrat":-240,"America/Nassau":-300,"America/New_York":-300,"America/Nipigon":-300,"America/Nome":-540,"America/Noronha":-120,"America/North_Dakota/Center":-360,"America/North_Dakota/New_Salem":-360,"America/Ojinaga":-420,"America/Panama":-300,"America/Pangnirtung":-300,"America/Paramaribo":-180,"America/Phoenix":-420,"America/Port-au-Prince":-300,"America/Port_of_Spain":-240,"America/Porto_Acre":-240,"America/Porto_Velho":-240,"America/Puerto_Rico":-240,"America/Rainy_River":-360,"America/Rankin_Inlet":-360,"America/Recife":-180,"America/Regina":-360,"America/Resolute":-300,"America/Rio_Branco":-240,"America/Rosario":-180,"America/Santa_Isabel":-480,"America/Santarem":-180,"America/Santiago":-240,"America/Santo_Domingo":-240,"America/Sao_Paulo":-180,"America/Scoresbysund":-60,"America/Shiprock":-420,"America/St_Barthelemy":-240,"America/St_Johns":-210,"America/St_Kitts":-240,"America/St_Lucia":-240,"America/St_Thomas":-240,"America/St_Vincent":-240,"America/Swift_Current":-360,"America/Tegucigalpa":-360,"America/Thule":-240,"America/Thunder_Bay":-300,"America/Tijuana":-480,"America/Toronto":-300,"America/Tortola":-240,"America/Vancouver":-480,"America/Virgin":-240,"America/Whitehorse":-480,"America/Winnipeg":-360,"America/Yakutat":-540,"America/Yellowknife":-420,"Antarctica/Casey":660,"Antarctica/Davis":300,"Antarctica/DumontDUrville":600,"Antarctica/Mawson":300,"Antarctica/McMurdo":720,"Antarctica/Palmer":-240,"Antarctica/Rothera":-180,"Antarctica/South_Pole":720,"Antarctica/Syowa":180,"Antarctica/Vostok":360,"Arctic/Longyearbyen":60,"Asia/Aden":180,"Asia/Almaty":360,"Asia/Amman":120,"Asia/Anadyr":720,"Asia/Aqtau":300,"Asia/Aqtobe":300,"Asia/Ashgabat":300,"Asia/Ashkhabad":300,"Asia/Baghdad":180,"Asia/Bahrain":180,"Asia/Baku":240,"Asia/Bangkok":420,"Asia/Beirut":120,"Asia/Bishkek":360,"Asia/Brunei":480,"Asia/Calcutta":330,"Asia/Choibalsan":480,"Asia/Chongqing":480,"Asia/Chungking":480,"Asia/Colombo":330,"Asia/Dacca":360,"Asia/Damascus":120,"Asia/Dhaka":360,"Asia/Dili":540,"Asia/Dubai":240,"Asia/Dushanbe":300,"Asia/Gaza":120,"Asia/Harbin":480,"Asia/Ho_Chi_Minh":420,"Asia/Hong_Kong":480,"Asia/Hovd":420,"Asia/Irkutsk":480,"Asia/Istanbul":120,"Asia/Jakarta":420,"Asia/Jayapura":540,"Asia/Jerusalem":120,"Asia/Kabul":270,"Asia/Kamchatka":720,"Asia/Karachi":300,"Asia/Kashgar":480,"Asia/Kathmandu":345,"Asia/Katmandu":345,"Asia/Kolkata":330,"Asia/Krasnoyarsk":420,"Asia/Kuala_Lumpur":480,"Asia/Kuching":480,"Asia/Kuwait":180,"Asia/Macao":480,"Asia/Macau":480,"Asia/Magadan":660,"Asia/Makassar":480,"Asia/Manila":480,"Asia/Muscat":240,"Asia/Nicosia":120,"Asia/Novokuznetsk":360,"Asia/Novosibirsk":360,"Asia/Omsk":360,"Asia/Oral":300,"Asia/Phnom_Penh":420,"Asia/Pontianak":420,"Asia/Pyongyang":540,"Asia/Qatar":180,"Asia/Qyzylorda":360,"Asia/Rangoon":390,"Asia/Riyadh":180,"Asia/Riyadh87":187,"Asia/Riyadh88":187,"Asia/Riyadh89":187,"Asia/Saigon":420,"Asia/Sakhalin":600,"Asia/Samarkand":300,"Asia/Seoul":540,"Asia/Shanghai":480,"Asia/Singapore":480,"Asia/Taipei":480,"Asia/Tashkent":300,"Asia/Tbilisi":240,"Asia/Tehran":210,"Asia/Tel_Aviv":120,"Asia/Thimbu":360,"Asia/Thimphu":360,"Asia/Tokyo":540,"Asia/Ujung_Pandang":480,"Asia/Ulaanbaatar":480,"Asia/Ulan_Bator":480,"Asia/Urumqi":480,"Asia/Vientiane":420,"Asia/Vladivostok":600,"Asia/Yakutsk":540,"Asia/Yekaterinburg":300,"Asia/Yerevan":240,"Atlantic/Azores":-60,"Atlantic/Bermuda":-240,"Atlantic/Canary":0,"Atlantic/Cape_Verde":-60,"Atlantic/Faeroe":0,"Atlantic/Faroe":0,"Atlantic/Jan_Mayen":60,"Atlantic/Madeira":0,"Atlantic/Reykjavik":0,"Atlantic/South_Georgia":-120,"Atlantic/St_Helena":0,"Atlantic/Stanley":-240,"Australia/ACT":600,"Australia/Adelaide":570,"Australia/Brisbane":600,"Australia/Broken_Hill":570,"Australia/Canberra":600,"Australia/Currie":600,"Australia/Darwin":570,"Australia/Eucla":525,"Australia/Hobart":600,"Australia/LHI":630,"Australia/Lindeman":600,"Australia/Lord_Howe":630,"Australia/Melbourne":600,"Australia/NSW":600,"Australia/North":570,"Australia/Perth":480,"Australia/Queensland":600,"Australia/South":570,"Australia/Sydney":600,"Australia/Tasmania":600,"Australia/Victoria":600,"Australia/West":480,"Australia/Yancowinna":570,BET:-180,BST:360,"Brazil/Acre":-240,"Brazil/DeNoronha":-120,"Brazil/East":-180,"Brazil/West":-240,CAT:120,CET:60,CNT:-210,CST:-360,CST6CDT:-360,CTT:480,"Canada/Atlantic":-240,"Canada/Central":-360,"Canada/East-Saskatchewan":-360,"Canada/Eastern":-300,"Canada/Mountain":-420,"Canada/Newfoundland":-210,"Canada/Pacific":-480,"Canada/Saskatchewan":-360,"Canada/Yukon":-480,"Chile/Continental":-240,"Chile/EasterIsland":-360,Cuba:-300,EAT:180,ECT:60,EET:120,EST:-300,EST5EDT:-300,Egypt:120,Eire:0,"Etc/GMT":0,"Etc/GMT+0":0,"Etc/GMT+1":-60,"Etc/GMT+10":-600,"Etc/GMT+11":-660,"Etc/GMT+12":-720,"Etc/GMT+2":-120,"Etc/GMT+3":-180,"Etc/GMT+4":-240,"Etc/GMT+5":-300,"Etc/GMT+6":-360,"Etc/GMT+7":-420,"Etc/GMT+8":-480,"Etc/GMT+9":-540,"Etc/GMT-0":0,"Etc/GMT-1":60,"Etc/GMT-10":600,"Etc/GMT-11":660,"Etc/GMT-12":720,"Etc/GMT-13":780,"Etc/GMT-14":840,"Etc/GMT-2":120,"Etc/GMT-3":180,"Etc/GMT-4":240,"Etc/GMT-5":300,"Etc/GMT-6":360,"Etc/GMT-7":420,"Etc/GMT-8":480,"Etc/GMT-9":540,"Etc/GMT0":0,"Etc/Greenwich":0,"Etc/UCT":0,"Etc/UTC":0,"Etc/Universal":0,"Etc/Zulu":0,"Europe/Amsterdam":60,"Europe/Andorra":60,"Europe/Athens":120,"Europe/Belfast":0,"Europe/Belgrade":60,"Europe/Berlin":60,"Europe/Bratislava":60,"Europe/Brussels":60,"Europe/Bucharest":120,"Europe/Budapest":60,"Europe/Chisinau":120,"Europe/Copenhagen":60,"Europe/Dublin":0,"Europe/Gibraltar":60,"Europe/Guernsey":0,"Europe/Helsinki":120,"Europe/Isle_of_Man":0,"Europe/Istanbul":120,"Europe/Jersey":0,"Europe/Kaliningrad":120,"Europe/Kiev":120,"Europe/Lisbon":0,"Europe/Ljubljana":60,"Europe/London":0,"Europe/Luxembourg":60,"Europe/Madrid":60,"Europe/Malta":60,"Europe/Mariehamn":120,"Europe/Minsk":120,"Europe/Monaco":60,"Europe/Moscow":180,"Europe/Nicosia":120,"Europe/Oslo":60,"Europe/Paris":60,"Europe/Podgorica":60,"Europe/Prague":60,"Europe/Riga":120,"Europe/Rome":60,"Europe/Samara":240,"Europe/San_Marino":60,"Europe/Sarajevo":60,"Europe/Simferopol":120,"Europe/Skopje":60,"Europe/Sofia":120,"Europe/Stockholm":60,"Europe/Tallinn":120,"Europe/Tirane":60,"Europe/Tiraspol":120,"Europe/Uzhgorod":120,"Europe/Vaduz":60,"Europe/Vatican":60,"Europe/Vienna":60,"Europe/Vilnius":120,"Europe/Volgograd":180,"Europe/Warsaw":60,"Europe/Zagreb":60,"Europe/Zaporozhye":120,"Europe/Zurich":60,GB:0,"GB-Eire":0,GMT:0,GMT0:0,Greenwich:0,HST:-600,Hongkong:480,IET:-300,IST:330,Iceland:0,"Indian/Antananarivo":180,"Indian/Chagos":360,"Indian/Christmas":420,"Indian/Cocos":390,"Indian/Comoro":180,"Indian/Kerguelen":300,"Indian/Mahe":240,"Indian/Maldives":300,"Indian/Mauritius":240,"Indian/Mayotte":180,"Indian/Reunion":240,Iran:210,Israel:120,JST:540,Jamaica:-300,Japan:540,Kwajalein:720,Libya:120,MET:60,MIT:-660,MST:-420,MST7MDT:-420,"Mexico/BajaNorte":-480,"Mexico/BajaSur":-420,"Mexico/General":-360,"Mideast/Riyadh87":187,"Mideast/Riyadh88":187,"Mideast/Riyadh89":187,NET:240,NST:720,NZ:720,"NZ-CHAT":765,Navajo:-420,PLT:300,PNT:-420,PRC:480,PRT:-240,PST:-480,PST8PDT:-480,"Pacific/Apia":-660,"Pacific/Auckland":720,"Pacific/Chatham":765,"Pacific/Easter":-360,"Pacific/Efate":660,"Pacific/Enderbury":780,"Pacific/Fakaofo":-600,"Pacific/Fiji":720,"Pacific/Funafuti":720,"Pacific/Galapagos":-360,"Pacific/Gambier":-540,"Pacific/Guadalcanal":660,"Pacific/Guam":600,"Pacific/Honolulu":-600,"Pacific/Johnston":-600,"Pacific/Kiritimati":840,"Pacific/Kosrae":660,"Pacific/Kwajalein":720,"Pacific/Majuro":720,"Pacific/Marquesas":-570,"Pacific/Midway":-660,"Pacific/Nauru":720,"Pacific/Niue":-660,"Pacific/Norfolk":690,"Pacific/Noumea":660,"Pacific/Pago_Pago":-660,"Pacific/Palau":540,"Pacific/Pitcairn":-480,"Pacific/Ponape":660,"Pacific/Port_Moresby":600,"Pacific/Rarotonga":-600,"Pacific/Saipan":600,"Pacific/Samoa":-660,"Pacific/Tahiti":-600,"Pacific/Tarawa":720,"Pacific/Tongatapu":780,"Pacific/Truk":600,"Pacific/Wake":720,"Pacific/Wallis":720,"Pacific/Yap":600,Poland:60,Portugal:0,ROK:540,SST:660,Singapore:480,"SystemV/AST4":-240,"SystemV/AST4ADT":-240,"SystemV/CST6":-360,"SystemV/CST6CDT":-360,"SystemV/EST5":-300,"SystemV/EST5EDT":-300,"SystemV/HST10":-600,"SystemV/MST7":-420,"SystemV/MST7MDT":-420,"SystemV/PST8":-480,"SystemV/PST8PDT":-480,"SystemV/YST9":-540,"SystemV/YST9YDT":-540,Turkey:120,UCT:0,"US/Alaska":-540,"US/Aleutian":-600,"US/Arizona":-420,"US/Central":-360,"US/East-Indiana":-300,"US/Eastern":-300,"US/Hawaii":-600,"US/Indiana-Starke":-360,"US/Michigan":-300,"US/Mountain":-420,"US/Pacific":-480,"US/Pacific-New":-480,"US/Samoa":-660,UTC:0,Universal:0,VST:420,"W-SU":180,WET:0,Zulu:0},getOffset:function(e){return this.offsets[e]||0},getOffsetAsString:function(e){return this.formatOffset(this.getOffset(e))},formatOffset:function(e){var t=Math.abs(e/60),n=Math.abs(e%60),r="";return e>=0?r+="+":r+="-",t<10&&(r+="0"),r+=t,n<10&&(r+="0"),r+=n,r}}}),pen.define("common-ui/util/formatting",["common-ui/util/timeutil"],function(e){return{createDataTransportFormatter:function(e,t,n){var r=this._formatTypeMap[t.type];if(r=="number")return{format:function(e){return""+e},parse:function(e){return e}};if(r=="date")return this._createDateTransportFormatter(t)},createFormatter:function(e,t,n){if(!jsTextFormatter){console.log("Unable to find formatter module. No text formatting will be possible.");return}var r=n||t.attributes["data-format"];if(!t.list&&r)return jsTextFormatter.createFormatter(t.type,r)},_formatTypeMap:{number:"number","java.lang.Number":"number","java.lang.Byte":"number","java.lang.Short":"number","java.lang.Integer":"number","java.lang.Long":"number","java.lang.Float":"number","java.lang.Double":"number","java.math.BigDecimal":"number","java.math.BigInteger":"number",date:"date","java.util.Date":"date","java.sql.Date":"date","java.sql.Time":"date","java.sql.Timestamp":"date"},_initDateFormatters:function(){this.dateFormatters||(this.dateFormatters={"with-timezone":jsTextFormatter.createFormatter("date","yyyy-MM-dd'T'HH:mm:ss.SSSZ"),"without-timezone":jsTextFormatter.createFormatter("date","yyyy-MM-dd'T'HH:mm:ss.SSS"),utc:jsTextFormatter.createFormatter("date","yyyy-MM-dd'T'HH:mm:ss.SSS'+0000'"),simple:jsTextFormatter.createFormatter("date","yyyy-MM-dd")})},_createDataTransportFormatter:function(e,t){var n=this._formatTypeMap[e.type];if(n=="number")return{format:function(e){return t.format(e)},parse:function(e){return""+t.parse(e)}};if(n=="date"){var r=this._createDateTransportFormatter(e);return{format:function(e){return t.format(r.parse(e))},parse:function(e){return r.format(t.parse(e))}}}},_createDateTransportFormatter:function(t,n){var r=t.attributes.timezone;return this._initDateFormatters(),{format:function(t){if("client"===r)return this.dateFormatters["with-timezone"].format(t);if("server"===r||!r)return this.dateFormatters["without-timezone"].format(t);if("utc"===r)return this.dateFormatters.utc.format(t);var n=e.getOffsetAsString(r);return this.dateFormatters[n]||(this.dateFormatters[n]=jsTextFormatter.createFormatter("date","yyyy-MM-dd'T'HH:mm:ss.SSS'"+n+"'")),this.dateFormatters[n].format(t)}.bind(this),parse:function(e){if("client"===r)try{return this.dateFormatters["with-timezone"].parse(e)}catch(t){}try{return this.parseDateWithoutTimezoneInfo(e)}catch(t){}try{if(e.length==10)return this.dateFormatters.simple.parse(e)}catch(t){}try{return new Date(parseFloat(e))}catch(t){}return""}.bind(this)}},parseDateWithoutTimezoneInfo:function(e){return e.length===28&&(e=e.substring(0,23)),this.dateFormatters["without-timezone"].parse(e)},normalizeParameterValue:function(e,t,n){if(n==null||t==null)return null;var r=t.match("^\\[L([^;]+);$");r!=null&&r.length===2&&(t=r[1]);switch(t){case"java.util.Date":case"java.sql.Date":case"java.sql.Time":case"java.sql.Timestamp":var i=e.attributes.timezone;if(!i||i=="server")return e.timezoneHint==undefined&&n.length==28&&(e.timezoneHint=n.substring(23,28)),n;if(i=="client")return n;if(e.timezoneHint!=undefined&&$.trim(e.timezoneHint).length!=0&&n.match(e.timezoneHint+"$"))return n;return this.convertTimeStampToTimeZone(n,i)}return n},convertTimeStampToTimeZone:function(t,n){this._initDateFormatters();var r=e.getOffset(n),i=this.parseDateWithoutTimezoneInfo(t),s=this.dateFormatters["with-timezone"].parse(t),o=e.formatOffset(r),u=-(new Date(i)).getTimezoneOffset(),a=i.getTime()+r*6e4+(s.getTime()-i.getTime()-u*6e4),f=new Date(a);return this.dateFormatters["without-timezone"].format(f)+o}}}),pen.define("common-ui/prompting/parameters/Parameter",[],function(){return function(){return{name:undefined,type:undefined,list:undefined,mandatory:undefined,multiSelect:undefined,strict:undefined,timezoneHint:undefined,attributes:{},values:[],isSelectedValue:function(e){var t=!1;return $.each(this.values,function(n,r){if(r.selected&&e===r.value)return t=!0,!1}),t},hasSelection:function(){var e=!1;return $.each(this.values,function(t,n){if(n.selected)return e=!0,!1}),e},getSelectedValuesValue:function(){var e=[];return $.each(this.values,function(t,n){n.selected&&e.push(n.value)}),e}}}}),pen.define("common-ui/prompting/parameters/ParameterDefinition",[],function(){return function(){return{autoSubmit:undefined,autoSubmitUI:undefined,ignoreBiServer5538:undefined,layout:undefined,page:undefined,paginate:undefined,parameterGroups:[],promptNeeded:undefined,totalPages:undefined,errors:{},getParameterGroup:function(e){var t;return $.each(this.parameterGroups,function(n,r){if(r.name===e)return t=r,!1}),t},allowAutoSubmit:function(){return this.autoSubmit!=undefined?this.autoSubmit:this.autoSubmitUI},showParameterUI:function(){var e=!0;return this.mapParameters(function(t){if(t.name=="showParameters")return e=t,!1}),e.isSelectedValue!==undefined?!e.isSelectedValue("false"):!e},getParameter:function(e){var t;return this.mapParameters(function(n){if(n.name===e)return t=n,!1}),t},mapParameters:function(e,t){var n=this,r=!1;return $.each(this.parameterGroups,function(i,s){$.each(this.parameters,function(i,o){if(e.call(t,o,s,n)===!1)return r=!0,!1});if(r)return!1}),!r}}}}),pen.define("common-ui/prompting/parameters/ParameterGroup",[],function(){return function(){return{name:undefined,label:undefined,parameters:[]}}}),pen.define("common-ui/prompting/parameters/ParameterValue",[],function(){return function(){return{type:undefined,label:undefined,selected:!1,value:undefined}}}),pen.define("common-ui/prompting/parameters/ParameterXmlParser",["cdf/lib/Base","common-ui/util/base64","common-ui/util/formatting","./Parameter","./ParameterDefinition","./ParameterGroup","./ParameterValue"],function(e,t,n,r,i,s,o){var u=function(e){var t=new DOMParser,n=t.parseFromString(e,"text/xml"),r=n.documentElement;return(!r||!r.nodeName||r.nodeName==="parsererror")&&$.error("Invalid XML: "+e),n},a=function(e,t){var n=function(e,t,n){var r=e.errors[t];r||(r=[]),r.push(n),e.errors[t]=r};t.find("error").each(function(t,r){var i=$(r),s=i.attr("parameter"),o=i.attr("message");n(e,s,o)}.bind(this)),t.find("global-error").each(function(t,r){var i=$(r),s=i.attr("message");n(e,null,s)}.bind(this))},f=function(e,t){t.find("parameter").each(function(t,n){var r=l(n);n=$(n);var i=r.attributes["parameter-group"];if(i==undefined||!$.trim(i).length)i="parameters";var o=e.getParameterGroup(i);o||(o=new s,o.name=i,o.label=r.attributes["parameter-group-label"],e.parameterGroups.push(o)),o.parameters.push(r)}.bind(this))},l=function(e){var t=new r;return e=$(e),t.name=e.attr("name"),t.mandatory="true"==e.attr("is-mandatory"),t.strict="true"==e.attr("is-strict"),t.list="true"==e.attr("is-list"),t.multiSelect="true"==e.attr("is-multi-select"),t.type=e.attr("type"),t.timezoneHint=e.attr("timezone-hint"),$(e).find("attribute").each(function(e,n){n=$(n),t.attributes[n.attr("name")]=n.attr("value")}),t.values=c(e,t),t},c=function(e,r){var i=[];return $(e).find("values value").each(function(e,s){var u=new o;s=$(s),"true"==s.attr("encoded")?u.label=t.base64Decode(s.attr("label")):u.label=s.attr("label"),"true"==s.attr("null")?u.value="":"true"==s.attr("encoded")?u.value=t.base64Decode(s.attr("value")):u.value=s.attr("value"),u.type=s.attr("type");if(u.type==undefined||!$.trim(u.type).length)u.type=r.type;u.selected="true"==s.attr("selected"),u.value=n.normalizeParameterValue(r,u.type,u.value),i.push(u)}.bind(this)),i};return e.extend({parseParameterXml:function(e){var t=$(u(e));if(t.find("parsererror").length>0)throw e;var n=new i,r=$(t.find("parameters")[0]);n.promptNeeded="true"==r.attr("is-prompt-needed"),n.ignoreBiServer5538="true"==r.attr("ignore-biserver-5538"),n.paginate="true"==r.attr("paginate"),n.layout=r.attr("layout");var s=function(e,t){var n=parseInt(e);return"NaN"==n?t:n};return n.page=s(r.attr("accepted-page"),0),n.totalPages=s(r.attr("page-count"),0),n.autoSubmit=r.attr("autoSubmit"),n.autoSubmit=="true"?n.autoSubmit=!0:n.autoSubmit=="false"?n.autoSubmit=!1:n.autoSubmit=undefined,n.autoSubmitUI="true"==r.attr("autoSubmitUI"),f(n,r),a(n,t),n}})}),pen.define("cdf/Logger",[],function(){var e={loglevels:["debug","log","info","warn","error","exception"],loglevel:"debug",log:function(e,t,n){t=t||"info";if(this.loglevels.indexOf(t)<this.loglevels.indexOf(this.loglevel))return;if(typeof console!="undefined"){console[t]||(t==="exception"?(t="error",e=e.stack||e):t="log");if(n)try{console[t]("%c["+t+"] WD: "+e,n);return}catch(r){}console[t]("["+t+"] WD: "+e)}},debug:function(e){return this.log(e,"debug")},info:function(e){return this.log(e,"info")},warn:function(e){return this.log(e,"warn")},error:function(e){return this.log(e,"error")},exception:function(e){return this.log(e,"exception")}};return e}),pen.define("common-ui/util/GUIDHelper",["cdf/lib/Base"],function(e){var t={},n=function(){return Math.round(Math.random()*1e5)};return e.extend({_assignedGUIDs:{},generateGUID:function(){var e=n();while(t[e])e=n();return t[e]=!0,""+e},reset:function(){t={}}})}),function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(!b.acceptData(e))return;var s,o,u=b.expando,a=typeof n=="string",f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if((!h||!c[h]||!i&&!c[h].data)&&a&&r===t)return;h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n);return s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[b.camelCase(n)])):o=s,o}function q(e,t,n){if(!b.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(!u[a])return;if(t){s=n?u[a]:u[a].data;if(s){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t in s?t=[t]:t=t.split(" "));for(r=0,i=t.length;r<i;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}}if(!n){delete u[a].data;if(!U(u[a]))return}o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null}function R(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(F,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e){if(t==="data"&&b.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){t=t||0;if(b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(typeof t=="string"){var r=b.grep(e,function(e){return e.nodeType===1});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!b.hasData(e))return;var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--){t=en[i]+n;if(t in e)return t}return r}function nn(e,t){return e=t||e,b.css(e,"display")==="none"||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=b._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&nn(r)&&(s[o]=b._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&n!=="none"||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=b.css(e,n+Zt[s],!0,i)),r?(n==="content"&&(o-=b.css(e,"padding"+Zt[s],!0,i)),n!=="margin"&&(o-=b.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=b.css(e,"padding"+Zt[s],!0,i),n!=="padding"&&(o+=b.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=qt(e),o=b.support.boxSizing&&b.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Rt(e,t,s);if(i<0||i==null)i=e.style[t];if(Jt.test(i))return i;r=o&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=s,n=Qt[e];if(!n){n=fn(e,t);if(n==="none"||!n)It=(It||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach();Qt[e]=n}return n}function fn(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&b.type(t)==="object")for(i in t)vn(e+"["+i+"]",t[i],n,r);else r(e,t)}function _n(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(b.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,t,n,r){function o(u){var a;return i[u]=!0,b.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===An;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Pn(e,n){var r,i,s=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Bn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if(r!=="*"){if(f!=="*"&&f!==r){i=o[f+" "+r]||o["* "+r];if(!i)for(n in o){s=n.split(" ");if(s[1]===r){i=o[f+" "+s[0]]||o["* "+s[0]];if(i){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}}}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Gn[t]||[]).concat(Gn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,s=0,o=Qn.length,u=b.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;tr(l,f.opts.specialEasing);for(;s<o;s++){r=Qn[s].call(f,e,l,f.opts);if(r)return r}return Zn(f,l),b.isFunction(f.opts.start)&&f.opts.start.call(e,f),b.fx.timer(b.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(i in e){r=b.camelCase(i),s=t[r],n=e[i],b.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=b.cssHooks[r];if(o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}}function nr(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&nn(e);n.queue||(l=b._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,b.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],b.css(e,"display")==="inline"&&b.css(e,"float")==="none"&&(!b.support.inlineBlockNeedsLayout||an(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t){o=t[i];if($n.exec(o)){delete t[i],a=a||o==="toggle";if(o===(m?"hide":"show"))continue;v.push(i)}}s=v.length;if(s){u=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?b(e).show():h.done(function(){b(e).hide()}),h.done(function(){var t;b._removeData(e,"fxshow");for(t in d)b.style(e,t,d[t])});for(i=0;i<s;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||b.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start=r==="width"||r==="height"?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){if(s.addEventListener||e.type==="load"||s.readyState==="complete")D(),b.ready()},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=x.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0));if(T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}o=s.getElementById(i[2]);if(o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!b.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r)}return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?--b.readyWait:b.isReady)return;if(!s.body)return setTimeout(b.ready);b.isReady=!0;if(e!==!0&&--b.readyWait>0)return;n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready")},isFunction:function(e){return b.type(e)==="function"},isArray:Array.isArray||function(e){return b.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||b.type(e)!=="object"||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=b.trim(t);if(t&&N.test(t.replace(k,"@").replace(L,"]").replace(C,"")))return(new Function("return "+t))()}b.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:y&&!y.call("")?function(e){return e==null?"":y.call(e)}:function(e){return e==null?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(P(Object(e))?b.merge(n,typeof e=="string"?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(b.type(r)==="object"){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n){n=b.Deferred();if(s.readyState==="complete")setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=e.frameElement==null&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e=typeof e=="string"?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!i||f)&&(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=r!==1||e&&b.isFunction(e.promise)?r:0,s=i===1?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:p.className!=="t",leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:s.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:s.compatMode==="CSS1Compat",deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=o.getAttribute("value")==="",o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box",b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];if(!a)return;n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=o[0].offsetHeight===0,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&o[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=p.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length){u=b.data(s);if(s.nodeType===1&&!b._data(s,"parsedAttrs")){r=s.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){b.data(this,e)}):b.access(this,function(n){if(n===t)return s?R(s,e,b.data(s,e)):null;this.each(function(){b.data(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=b._data(e,t),n&&(!r||b.isArray(n)?r=b._data(e,t,b.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),s.cur=i,i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=b.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else if(n===i||n==="boolean")this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace(V,""):n==null?"":n);return}return i=b.isFunction(e),this.each(function(n){var s,o=b(this);if(this.nodeType!==1)return;i?s=e.call(this,n,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":b.isArray(s)&&(s=b.map(s,function(e){return e==null?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(b.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!b.nodeName(n.parentNode,"optgroup"))){t=b(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(typeof e.getAttribute===i)return b.prop(e,n,r);o=a!==1||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z));if(r===t)return s&&o&&"get"in s&&(u=s.get(e,n))!==null?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),u==null?t:u);if(r!==null)return s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r);b.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&e.nodeType===1)while(n=s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&t==="radio"&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=b.prop(e,n),i=typeof r=="boolean"&&e.getAttribute(n),s=typeof r=="boolean"?Y&&G?i!=null:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}};if(!Y||!G)b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,t,n){if(!b.nodeName(e,"input"))return z&&z.set(e,t,n);e.defaultValue=t}};G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(n==="id"||n==="name"||n==="coords"?r.value!=="":r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,t===""?!1:t,n)}},b.each(["width","height"],function(e,t){b.attrHooks[t]=b.extend(b.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r==null?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,t){if(b.isArray(t))return e.checked=b.inArray(b(e).val(),t)>=0}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||!!e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(!m||!(l=m.events))return;t=(t||"").match(E)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)b.event.remove(e,p+t[f],n,r,!0);continue}c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&b.removeEvent(e,p,m.handle),delete l[p])}b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))},trigger:function(n,r,i,o){var u,a,f,l,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||s;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+b.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[b.expando]?n:new b.Event(v,typeof n=="object"&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{};if(!o&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!o&&!c.noBubble&&!b.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!o&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(i.ownerDocument,r)===!1)&&(v!=="click"||!b.nodeName(i,"a"))&&b.acceptData(i)&&a&&i[v]&&!b.isWindow(i)){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){if(b.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===s.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!b.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){if(b.nodeName(this,"form"))return!1;b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(b.nodeName(this,"form"))return!1;b.event.remove(this,"._submit")}}),b.support.changeBubbles||(b.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")b.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)});return!1}b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){n++===0&&s.addEventListener(e,r,!0)},teardown:function(){--n===0&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return b.event.trigger(e,t,n,!0)}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;(t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[];if(!e||typeof e!="string")return n;if((u=t.nodeType)!==1&&u!==9)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(u===9){s=t.getElementById(o);if(!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){h=!0,v=w,m=t,y=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=U.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=z.exec(u))n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length);for(o in i.filter)(r=V[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&i==="parentNode",o=T++;return t.first?function(t,n,r){while(t=t[i])if(t.nodeType===1||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[i])if(t.nodeType===1||s){l=t[w]||(t[w]={});if((f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else{f=l[i]=[c],f[1]=e(t,n,u)||r;if(f[1]===!0)return!0}}}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?mt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[w]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,a<r&&yt(e.slice(a,r)),r<s&&yt(e=e.slice(r)),r<s&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=S==null?1:Math.random()||.1;E&&(f=a!==c&&a,r=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!p&&i.relative[o[1].type]){t=i.find.ID(a.matches[0].replace(et,tt),t)[0];if(!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){a=o[s];if(i.relative[f=a.type])break;if(l=i.find[f])if(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t)){o.splice(s,1),e=r.length&&pt(o);if(!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),z=new RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=new RegExp(q),X=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;if(n===c||n.nodeType!==9||!n.documentElement)return c;c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},i.find.CLASS=S.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&!p)return t.getElementsByClassName(e)},v=[],d=[":focus"];if(S.qsa=rt(n.querySelectorAll))ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=new RegExp(d.join("|")),v=new RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;if(e===t)return a=!0,0;if(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))return r&1||e.parentNode&&e.parentNode.nodeType===11?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:r&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']");if(S.matchesSelector&&!p&&(!v||!v.test(t))&&!d.test(t))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;a=!S.detectDuplicates,e.sort(y);if(a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=s(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue;return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[x,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(typeof e!="string")return r=this,this.pushStack(b(e).filter(function(){for(t=0;t<i;t++)if(b.contains(r[t],this))return!0}));n=[];for(t=0;t<i;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&(typeof e=="string"?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?b(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?typeof e=="string"?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&typeof r=="string"&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!b(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||b.filter(e,[n]).length>0)!t&&n.nodeType===1&&b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(b.support.htmlSerialize||!mt.test(e))&&(b.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return!t&&typeof e!="string"&&(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(c<=1||typeof v!="string"||b.support.checkClone||!Tt.test(v)))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c){f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,f.childNodes.length===1&&(f=i);if(i){n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;for(;l<c;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o){a=u[u.length-1].ownerDocument,b.map(u,Dt);for(l=0;l<o;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")))}f=i=null}}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.ownerDocument,e);b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!b.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(b.type(s)==="object")b.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!b.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&b.inArray(s,r)!==-1)continue;o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;(n=e[u])!=null;u++)if(t||b.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=new RegExp("^("+w+")(.*)$","i"),Jt=new RegExp("^("+w+")(?!px)[a-z%]+$","i"),Kt=new RegExp("^([+-])=("+w+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,s,o={},u=0;if(b.isArray(n)){s=qt(e),i=n.length;for(;u<i;u++)o[n[u]]=b.css(e,n[u],!1,s);return o}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=typeof e=="boolean";return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=b.camelCase(n),f=e.style;n=b.cssProps[a]||(b.cssProps[a]=tn(f,a)),u=b.cssHooks[n]||b.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!b.cssNumber[a]&&(r+="px"),!b.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=b.camelCase(n);return n=b.cssProps[a]||(b.cssProps[a]=tn(e.style,a)),u=b.cssHooks[n]||b.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),o==="normal"&&n in Yt&&(o=Yt[n]),r===""||r?(s=parseFloat(o),r===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!b.contains(e.ownerDocument,e)&&(a=b.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):s.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Xt.test(b.css(e,"display"))?b.swap(e,Gt,function(){return un(e,t,r)}):un(e,t,r)},set:function(e,n,r){var i=r&&qt(e);return sn(e,n,r?on(e,t,r,b.support.boxSizing&&b.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&b.trim(s.replace(Ut,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,t){if(t)return b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"])}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,t){b.cssHooks[t]={get:function(e,n){if(n)return n=Rt(e,t),Jt.test(n)?b(e).position()[t]+"px":n}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!b.support.reliableHiddenOffsets&&(e.style&&e.style.display||b.css(e,"display"))==="none"},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(b.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return n==null?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(e,t){t=b.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional);if(b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,gn,yn=b.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=b.fn.load,Ln={},An={},On="*/".concat("*");try{gn=o.href}catch(Mn){gn=s.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,r){if(typeof e!="string"&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),b.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,s){return b.isFunction(r)&&(s=s||i,i=r,r=t),b.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,b.ajaxSettings),t):Pn(b.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;if(w===2)return;w=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,r&&(E=Hn(c,x,r));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(b.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(b.etag[s]=S)),e===204?(l=!0,T="nocontent"):e===304?(l=!0,T="notmodified"):(l=Bn(c,E),T=l.state,g=l.data,y=l.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--b.active||b.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=b.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?b(h):b.event,d=b.Deferred(),v=b.Callbacks("once memory"),m=c.statusCode||{},g={},y={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(w===2){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return w===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return f&&f.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(E)||[""],c.crossDomain==null&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(r[1]==="http:"?80:443))==(mn[3]||(mn[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=b.param(c.data,c.traditional)),Dn(Ln,c,n,x);if(w===2)return x;a=c.global,a&&b.active++===0&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&w!==2){S="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);f=Dn(An,c,n,x);if(!f)N(-1,"No Transport");else{x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{w=1,f.send(g,N)}catch(T){if(!(w<2))throw T;N(-1,T)}}return x}return x.abort()},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(t,i){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||b.expando+"_"+yn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||b.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&b.isFunction(o)&&o(u[0]),u=o=t}),"script"});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=b.ajaxSettings.xhr(),b.support.cors=!!qn&&"withCredentials"in qn,qn=b.support.ajax=!!qn,qn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=b.noop,Un&&delete In[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Rn,Un&&(In||(In={},b(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=new RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Jn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(b.cssNumber[e]?"":"px");if(r!=="px"&&u){u=b.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,b.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.options.duration?this.pos=t=b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=b.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(e.elem.style[b.cssProps[e.prop]]!=null||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),s=b.speed(t,n,r),o=function(){var t=er(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=b.timers,o=r?r.length:0;n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&typeof e=="object"?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};r.duration=b.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;Xn=b.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Vn||(Vn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Vn),Vn=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");r==="static"&&(e.style.position="relative");var i=b(e),s=i.offset(),o=b.css(e,"top"),u=b.css(e,"left"),a=(r==="absolute"||r==="fixed")&&b.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},b.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return b.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s.documentElement;while(e&&!b.nodeName(e,"html")&&b.css(e,"position")==="static")e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,s){var o=sr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?b(o).scrollLeft():s,r?s:b(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return b.access(this,function(n,r,i){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?b.css(n,r,u):b.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=b,typeof pen.define=="function"&&pen.define.amd&&pen.define.amd.jQuery&&pen.define("jquery",[],function(){return b})}(window),pen.define("cdf/lib/jQuery/jquery",function(){}),function(e,t,n){function i(n){var i=t.console;r[n]||(r[n]=!0,e.migrateWarnings.push(n),i&&i.warn&&!e.migrateMute&&(i.warn("JQMIGRATE: "+n),e.migrateTrace&&i.trace&&i.trace()))}function s(t,n,r,s){if(Object.defineProperty)try{Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return i(s),r},set:function(e){i(s),r=e}});return}catch(o){}e._definePropertyBroken=!0,t[n]=r}var r={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===n&&(e.migrateTrace=!0),e.migrateReset=function(){r={},e.migrateWarnings.length=0},document.compatMode==="BackCompat"&&i("jQuery is not compatible with Quirks Mode");var o=e("<input/>",{size:1}).attr("size")&&e.attrFn,u=e.attr,a=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},f=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,c=/^[238]$/,h=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,p=/^(?:checked|selected)$/i;s(e,"attrFn",o||{},"jQuery.attrFn is deprecated"),e.attr=function(t,r,s,a){var f=r.toLowerCase(),d=t&&t.nodeType;if(a){u.length<4&&i("jQuery.fn.attr( props, pass ) is deprecated");if(t&&!c.test(d)&&(o?r in o:e.isFunction(e.fn[r])))return e(t)[r](s)}return r==="type"&&s!==n&&l.test(t.nodeName)&&t.parentNode&&i("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[f]&&h.test(f)&&(e.attrHooks[f]={get:function(t,r){var i,s=e.prop(t,r);return s===!0||typeof s!="boolean"&&(i=t.getAttributeNode(r))&&i.nodeValue!==!1?r.toLowerCase():n},set:function(t,n,r){var i;return n===!1?e.removeAttr(t,r):(i=e.propFix[r]||r,i in t&&(t[i]=!0),t.setAttribute(r,r.toLowerCase())),r}},p.test(f)&&i("jQuery.fn.attr('"+f+"') may use property instead of attribute")),u.call(e,t,r,s)},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return n==="button"?a.apply(this,arguments):(n!=="input"&&n!=="option"&&i("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var n=(e.nodeName||"").toLowerCase();if(n==="button")return f.apply(this,arguments);n!=="input"&&n!=="option"&&i("jQuery.fn.attr('value', val) no longer sets properties"),e.value=t}};var d,v,m=e.fn.init,g=e.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,n,r){var s;if(t&&typeof t=="string"&&!e.isPlainObject(n)&&(s=y.exec(e.trim(t)))&&s[0]){t.charAt(0)!=="<"&&i("$(html) HTML strings must start with '<' character"),s[3]&&i("$(html) HTML text after last tag is ignored"),s[0].charAt(0)==="#"&&(i("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&(n=n.context);if(e.parseHTML)return m.call(this,e.parseHTML(s[2],n,!0),n,r)}return m.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return!e&&e!==null?(i("jQuery.parseJSON requires a valid JSON string"),null):g.apply(this,arguments)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(d=e.uaMatch(navigator.userAgent),v={},d.browser&&(v[d.browser]=!0,v.version=d.version),v.chrome?v.webkit=!0:v.webkit&&(v.safari=!0),e.browser=v),s(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(i,s){return s&&s instanceof e&&!(s instanceof t)&&(s=t(s)),e.fn.init.call(this,i,s,n)},t.fn.init.prototype=t.fn;var n=t(document);return i("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var b=e.fn.data;e.fn.data=function(t){var r,s,o=this[0];if(o&&t==="events"&&arguments.length===1){r=e.data(o,t),s=e._data(o,t);if((r===n||r===s)&&s!==n)return i("Use of jQuery.fn.data('events') is deprecated"),s}return b.apply(this,arguments)};var w=/\/(java|ecma)script/i,E=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return i("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),E.apply(this,arguments)},e.clean||(e.clean=function(t,n,r,s){n=n||document,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,i("jQuery.clean() is deprecated");var o,u,a,f,l=[];e.merge(l,e.buildFragment(t,n).childNodes);if(r){a=function(e){if(!e.type||w.test(e.type))return s?s.push(e.parentNode?e.parentNode.removeChild(e):e):r.appendChild(e)};for(o=0;(u=l[o])!=null;o++)if(!e.nodeName(u,"script")||!a(u))r.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(f=e.grep(e.merge([],u.getElementsByTagName("script")),a),l.splice.apply(l,[o+1,0].concat(f)),o+=f.length)}return l});var S=e.event.add,x=e.event.remove,T=e.event.trigger,N=e.fn.toggle,C=e.fn.live,k=e.fn.die,L="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",A=new RegExp("\\b(?:"+L+")\\b"),O=/(?:^|\s)hover(\.\S+|)\b/,M=function(t){return typeof t!="string"||e.event.special.hover?t:(O.test(t)&&i("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(O,"mouseenter$1 mouseleave$1"))};e.event.props&&e.event.props[0]!=="attrChange"&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&s(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,r,s){e!==document&&A.test(t)&&i("AJAX events should be attached to document: "+t),S.call(this,e,M(t||""),n,r,s)},e.event.remove=function(e,t,n,r,i){x.call(this,e,M(t)||"",n,r,i)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return i("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);i("jQuery.fn.toggle(handler, handler...) is deprecated");var r=arguments,s=t.guid||e.guid++,o=0,u=function(n){var i=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,i+1),n.preventDefault(),r[i].apply(this,arguments)||!1};u.guid=s;while(o<r.length)r[o++].guid=s;return this.click(u)},e.fn.live=function(t,n,r){return i("jQuery.fn.live() is deprecated"),C?C.apply(this,arguments):(e(this.context).on(t,this.selector,n,r),this)},e.fn.die=function(t,n){return i("jQuery.fn.die() is deprecated"),k?k.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,r){return!n&&!A.test(e)&&i("Global events are undocumented and deprecated"),T.call(this,e,t,n||document,r)},e.each(L.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window),pen.define("cdf/lib/jquery",["cdf/lib/jQuery/jquery"],function(e){return function(){var t,n;return t||e.$}}(this)),pen.define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]===""&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),pen.define("amd",["module","text"],function(e,t){function i(e,t,n){var r=t.url,i=t.exports,o=t.prescript,u=t.postscript;return e="define("+s(t)+"  var define = undefined;\n"+(o?"  "+o+"\n":"")+e+"\n"+(u?"  "+u+"\n":"")+(i?"  return "+i+";\n":"")+"});",n||(e+="\n//# sourceURL="+r),e}function s(e){var t=e.deps;if(t){var n=[],r=[],i=[];for(var s in t)if(t.hasOwnProperty(s)){var o=t[s];o?(r.push(o),n.push(s)):i.push(s)}for(var u=0;u<i.length;u++)n.push(i[u]);if(n.length)return'["'+n.join('", "')+'"], function('+r.join(", ")+") {\n"}return"function() {\n"}var n=e.config(),r={};return{load:function(e,s,o,u){var a=s.toUrl(e+".js"),f=n.shim&&n.shim[e]||{};f.id=e,f.url=a,t.get(a,function(n){n=i(n,f,u.isBuild),u.isBuild&&(r[e]=n),o.fromText(n)},o.error)},write:function(){}}}),function(e){function nt(e,t,n){switch(arguments.length){case 2:return e!=null?e:t;case 3:return e!=null?e:t!=null?t:n;default:throw new Error("Implement me")}}function rt(e,t){return o.call(e,t)}function it(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function st(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function ot(e,t){var n=!0;return vt(function(){return n&&(st(e),n=!1),t.apply(this,arguments)},t)}function ut(e,t){Z[e]||(st(t),Z[e]=!0)}function at(e,t){return function(n){return yt(e.call(this,n),t)}}function ft(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function lt(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)}function ct(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function ht(){}function pt(e,n){n!==!1&&Pt(e),mt(this,e),this._d=new Date(+e._d),tt===!1&&(tt=!0,t.updateOffset(this),tt=!1)}function dt(e){var n=kt(e),r=n.year||0,i=n.quarter||0,s=n.month||0,o=n.week||0,u=n.day||0,a=n.hour||0,f=n.minute||0,l=n.second||0,c=n.millisecond||0;this._milliseconds=+c+l*1e3+f*6e4+a*36e5,this._days=+u+o*7,this._months=+s+i*3+r*12,this._data={},this._locale=t.localeData(),this._bubble()}function vt(e,t){for(var n in t)rt(t,n)&&(e[n]=t[n]);return rt(t,"toString")&&(e.toString=t.toString),rt(t,"valueOf")&&(e.valueOf=t.valueOf),e}function mt(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=t._pf),typeof t._locale!="undefined"&&(e._locale=t._locale);if(m.length>0)for(n in m)r=m[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function gt(e){return e<0?Math.ceil(e):Math.floor(e)}function yt(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function bt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function wt(e,t){var n;return t=It(t,e),e.isBefore(t)?n=bt(e,t):(n=bt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Et(e,n){return function(r,i){var s,o;return i!==null&&!isNaN(+i)&&(ut(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period)."),o=r,r=i,i=o),r=typeof r=="string"?+r:r,s=t.duration(r,i),St(this,s,e),this}}function St(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&gn(e,"Date",mn(e,"Date")+o*r),u&&vn(e,mn(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function xt(e){return Object.prototype.toString.call(e)==="[object Array]"}function Tt(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function Nt(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&At(e[o])!==At(t[o]))&&s++;return s+i}function Ct(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=V[e]||$[t]||t}return e}function kt(e){var t={},n,r;for(r in e)rt(e,r)&&(n=Ct(r),n&&(t[n]=e[r]));return t}function Lt(n){var r,i;if(n.indexOf("week")===0)r=7,i="day";else{if(n.indexOf("month")!==0)return;r=12,i="month"}t[n]=function(s,o){var u,a,f=t._locale[n],l=[];typeof s=="number"&&(o=s,s=e),a=function(e){var n=t().utc().set(i,e);return f.call(t._locale,n,s||"")};if(o!=null)return a(o);for(u=0;u<r;u++)l.push(a(u));return l}}function At(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function Ot(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Mt(e,n,r){return cn(t([e,11,31+n-r]),n,r).week}function _t(e){return Dt(e)?366:365}function Dt(e){return e%4===0&&e%100!==0||e%400===0}function Pt(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[f]<0||e._a[f]>11?f:e._a[l]<1||e._a[l]>Ot(e._a[a],e._a[f])?l:e._a[c]<0||e._a[c]>24||e._a[c]===24&&(e._a[h]!==0||e._a[p]!==0||e._a[d]!==0)?c:e._a[h]<0||e._a[h]>59?h:e._a[p]<0||e._a[p]>59?p:e._a[d]<0||e._a[d]>999?d:-1,e._pf._overflowDayOfYear&&(t<a||t>l)&&(t=l),e._pf.overflow=t)}function Ht(t){return t._isValid==null&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&t._pf.charsLeftOver===0&&t._pf.unusedTokens.length===0&&t._pf.bigHour===e)),t._isValid}function Bt(e){return e?e.toLowerCase().replace("_","-"):e}function jt(e){var t=0,n,r,i,s;while(t<e.length){s=Bt(e[t]).split("-"),n=s.length,r=Bt(e[t+1]),r=r?r.split("-"):null;while(n>0){i=Ft(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&Nt(s,r,!0)>=n-1)break;n--}t++}return null}function Ft(e){var n=null;if(!v[e]&&g)try{n=t.locale(),require("./locale/"+e),t.locale(n)}catch(r){}return v[e]}function It(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(t.isMoment(e)||Tt(e)?+e:+t(e))- +r,r._d.setTime(+r._d+i),t.updateOffset(r,!1),r):t(e).local()}function qt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Rt(e){var t=e.match(E),n,r;for(n=0,r=t.length;n<r;n++)Y[t[n]]?t[n]=Y[t[n]]:t[n]=qt(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function Ut(e,t){return e.isValid()?(t=zt(t,e.localeData()),J[t]||(J[t]=Rt(t)),J[t](e)):e.localeData().invalidDate()}function zt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;S.lastIndex=0;while(n>=0&&S.test(e))e=e.replace(S,r),S.lastIndex=0,n-=1;return e}function Wt(e,t){var n,r=t._strict;switch(e){case"Q":return D;case"DDDD":return H;case"YYYY":case"GGGG":case"gggg":return r?B:N;case"Y":case"G":case"g":return F;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?j:C;case"S":if(r)return D;case"SS":if(r)return P;case"SSS":if(r)return H;case"DDD":return T;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return L;case"a":case"A":return t._locale._meridiemParse;case"x":return M;case"X":return _;case"Z":case"ZZ":return A;case"T":return O;case"SSSS":return k;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?P:x;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return x;case"Do":return r?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(Zt(Yt(e.replace("\\","")),"i")),n}}function Xt(e){e=e||"";var t=e.match(A)||[],n=t[t.length-1]||[],r=(n+"").match(z)||["-",0,0],i=+(r[1]*60)+At(r[2]);return r[0]==="+"?i:-i}function Vt(e,n,r){var i,s=r._a;switch(e){case"Q":n!=null&&(s[f]=(At(n)-1)*3);break;case"M":case"MM":n!=null&&(s[f]=At(n)-1);break;case"MMM":case"MMMM":i=r._locale.monthsParse(n,e,r._strict),i!=null?s[f]=i:r._pf.invalidMonth=n;break;case"D":case"DD":n!=null&&(s[l]=At(n));break;case"Do":n!=null&&(s[l]=At(parseInt(n.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":n!=null&&(r._dayOfYear=At(n));break;case"YY":s[a]=t.parseTwoDigitYear(n);break;case"YYYY":case"YYYYY":case"YYYYYY":s[a]=At(n);break;case"a":case"A":r._meridiem=n;break;case"h":case"hh":r._pf.bigHour=!0;case"H":case"HH":s[c]=At(n);break;case"m":case"mm":s[h]=At(n);break;case"s":case"ss":s[p]=At(n);break;case"S":case"SS":case"SSS":case"SSSS":s[d]=At(("0."+n)*1e3);break;case"x":r._d=new Date(At(n));break;case"X":r._d=new Date(parseFloat(n)*1e3);break;case"Z":case"ZZ":r._useUTC=!0,r._tzm=Xt(n);break;case"dd":case"ddd":case"dddd":i=r._locale.weekdaysParse(n),i!=null?(r._w=r._w||{},r._w.d=i):r._pf.invalidWeekday=n;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),n&&(r._w=r._w||{},r._w[e]=At(n));break;case"gg":case"GG":r._w=r._w||{},r._w[e]=t.parseTwoDigitYear(n)}}function $t(e){var n,r,i,s,o,u,f;n=e._w,n.GG!=null||n.W!=null||n.E!=null?(o=1,u=4,r=nt(n.GG,e._a[a],cn(t(),1,4).year),i=nt(n.W,1),s=nt(n.E,1)):(o=e._locale._week.dow,u=e._locale._week.doy,r=nt(n.gg,e._a[a],cn(t(),o,u).year),i=nt(n.w,1),n.d!=null?(s=n.d,s<o&&++i):n.e!=null?s=n.e+o:s=o),f=hn(r,i,s,u,o),e._a[a]=f.year,e._dayOfYear=f.dayOfYear}function Jt(e){var t,n,r=[],i,s;if(e._d)return;i=Qt(e),e._w&&e._a[l]==null&&e._a[f]==null&&$t(e),e._dayOfYear&&(s=nt(e._a[a],i[a]),e._dayOfYear>_t(s)&&(e._pf._overflowDayOfYear=!0),n=un(s,0,e._dayOfYear),e._a[f]=n.getUTCMonth(),e._a[l]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[c]===24&&e._a[h]===0&&e._a[p]===0&&e._a[d]===0&&(e._nextDay=!0,e._a[c]=0),e._d=(e._useUTC?un:on).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[c]=24)}function Kt(e){var t;if(e._d)return;t=kt(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],Jt(e)}function Qt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Gt(n){if(n._f===t.ISO_8601){tn(n);return}n._a=[],n._pf.empty=!0;var r=""+n._i,i,s,o,u,a,f=r.length,l=0;o=zt(n._f,n._locale).match(E)||[];for(i=0;i<o.length;i++)u=o[i],s=(r.match(Wt(u,n))||[])[0],s&&(a=r.substr(0,r.indexOf(s)),a.length>0&&n._pf.unusedInput.push(a),r=r.slice(r.indexOf(s)+s.length),l+=s.length),Y[u]?(s?n._pf.empty=!1:n._pf.unusedTokens.push(u),Vt(u,s,n)):n._strict&&!s&&n._pf.unusedTokens.push(u);n._pf.charsLeftOver=f-l,r.length>0&&n._pf.unusedInput.push(r),n._pf.bigHour===!0&&n._a[c]<=12&&(n._pf.bigHour=e),n._a[c]=ct(n._locale,n._a[c],n._meridiem),Jt(n),Pt(n)}function Yt(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Zt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function en(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=mt({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._pf=it(),t._f=e._f[i],Gt(t);if(!Ht(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}vt(e,n||t)}function tn(e){var t,n,r=e._i,i=I.exec(r);if(i){e._pf.iso=!0;for(t=0,n=R.length;t<n;t++)if(R[t][1].exec(r)){e._f=R[t][0]+(i[6]||" ");break}for(t=0,n=U.length;t<n;t++)if(U[t][1].exec(r)){e._f+=U[t][0];break}r.match(A)&&(e._f+="Z"),Gt(e)}else e._isValid=!1}function nn(e){tn(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function rn(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function sn(n){var r=n._i,i;r===e?n._d=new Date:Tt(r)?n._d=new Date(+r):(i=y.exec(r))!==null?n._d=new Date(+i[1]):typeof r=="string"?nn(n):xt(r)?(n._a=rn(r.slice(0),function(e){return parseInt(e,10)}),Jt(n)):typeof r=="object"?Kt(n):typeof r=="number"?n._d=new Date(r):t.createFromInputFallback(n)}function on(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function un(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function an(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function fn(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ln(e,n,r){var i=t.duration(e).abs(),o=s(i.as("s")),u=s(i.as("m")),a=s(i.as("h")),f=s(i.as("d")),l=s(i.as("M")),c=s(i.as("y")),h=o<K.s&&["s",o]||u===1&&["m"]||u<K.m&&["mm",u]||a===1&&["h"]||a<K.h&&["hh",a]||f===1&&["d"]||f<K.d&&["dd",f]||l===1&&["M"]||l<K.M&&["MM",l]||c===1&&["y"]||["yy",c];return h[2]=n,h[3]=+e>0,h[4]=r,fn.apply({},h)}function cn(e,n,r){var i=r-n,s=r-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=t(e).add(s,"d"),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function hn(e,t,n,r,i){var s=un(e,0,1).getUTCDay(),o,u;return s=s===0?7:s,n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:_t(e-1)+u}}function pn(n){var r=n._i,i=n._f,s;return n._locale=n._locale||t.localeData(n._l),r===null||i===e&&r===""?t.invalid({nullInput:!0}):(typeof r=="string"&&(n._i=r=n._locale.preparse(r)),t.isMoment(r)?new pt(r,!0):(i?xt(i)?en(n):Gt(n):sn(n),s=new pt(n),s._nextDay&&(s.add(1,"d"),s._nextDay=e),s))}function dn(e,n){var r,i;n.length===1&&xt(n[0])&&(n=n[0]);if(!n.length)return t();r=n[0];for(i=1;i<n.length;++i)n[i][e](r)&&(r=n[i]);return r}function vn(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),Ot(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function mn(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function gn(e,t,n){return t==="Month"?vn(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function yn(e,n){return function(r){return r!=null?(gn(this,e,r),t.updateOffset(this,n),this):mn(this,e)}}function bn(e){return e*400/146097}function wn(e){return e*146097/400}function En(e){t.duration.fn[e]=function(){return this._data[e]}}function Sn(e){if(typeof ender!="undefined")return;i=r.moment,e?r.moment=ot("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",t):r.moment=t}var t,n="2.9.0",r=typeof global=="undefined"||typeof window!="undefined"&&window!==global.window?this:global,i,s=Math.round,o=Object.prototype.hasOwnProperty,u,a=0,f=1,l=2,c=3,h=4,p=5,d=6,v={},m=[],g=typeof module!="undefined"&&module&&module.exports,y=/^\/?Date\((\-?\d+)/i,b=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,w=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,E=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,S=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,x=/\d\d?/,T=/\d{1,3}/,N=/\d{1,4}/,C=/[+\-]?\d{1,6}/,k=/\d+/,L=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,A=/Z|[\+\-]\d\d:?\d\d/gi,O=/T/i,M=/[\+\-]?\d+/,_=/[\+\-]?\d+(\.\d{1,3})?/,D=/\d/,P=/\d\d/,H=/\d{3}/,B=/\d{4}/,j=/[+-]?\d{6}/,F=/[+-]?\d+/,I=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,q="YYYY-MM-DDTHH:mm:ssZ",R=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],U=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],z=/([\+\-]|\d\d)/gi,W="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),X={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},V={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},$={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},J={},K={s:45,m:45,h:22,d:26,M:11},Q="DDD w W M D d".split(" "),G="M D H h m s w W".split(" "),Y={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return yt(this.year()%100,2)},YYYY:function(){return yt(this.year(),4)},YYYYY:function(){return yt(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+yt(Math.abs(e),6)},gg:function(){return yt(this.weekYear()%100,2)},gggg:function(){return yt(this.weekYear(),4)},ggggg:function(){return yt(this.weekYear(),5)},GG:function(){return yt(this.isoWeekYear()%100,2)},GGGG:function(){return yt(this.isoWeekYear(),4)},GGGGG:function(){return yt(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return At(this.milliseconds()/100)},SS:function(){return yt(At(this.milliseconds()/10),2)},SSS:function(){return yt(this.milliseconds(),3)},SSSS:function(){return yt(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+yt(At(e/60),2)+":"+yt(At(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+yt(At(e/60),2)+yt(At(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Z={},et=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],tt=!1;while(Q.length)u=Q.pop(),Y[u+"o"]=ft(Y[u],u);while(G.length)u=G.pop(),Y[u+u]=at(Y[u],2);Y.DDDD=at(Y.DDD,3),vt(ht.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,n,r){var i,s,o;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(i=0;i<12;i++){s=t.utc([2e3,i]),r&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!r&&!this._monthsParse[i]&&(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i"));if(r&&n==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(r&&n==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!r&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var n,r,i;this._weekdaysParse||(this._weekdaysParse=[]);for(n=0;n<7;n++){this._weekdaysParse[n]||(r=t([2e3,1]).day(n),i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[n].test(e))return n}},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return typeof r=="function"?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return cn(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),t=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=r,s._strict=i,s._isUTC=!1,s._pf=it(),pn(s)},t.suppressDeprecationWarnings=!1,t.createFromInputFallback=ot("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.min=function(){var e=[].slice.call(arguments,0);return dn("isBefore",e)},t.max=function(){var e=[].slice.call(arguments,0);return dn("isAfter",e)},t.utc=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=t,s._f=n,s._strict=i,s._pf=it(),pn(s).utc()},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=e,i=null,s,o,u,a;return t.isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(r={},n?r[n]=e:r.milliseconds=e):(i=b.exec(e))?(s=i[1]==="-"?-1:1,r={y:0,d:At(i[l])*s,h:At(i[c])*s,m:At(i[h])*s,s:At(i[p])*s,ms:At(i[d])*s}):(i=w.exec(e))?(s=i[1]==="-"?-1:1,u=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s},r={y:u(i[2]),M:u(i[3]),d:u(i[4]),h:u(i[5]),m:u(i[6]),s:u(i[7]),w:u(i[8])}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(a=wt(t(r.from),t(r.to)),r={},r.ms=a.milliseconds,r.M=a.months),o=new dt(r),t.isDuration(e)&&rt(e,"_locale")&&(o._locale=e._locale),o},t.version=n,t.defaultFormat=q,t.ISO_8601=function(){},t.momentProperties=m,t.updateOffset=function(){},t.relativeTimeThreshold=function(t,n){return K[t]===e?!1:n===e?K[t]:(K[t]=n,!0)},t.lang=ot("moment.lang is deprecated. Use moment.locale instead.",function(e,n){return t.locale(e,n)}),t.locale=function(e,n){var r;return e&&(typeof n!="undefined"?r=t.defineLocale(e,n):r=t.localeData(e),r&&(t.duration._locale=t._locale=r)),t._locale._abbr},t.defineLocale=function(e,n){return n!==null?(n.abbr=e,v[e]||(v[e]=new ht),v[e].set(n),t.locale(e),v[e]):(delete v[e],null)},t.langData=ot("moment.langData is deprecated. Use moment.localeData instead.",function(e){return t.localeData(e)}),t.localeData=function(e){var n;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return t._locale;if(!xt(e)){n=Ft(e);if(n)return n;e=[e]}return jt(e)},t.isMoment=function(e){return e instanceof pt||e!=null&&rt(e,"_isAMomentObject")},t.isDuration=function(e){return e instanceof dt};for(u=et.length-1;u>=0;--u)Lt(et[u]);t.normalizeUnits=function(e){return Ct(e)},t.invalid=function(e){var n=t.utc(NaN);return e!=null?vt(n._pf,e):n._pf.userInvalidated=!0,n},t.parseZone=function(){return t.apply(null,arguments).parseZone()},t.parseTwoDigitYear=function(e){return At(e)+(At(e)>68?1900:2e3)},t.isDate=Tt,vt(t.fn=pt.prototype,{clone:function(){return t(this)},valueOf:function(){return+this._d-(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=t(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():Ut(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Ut(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return Ht(this)},isDSTShifted:function(){return this._a?this.isValid()&&Nt(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray())>0:!1},parsingFlags:function(){return vt({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var n=Ut(this,e||t.defaultFormat);return this.localeData().postformat(n)},add:Et(1,"add"),subtract:Et(-1,"subtract"),diff:function(e,t,n){var r=It(e,this),i=(r.utcOffset()-this.utcOffset())*6e4,s,o,u,a;return t=Ct(t),t==="year"||t==="month"||t==="quarter"?(u=lt(this,r),t==="quarter"?u/=3:t==="year"&&(u/=12)):(o=this-r,u=t==="second"?o/1e3:t==="minute"?o/6e4:t==="hour"?o/36e5:t==="day"?(o-i)/864e5:t==="week"?(o-i)/6048e5:o),n?u:gt(u)},from:function(e,n){return t.duration({to:this,from:e}).locale(this.locale()).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(e){var n=e||t(),r=It(n,this).startOf("day"),i=this.diff(r,"days",!0),s=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this,t(n)))},isLeapYear:function(){return Dt(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=an(e,this.localeData()),this.add(e-t,"d")):t},month:yn("Month",!0),startOf:function(e){e=Ct(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this},endOf:function(t){return t=Ct(t),t===e||t==="millisecond"?this:this.startOf(t).add(1,t==="isoWeek"?"week":t).subtract(1,"ms")},isAfter:function(e,n){var r;return n=Ct(typeof n!="undefined"?n:"millisecond"),n==="millisecond"?(e=t.isMoment(e)?e:t(e),+this>+e):(r=t.isMoment(e)?+e:+t(e),r<+this.clone().startOf(n))},isBefore:function(e,n){var r;return n=Ct(typeof n!="undefined"?n:"millisecond"),n==="millisecond"?(e=t.isMoment(e)?e:t(e),+this<+e):(r=t.isMoment(e)?+e:+t(e),+this.clone().endOf(n)<r)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,n){var r;return n=Ct(n||"millisecond"),n==="millisecond"?(e=t.isMoment(e)?e:t(e),+this===+e):(r=+t(e),+this.clone().startOf(n)<=r&&r<=+this.clone().endOf(n))},min:ot("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=t.apply(null,arguments),e<this?this:e}),max:ot("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=t.apply(null,arguments),e>this?this:e}),zone:ot("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,n){var r=this._offset||0,i;return e!=null?(typeof e=="string"&&(e=Xt(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?St(this,t.duration(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&this._offset===0},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(Xt(this._i)),this},hasAlignedHourOffset:function(e){return e?e=t(e).utcOffset():e=0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return Ot(this.year(),this.month())},dayOfYear:function(e){var n=s((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return e==null?n:this.add(e-n,"d")},quarter:function(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)},weekYear:function(e){var t=cn(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=cn(this,1,4).year;return e==null?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")},isoWeek:function(e){var t=cn(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return Mt(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return Mt(this.year(),e.dow,e.doy)},get:function(e){return e=Ct(e),this[e]()},set:function(e,t){var n;if(typeof e=="object")for(n in e)this.set(n,e[n]);else e=Ct(e),typeof this[e]=="function"&&this[e](t);return this},locale:function(n){var r;return n===e?this._locale._abbr:(r=t.localeData(n),r!=null&&(this._locale=r),this)},lang:ot("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return-Math.round(this._d.getTimezoneOffset()/15)*15}}),t.fn.millisecond=t.fn.milliseconds=yn("Milliseconds",!1),t.fn.second=t.fn.seconds=yn("Seconds",!1),t.fn.minute=t.fn.minutes=yn("Minutes",!1),t.fn.hour=t.fn.hours=yn("Hours",!0),t.fn.date=yn("Date",!0),t.fn.dates=ot("dates accessor is deprecated. Use date instead.",yn("Date",!0)),t.fn.year=yn("FullYear",!0),t.fn.years=ot("years accessor is deprecated. Use year instead.",yn("FullYear",!0)),t.fn.days=t.fn.day,t.fn.months=t.fn.month,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.fn.quarters=t.fn.quarter,t.fn.toJSON=t.fn.toISOString,t.fn.isUTC=t.fn.isUtc,vt(t.duration.fn=dt.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u=0;r.milliseconds=e%1e3,i=gt(e/1e3),r.seconds=i%60,s=gt(i/60),r.minutes=s%60,o=gt(s/60),r.hours=o%24,t+=gt(o/24),u=gt(bn(t)),t-=gt(wn(u)),n+=gt(t/30),t%=30,u+=gt(n/12),n%=12,r.days=t,r.months=n,r.years=u},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return gt(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+At(this._months/12)*31536e6},humanize:function(e){var t=ln(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,n){var r=t.duration(e,n);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(e,n){var r=t.duration(e,n);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(e){return e=Ct(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;e=Ct(e);if(e==="month"||e==="year")return t=this._days+this._milliseconds/864e5,n=this._months+bn(t)*12,e==="month"?n:n/12;t=this._days+Math.round(wn(this._months/12));switch(e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return t*24+this._milliseconds/36e5;case"minute":return t*24*60+this._milliseconds/6e4;case"second":return t*24*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(t*24*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:t.fn.lang,locale:t.fn.locale,toIsoString:ot("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),t.duration.fn.toString=t.duration.fn.toISOString;for(u in X)rt(X,u)&&En(u.toLowerCase());t.duration.fn.asMilliseconds=function(){return this.as("ms")},t.duration.fn.asSeconds=function(){return this.as("s")},t.duration.fn.asMinutes=function(){return this.as("m")},t.duration.fn.asHours=function(){return this.as("h")},t.duration.fn.asDays=function(){return this.as("d")},t.duration.fn.asWeeks=function(){return this.as("weeks")},t.duration.fn.asMonths=function(){return this.as("M")},t.duration.fn.asYears=function(){return this.as("y")},t.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=At(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),g?module.exports=t:typeof pen.define=="function"&&pen.define.amd?(pen.define("cdf/lib/moment",["require","exports","module"],function(e,n,s){return s.config&&s.config()&&s.config().noGlobal===!0&&(r.moment=i),t}),Sn(!0)):Sn()}.call(this),pen.define("cdf/lib/CCC/def",[],function(){function e(n,r,i){if(n&&!(n instanceof e.QualifiedName)){var s=typeof n;if("object"===s){for(var o in n)t(o,n[o],r);return e}if("array"===s){for(var o in n)t(n[o],r);return e}}return t(n,r,i),r}function t(t,n,r){t=e.qualName(t),r=e.space(t.namespace,r),t.name&&(r[t.name]=n,n instanceof Object&&e.qualNameOf(n,t))}function n(t){e.log=e.logger("[DEF]"),ct&&ct.forEach(function(e){e(t)})}function r(){return e.debug}function i(e,t){e=s(e,t);var n=f("log",e);return n.log=n,n.level=r,pt.forEach(function(t){n[t]=f(dt[t]||t,e)}),n}function s(t,n){return t&&(e.fun.is(t)?t.call(n):t)}function o(t,n,o){var u=function(r){if(e.debug>1){var u=t[n||"log"]=i(o,t);u[r||"log"].apply(u,st.call(arguments,1))}else"error"===r&&a.apply(null,e.array.append([s(o,t)],arguments,1))},f=u.bind("log");return f.log=f,f.level=r,pt.forEach(function(e){f[e]=u.bind(e)}),f}function u(){function e(){}return e.log=e,e.level=r,pt.forEach(function(t){e[t]=e}),e}function a(t,n,r){throw n&&"object"==typeof n&&n.message&&(n=n.message),n=(t?t+": ":"")+e.nullyTo(n,"")+(r?" "+r:""),new Error(n)}function f(t,n){var r,i=console,s=i[t]||i.log;if(s){var o=n?n+": %s":"%s";if(e.fun.is(s))r=s.bind(i,o);else{var u=Function.prototype.apply;r=function(){u.call(s,i,e.array.append([o],arguments))}}}return r}function l(){function e(e){function t(){n=e}return t.toString=c,t}function t(e){if(void 0!==n)throw new Error("Access denied.");var t=(e(),n);return n=void 0,t}var n;return t.safe=e,t.property=h,t}function c(){return"SAFE"}function h(t,n){function r(n,r){return e.setNonEnum(n,t,s.safe(r)),r}function i(e){return s(e[t])}t||(t=vt(n));var s=this;return i.init=r,i.propertyName=t,i}function p(e){var t;e&&(e instanceof Array?(t=e,e=t.join(".")):t=e.split(".")),t&&t.length>1?(this.name=t.pop(),this.namespace=t.join(".")):(this.name=e||null,this.namespace=null)}function d(t,n){var r=n||gt;if(t){var i=t.split("."),s=i.length;if(s){var o,u=0;if(r===e.global){o=i[0];var a=e.getOwn(yt,o);a&&(r=a,u++)}for(;s>u;)o=i[u++],r=r[o]||(r[o]={})}}return r}function v(e){return function(t){return m(t,st.call(arguments,1),e)}}function m(t,n,r){for(var i,s=0,o=n.length;o>s;)if(i=n[s++])i=e.object.as(i.prototype||i),i&&g(t,i,r);return t}function g(e,t,n){for(var r in t)y(e,r,t[r],n)}function y(t,n,r,i){if(void 0!==r){var s,o=e.object.asNative(t[n]);o?(s=e.object.as(r),s?(rt.call(t,n)||(t[n]=o=Object.create(o)),g(o,s,i)):t[n]=r):(s=e.object.asNative(r),s&&(r=(i||Object.create)(s)),t[n]=r)}}function b(t){var n,r;for(n in t)(r=e.object.asNative(t[n]))&&b(t[n]=Object.create(r))}function w(t,n){if(n){var r=t.configure;e.fun.is(r)?r.call(t,n):w.generic(t,n)}return t}function E(t,n){function r(t){var r={};i.push(r);for(var s in t)if(s){var o=t[s];if(void 0===o)continue;var u,a,f,l,c=r,h=s.indexOf("."),p=null;if(h>=0){n?(p=[s.substr(0,h)],s=s.substr(h+1)):(p=s.split("."),s=p.pop()),u=p.length,a=-1;for(;++a<u;)if(f=p[a]){l=c[f];if(void 0===l)c[f]=l={};else if(null===l||!e.object.is(l)||l.constructor!==Object)i.push(r=l={}),a=-1;c=l}}var d=c[s];if(d!==o){if(void 0!==d){if(!S(o)||!S(d))continue;i.push(r=c={});if(p){a=-1;for(;++a<u;)(f=p[a])&&(c=c[f]={})}}c[s]=o}}}if(!t)return[];var i=[];return e.array.each(t,r),i}function S(t){return t&&e.object.is(t)&&!x(t)}function x(e){return e.constructor!==Object&&!(e instanceof Array)}function T(t,n){if(n){var r=n.prototype,i=t.prototype=Object.create(r);e.setNonEnum(i,"constructor",t),"__proto__"in i||e.setNonEnum(i,"__proto__",r)}return t}function N(t,n,r){function i(){var e=r.base;r.base=n;try{return t.apply(this,arguments)}finally{r.base=e}}function s(){var e=L(this),r=e.base;e.base=n;try{return t.apply(this,arguments)}finally{e.base=r}}return t?!n||n===t||!C(t)?t:(k(r),e.fun.wraps(r?i:s,t)):n}function C(e){return Et.test(e)}function k(t){if(t===nt)throw e.error.invalidArgument("proto","Cannot change Object.prototype.");return t}function L(t){k(e.protoOf(t))}function A(t,n){var r=e.fun.as(t[n]);return r===nt[n]?null:r}function O(t,n,r){t=ft(t);var i=e.protoOf(t),s=e.rootProtoOf(t),o=e.get(r,"enumerable",!0);return e.array.each(n,function(n){(n=ft(n))&&(at?e.ownKeys(n).forEach(function(e){H(t,e,at(n,e),i,s,o)}):e.eachOwn(n,function(e,n){D(t,n,e,i,s,o)}))}),e}function M(t,n,r,i){t=ft(t);var s=e.get(i,"enumerable",!0);return D(t,n,r,e.protoOf(t),e.rootProtoOf(t),s)}function _(e){return"base"!==e&&"constructor"!==e}function D(t,n,r,i,s,o){return void 0!==r&&i[n]!==r&&_(n)&&P(t,n,r,s,o),e}function P(t,n,r,i,s){var o;r&&(o=e.fun.as(r))?(r=e.overrides(o,A(t,n),i),s?t[n]=r:e.setNonEnum(t,n,r)):y(t,n,r,e.identity)}function H(t,n,r,i,s,o){var u;if(_(n))if(r.get||r.set){var a=B(i,n);a&&((r.get||a.get)&&(r.get=e.overrides(r.get,a.get,s)),(r.set||a.set)&&(r.set=e.overrides(r.set,a.set,s))),o||(r.enumerable=!1),ut(t,n,r)}else void 0!==(u=r.value)&&P(t,n,u,s,o);return e}function B(t,n){var r;if(n in t)for(;t=e.protoOf(t);)if(r=at(t,n))return r}function j(t,n){this.baseType=n||null;var r=this.constructor;if(r.Ctor)throw e.error.operationInvalid("MetaType already has an associated type constructor.");if(t&&t.Meta)throw e.error.argumentInvalid("TypeCtor","Specified type constructor already has an associated MetaType.");this.external=!!t,this.rootType=n?n.rootType:this,this._init=n?n._init:null,this._post=n?n._post:null;var i=n&&n._mixins;this._mixins=i?i.slice():null,this.steps=void 0,t=this._initConstructor(t||this._createConstructor()),this.Ctor=r.Ctor=t}function F(t){return e.fun.is(t)&&t.meta instanceof j}function I(t,n){e.methods(this,t,n);var r=this.Ctor;return r&&q.call(this,r,t),this}function q(t,n){var r=this.prototype;e.array.each(n,function(n){e.each(ft(n),function(n,i){e.isPropPrivate(i)||(n=r[i],e.fun.is(n)?R(t,i,n):t[i]=n)})})}function R(t,n,r){function i(){var e=this.meta,t=r.apply(e,arguments);return t===e?this:t}t[n]=e.fun.wraps(i,r)}function U(t){var n=e.classOf(this);return n(t,this)}function z(t,n){function r(n,r){if(void 0!==r){var o=n[t];if(null===r)n.___proto&&rt.call(n,t)&&(delete n[t],r=n[t],a&&r!==o&&a(r,o,this,t));else if(r!==o){if(l&&(s=l(r)))throw new e.error.argumentInvalid(t,e.string.is(s)?s:"");f&&(r=i.call(this,n,r,o)),null!=r&&(n[t]=r,a&&a(r,o,this,t))}}return this}function i(n,r,i){var s=f(r);if(null==s){if(!u)return;if(rt.call(n,t)){e.configure(i,r);return}if(!o)return;s=o(r,i)}return s}e.fun.is(n)&&(n={factory:n});var s,o=e.get(n,"factory"),u=e.get(n,"configurable",!!o),a=e.get(n,"change"),f=e.get(n,"cast"),l=e.get(n,"fail");return n=null,r}function W(t,n,r){e.MetaType.apply(this,arguments);var n=this.baseType;n&&(this.fieldsPrivProp=n.constructor===W?e.get(r,"fieldsPrivProp")||Tt:n.fieldsPrivProp)}function X(t,n,r,i){var s,o=e.lazy(t,"__eventz"),u=o[n]||(o[n]={before:[],after:[],count:0});if(e.fun.is(r))s={handler:r,_handler:null,_filter:null};else{if(!(r instanceof Object))throw e.error.argumentInvalid("handler","Invalid type.");s=r;if(!s.handler)throw e.error.argumentRequired("handler.handler");s._filter=null}s._handler=s.handler,u[i?"before":"after"].push(s),u.count++,t._on&&t._on(n,s,!!i)}function V(t,n,r){var i,s,o;if(null!=r)if(e.fun.is(r))o=r;else{if(!(r instanceof Object))throw e.error.argumentInvalid("handler","Invalid type.");o=r.handler}if((i=t.__eventz)&&(s=i[n])&&s.count){var u,a,f,l;if(o){u=s.before,f=Y(u,o),l=0>f;if(l){u=s.after,f=Y(u,o);if(0>f)return}a=u[f],0===--s.count?i[n]=null:(u=u.slice(),u.splice(f,1),s[l?"after":"before"]=u),$(t,n,a,!l)}else{var c=s.before,h=s.after;i[n]=null,f=c.length;for(;f--;)$(t,n,c[f],!0);f=h.length;for(;f--;)$(t,n,h[f],!1)}}}function $(e,t,n,r){e._off&&e._off(t,n,r),n._filter=n._handler=null}function J(t,n,r){var i,s,o,u,a,f;(i=t.__eventz)&&(s=i[n])&&(a=(o=s.before).length,f=(u=s.after).length);if(!f&&!a&&!r)return null;var l=!1,c=!1,h={type:n,phase:null,source:t,result:void 0,cancelable:!1,defaultPrevented:c,preventDefault:function(){l&&(this.defaultPrevented=c=!0)},trigger:function(n,i){if(this.phase)throw e.error.operationInvalid("Event can only be triggered once.");n||(n=t),i||(i=[this]),l=!!this.cancelable;var s;a&&K(n,this,i,o,a,!0);if(!l||!this.defaultPrevented)r&&(this.phase="default",this.result=s=r.apply(n,i)),f&&K(n,this,i,u,f,!1);return this.phase="done",s}};return h}function K(e,t,n,r,i,s){var o,u=-1;t.phase=s?"before":"after";for(;++u<i;)o=r[u],(!o._filter||o._filter.apply(e,n))&&o._handler.apply(e,n)}function Q(t,n,r,i,s,o){if(e.string.is(r))G(t,n,r,i,s,o);else if(e.array.is(r))r.forEach(function(r){if(!e.string.is(r))throw e.error.argumentInvalid("type");G(t,n,r,i,s,o)});else{if(!e.object.is(r))throw e.error.argumentInvalid("type");e.eachOwn(r,function(e,r){G(t,n,r,e,s,o)})}}function G(t,n,r,i,s,o){if(!o&&!i)throw e.error.argumentRequired("handler");e.array.is(i)?i.forEach(function(e){t(n,r,e,s)}):t(n,r,i,s)}function Y(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n].handler===t)return n;return-1}function Z(){for(;this._source.next();){var t=this._selectMany?this._selectMany.call(this._ctx,this._source.item,this._source.index):this._source.item;if(null!=t)return this._manySource=e.query(t),!0}}function et(e,t){return t?(e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))):e}var tt=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),nt=Object.prototype,rt=nt.hasOwnProperty,it=tt?["toString","valueOf"]:null;Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var n in e)rt.call(e,n)&&t.push(n);return it&&it.forEach(function(n){rt.call(e,n)&&t.push(n)}),t}),Array.prototype.some||(Array.prototype.some=function(e){for(var t=Object(this),n=t.length>>>0,r=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)if(i in t&&e.call(r,t[i],i,t))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(e,t){for(var n=this.length,r=new Array(n),i=0;n>i;i++)i in this&&(r[i]=e.call(t,this[i],i,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var n=this.length,r=new Array,i=0;n>i;i++)if(i in this){var s=this[i];e.call(t,s,i,this)&&r.push(s)}return r}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Object.create||(Object.create=function(){function e(e){t.prototype=e||{};var r=new t;return t.prototype=n,r}var t=function(){},n=t.prototype;return e}()),Function.prototype.bind||(Function.prototype.bind=function(e){return function(t){var n=e.call(arguments,1),r=this;return function(){return r.apply(t,n.concat(e.call(arguments)))}}}(Array.prototype.slice)),this.JSON||(this.JSON={}),this.JSON.stringify||(this.JSON.stringify=function(e){return String(e)});var st=Array.prototype.slice,ot=[],ut=function(){var e=Object.defineProperty;if(e)try{e({},"test",{})}catch(t){return null}return e}(),at=function(){var e=ut&&Object.getOwnPropertyDescriptor;return e&&null===e({value:null},"value").value?e:void 0}(),ft=function(e){return e.prototype||e};e.global=this,e.copyOwn=function(e,t){var n,r;arguments.length>=2?(n=e||{},r=t):(n={},r=e);for(var i in r)rt.call(r,i)&&(n[i]=r[i]);return n},e.copyOwn(e,{get:function(e,t,n){var r;return e&&null!=(r=e[t])?r:n},gets:function(e,t){return t.map(function(t){return e[t]})},getPath:function(t,n,r,i){if(!t)return r;if(null!=n){var s=e.array.is(n)?n:n.split("."),o=s.length;if(o)for(var u=0;o>u;){var a=s[u++],f=t[a];if(null==f){if(!i)return r;f=t[a]=null==r||isNaN(+r)?{}:[]}t=f}}return t},setPath:function(t,n,r){if(t&&null!=n){var i=e.array.is(n)?n:n.split(".");if(i.length){var s=i.pop();t=e.getPath(t,i,s,!0),null!=t&&(t[s]=r)}}return t},propGet:function(e,t){return e=""+e,function(n){return n?n[e]:t}},getOwn:function(e,t,n){var r;return e&&rt.call(e,t)&&null!=(r=e[t])?r:n},hasOwn:function(e,t){return!!e&&rt.call(e,t)},protoOf:Object.getPrototypeOf||function(e){return e.__proto__||e.constructor&&e.constructor.prototype},rootProtoOf:function(t){for(var n=null,r=e.protoOf(t);r&&r!==nt&&r!==n;)r=e.protoOf(n=r);return n},hasOwnProp:rt,set:function(e){for(var t=e||{},n=arguments,r=1,i=n.length-1;i>r;r+=2)t[n[r]]=n[r+1];return t},setDefaults:function(t,n){var r,i=t||{},s=arguments,o=s.length;if(2===o&&e.object.is(n))e.each(n,function(e,t){null==i[t]&&(i[t]=e)});else{o--;for(var u=1;o>u;u+=2)r=s[u],null==i[r]&&(i[r]=s[u+1])}return i},setUDefaults:function(t,n){var r,i=t||{},s=arguments,o=s.length;if(2===o&&e.object.is(n))e.each(n,function(e,t){void 0===i[t]&&(i[t]=e)});else{o--;for(var u=1;o>u;u+=2)r=s[u],void 0===i[r]&&(i[r]=s[u+1])}return i},setNonEnum:function(){if(!ut)return function(e,t,n){return e[t]=n,e};var e={enumerable:!1,configurable:!0,writable:!0,value:void 0};return function(t,n,r){return e.value=r,ut(t,n,e),e.value=null,t}}(),setConst:function(){if(!ut)return function(e,t,n){return e[t]=n,e};var e={enumerable:!1,configurable:!1,writable:!1,value:void 0};return function(t,n,r){return e.value=r,ut(t,n,e),e.value=null,t}}(),eachOwn:function(e,t,n){for(var r in e)rt.call(e,r)&&t.call(n,e[r],r,e);e&&it&&it.forEach(function(r){rt.call(e,r)&&t.call(n,e[r],r,e)})},each:function(e,t,n){for(var r in e)t.call(n,e[r],r,e);e&&it&&it.forEach(function(r){rt.call(e,r)&&t.call(n,e[r],r,e)})},copy:function(t,n){var r,i;return arguments.length>=2?(r=t||{},i=n):(r={},i=t),e.each(i,function(e,t){r[t]=e}),r},copyx:function(t,n,r){var i=e.get(r,"where"),s=e.get(r,"set");return e.each(n,function(e,r){(!i||i(n,r,t))&&(s?s(t,r,e):t[r]=e)}),t},copyProps:function(e,t,n){var r,i;return arguments.length>=3?(r=e||{},i=t):(r={},i=e,n=t),n&&n.forEach(i?function(e){r[e]=i[e]}:function(e){r[e]=void 0}),r},keys:function(e){var t=[];for(var n in e)t.push(n);return e&&it&&it.forEach(function(e){t.push(e)}),t},values:function(t){var n=[];return e.each(t,function(e){n.push(e)}),n},uniqueIndex:function(t,n,r){var i={};return e.each(t,function(e,t){n&&(e=n.call(r,e)),null==e||rt.call(i,e)||(i[e]=t)}),i},ownKeys:Object.keys,own:function(e,t,n){var r=Object.keys(e);return r.map(t?function(r){return t.call(n,e[r],r)}:function(t){return e[t]})},make:function(e,t){var n=Object.create(e.prototype);return e.apply(n,t||ot)||n},isPropPrivate:function(e){return!!e&&"_"===e.charAt(0)}}),e.object={is:function(e){return!!e&&"object"==typeof e},isNative:function(e){return!!e&&e.constructor===Object},as:function(e){return e&&"object"==typeof e?e:null},asNative:function(e){return e&&e.constructor===Object?e:null},lazy:function(e,t,n,r){return e[t]||(e[t]=n?n.call(r,t):{})}},e.lazy=e.object.lazy,e.info=function(t,n){var r;if(t&&n){r=t.__info__;if(arguments.length<2)return r;r||e.setNonEnum(t,"__info__",r={}),e.copyOwn(r,n)}return t},e.info.get=function(t,n,r){return e.get(t&&t.__info__,n,r)},e.copyOwn(e,{bit:{set:function(e,t,n){return n||null==n?e|t:e&~t}}}),e.copyOwn(e,{compare:function(e,t){return e===t?0:e>t?1:-1},compareReverse:function(e,t){return e===t?0:e>t?-1:1},methodCaller:function(e,t){return t?function(){return t[e].apply(t,arguments)}:function(){return this[e].apply(this,arguments)}},identity:function(e){return e},add:function(e,t){return e+t},negate:function(e){return function(){return!e.apply(this,arguments)}},sqr:function(e){return e*e},noop:function(){},retTrue:function(){return!0},retFalse:function(){return!1},fun:{is:function(e){return"function"==typeof e},as:function(e){return"function"==typeof e?e:null},to:function(t){return"function"==typeof t?t:e.fun.constant(t)},constant:function(e){return function(){return e}},wraps:function(t,n){return t.valueOf=e.fun.constant(n),t},typeFactory:function(t){function n(){return e.make(t,arguments)}return n.of=t,n}}}),e.ascending=e.compare,e.descending=e.compareReverse,e.number={is:function(e){return"number"==typeof e},as:function(e,t){return"number"==typeof e?e:t},to:function(e,t){if(null==e)return t;var n=+e;return isNaN(n)?t:n},toPositive:function(t,n){return t=e.number.to(t),null==t||t>0?t:n},toNonNegative:function(t,n){return t=e.number.to(t),null!=t&&0>t?n:t}},e.array={empty:function(e){return!e||!e.length},is:function(e){return e instanceof Array},isLike:function(e){return e&&null!=e.length&&"string"!=typeof e},as:function(e){return e instanceof Array?e:null!=e?[e]:null},to:function(e){return e instanceof Array?e:null!=e?[e]:null},lazy:function(e,t,n,r){return e[t]||(e[t]=n?n.call(r,t):[])},copy:function(e){return st.apply(e,st.call(arguments,1))},each:function(t,n,r){null!=t&&(e.array.is(t)?t.forEach(n,r):n.call(r,t,0))},eachReverse:function(t,n,r){if(null!=t)if(e.array.is(t)){for(var i=t.length;i--;)if(n.call(r,t[i],i)===!1)return!1}else if(n.call(r,t,0)===!1)return!1;return!0},like:e.copyOwn(function(e){return lt.is(e)?e:[e]},{is:function(e){return!!e&&null!=e.length&&"string"!=typeof e},as:function(e){return lt.is(e)?e:null}}),create:function(e,t){var n=e>=0?new Array(e):[];if(void 0!==t)for(var r=0;e>r;r++)n[r]=t;return n},append:function(e,t,n){null==n&&(n=0);for(var r=0,i=t.length,s=e.length;i>r;r++)e[s+r]=t[n+r];return e},appendMany:function(t){var n,r=arguments,i=r.length;if(i>1)for(var s=1;i>s;s++)if(n=e.array.to(r[s]))for(var o=0,u=n.length;u>o;)t.push(n[o++]);return t},prepend:function(e,t,n){null==n&&(n=0);for(var r=0,i=t.length;i>r;r++)e.unshift(t[n+r]);return e},removeAt:function(e,t){return e.splice(t,1)[0]},insertAt:function(e,t,n){return e.splice(t,0,n),e},removeIf:function(e,t,n){for(var r=0,i=e.length;i>r;)t.call(n,e[r],r)?(i--,e.splice(r,1)):r++;return e},binarySearch:function(t,n,r,i){r||(r=e.compare);for(var s=0,o=t.length-1;o>=s;){var u=s+o>>1,a=r(n,i?i(t[u]):t[u]);if(0>a)o=u-1;else{if(!(a>0))return u;s=u+1}}return~s},insert:function(t,n,r){var i=e.array.binarySearch(t,n,r);return 0>i&&t.splice(~i,0,n),i},remove:function(t,n,r){var i=e.array.binarySearch(t,n,r);return i>=0?t.splice(i,1)[0]:void 0}};var lt=e.array.like;lt.to=lt,e.string={is:function(e){return"string"==typeof e},to:function(e,t){return null!=e?String(e):t||""},join:function(e){var t,n,r=arguments,i=r.length;switch(i){case 3:return t=r[1],n=r[2],null!=t&&""!==t?null!=n&&""!==n?""+t+e+(""+n):""+t:null!=n&&""!==n?""+n:"";case 2:return t=r[1],null!=t?""+t:"";case 1:case 0:return""}for(var s=[],o=1;i>o;o++)t=r[o],null!=t&&""!==t&&s.push(""+t);return s.join(e)},padRight:function(e,t,n){e||(e=""),null==n&&(n=" ");var r=~~((t-e.length)/n.length);return r>0?e+(new Array(r+1)).join(n):e}},e.copyOwn(e,{firstUpperCase:function(e){if(e){var t=e.charAt(0),n=t.toUpperCase();t!==n&&(e=n+e.substr(1))}return e},firstLowerCase:function(e){if(e){var t=e.charAt(0),n=t.toLowerCase();t!==n&&(e=n+e.substr(1))}return e},titleFromName:function(t){return e.firstUpperCase(t).replace(/([a-z\d])([A-Z])/,"$1 $2")},format:function(t,n,r){if(null==t||""===t)return"";var i=n&&e.fun.is(n);return t.replace(/(^|[^{])\{([^{}]+)\}/g,function(e,t,s){var o=n?i?n.call(r,s):n[s]:null;return t+(null==o?"":String(o))})}}),e.copyOwn(e,{nullyTo:function(e,t){return null!=e?e:t}}),e.copyOwn(e,{between:function(e,t,n){return Math.max(t,Math.min(e,n))},nully:function(e){return null==e},notNully:function(e){return null!=e},notUndef:function(e){return void 0!==e},empty:function(e){return null==e||""===e},notEmpty:function(e){return null!=e&&""!==e},truthy:function(e){return!!e},falsy:function(e){return!e}}),e.copyOwn(e,{error:function(e){return e instanceof Error?e:new Error(e)},fail:function(t){throw e.error(t)},assert:function(t,n){throw e.error.assertionFailed(t,n)}}),e.eachOwn({operationInvalid:function(t,n){return e.error(e.string.join(" ","Invalid operation.",e.format(t,n)))},notImplemented:function(){return e.error("Not implemented.")},argumentRequired:function(t){return e.error(e.format("Required argument '{0}'.",[t]))},argumentInvalid:function(t,n,r){return e.error(e.string.join(" ",e.format("Invalid argument '{0}'.",[t]),e.format(n,r)))},assertionFailed:function(t,n){return e.error(e.string.join(" ","Assertion failed.",e.format(t,n)))}},function(t,n){e.error[n]=t,e.fail[n]=function(){throw t.apply(null,arguments)}}),e.debug=0,!function(){if("undefined"!=typeof window&&window.location){var t=function(e){return e&&/\bdebug=true\b/.test(e)?e:null},n=t(window.location.href);if(!n)try{n=t(window.top.location.href)}catch(r){}if(n){var i=/\bdebugLevel=(\d+)/.exec(n);e.debug=i?+i[1]:3}}}(),e.logSeparator="------------------------------------------",e.setDebug=function(t){t=+t,t=isNaN(t)?0:t,t>1&&"undefined"==typeof console&&(t=1);if(!e.log||e.debug!=t)e.debug=t,n(t);return e.debug};var ct=null;e.addOnDebugChanged=function(e){ct||(ct=[]).push(e)};var ht,pt=["info","debug","error","warn","group","groupEnd"],dt={group:"groupCollapsed"};e.logger=function(t,n,r){return e.debug>1?i(t,n):n?o(n,r,t):ht||(ht=u())},e.setDebug(e.debug),e.priv={key:l};var vt=function(t){return"_"+e.nullyTo(t,"safe")+(new Date).getTime()+Math.round(1e3*Math.random())},mt=e.priv.key();e.copyOwn(e,{scope:function(e,t){return e.call(t)},firstDefined:function(e,t,n){var r,i=0,s=e.length;t||(t=[]);for(;s>i;)if(void 0!==(r=e[i++].apply(n,t)))return r},indexedId:function(e,t){return t>0?e+""+(t+1):e},splitIndexedId:function(e){var t=/^(.*?)(\d*)$/.exec(e),n=null;return t[2]&&(n=Number(t[2]),1>=n?n=1:n--),[t[1],n]},parseDistinctIndexArray:function(t,n,r){t=e.array.as(t);if(null==t)return null;null==n&&(n=0),null==r&&(r=1/0);var i=e.query(t).select(function(e){return+e}).where(function(e){return!isNaN(e)&&e>=n&&r>=e}).distinct().array();return i.length?i:null},argumentsTypeBind:function(e,t){var n,r=e.length,i=new Array(r);if(r&&t&&(n=t.length)){var s=0,o=0;do{var u=t[s];if(null==u||typeof u===e[o])i[o]=u,s++;o++}while(r>o&&n>s)}return i},argumentsTypeBound:function(t,n){return function(){var r=e.argumentsTypeBind(t,arguments);return n.apply(this,r)}}}),e.qualName=function(e){return e instanceof p?e:new p(e)},e.QualifiedName=p,p.prototype.toString=function(){return e.string.join(".",this.namespace,this.name)},e.qualNameOf=function(t,n){return arguments.length>1?(t.__qname__=e.qualName(n),t):t.__qname__};var gt=e,yt={},bt=[];e.globalSpace=function(e,t){return yt[e]=t},e.space=function(t,n,r){e.fun.is(n)&&(r=n,n=null),e.string.is(n)&&(n=d(n));var i=d(t,n);if(r){bt.push(gt);try{r(i)}finally{gt=bt.pop()}}return i},e.describe=function(t,n){var r=e.get(n,"maxLevel")||5,i=[];return e.describeRecursive(i,t,r,n),i.join("")},e.describeRecursive=function(t,n,r,i){if(r>0){r--;switch(typeof n){case"undefined":return t.push("undefined");case"object":if(!n)return t.push("null"),!0;if(e.fun.is(n.describe))return n.describe(t,r,i);if(n instanceof Array)t.push("["),n.forEach(function(n,s){s&&t.push(", "),e.describeRecursive(t,n,r,i)||t.pop()}),t.push("]");else{var s=e.get(i,"ownOnly",!0);if(n===e.global)return t.push("<window>"),!0;if(e.fun.is(n.cloneNode))return t.push("<dom #"+(n.id||n.name||"?")+">"),!0;r>1&&n.constructor!==Object&&(r=1,s=!0),t.push("{");var o=!0;for(var u in n)if(!s||e.hasOwnProp.call(n,u))o||t.push(", "),t.push(u+": "),e.describeRecursive(t,n[u],r,i)?o&&(o=!1):(t.pop(),o||t.pop());if(o){var a=""+n;"[object Object]"!==a&&t.push("{"+a+"}")}t.push("}")}return!0;case"number":return t.push(""+Math.round(1e5*n)/1e5),!0;case"boolean":return t.push(""+n),!0;case"string":return t.push(JSON.stringify(n)),!0;case"function":return e.get(i,"funs",!1)?(t.push(JSON.stringify(n.toString().substr(0,13)+"...")),!0):!1}return t.push("'new ???'"),!0}},e.mixin=v(Object.create),e.copyOwn(e.mixin,{custom:v,inherit:e.mixin,copy:v(e.copy),share:v(e.identity)}),e.create=function(){var t=st.call(arguments),n=!0,r=t.shift();"boolean"==typeof r&&(n=r,r=t.shift());var i;return r?(i=Object.create(r),n&&b(i)):i={},t.length>0&&(t.unshift(i),e.mixin.apply(e,t)),i},e.attached=function(t,n,r){var i=t.__attached__;return arguments.length>2?(void 0!==r&&(i||e.setNonEnum(t,"__attached__",i={}),i[n]=r),t):i&&i[n]},e.attached.is=function(e){return!(!e||e.indexOf("$")<0)};var wt={tryConfigure:1,configure:1,$type:1};e.configure=e.config=w,e.configurable=function(t,n){return e.info(n,{configurable:!!t})},e.copyOwn(w,{generic:function(t,n){return n&&e.array.each(n,function(n){var r;n.constructor===Object?w.setters(t,n):t!==n&&(r=t.tryConfigure)&&e.fun.is(r)&&r.call(t,n)}),t},isPropConfigurable:function(e){return!!e&&"_"!==e.charAt(0)&&!rt.call(wt,e)},setters:function(t,n){return n&&w.expand1(n).forEach(function(n){e.each(n,function(e,n){w.setter(t,n,e)})}),t},setter:function(t,n,r){var i,s,o,u;return void 0!==r&&w.isPropConfigurable(n)&&e.fun.is(i=t[n])&&(s=i.valueOf())&&e.info.get(s,"configurable",(o=s.length)>=1)&&(e.attached.is(n)?e.attached(t,n,r):o?i.call(t,r):(u=i.call(t),(e.object.is(u)||e.fun.is(u))&&w(u,r))),t},expand1:function(e){return E(e,!0)},expand:E}),e.fun.inherit=T,e.overrides=N,e.fun.callsBase=C;var Et=/\.\s*base\b/;e.methods=O,e.method=M,e.abstractMethod=e.fail.notImplemented,e("MetaType",j);var St={Ctor:1,BaseType:1,prototype:1};e.copyOwn(j,{methods:I,add:e.configurable(!1,function(){return I.apply(this,arguments)}),inst:e.configurable(!1,function(){return this.Ctor}),subType:e.configurable(!1,function(t,n,r){var i=this,s=i.Ctor,o=s&&s.meta||e.fail.operationInvalid("MetaType is not yet instantiated.");return e.fun.inherit(t,i),e.copyx(t,i,{where:function(e,t){return rt.call(e,t)&&"_"!==t.charAt(0)&&!rt.call(St,t)}}),t.BaseType=i,new t(null,o,r),n&&e.configure(t,n),t}),extend:e.configurable(!1,function(t,n){function r(){return i.apply(this,arguments)}var i=this;return e.fun.wraps(r,i),i.subType(r,t,n)})}),j.add({closed:function(){return!!this.steps},close:function(){return this.steps||this._closeCore(this.steps=[]),this},_assertOpened:function(){if(this.closed())throw e.error.operationInvalid("MetaType is closed.")},_closeCore:function(e){this._addPostSteps(e),this._addInitSteps(e)},_createConstructor:function(){function e(){for(var e=t;e--;)r[e].apply(this,arguments)===!0&&(e=t)}var t=1,n=this,r=[function(){return r=n.close().steps,t=r.length,!0}];return e},_initConstructor:function(t){var n=this.constructor;return q.call(n,t,n),t.meta=this,this.baseType&&e.fun.inherit(t,this.baseType.close().Ctor),t.MetaType=n,t},_addPostSteps:function(t){e.array.eachReverse(this._mixins,function(e){e._post&&t.push(e._post)}),this._post&&t.push(this._post)},_addInitSteps:function(t){e.array.eachReverse(this._mixins,function(e){e._init&&t.push(e._init)}),this._init&&t.push(this._init)},init:function(t){if(!t)throw e.error.argumentRequired("init");return this._assertOpened(),this._init=e.overrides(t,this._init,this.rootType.Ctor.prototype),this},postInit:function(t){if(!t)throw e.error.argumentRequired("postInit");return this._assertOpened(),this._post=e.overrides(t,this._post,this.rootType.Ctor.prototype),this},type:e.configurable(!0,function(){return this.constructor}),add:e.configurable(!1,function(t,n){return F(t)&&this._mixMetaType(t.meta),e.methods(this.Ctor,t,n),this}),_mixMetaType:function(t){e.array.lazy(this,"_mixins").push(t)},methods:function(t){return e.array.each(t,this.add,this),this},method:e.configurable(!1,function(t,n,r){return e.method(this.Ctor,t,n,r),this}),configure:function(t){return e.configure.generic(this,t),this},extend:e.configurable(!1,function(e,t){var n=this.constructor.extend(null,t).Ctor;return n.configure(e)})});var xt=(new j).close().Ctor.add({override:function(t,n){return D(this,t,n,e.protoOf(this),xt.prototype,!0),this},toString:function(){return"[object "+String(e.qualNameOf(e.classOf(this)))+"]"}},{enumerable:!1});e("Object",xt),e.type=e.argumentsTypeBound(["string","function","object"],function(t,n,r){var i=n?n.MetaType:j,s=i.extend().Ctor;return e(t,s,r)}),e.makeEnum=function(t,n){var r=1,i=0,s={},o=e.get(n,"all");return t.forEach(function(e){s[e]=r,o&&(i|=r),r<<=1}),o&&(s[o]=i),s},e.copyOwn(e,{classify:function(t,n){return e.setNonEnum(t,"_class",n),t},classOf:function(e){return e&&(e._class||e.constructor)||void 0},is:function(e,t){return!!e&&(e._class&&e._class===t||e instanceof(t.of||t))},as:function(t,n,r){return e.is(t,n)?t:r},createIs:function(t){function n(n){return e.is(n,t)}return n},createAs:function(t){function n(n,r){return e.as(n,t,r)}return n},isSubClassOf:function(t,n){return!(!t||!n||t!==n&&!e.is(ft(t),n))}});var Tt=mt.property();e.copyOwn(e,{instance:function(t,n,r,i,s){var o=e.fields(t,r,s);return i&&e.instanceAccessors(t,o,i),t.createChild=U,n&&e.configure(t,n),o},fields:function(t,n,r){var i=e.classOf(t);n&&e.is(n,i)||(n=i.defaults),void 0===r&&(r=Tt);var s=n&&r&&r(n),o=s?Object.create(s):{};return o.___proto=n,r&&r.init(t,o),o},classAccessors:function(t,n,r){var i=ft(t);for(var s in n)i[s]=e.classAccessor(s,n[s],r);return e},classAccessor:function(e,t,n){function r(t){var r=n(this);return arguments.length?i.call(this,r,t):r[e]}var i=z(e,t);return n||(n=Tt),r},instanceAccessors:function(t,n,r){for(var i in r)t[i]=e.instanceAccessor(t,i,r[i],n);return e},instanceAccessor:function(e,t,n,r){function i(n){return arguments.length?s.call(e,r,n):r[t]}var s=z(t,n);return i}}),e.MetaType.subType(W,{methods:{fields:function(t){var n={};for(var r in t)n[r]=e.classAccessor(r,t[r],this.fieldsPrivProp);return this.methods(n)},_addInitSteps:function(t){function n(t){t&&e.configure(this,t)}function r(t,n){e.fields(this,n,i.fieldsPrivProp)}t.push(n),this.base(t);var i=this;t.push(r)}}}),e("FieldsBase",W.Ctor);var Nt=1,Ct={},kt="__def_id__";return e.nextId=function(t){if(t){var n=e.getOwn(Ct,t)||1;return Ct[t]=n+1,n}return Nt++},e.id=function(t){var n=e.getOwn(t,kt);return n||e.setConst(t,kt,n=e.nextId()),n},e.hashKey=function(t){var n=(typeof t).charAt(0);switch(n){case"n":case"b":case"s":return n+":"+t}return n+":"+(t?t:e.id(t))},e("Set",e.Object.extend({init:function(t,n){this.source=t||{},this.count=t?null!=n?n:e.ownKeys(t).length:0},methods:{has:function(e){return rt.call(this.source,e)},add:function(e){var t=this.source;return rt.call(t,e)||(this.count++,t[e]=!0),this},rem:function(e){return rt.call(this.source,e)&&(delete this.source[e],this.count--),this},clear:function(){return this.count&&(this.source={},this.count=0),this},members:function(){return e.ownKeys(this.source)}}})),e("Map",e.Object.extend({init:function(t,n){this.source=t||{},this.count=t?null!=n?n:e.ownKeys(t).length:0},methods:{has:function(e){return rt.call(this.source,e)},get:function(e){return rt.call(this.source,e)?this.source[e]:void 0},set:function(e,t){var n=this.source;return rt.call(n,e)||this.count++,n[e]=t,this},rem:function(e){return rt.call(this.source,e)&&(delete this.source[e],this.count--),this},clear:function(){return this.count&&(this.source={},this.count=0),this},copy:function(t){e.eachOwn(t.source,function(e,t){this.set(t,e)},this)},values:function(){return e.own(this.source)},keys:function(){return e.ownKeys(this.source)},clone:function(){return new e.Map(e.copy(this.source),this.count)},symmetricDifference:function(t){if(!this.count)return t.clone();if(!t.count)return this.clone();var n={},r=0,i=this.source,s=t.source;return e.eachOwn(i,function(e,t){rt.call(s,t)||(n[t]=e,r++)}),e.eachOwn(s,function(e,t){rt.call(i,t)||(n[t]=e,r++)}),new e.Map(n,r)},intersect:function(t,n){return n||(n=new e.Map),e.eachOwn(this.source,function(e,r){t.has(r)&&n.set(r,e)}),n}}})),e("OrderedMap",e.Object.extend({init:function(t){t instanceof e.OrderedMap?(this._list=t._list.slice(),this._map=e.copy(t._map)):(this._list=[],this._map={})},methods:{has:function(e){return rt.call(this._map,e)},count:function(){return this._list.length},get:function(e){var t=this._map;return rt.call(t,e)?t[e].value:void 0},at:function(e){var t=this._list[e];return t?t.value:void 0},add:function(t,n,r){var i=this._map,s=rt.call(i,t)&&i[t];return s?s.value!==n&&(s.value=n):(s=i[t]={key:t,value:n},null==r?this._list.push(s):e.array.insertAt(this._list,r,s)),this},rem:function(e){var t=this._map,n=rt.call(t,e)&&t[e];if(n){var r=this._list.indexOf(n);this._list.splice(r,1),delete this._map[e]}return this},clear:function(){return this._list.length&&(this._map={},this._list.length=0),this},keys:function(){return e.ownKeys(this._map)},forEach:function(e,t){return this._list.forEach(function(n){e.call(t,n.value,n.key)})}}})),e("EventSource",e.Object.extend({methods:{on:function(e,t){return Q(X,this,e,t,!0),this},before:function(e,t){return Q(X,this,e,t,!0),this},after:function(e,t){return Q(X,this,e,t,!1),this},off:function(e,t){return Q(V,this,e,t,null,!0),this},_acting:function(t,n){if(!t)throw e.error.argumentRequired("type");return J(this,t,n)}}})),e.html={escape:function(t){return e.string.to(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},tag:function(t,n){n=n?e.ownKeys(n).map(function(t){var r=n[t];return e.empty(r)?"":" "+t+'="'+String(r)+'"'}).join(""):"";var r=arguments.length>2?st.call(arguments,2).map(function(t){return null!=t&&(e.fun.is(t)&&(t=t()),t=e.array.is(t)?t.map(e.string.to).join(""):e.string.to(t)),t||""}).join(""):"";return"<"+t+n+">"+r+"</"+t+">"},classes:function(t){t=t?t+"-":"";var n=[];return st.call(arguments,1).forEach(function(r){e.empty(r)||n.push(t+e.css.escapeClass(r))}),n.join(" ")}},e.css={escapeClass:function(e){return(e||"").replace(/\s/g,"_")}},e.type("Query").add({index:-1,item:void 0,next:function(){var e=this,t=e.index;return-2===t?!1:(t++,e._next(t)?(e.index=t,!0):(e._finish(),!1))},_next:e.abstractMethod,_finish:function(){var t=this;t.index>-2&&(t.next=e.retFalse,t.index=-2,delete t.item)},each:function(e,t){for(var n=this;n.next();)if(e.call(t,n.item,n.index)===!1)return!0;return!1},array:function(e){for(var t=e||[],n=this;n.next();)t.push(n.item);return t},sort:function(t,n){t||(t=e.compare);if(n){var r=t;t=function(e,t){return r(n(e),n(t))}}var i=this.array().sort(t);return new e.ArrayLikeQuery(i)},object:function(t){for(var n=e.get(t,"target")||{},r=e.get(t,"name"),i=e.get(t,"value"),s=e.get(t,"context");this.next();){var o=""+(r?r.call(s,this.item,this.index):this.item);n[o]=i?i.call(s,this.item,this.index):this.item}return n},reduce:function(e){var t,n=0;if(arguments.length<2){if(!this.next())throw new TypeError("Length is 0 and no second argument");t=this.item}else t=arguments[1];for(;this.next();)t=e(t,this.item,this.index),++n;return t},count:function(){for(var e=0;this.next();)e++;return e},first:function(e,t,n){for(;this.next();)if(!e||e.call(t,this.item,this.index)){var r=this.item;return this._finish(),r}return n},last:function(e,t,n){for(var r=n;this.next();)(!e||e.call(t,this.item,this.index))&&(r=this.item);return r},any:function(e,t){for(;this.next();)if(!e||e.call(t,this.item,this.index))return this._finish(),!0;return!1},all:function(e,t){for(;this.next();)if(!e.call(t,this.item,this.index))return this._finish(),!1;return!0},min:function(){for(var e=null;this.next();)(null===e||this.item<e)&&(e=this.item);return e},max:function(){for(var e=null;this.next();)(null===e||this.item>e)&&(e=this.item);return e},range:function(){for(var e=null,t=null;this.next();){var n=this.item;null===e?e=t=n:(e>n&&(e=n),n>t&&(t=n))}return null!=e?{min:e,max:t}:null},multipleIndex:function(t,n){var r={};return this.each(function(i){var s=t?t.call(n,i):i;if(null!=s){var o=e.getOwn(r,s)||(r[s]=[]);o.push(i)}}),r},uniqueIndex:function(e,t){var n={};return this.each(function(r){var i=e?e.call(t,r):r;null==i||rt.call(n,i)||(n[i]=r)}),n},select:function(t,n){return new e.SelectQuery(this,t,n)},prop:function(t){return new e.SelectQuery(this,function(e){return e?e[t]:void 0})},selectMany:function(t,n){return new e.SelectManyQuery(this,t,n)},union:function(){var t=e.array.append([this],arguments);return new e.SelectManyQuery(new e.ArrayLikeQuery(t))},where:function(t,n){return new e.WhereQuery(this,t,n)},distinct:function(t,n){return new e.DistinctQuery(this,t,n)},skip:function(t){return new e.SkipQuery(this,t)},take:function(t){return 0>=t?new e.NullQuery:isFinite(t)?new e.TakeQuery(this,t):this},whayl:function(t,n){return new e.WhileQuery(this,t,n)},reverse:function(){return new e.ReverseQuery(this)}}),e.type("NullQuery",e.Query).add({next:e.retFalse}),e.type("AdhocQuery",e.Query).init(function(e){this._next=e}),e.type("ArrayLikeQuery",e.Query).init(function(t){function n(){for(;++i<s;)if(rt.call(t,i))return r.index=i,r.item=t[i],!0;return r._finish(),!1}var r=this;e.array.isLike(t)||(t=[t]),r._list=t,r._count=t.length;var i=-1,s=t.length;r.next=n}).add({count:function(){var e=this._count;return this.index>=0&&(e-=this.index+1),this._finish(),e}}),e.type("RangeQuery",e.Query).init(function(e,t,n){this._index=e,this._count=t,this._step=null==n?1:n}).add({_next:function(e){if(e<this._count)return this.item=this._index,this._index+=this._step,!0},count:function(){var e=this._count;return this.index>=0&&(e-=this.index+1),this._finish(),e}}),e.type("WhereQuery",e.Query).init(function(e,t,n){function r(){for(;e.next();){var r=e.item;if(t.call(n,r,e.index))return i.item=r,i.index=++s,!0}return i._finish(),!1}var i=this,s=-1;i.next=r}),e.type("WhileQuery",e.Query).init(function(e,t,n){function r(){if(e.next()){var r=e.item;if(t.call(n,r,e.index))return i.item=r,i.index=++s,!0}return i._finish(),!1}var i=this,s=-1;i.next=r}),e.type("SelectQuery",e.Query).init(function(e,t,n){function r(){return e.next()?(i.item=t.call(n,e.item,e.index),i.index=++s,!0):(i._finish(),!1)}var i=this,s=-1;i.next=r}),e.type("SelectManyQuery",e.Query).init(function(e,t,n){this._selectMany=t,this._ctx=n,this._source=e,this._manySource=null}).add({_next:function(){for(;;){if(this._manySource){if(this._manySource.next())return this.item=this._manySource.item,!0;this._manySource=null}if(!Z.call(this))break}}}),e.type("DistinctQuery",e.Query).init(function(e,t,n){function r(){for(;e.next();){var r=e.item,u=t?t.call(n,r,e.index):r;if(null!=u&&!rt.call(o,u))return i.item=r,i.index=++s,o[u]=!0}return i._finish(),!1}var i=this,s=-1,o={};i.next=r}),e.type("SkipQuery",e.Query).init(function(e,t){this._source=e,this._skip=t}).add({_next:function(){for(;this._source.next();){if(!(this._skip>0))return this.item=this._source.item,!0;this._skip--}}}),e.type("TakeQuery",e.Query).init(function(e,t){this._source=e,this._take=t}).add({_next:function(){if(this._take>0&&this._source.next())return this._take--,this.item=this._source.item,!0}}),e.type("ReverseQuery",e.Query).init(function(e){this._source=e}).add({_next:function(t){t||(this._source instanceof e.Query&&(this._source=this._source instanceof e.ArrayLikeQuery?this._source._list:this._source.array()),this._count=this._source.length);var n=this._count;if(n>t){for(var r=n-t-1,i=this._source;!rt.call(i,r);){if(--r<0)return!1;this._count--}return this.item=i[r],!0}}}),e.query=function(t){return void 0===t?new e.NullQuery:t instanceof e.Query?t:e.fun.is(t)?new e.AdhocQuery(t):new e.ArrayLikeQuery(t)},e.range=function(t,n,r){return new e.RangeQuery(t,n,r)},e.textTable=function(t){function n(){return s.map(function(e){switch(e){case a:return r(e,"","","","");case f:return i||(i=r(e,"","","",""));case l:return r(e,"","","","")}return r(e,""," ","","")}).join("\n")}function r(t,n,r,i,s){return i+t.map(function(t,n){return e.string.padRight(t||"",u[n],r)}).join(n)+s}var i,s=[],o=" ",u=new Array(t),a=e.array.create(t,""),f=a.slice(),l=a.slice();return n.row=function(){for(var e,r,i=arguments,a=-1,f=new Array(t);++a<t;)e=i[a],r=f[a]=o+(void 0===e?"":String(e))+o,u[a]=Math.max(u[a]||0,r.length);return s.push(f),n},n.rowSep=function(e){return s.push(s.length?e?l:f:a),n},n},e.round10=function(e,t){return t?(e=+e,isNaN(e)||"number"!=typeof t||t%1!==0?0/0:(e=Math.round(et(e,t)),et(e,-t))):Math.round(e)},e.mult10=function(e,t){return t?et(+e,t):e},e.delta=function(e,t){if(e===t)return 0;var n=e-t;return 0>n?-n:n},gt=e.global,e}),pen.define("cdf/lib/CCC/protovis-compat",["require"],function(e){var t="./protovis",n="./protovis-msie",r={load:function(r,i,s,o){if(o.isBuild)i([t],s);else{var u=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,a=function(e,t,n){return t=e.createElement("div"),t.innerHTML='<pvml:shape adj="1" />',n=t.firstChild,n?(n.style.behavior="url(#default#VML)","object"==typeof n.adj):!1}(document);!u&&a?e([n],s):e([t],s)}}};return r}),pen.define("cdf/lib/CCC/protovis",[],function(){Array.prototype.map||(Array.prototype.map=function(e,t){for(var n=this.length,r=new Array(n),i=0;n>i;i++)i in this&&(r[i]=e.call(t,this[i],i,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var n=this.length,r=new Array,i=0;n>i;i++)if(i in this){var s=this[i];e.call(t,s,i,this)&&r.push(s)}return r}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Array.prototype.reduce||(Array.prototype.reduce=function(e,t){var n=this.length;if(!n&&1==arguments.length)throw new Error("reduce: empty array, no initial value");var r=0;if(arguments.length<2)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new Error("reduce: no values, no initial value")}for(;n>r;r++)r in this&&(t=e(t,this[r],r,this));return t}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=this.length>>>0,r=!isFinite(t)||0>t?0:t>this.length?this.length:t;n>r;r++)if(this[r]===e)return r;return-1}),Date.now||(Date.now=function(){return+(new Date)}),Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t});var e={};return e.version={major:3,minor:3},e.identity=function(e){return e},e.index=function(){return this.index},e.child=function(){return this.childIndex},e.parent=function(){return this.parent.index},!function(){e.extend=function(e){return Object.create(e.prototype||e)},e.extendType=function(t,n){var r=t.prototype=e.extend(n);return r.constructor=t,t},e.parse=function(t){for(var n,r,i=new RegExp("function\\s*(\\b\\w+)?\\s*\\([^)]*\\)\\s*","mg"),s=0,o="";n=i.exec(t);){var u=n.index+n[0].length;if("{"!=t.charAt(u)){o+=t.substring(s,u)+"{return ",s=u;for(var a=0;a>=0&&u<t.length;u++){var f=t.charAt(u);switch(f){case'"':case"'":for(;++u<t.length&&(r=t.charAt(u))!=f;)"\\"==r&&u++;break;case"[":case"(":a++;break;case"]":case")":a--;break;case";":case",":0==a&&a--}}o+=e.parse(t.substring(s,--u))+";}",s=u}i.lastIndex=u}return o+=t.substring(s),o},e.error=function(e){"undefined"!=typeof console&&console.error?console.error(e):alert(e)},e.listen=function(t,n,r){return r=e.listener(r),"load"===n||"onload"===n?e.listenForPageLoad(r):(t.addEventListener?t.addEventListener(n,r,!1):(t===window&&(t=document.documentElement),t.attachEvent("on"+n,r)),r)},e.unlisten=function(e,t,n){n.$listener&&(n=n.$listener),e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},e.listenForPageLoad=function(e){"complete"!==document.readyState?document.addEventListener?window.addEventListener("load",e,!1):document.attachEvent&&window.attachEvent("onload",e):e(null)},e.listener=function(t){return t.$listener||(t.$listener=function(n){try{return e.event=n=n&&e.fixEvent(n),t.call(this,n)}catch(r){e.error(r)}finally{delete e.event}})},e.fixEvent=function(e){if(null==e.pageX&&null!=e.clientX){var t=e.target&&e.target.ownerDocument||document,n=t.documentElement,r=t.body;e.pageX=1*e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=1*e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)}return e},e.ancestor=function(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},e.removeChildren=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},e.getWindow=function(e){return null!=e&&e==e.window?e:9===e.nodeType?e.defaultView||e.parentWindow:!1};var t=/\-([a-z])/g;e.hiphen2camel=function(e){return t.test(e)?e.replace(t,function(e,t){return t.toUpperCase()}):e};var n=window.getComputedStyle;e.css=function(t,r){return n?n.call(window,t,null).getPropertyValue(r):t.currentStyle["float"===r?"styleFloat":e.hiphen2camel(r)]},e.cssStyle=function(t){var r;return n?(r=n.call(window,t,null),function(e){return r.getPropertyValue(e)}):(r=t.currentStyle,function(t){return r["float"===t?"styleFloat":e.hiphen2camel(t)]})},e._getElementsByClass=function(e,t){null==t&&(t=document);for(var n=[],r=t.getElementsByTagName("*"),i=r.length,s=new RegExp("(^|\\s)"+e+"(\\s|$)"),o=0,u=0;i>o;o++)s.test(r[o].className)&&(n[u]=r[o],u++);return n},e.getElementsByClassName=function(t,n){return t.getElementsByClassName?t.getElementsByClassName(n):e._getElementsByClass(n,t)},e.elementOffset=function(t){var n=t&&t.ownerDocument;if(n){var r=n.body;if(r!==t){var i;i="undefined"!=typeof t.getBoundingClientRect?t.getBoundingClientRect():{top:0,left:0};var s=e.getWindow(n),o=n.documentElement,u=o.clientTop||r.clientTop||0,a=o.clientLeft||r.clientLeft||0,f=s.pageYOffset||o.scrollTop,l=s.pageXOffset||o.scrollLeft;return{top:i.top+f-u,left:i.left+l-a}}}},e.renderer=function(){var t=document.svgImplementation||"nativesvg";return e.renderer=function(){return t},t};var r=1;e.id=function(){return r++},e.functor=function(e){return"function"==typeof e?e:function(){return e}},e.stringLowerCase=function(e){return String(e).toLowerCase()},e.get=function(e,t,n){var r;return e&&null!=(r=e[t])?r:n};var i=Object.prototype.hasOwnProperty;e.lazyArrayOwn=function(e,t){var n;return e&&i.call(e,t)&&(n=e[t])?n:e[t]=[]},e.parseNumNonNeg=function(e,t){return null!=e&&("string"==typeof e?e=+e:"number"!=typeof e&&(e=null)),null==e||isNaN(e)||0>e?null==t?0:t:e};var s=e.epsilon=1e-6;e.floatLess=function(t,n){return!e.floatEqual(t,n)&&n>t},e.floatLessOrEqual=function(t,n){return n>t||e.floatEqual(t,n)},e.floatGreater=function(t,n){return!e.floatEqual(t,n)&&t>n},e.floatEqual=function(e,t){return Math.abs(t-e)<s},e.floatZero=function(e){return Math.abs(e)<s},e.floatBelongsOpen=function(t,n,r){return e.floatLess(t,n)&&e.floatLess(n,r)},e.floatBelongsClosed=function(t,n,r){return e.floatLessOrEqual(t,n)&&e.floatLessOrEqual(n,r)}}(),e.listen(window,"load",function(){e.$={i:0,x:document.getElementsByTagName("script")},e.$.xlen=e.$.x.length;for(;e.$.i<e.$.xlen;e.$.i++){e.$.s=e.$.x[e.$.i];if("text/javascript+protovis"==e.$.s.type)try{window.eval(e.parse(e.$.s.text))}catch(t){e.error(t)}}delete e.$}),e.Format={},e.Format.re=function(e){return e.replace(/[\\\^\$\*\+\?\[\]\(\)\.\{\}]/g,"\\$&")},e.Format.pad=function(e,t,n){var r=t-String(n).length;return 1>r?n:(new Array(r+1)).join(e)+n},e.Format.date=function(t){function n(e){return t.replace(/%[a-zA-Z0-9]/g,function(t){switch(t){case"%a":return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()];case"%A":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()];case"%h":case"%b":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];case"%B":return["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()];case"%c":return e.toLocaleString();case"%C":return r("0",2,Math.floor(e.getFullYear()/100)%100);case"%d":return r("0",2,e.getDate());case"%x":case"%D":return r("0",2,e.getMonth()+1)+"/"+r("0",2,e.getDate())+"/"+r("0",2,e.getFullYear()%100);case"%e":return r(" ",2,e.getDate());case"%H":return r("0",2,e.getHours());case"%I":var n=e.getHours()%12;return n?r("0",2,n):12;case"%m":return r("0",2,e.getMonth()+1);case"%M":return r("0",2,e.getMinutes());case"%n":return"\n";case"%p":return e.getHours()<12?"AM":"PM";case"%T":case"%X":case"%r":var n=e.getHours()%12;return(n?r("0",2,n):12)+":"+r("0",2,e.getMinutes())+":"+r("0",2,e.getSeconds())+" "+(e.getHours()<12?"AM":"PM");case"%R":return r("0",2,e.getHours())+":"+r("0",2,e.getMinutes());case"%S":return r("0",2,e.getSeconds());case"%Q":return r("0",3,e.getMilliseconds());case"%t":return"	";case"%u":var i=e.getDay();return i?i:1;case"%w":return e.getDay();case"%y":return r("0",2,e.getFullYear()%100);case"%Y":return e.getFullYear();case"%%":return"%"}return t})}var r=e.Format.pad;return n.format=n,n.parse=function(n){var r=1970,i=0,s=1,o=0,u=0,a=0,f=[function(){}],l=e.Format.re(t).replace(/%[a-zA-Z0-9]/g,function(e){switch(e){case"%b":return f.push(function(e){i={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[e]}),"([A-Za-z]+)";case"%h":case"%B":return f.push(function(e){i={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11}[e]}),"([A-Za-z]+)";case"%e":case"%d":return f.push(function(e){s=e}),"([0-9]+)";case"%I":case"%H":return f.push(function(e){o=e}),"([0-9]+)";case"%m":return f.push(function(e){i=e-1}),"([0-9]+)";case"%M":return f.push(function(e){u=e}),"([0-9]+)";case"%p":return f.push(function(e){12==o?"am"==e&&(o=0):"pm"==e&&(o=Number(o)+12)}),"(am|pm)";case"%S":return f.push(function(e){a=e}),"([0-9]+)";case"%y":return f.push(function(e){e=Number(e),r=e+(e>=0&&69>e?2e3:e>=69&&100>e?1900:0)}),"([0-9]+)";case"%Y":return f.push(function(e){r=e}),"([0-9]+)";case"%%":return f.push(function(){}),"%"}return e}),c=n.match(l);return c&&c.forEach(function(e,t){f[t](e)}),new Date(r,i,s,o,u,a)},n},e.Format.time=function(t){function n(e){e=Number(e);switch(t){case"short":return e>=31536e6?(e/31536e6).toFixed(1)+" years":e>=6048e5?(e/6048e5).toFixed(1)+" weeks":e>=864e5?(e/864e5).toFixed(1)+" days":e>=36e5?(e/36e5).toFixed(1)+" hours":e>=6e4?(e/6e4).toFixed(1)+" minutes":(e/1e3).toFixed(1)+" seconds";case"long":var n=[],i=e%6e4/1e3>>0,s=e%36e5/6e4>>0;n.push(r("0",2,i));if(e>=36e5){var o=e%864e5/36e5>>0;n.push(r("0",2,s)),e>=864e5?(n.push(r("0",2,o)),n.push(Math.floor(e/864e5).toFixed())):n.push(o.toFixed())}else n.push(s.toFixed());return n.reverse().join(":")}}var r=e.Format.pad;return n.format=n,n.parse=function(e){switch(t){case"short":for(var n,r=/([0-9,.]+)\s*([a-z]+)/g,i=0;n=r.exec(e);){var s=parseFloat(n[0].replace(",","")),o=0;switch(n[2].toLowerCase()){case"year":case"years":o=31536e6;break;case"week":case"weeks":o=6048e5;break;case"day":case"days":o=864e5;break;case"hour":case"hours":o=36e5;break;case"minute":case"minutes":o=6e4;break;case"second":case"seconds":o=1e3}i+=s*o}return i;case"long":var n=e.replace(",","").split(":").reverse(),i=0;return n.length&&(i+=1e3*parseFloat(n[0])),n.length>1&&(i+=6e4*parseFloat(n[1])),n.length>2&&(i+=36e5*parseFloat(n[2])),n.length>3&&(i+=864e5*parseFloat(n[3])),i}},n},e.Format.number=function(){function t(e){1/0>o&&(e=Math.round(e*u)/u);var t=String(Math.abs(e)).split("."),v=t[0];v.length>r&&(v=v.substring(v.length-r)),l&&v.length<n&&(v=(new Array(n-v.length+1)).join(a)+v),v.length>3&&(v=v.replace(/\B(?=(?:\d{3})+(?!\d))/g,h)),!l&&v.length<i&&(v=(new Array(i-v.length+1)).join(a)+v),t[0]=0>e?p+v+d:v;var m=t[1]||"";return m.length>o&&(m=t[1]=m.substr(0,o)),m.length<s&&(t[1]=m+(new Array(s-m.length+1)).join(f)),t.join(c)}var n=0,r=1/0,i=0,s=0,o=0,u=1,a="0",f="0",l=!0,c=".",h=",",p="",d="";return t.format=t,t.parse=function(t){var n=e.Format.re,i=String(t).split(c);1==i.length&&(i[1]=""),i[0].replace(new RegExp("^("+n(a)+")*"),""),i[1].replace(new RegExp("("+n(f)+")*$"),"");var s=i[0].replace(new RegExp(n(h),"g"),"");s.length>r&&(s=s.substring(s.length-r));var l=i[1]?Number("0."+i[1]):0;return 1/0>o&&(l=Math.round(l*u)/u),Math.round(s)+l},t.integerDigits=function(e,t){return arguments.length?(n=Number(e),r=arguments.length>1?Number(t):n,i=n+Math.floor(n/3)*h.length,this):[n,r]},t.fractionDigits=function(e,t){return arguments.length?(s=Number(e),o=arguments.length>1?Number(t):s,u=Math.pow(10,o),this):[s,o]},t.integerPad=function(e){return arguments.length?(a=String(e),l=/\d/.test(a),this):a},t.fractionPad=function(e){return arguments.length?(f=String(e),this):f},t.decimal=function(e){return arguments.length?(c=String(e),this):c},t.group=function(e){return arguments.length?(h=e?String(e):"",i=n+Math.floor(n/3)*h.length,this):h},t.negativeAffix=function(e,t){return arguments.length?(p=String(e||""),d=String(t||""),this):[p,d]},t},!function(){var t;e.Text={},e.Text.createCache=function(){return new n},e.Text.usingCache=function(e,r,i){if(!(e instanceof n))throw new Error("Not a valid cache.");var s=t;t=e;try{return r.call(i)}finally{t=s}},e.Text.measure=function(e,n){e=null==e?"":String(e);var r=t&&t.get(n,e);return r||(r=e?this.measureCore(e,n):{width:0,height:0},t&&t.put(n,e,r)),r},e.Text.measureWidth=function(t,n){return e.Text.measure(t,n).width},e.Text.fontHeight=function(t){return e.Text.measure("M",t).height},e.Text.measureCore=function(){function t(){return r||(r=n())}function n(){var t=document.createElement("div");t.id="pvSVGText_"+(new Date).getTime();var n=t.style;n.position="absolute",n.visibility="hidden",n.width=0,n.height=0,n.left=0,n.top=0,n.lineHeight=1,n.textTransform="none",n.letterSpacing="normal",n.whiteSpace="nowrap";var r=e.SvgScene.create("svg");r.setAttribute("font-size","10px"),r.setAttribute("font-family","sans-serif"),t.appendChild(r);var i=e.SvgScene.create("text");return r.appendChild(i),i.appendChild(document.createTextNode("")),document.body.appendChild(t),i}var r,i="10px sans-serif";return function(n,r){r||(r=null);var s=t();i!==r&&(i=r,e.SvgScene.setStyle(s,{font:r})),s.firstChild.nodeValue=String(n);var o;try{o=s.getBBox()}catch(u){throw"function"==typeof console.error&&console.error("GetBBox failed: ",u),u}return{width:o.width,height:o.height}}}();var n=function(){this._fontsCache={}},r=Object.prototype.hasOwnProperty;n.prototype._getFont=function(e){return e=e||"",r.call(this._fontsCache,e)?this._fontsCache[e]:this._fontsCache[e]={}},n.prototype.get=function(e,t){t=t||"";var n=this._getFont(e);return r.call(n,t)?n[t]:null},n.prototype.put=function(e,t,n){return this._getFont(e)[t||""]=n}}(),e.map=function(e,t){var n={};return t?e.map(function(e,r){return n.index=r,t.call(n,e)}):e.slice()},e.repeat=function(t,n){return 1==arguments.length&&(n=2),e.blend(e.range(n).map(function(){return t}))},e.array=function(e,t){var n=e>=0?new Array(e):[];if(void 0!==t)for(var r=0;e>r;r++)n[r]=t;return n},e.cross=function(e,t){for(var n=[],r=0,i=e.length,s=t.length;i>r;r++)for(var o=0,u=e[r];s>o;o++)n.push([u,t[o]]);return n},e.blend=function(e){return Array.prototype.concat.apply([],e)},e.transpose=function(t){var n=t.length,r=e.max(t,function(e){return e.length});if(r>n){t.length=r;for(var i=n;r>i;i++)t[i]=new Array(n);for(var i=0;n>i;i++)for(var s=i+1;r>s;s++){var o=t[i][s];t[i][s]=t[s][i],t[s][i]=o}}else{for(var i=0;r>i;i++)t[i].length=n;for(var i=0;n>i;i++)for(var s=0;i>s;s++){var o=t[i][s];t[i][s]=t[s][i],t[s][i]=o}}t.length=r;for(var i=0;r>i;i++)t[i].length=n;return t},e.normalize=function(t,n){for(var r=e.map(t,n),i=e.sum(r),s=0;s<r.length;s++)r[s]/=i;return r},e.permute=function(t,n,r){r||(r=e.identity);var i=new Array(n.length),s={};return n.forEach(function(e,n){s.index=e,i[n]=r.call(s,t[e])}),i},e.numerate=function(t,n){n||(n=e.identity);var r={},i={};return t.forEach(function(e,t){i.index=t,r[n.call(i,e)]=t}),r},e.uniq=function(t,n){n||(n=e.identity);var r,i={},s=[],o={};return t.forEach(function(e,t){o.index=t,r=n.call(o,e),r in i||(i[r]=s.push(r))}),s},e.naturalOrder=function(e,t){return t>e?-1:e>t?1:0},e.reverseOrder=function(e,t){return e>t?-1:t>e?1:0},e.search=function(t,n,r){r||(r=e.identity);for(var i=0,s=t.length-1;s>=i;){var o=i+s>>1,u=r(t[o]);if(n>u)i=o+1;else{if(!(u>n))return o;s=o-1}}return-i-1},e.search.index=function(t,n,r){var i=e.search(t,n,r);return 0>i?-i-1:i},e.range=function(e,t,n){1==arguments.length&&(t=e,e=0),void 0==n&&(n=1);if((t-e)/n==1/0)throw new Error("range must be finite");var r,i=[],s=0;t-=1e-10*(t-e);if(0>n)for(;(r=e+n*s++)>t;)i.push(r);else for(;(r=e+n*s++)<t;)i.push(r);return i},e.random=function(e,t,n){return 1==arguments.length&&(t=e,e=0),void 0==n&&(n=1),n?Math.floor(Math.random()*(t-e)/n)*n+e:Math.random()*(t-e)+e},e.sum=function(e,t){var n={};return e.reduce(t?function(e,r,i){return n.index=i,e+t.call(n,r)}:function(e,t){return e+t},0)},e.max=function(t,n){return n==e.index?t.length-1:Math.max.apply(null,n?e.map(t,n):t)},e.max.index=function(t,n){if(!t.length)return-1;if(n==e.index)return t.length-1;n||(n=e.identity);for(var r=0,i=-1/0,s={},o=0;o<t.length;o++){s.index=o;var u=n.call(s,t[o]);u>i&&(i=u,r=o)}return r},e.min=function(t,n){return n==e.index?0:Math.min.apply(null,n?e.map(t,n):t)},e.min.index=function(t,n){if(!t.length)return-1;if(n==e.index)return 0;n||(n=e.identity);for(var r=0,i=1/0,s={},o=0;o<t.length;o++){s.index=o;var u=n.call(s,t[o]);i>u&&(i=u,r=o)}return r},e.mean=function(t,n){return e.sum(t,n)/t.length},e.median=function(t,n){if(n==e.index)return(t.length-1)/2;t=e.map(t,n).sort(e.naturalOrder);if(t.length%2)return t[Math.floor(t.length/2)];var r=t.length/2;return(t[r-1]+t[r])/2},e.variance=function(t,n){if(t.length<1)return 0/0;if(1==t.length)return 0;var r=e.mean(t,n),i=0,s={};n||(n=e.identity);for(var o=0;o<t.length;o++){s.index=o;var u=n.call(s,t[o])-r;i+=u*u}return i},e.deviation=function(t,n){return Math.sqrt(e.variance(t,n)/(t.length-1))},e.log=function(e,t){return Math.log(e)/Math.log(t)},e.logSymmetric=function(t,n){return 0==t?0:0>t?-e.log(-t,n):e.log(t,n)},e.logAdjusted=function(t,n){if(!isFinite(t))return t;var r=0>t;return n>t&&(t+=(n-t)/n),r?-e.log(t,n):e.log(t,n)},e.logFloor=function(t,n){return t>0?Math.pow(n,Math.floor(e.log(t,n))):-Math.pow(n,-Math.floor(-e.log(-t,n)))},e.logCeil=function(t,n){return t>0?Math.pow(n,Math.ceil(e.log(t,n))):-Math.pow(n,-Math.ceil(-e.log(-t,n)))},!function(){var t=Math.PI/180,n=180/Math.PI;e.radians=function(e){return t*e},e.degrees=function(e){return n*e}}(),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.dict=function(e,t){for(var n={},r={},i=0;i<e.length;i++)if(i in e){var s=e[i];r.index=i,n[s]=t.call(r,s)}return n},e.hasOwnProp=Object.prototype.hasOwnProperty,e.copyOwn=function(t,n){if(n){var r=e.hasOwnProp;for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t},e.dom=function(t){return new e.Dom(t)},e.Dom=function(e){this.$map=e},e.Dom.prototype.$leaf=function(e){return"object"!=typeof e},e.Dom.prototype.leaf=function(e){return arguments.length?(this.$leaf=e,this):this.$leaf},e.Dom.prototype.root=function(t){function n(t){var i=new e.Dom.Node;for(var s in t){var o=t[s];i.appendChild(r(o)?new e.Dom.Node(o):n(o)).nodeName=s}return i}var r=this.$leaf,i=n(this.$map);return i.nodeName=t,i},e.Dom.prototype.nodes=function(){return this.root().nodes()},e.Dom.Node=function(e){void 0!==e&&(this.nodeValue=e)},e.Dom.Node.prototype.nodeValue=void 0,e.Dom.Node.prototype.childNodes=[],e.Dom.Node.prototype.parentNode=null,e.Dom.Node.prototype.firstChild=null,e.Dom.Node.prototype.lastChild=null,e.Dom.Node.prototype.previousSibling=null,e.Dom.Node.prototype.nextSibling=null,e.Dom.Node.prototype._firstDirtyChildIndex=1/0,e.Dom.Node.prototype._childIndex=-1,e.Dom.Node.prototype.findChildIndex=function(e){if(!e)throw new Error("Argument 'n' required");if(e.parentNode===this){var t=e.childIndex(!0);if(t>-1)return t}throw new Error("child not found")},e.Dom.Node.prototype._childRemoved=function(){},e.Dom.Node.prototype._childAdded=function(){},e.Dom.Node.prototype.removeChild=function(e){var t=this.findChildIndex(e);return this.removeAt(t)},e.Dom.Node.prototype.appendChild=function(t){var n=t.parentNode;n&&n.removeChild(t);var r=this.lastChild;t.parentNode=this,t.previousSibling=r,r?(r.nextSibling=t,t._childIndex=r._childIndex+1):(this.firstChild=t,t._childIndex=0),this.lastChild=t;var i=e.lazyArrayOwn(this,"childNodes").push(t);return this._childAdded(t,i-1),t},e.Dom.Node.prototype.insertBefore=function(e,t){if(!t)return this.appendChild(e);var n=this.findChildIndex(t);return this.insertAt(e,n)},e.Dom.Node.prototype.insertAt=function(e,t){if(null==t)return this.appendChild(e);var n=this.childNodes,r=n.length;if(t===r)return this.appendChild(e);if(0>t||t>r)throw new Error("Index out of range.");var i=e.parentNode;i&&i.removeChild(e);var s=t+1;s<this._firstDirtyChildIndex&&(this._firstDirtyChildIndex=s);var o=n[t];e.parentNode=this,e.nextSibling=o,e._childIndex=t;var u=e.previousSibling=o.previousSibling;return o.previousSibling=e,u?u.nextSibling=e:(o===this.lastChild&&(this.lastChild=e),this.firstChild=e),n.splice(t,0,e),this._childAdded(e,t),e},e.Dom.Node.prototype.removeAt=function(e){var t=this.childNodes,n=t.length;if(!(0>e||e>=n)){var r=t[e];t.splice(e,1),n-1>e&&e<this._firstDirtyChildIndex&&(this._firstDirtyChildIndex=e);var i=r.previousSibling,s=r.nextSibling;return i?i.nextSibling=s:this.firstChild=s,s?s.previousSibling=i:this.lastChild=i,r.nextSibling=r.previousSibling=r.parentNode=null,this._childRemoved(r,e),r}},e.Dom.Node.prototype.replaceChild=function(e,t){var n=this.findChildIndex(t),r=e.parentNode;r&&r.removeChild(e),e.parentNode=this,e.nextSibling=t.nextSibling,e._childIndex=t._childIndex;var i=e.previousSibling=t.previousSibling;i?i.nextSibling=e:this.firstChild=e;var s=t.nextSibling;return s?s.previousSibling=e:this.lastChild=e,this.childNodes[n]=e,this._childRemoved(t,n),this._childAdded(e,n),t},e.Dom.Node.prototype.childIndex=function(e){var t=this.parentNode;if(t){var n=t._firstDirtyChildIndex;if(1/0>n){var r=t.childNodes;if(!e)return r.indexOf(this);for(var i=r.length;i>n;)r[n]._childIndex=n,n++;t._firstDirtyChildIndex=1/0}return this._childIndex}return-1},e.Dom.Node.prototype.visitBefore=function(e){function t(n,r){e(n,r);for(var i=n.firstChild;i;i=i.nextSibling)t(i,r+1)}t(this,0)},e.Dom.Node.prototype.visitAfter=function(e){function t(n,r){for(var i=n.firstChild;i;i=i.nextSibling)t(i,r+1);e(n,r)}t(this,0)},e.Dom.Node.prototype.sort=function(e){if(this.firstChild){this._firstDirtyChildIndex=1/0;var t=this.childNodes;t.sort(e);var n,r=this.firstChild=t[0];delete r.previousSibling,r._childIndex=0;for(var i=1,s=t.length;s>i;i++)r.sort(e),n=t[i],n._childIndex=i,n.previousSibling=r,r=r.nextSibling=n;this.lastChild=r,delete r.nextSibling,r.sort(e)}return this},e.Dom.Node.prototype.reverse=function(){var e=[];return this.visitAfter(function(t){this._firstDirtyChildIndex=1/0;for(var n;n=t.lastChild;)e.push(t.removeChild(n));if(e.length)for(;n=e.pop();)t.insertBefore(n,t.firstChild)}),this},e.Dom.Node.prototype.nodes=function(){var e=[];return this.visitBefore(function(t){e.push(t)}),e},e.Dom.Node.prototype.toggle=function(e){if(e)return this.toggled?this.visitBefore(function(e){e.toggled&&e.toggle()}):this.visitAfter(function(e){e.toggled||e.toggle()});var t,n=this;if(n.toggled){for(;t=n.toggled.pop();)n.appendChild(t);delete n.toggled}else if(t=n.lastChild){n.toggled=[];do n.toggled.push(n.removeChild(t));while(t=n.lastChild)}},e.nodes=function(t){for(var n=new e.Dom.Node,r=0,i=t.length;i>r;r++)n.appendChild(new e.Dom.Node(t[r]));return n.nodes()},e.tree=function(t){return new e.Tree(t)},e.Tree=function(e){this.array=e},e.Tree.prototype.keys=function(e){return this.k=e,this},e.Tree.prototype.value=function(e){return this.v=e,this},e.Tree.prototype.map=function(){for(var e={},t={},n=0;n<this.array.length;n++){t.index=n;for(var r=this.array[n],i=this.k.call(t,r),s=e,o=0;o<i.length-1;o++)s=s[i[o]]||(s[i[o]]={});s[i[o]]=this.v?this.v.call(t,r):r}return e},e.nest=function(t){return new e.Nest(t)},e.Nest=function(e){this.array=e,this.keys=[]},e.Nest.prototype.key=function(e){return this.keys.push(e),this},e.Nest.prototype.sortKeys=function(t){return this.keys[this.keys.length-1].order=t||e.naturalOrder,this},e.Nest.prototype.sortValues=function(t){return this.order=t||e.naturalOrder,this},e.Nest.prototype.map=function(){for(var e,t={},n=[],r=0;r<this.array.length;r++){var i=this.array[r],s=t;for(e=0;e<this.keys.length-1;e++){var o=this.keys[e](i);s[o]||(s[o]={}),s=s[o]}o=this.keys[e](i);if(!s[o]){var u=[];n.push(u),s[o]=u}s[o].push(i)}if(this.order)for(var e=0;e<n.length;e++)n[e].sort(this.order);return t},e.Nest.prototype.entries=function(){function e(t){var n=[];for(var r in t){var i=t[r];n.push({key:r,values:i instanceof Array?i:e(i)})}return n}function t(e,n){var r=this.keys[n].order;r&&e.sort(function(e,t){return r(e.key,t.key)});if(++n<this.keys.length)for(var i=0;i<e.length;i++)t.call(this,e[i].values,n);return e}return t.call(this,e(this.map()),0)},e.Nest.prototype.rollup=function(e){function t(n){for(var r in n){var i=n[r];i instanceof Array?n[r]=e(i):t(i)}return n}return t(this.map())},e.flatten=function(t){return new e.Flatten(t)},e.Flatten=function(e){this.map=e,this.keys=[]},e.Flatten.prototype.key=function(e,t){return this.keys.push({name:e,value:t}),delete this.$leaf,this},e.Flatten.prototype.leaf=function(e){return this.keys.length=0,this.$leaf=e,this},e.Flatten.prototype.array=function(){function e(t,i){if(s(t))n.push({keys:r.slice(),value:t});else for(var o in t)r.push(o),e(t[o],i+1),r.pop()}function t(e,s){if(s<i.length-1)for(var o in e)r.push(o),t(e[o],s+1),r.pop();else n.push(r.concat(e))}var n=[],r=[],i=this.keys,s=this.$leaf;return s?(e(this.map,0),n):(t(this.map,0),n.map(function(e){for(var t={},n=0;n<i.length;n++){var r=i[n],s=e[n];t[r.name]=r.value?r.value.call(null,s):s}return t}))},e.Transform=function(){},e.Transform.prototype={k:1,x:0,y:0},e.Transform.identity=new e.Transform,e.Transform.prototype.translate=function(t,n){var r=new e.Transform;return r.k=this.k,r.x=this.k*t+this.x,r.y=this.k*n+this.y,r},e.Transform.prototype.scale=function(t){var n=new e.Transform;return n.k=this.k*t,n.x=this.x,n.y=this.y,n},e.Transform.prototype.invert=function(){var t=new e.Transform,n=1/this.k;return t.k=n,t.x=-this.x*n,t.y=-this.y*n,t},e.Transform.prototype.times=function(t){var n=new e.Transform;return n.k=this.k*t.k,n.x=this.k*t.x+this.x,n.y=this.k*t.y+this.y,n},e.Scale=function(){},e.Scale.interpolator=function(t,n){if("number"==typeof t)return function(e){return e*(n-t)+t};var r=t.type&&"solid"!==t.type,i=n.type&&"solid"!==n.type;return r||i?(t=r?t:e.color(t).rgb(),n=i?n:e.color(n).rgb(),function(e){return.5>e?t:n}):(t=e.color(t).rgb(),n=e.color(n).rgb(),function(r){var i=t.a*(1-r)+n.a*r;return 1e-5>i&&(i=0),0==t.a?e.rgb(n.r,n.g,n.b,i):0==n.a?e.rgb(t.r,t.g,t.b,i):e.rgb(Math.round(t.r*(1-r)+n.r*r),Math.round(t.g*(1-r)+n.g*r),Math.round(t.b*(1-r)+n.b*r),i)})},e.Scale.common={by:function(e){function t(){return n(e.apply(this,arguments))}var n=this;for(var r in n)t[r]=n[r];return t},by1:function(e){function t(t){return n(e.call(this,t))}var n=this;for(var r in n)t[r]=n[r];return t},transform:function(e){function t(){return e.call(this,n.apply(n,arguments))}var n=this;for(var r in n)t[r]=n[r];return t}},!function(){function t(t,s,o,u){var a,f=o-s;if(f&&isFinite(f)){var l=e.parseNumNonNeg(e.get(u,"precision",0)),c=e.parseNumNonNeg(e.get(u,"precisionMin",0)),h=e.parseNumNonNeg(e.get(u,"precisionMax",1/0)),p=e.get(u,"roundInside",!0);isFinite(l)||(l=0),isFinite(c)||(c=0),h||(h=1/0);var d=e.get(u,"numberExponentMin"),v=e.get(u,"numberExponentMax");null!=d&&isFinite(d)&&(c=Math.max(c,Math.pow(10,Math.floor(d)))),null!=v&&isFinite(v)&&(h=Math.min(h,5*Math.pow(10,Math.floor(v)))),p&&(c>f&&(c=f),h>f&&(h=f)),c>h&&(h=c),l?l=Math.max(Math.min(l,h),c):c===h&&(l=c);var m,g,y,b,w=0,E=!!l;if(E)m={base:Math.abs(l),mult:1,value:1},m.value=m.base;else{var S=e.parseNumNonNeg(e.get(u,"tickCountMax",1/0));1>S&&(S=1),null==t?t=Math.min(10,S):isFinite(t)?t>S&&(t=S):t=isFinite(S)?S:10,m={base:isFinite(t)?e.logFloor(f/t,10):0,mult:1,value:1},m.value=m.base,c>0&&(g=i(c,!0),m.value<g.value&&(n(m,g),w=-1)),isFinite(h)&&(y=i(h,!1),g&&y.value<=g.value?y=null:y.value<m.value&&(n(m,y),w=1));if(1!==w&&isFinite(t)&&m.mult<10){b=f/m.base;if(b>t){var x=t/b;.15>=x?m.mult=10:m.mult<5&&(.35>=x?m.mult=5:m.mult<2&&.75>=x&&(m.mult=2)),m.mult>1&&(m.value=m.base*m.mult,g&&m.value<g.value?(n(m,g),w=-1):y&&y.value<m.value?(n(m,y),w=1):10===m.mult&&(m.base*=10,m.mult=1))}}}for(var T;;){var N=m.value,C=N*Math[p?"ceil":"floor"](s/N),k=N*Math[p?"floor":"ceil"](o/N);if(T&&(C>k||y&&k-C>y.value)){m=T;break}var L=Math.floor(e.log(N,10)+1e-10);m.decPlaces=Math.max(0,-L),m.ticks=e.range(C,k+N,N);if(E||w>0||m.ticks.length<=S)break;if(T&&T.ticks.length<=m.ticks.length){m=T;break}m=r(T=m)}a=m.ticks,a.step=m.value,a.base=m.base,a.mult=m.mult,a.decPlaces=m.decPlaces,a.format=e.Format.number().fractionDigits(m.decPlaces)}else a=[+s],a.step=a.base=a.mult=1,a.decPlaces=0,a.format=e.Format.number().fractionDigits(0);return a}function n(e,t){return e.base=t.base,e.mult=t.mult,e.value=t.value,e}function r(e){var t=n({},e);switch(t.mult){case 5:t.mult=1,t.base*=10;break;case 2:t.mult=5;break;case 1:t.mult=2}return t.value=t.base*t.mult,t}function i(t,n){0>t&&(t=-t);var r=e.logFloor(t,10),i=t/r;return n?i>5?(i=1,r*=10):i=i>2?5:i>1?2:1:i=i>=5?5:i>=2?2:1,{base:r,mult:i,value:r*i,source:t}}function s(e){return new Date(e)}function o(t,n,r,i,o,a,f){var c,p=r-n;if(p&&isFinite(p)){i=h(e.get(f,"precision"),i);var d=h(e.get(f,"precisionMin"),0),v=h(e.get(f,"precisionMax"),1/0);d>v&&(v=d),i?i=Math.max(Math.min(i,v),d):d===v&&(i=d);var m=e.parseNumNonNeg(e.get(f,"tickCountMax",1/0));2>m&&(m=2),t=Math.min(null==t?5:t,m);for(var g,y={weekStart:a,roundInside:e.get(f,"roundInside",1)},b=u(t,p,i,d,v,y),w=b.fixed,E=b.overflow;;){b.ticks=c=b.comp.ticks(n,r,b.mult,y);if(g&&b.precMax&&c[c.length-1]-c[0]>b.precMax.value){b=g;break}if(w||E>0||b.ticks.length<=m)break;if(g&&g.ticks.length<=b.ticks.length){b=g;break}g=b,b=b.comp.resultAbove(b.mult)}c=b.ticks,c.step=b.value,c.base=b.comp.value,c.mult=b.mult,c.format=l(o)||b.comp.format}else c=[s(n)],c.step=c.base=c.mult=1,c.format=e.Format.date("%x");return c}function u(e,t,n,r,i,s){var o,u,f,l,c=0,h=1,p=!!n;return n?(u=a(n,!1),u.value!==n?o=u.comp.withPrecision(n):(o=u.comp,h=u.mult)):(isFinite(e)?(o=g(t,e),h=o.multiple(t/o.value,s)):(o=v(),h=1),n=o.value*h,r>n&&(f=a(r,!0)),n>i&&(l=a(i,!1)),f&&n<f.value?(o=f.comp,h=f.mult,c=-1):l&&r<l.value&&l.value<n&&(o=l.comp,h=l.mult,c=1)),{comp:o,mult:h,value:o.value*h,source:n,overflow:c,fixed:p,precMin:f,precMax:l}}function a(e,t){return null==e||0>=e||!isFinite(e)?null:(t?v:m)().castValue(e,t)}function f(t,n,r){this.value=t,this.mult=r.mult||1,this.base=1===this.mult?this.value:Math.floor(this.value/this.mult),y.forEach(function(e){null!=r[e]&&(this[e]=r[e])},this),r.floor&&(this.floorLocal=r.floor),this.format=l(r.format),this.first=e.functor(r.first||0),this.prev=n,this.next=null,n&&(n.next=this)}function l(t){return null==t?null:"function"==typeof t?t:e.Format.date(t)}function c(e,t){var n=new Date(e.getFullYear(),e.getMonth(),1),r=t-n.getDay();return r&&(0>r&&(r+=7),n.setDate(n.getDate()+r)),n}function h(e,t){if("string"==typeof e){var n=+e;if(isNaN(n)){if(e){var r=/^(\d*)([a-zA-Z]+)$/.exec(e);r&&(e=p(r[2]),e&&(e*=+r[1]||1))}}else e=n}return("number"!=typeof e||0>e)&&(e=null!=t?t:0),e}function p(e){switch(e){case"y":return 31536e6;case"m":return 2592e6;case"w":return 6048e5;case"d":return 864e5;case"h":return 36e5;case"M":return 6e4;case"s":return 1e3;case"ms":return 1}}function d(e,t){var n=m();b.push(new f(e,n,t))}function v(){return b[0]}function m(){return b.length?b[b.length-1]:null}function g(e,t){null==t&&(t=1);var n,r=m();do n=r;while(e<t*n.value&&(r=n.prev));return n}e.Scale.quantitative=function(){function n(t){var n=e.search(a,t);return 0>n&&(n=-n-2),n=Math.max(0,Math.min(c.length-1,n)),c[n]((v(t)-f[n])/(f[n+1]-f[n]))}var r,i,u,a=[0,1],f=[0,1],l=[0,1],c=[e.identity],p=Number,d=!1,v=e.identity,m=e.identity,g=null,y=0;return n.transform=function(e,t){return v=function(t){return d?-e(-t):e(t)},m=function(e){return d?-t(-e):t(e)},f=a.map(v),this},n.domain=function(t,n,r){if(arguments.length){var i;return t instanceof Array?(arguments.length<2&&(n=e.identity),arguments.length<3&&(r=n),i=t.length&&n(t[0]),a=t.length?[e.min(t,n),e.max(t,r)]:[]):(i=t,a=Array.prototype.slice.call(arguments).map(Number)),a.length?1==a.length&&(a=[a[0],a[0]]):a=[-1/0,1/0],d=(a[0]||a[a.length-1])<0,f=a.map(v),p=i instanceof Date?s:Number,this}return a.map(p)},n.range=function(){if(arguments.length){l=Array.prototype.slice.call(arguments),l.length?1==l.length&&(l=[l[0],l[0]]):l=[-1/0,1/0],c=[];for(var t=0;t<l.length-1;t++)c.push(e.Scale.interpolator(l[t],l[t+1]));return this}return l},n.invert=function(t){var n=e.search(l,t);return 0>n&&(n=-n-2),n=Math.max(0,Math.min(c.length-1,n)),p(m(f[n]+(t-l[n])/(l[n+1]-l[n])*(f[n+1]-f[n])))},n.ticks=function(e,n){var f=a[0],l=a[a.length-1],c=f>l,h=c?l:f,d=c?f:l;return u=p===s?o(e,h,d,i,r,y,n):t(e,h,d,n),c?u.reverse():u},n.dateTickFormat=function(){return arguments.length?(r=arguments[0],this):r},n.dateTickPrecision=function(){return arguments.length?(i=h(arguments[0],0),this):i},n.dateTickWeekStart=function(e){if(arguments.length){switch((""+e).toLowerCase()){case"0":case"sunday":y=0;break;case"1":case"monday":y=1;break;case"2":case"tuesday":y=2;break;case"3":case"wednesday":y=3;break;case"4":case"thursday":y=4;break;case"5":case"friday":y=5;break;case"6":case"saturday":y=6;break;default:y=0}return this}return y},n.tickFormatter=function(e){return arguments.length?(g=e,this):g},n.tickFormat=function(e,t){var n;if(g){u||(u=[],u.step=u.base=u.mult=1,u.decPlaces=0,u.format=String);var r=p!==Number?u.step:u.decPlaces;n=g.call(u,e,r,null!=t?t:-1)}else n=u?u.format(e):String(e);return n},n.nice=function(){if(2!=a.length)return this;var e=a[0],t=a[a.length-1],n=e>t,r=n?t:e,i=n?e:t,s=i-r;if(!s||!isFinite(s))return this;var o=Math.pow(10,Math.round(Math.log(s)/Math.log(10))-1);return a=[Math.floor(r/o)*o,Math.ceil(i/o)*o],n&&a.reverse(),f=a.map(v),this},e.copyOwn(n,e.Scale.common),n.domain.apply(n,arguments),n};var y=["get","set","multiple","multiples","thresholds","closeds","castValue"];f.prototype.increment=function(e,t){null==t&&(t=1),1!==this.mult&&(t*=this.mult),this.set(e,this.get(e)+t)},f.prototype.get=function(e){return e.getMilliseconds()},f.prototype.set=function(e,t){e.setMilliseconds(t)},f.prototype.floorLocal=function(){},f.prototype.floor=function(e,t){var n=0;1!==this.mult&&(this.floorLocal(e,t),n=this.base);for(var r=this.prev;r;)1===r.mult&&r.value!==n&&r.clear(e,t),r=r.prev},f.prototype.floorMultiple=function(e,t,n){var r=this.first(e,n),i=this.get(e)-r;if(i){var s=t*this.mult,o=Math.floor(i/s)*s;this.set(e,r+o)}},f.prototype.clear=function(e,t){this.set(e,this.first(e,t))},f.prototype.multiple=function(e){for(var t=this.multiples,n=this.thresholds,r=this.closeds,i=t.length,s=-1;++s<i;)if(r[s]?e<=n[s]:e<n[s])return t[s];throw new Error("Invalid configuration.")},f.prototype.resultAbove=function(e){return this.castValue(this.value*e+.1,!0)},f.prototype.castValue=function(e,t){var n=this.multiples;if(!n)return this._castValueResult(1,e,1);var r,i=e/this.value,s=n.length;if(t){r=-1;for(;++r<s;)if(i<=n[r])return this._castValueResult(n[r],e,0);return this.next?this.next.castValue(e,t):this._castValueResult(n[s-1],e,1)}r=s;for(;r--;)if(n[r]<=i)return this._castValueResult(n[r],e,0);return this.prev?this.prev.castValue(e,t):this._castValueResult(n[0],e,-1)},f.prototype._castValueResult=function(e,t,n){return{comp:this,mult:e,value:this.value*e,source:t,overflow:n}},f.prototype.withPrecision=function(e){var t=this;return this.value!==e&&(t=new f(e,null,{mult:e,format:this.format})),t},f.prototype.ticks=function(t,n,r,i){var s=[],o=new Date(t);this.floor(o,i),r>1&&this.floorMultiple(o,r,i);if(e.get(i,"roundInside",1)){t!==+o&&this.increment(o,r);do s.push(new Date(o)),this.increment(o,r);while(n>=o)}else{s.push(new Date(o));do this.increment(o,r),s.push(new Date(o));while(n>o)}return s};var b=[];d(1,{format:"%S.%Qs",multiples:[1,5,25,50,100,250],thresholds:[10,50,100,200,1e3,1/0],closeds:[1,1,1,1,1,1]}),d(1e3,{get:function(e){return e.getSeconds()},set:function(e,t){e.setSeconds(t)},format:"%I:%M:%S",multiples:[1,5,10,15],thresholds:[10,60,90,1/0],closeds:[1,1,1,1]}),d(6e4,{get:function(e){return e.getMinutes()},set:function(e,t){e.setMinutes(t)},format:"%I:%M %p",multiples:[1,5,10,15],thresholds:[10,15,30,1/0],closeds:[1,1,1,1]}),d(36e5,{get:function(e){return e.getHours()},set:function(e,t){e.setHours(t)},format:"%I:%M %p",multiples:[1,3,6],thresholds:[10,20,1/0],closeds:[1,1,1]}),d(864e5,{get:function(e){return e.getDate()},set:function(e,t){e.setDate(t)},format:"%m/%d",first:1,multiples:[1,2,3,5],thresholds:[10,15,30,1/0],closeds:[1,0,0,1]}),d(6048e5,{get:function(e){return e.getDate()},set:function(e,t){e.setDate(t)},mult:7,floor:function(t,n){var r=t.getDay()-e.get(n,"weekStart",0);0!==r&&(0>r&&(r+=7),this.set(t,this.get(t)-r))},first:function(t,n){return this.get(c(t,e.get(n,"weekStart",0)))},format:"%m/%d",multiples:[1,2,3],thresholds:[10,15,1/0],closeds:[1,1,1]}),d(2592e6,{get:function(e){return e.getMonth()},set:function(e,t){e.setMonth(t)},format:"%m/%Y",multiples:[1,2,3],thresholds:[12,24,1/0],closeds:[1,1,1]}),d(31536e6,{get:function(e){return e.getFullYear()},set:function(e,t){e.setFullYear(t)},format:"%Y",multiple:function(t){if(10>=t)return 1;var n=e.logCeil(t/15,10);return 2>t/n?n/=5:5>t/n&&(n/=2),n},castValue:function(t,n){var r,i,s=t/this.value;if(1>s){if(!n)return this.prev?this.prev.castValue(t,n):this._castValueResult(1,t,-1);r=1}else r=e.logFloor(s,10);i=s/r;if(n)i>5?(r*=10,i=1):i=i>2?5:i>1?2:1;else if(i>5)i=5;else if(i>2)i=2;else if(i>1)i=1;else if(1>i)return this.prev?this.prev.castValue(t,n):this._castValueResult(r,t,-1);return this._castValueResult(r*i,t,0)}})}(),e.Scale.linear=function(){var t=e.Scale.quantitative();return t.domain.apply(t,arguments),t},e.Scale.log=function(){var t,n,r=e.Scale.quantitative(1,10),i=function(e){return Math.log(e)/n},s=function(e){return Math.pow(t,e)};return r.ticks=function(){var e=r.domain(),n=e[0]<0,o=Math.floor(n?-i(-e[0]):i(e[0])),u=Math.ceil(n?-i(-e[1]):i(e[1])),a=[];if(n){a.push(-s(-o));for(;o++<u;)for(var f=t-1;f>0;f--)a.push(-s(-o)*f)}else{for(;u>o;o++)for(var f=1;t>f;f++)a.push(s(o)*f);a.push(s(o))}for(o=0;a[o]<e[0];o++);for(u=a.length;a[u-1]>e[1];u--);return a.slice(o,u)},r.tickFormat=function(e){return e.toPrecision(1)},r.nice=function(){var n=r.domain();return r.domain(e.logFloor(n[0],t),e.logCeil(n[1],t))},r.base=function(e){return arguments.length?(t=Number(e),n=Math.log(t),r.transform(i,s),this):t},r.domain.apply(r,arguments),r.base(10)},e.Scale.root=function(){var t=e.Scale.quantitative();return t.power=function(e){if(arguments.length){var n=Number(e),r=1/n;return t.transform(function(e){return Math.pow(e,r)},function(e){return Math.pow(e,n)}),this}return n},t.domain.apply(t,arguments),t.power(2)},e.Scale.ordinal=function(){function t(e){return e in r||(r[e]=n.push(e)-1),i[r[e]%i.length]}var n=[],r={},i=[];return t.domain=function(t,i){if(arguments.length){t=t instanceof Array?arguments.length>1?e.map(t,i):t:Array.prototype.slice.call(arguments),n=[];for(var s={},o=0;o<t.length;o++){var u=t[o];u in s||(s[u]=!0,n.push(u))}return r=e.numerate(n),this}return n},t.range=function(t,n){return arguments.length?(i=t instanceof Array?arguments.length>1?e.map(t,n):t:Array.prototype.slice.call(arguments),"string"==typeof i[0]&&(i=i.map(e.fillStyle)),i.min=i[0],i.max=i[i.length-1],this):i},t.split=function(t,n){var r=n-t,s=this.domain().length,o=0;return 0===r?i=e.array(s,t):s&&(o=(n-t)/s,i=e.range(t+o/2,n,o)),i.min=t,i.max=n,i.step=o,this},t.splitBandedCenter=function(e,t,n){return null==n&&(n=1),this._splitBandedCore(e,t,function(e){var t=e.range/e.count;e.step=t,e.band=t*n,e.offset=t/2})},t.splitBandedCenterAbs=function(e,t,n,r){return this._splitBandedCore(e,t,function(e){var t;null==n||null==r?(t=e.range/e.count,null==n?null==r?(n=t,r=0):(r=Math.min(r,t),n=t-r):(n=Math.min(n,t),r=t-n)):t=n+r,e.step=t,e.band=n,e.offset=t/2})},t._splitBandedCore=function(t,n,r){var s,o={min:t,max:n,range:n-t,count:this.domain().length,offset:0,step:0,band:0};return 0===o.range?(i=e.array(o.count,t),s=0):o.count&&(r(o),s=o.step-o.band,i=e.range(t+o.offset,n,o.step)),i.offset=o.offset,i.step=o.step,i.band=o.band,i.margin=s,i.min=t,i.max=n,this},t.splitBandedFlushCenter=function(e,t,n){return null==n&&(n=1),this._splitBandedCore(e,t,function(e){var t=e.range,r=e.count,i=t*n/r,s=r>1?(t-r*i)/(r-1):0;e.band=i,e.step=s+i,e.offset=i/2})},t.splitFlush=function(t,n){var r=this.domain().length,s=(n-t)/(r-1);return i=1==r?[(t+n)/2]:e.range(t,n+s/2,s),i.min=t,i.max=n,this},t.splitBanded=function(t,n,r){arguments.length<3&&(r=1);if(0>r){var s=this.domain().length,o=-r*s,u=n-t-o,a=u/(s+1);i=e.range(t+a,n,a-r),i.band=-r}else{var f=(n-t)/(this.domain().length+(1-r));i=e.range(t+f*(1-r),n,f),i.band=f*r,i.step=f,i.margin=f-i.band}return i.min=t,i.max=n,this},t.invertIndex=function(e,t){var n=this.domain().length;if(0===n)return-1;var r=this.range(),i=r.max-r.min;if(0===i)return 0;var s=i/n;if(e>=r.max)return n;if(e<r.min)return 0;var o=(e-r.min)/s;return t?o:Math.round(o)},e.copyOwn(t,e.Scale.common),t.domain.apply(t,arguments),t},e.Scale.quantile=function(){function t(t){return o(Math.max(0,Math.min(r,e.search.index(i,t)-1))/r)}var n=-1,r=-1,i=[],s=[],o=e.Scale.linear();return t.quantiles=function(e){if(arguments.length){n=Number(e);if(0>n)i=[s[0]].concat(s),r=s.length-1;else{i=[],i[0]=s[0];for(var t=1;n>=t;t++)i[t]=s[~~(t*(s.length-1)/n)];r=n-1}return this}return i},t.domain=function(r,i){return arguments.length?(s=r instanceof Array?e.map(r,i):Array.prototype.slice.call(arguments),s.sort(e.naturalOrder),t.quantiles(n),this):s},t.range=function(){return arguments.length?(o.range.apply(o,arguments),this):o.range()},e.copyOwn(t,e.Scale.common),t.domain.apply(t,arguments),t},e.histogram=function(t,n){var r=!0;return{bins:function(i){var s=e.map(t,n),o=[];arguments.length||(i=e.Scale.linear(s).ticks());for(var u=0;u<i.length-1;u++){var a=o[u]=[];a.x=i[u],a.dx=i[u+1]-i[u],a.y=0}for(var u=0;u<s.length;u++){var l=e.search.index(i,s[u])-1,a=o[Math.max(0,Math.min(o.length-1,l))];a.y++,a.push(t[u])}if(!r)for(var u=0;u<o.length;u++)o[u].y/=s.length;return o},frequency:function(e){return arguments.length?(r=Boolean(e),this):r}}},!function(){e.Shape=function(){};var t={x:1,y:1};e.Shape.dist2=function(e,n,r){r=r||t;var i=e.x-n.x,s=e.y-n.y,o=i*i,u=s*s;return{cost:o+u,dist2:r.x*o+r.y*u}};var n=Math.PI,r=2*n,i=Math.atan2;e.Shape.normalizeAngle=function(t){return t%=r,e.floatLess(t,0)&&(t+=r),t},e.Shape.atan2Norm=function(t,n){var s=i(t,n);return e.floatLess(s,0)&&(s+=r),s},e.Shape.prototype.hasArea=function(){return!0},e.Shape.prototype.bbox=function(){return this._bbox||(this._bbox=this._calcBBox())},e.Shape.prototype._calcBBox=function(){var t,n,r,i;return this.points().forEach(function(e){var s=e.x,o=e.y;null==t?(t=r=s,n=i=o):(t>s?t=s:s>r&&(r=s),n>o?n=o:o>i&&(i=o))}),null!=t?new e.Shape.Rect(t,n,r-t,i-n):void 0},e.Shape.prototype.containsPoint=function(t,n){if(n){var r;if(!n.y)return r=this.bbox(),e.floatBelongsClosed(r.x,t.x,r.x2);if(!n.x)return r=this.bbox(),e.floatBelongsClosed(r.y,t.y,r.y2)}return this._containsPointCore(t)},e.Shape.prototype._containsPointCore=function(){return!1}}(),!function(){var t=e.Shape.dist2,n=Math.cos,r=Math.sin,i=Math.sqrt;e.vector=function(e,t){return new s(e,t)},e.Vector=function(e,t){this.x=e,this.y=t};var s=e.Shape.Point=e.Vector;e.Vector.prototype=e.extend(e.Shape),e.Vector.prototype.perp=function(){return new s(-this.y,this.x)},e.Vector.prototype.rotate=function(e){var t=n(e),i=r(e);return new s(t*this.x-i*this.y,i*this.x+t*this.y)},e.Vector.prototype.norm=function(){var e=this.length();return this.times(e?1/e:1)},e.Vector.prototype.length=function(){return i(this.x*this.x+this.y*this.y)},e.Vector.prototype.times=function(e){return new s(this.x*e,this.y*e)},e.Vector.prototype.plus=function(e,t){return 1===arguments.length?new s(this.x+e.x,this.y+e.y):new s(this.x+e,this.y+t)},e.Vector.prototype.minus=function(e,t){return 1===arguments.length?new s(this.x-e.x,this.y-e.y):new s(this.x-e,this.y-t)},e.Vector.prototype.dot=function(e,t){return 1==arguments.length?this.x*e.x+this.y*e.y:this.x*e+this.y*t},e.Vector.prototype.hasArea=function(){return!1},e.Vector.prototype.clone=function(){return new s(this.x,this.y)},e.Vector.prototype.apply=function(e){return new s(e.x+e.k*this.x,e.y+e.k*this.y)},e.Vector.prototype.intersectsRect=function(t){return e.floatBelongsClosed(t.x,this.x,t.x2)&&e.floatBelongsClosed(t.y,this.y,t.y2)},e.Vector.prototype._containsPointCore=function(e){return this.x===e.x&&this.y===e.y},e.Vector.prototype.points=function(){return[this]},e.Vector.prototype.edges=function(){return[]},e.Vector.prototype.center=function(){return this},e.Vector.prototype.distance2=function(e,n){return t(this,e,n)}}(),!function(){var t=e.Shape.Point,n=e.Shape.dist2;e.Shape.Line=function(e,t,n,r){this.x=e||0,this.y=t||0,this.x2=n||0,this.y2=r||0};var r=e.Shape.Line;r.prototype=e.extend(e.Shape),r.prototype.hasArea=function(){return!1},r.prototype.clone=function(){return new r(this.x,this.y,this.x2,this.x2)},r.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,i=e.x+e.k*this.x2,s=e.y+e.k*this.y2;return new r(t,n,i,s)},r.prototype.points=function(){return[new t(this.x,this.y),new t(this.x2,this.y2)]},r.prototype.edges=function(){return[this]},r.prototype.center=function(){return new t((this.x+this.x2)/2,(this.y+this.y2)/2)},r.prototype.normal=function(e,t){var n=this.points(),r=n[1].minus(n[0]).perp().norm();if(t){var i=n[0].minus(t);i.dot(r)<0&&(r=r.times(-1))}return r},r.prototype.intersectsRect=function(e){var t,n,r=this.points();n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;var i=e.edges();n=i.length;for(t=0;n>t;t++)if(this.intersectsLine(i[t]))return!0;return!1},r.prototype._containsPointCore=function(t){var n=this.x,r=this.x2,i=this.y,s=this.y2;return e.floatBelongsClosed(n,t.x,r)&&(e.floatEqual(n,r)?e.floatBelongsClosed(Math.min(i,s),t.y,Math.max(i,s)):e.floatZero((s-i)/(r-n)*(t.x-n)+i-t.y))},r.prototype.intersectsLine=function(t){var n=this,r=n.x2-n.x,i=n.y2-n.y,s=t.x2-t.x,o=t.y2-t.y,u=o*r-s*i;if(e.floatZero(u))return!1;var a=n.y-t.y,f=n.x-t.x,l=s*a-o*f,c=r*a-i*f;if(e.floatZero(u))return e.floatZero(l)&&e.floatZero(c);var h=l/u;if(!e.floatBelongsClosed(0,h,1))return!1;var p=c/u;return e.floatBelongsClosed(0,p,1)?!0:!1},r.prototype.distance2=function(t,r){var i=this,s={x:this.x2,y:this.y2},o=n(i,s).cost;if(e.floatZero(o))return n(t,i,r);var u=s.x-i.x,a=s.y-i.y,f=((t.x-i.x)*u+(t.y-i.y)*a)/o;if(e.floatLess(f,0))return n(t,i,r);if(e.floatGreater(f,1))return n(t,s,r);var l={x:i.x+f*u,y:i.y+f*a};return n(t,l,r)}}(),!function(){var t=e.Shape.Point,n=e.Shape.Line;e.Shape.Polygon=function(e){this._points=e||[]};var r=e.Shape.Polygon;r.prototype=e.extend(e.Shape),r.prototype.points=function(){return this._points},r.prototype.clone=function(){return new r(this.points().slice())},r.prototype.apply=function(e){for(var t=this.points(),n=t.length,i=new Array(n),s=0;n>s;s++)i[s]=t[s].apply(e);return new r(i)},r.prototype.intersectsRect=function(e){var t,n,r=this.points();n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;var i=this.edges();n=i.length;for(t=0;n>t;t++)if(i[t].intersectsRect(e))return!0;return!1},r.prototype.edges=function(){var e=this._edges;if(!e){e=this._edges=[];var t=this.points(),r=t.length;if(r){for(var i,s=t[0],o=s,u=1;r>u;u++)i=t[u],e.push(new n(s.x,s.y,i.x,i.y)),s=i;r>2&&e.push(new n(i.x,i.y,o.x,o.y))}}return e},r.prototype.distance2=function(t,n){var r={cost:1/0,dist2:1/0};return this.edges().forEach(function(i){var s=i.distance2(t,n);e.floatLess(s.cost,r.cost)&&(r=s)},this),r},r.prototype.center=function(){for(var e=this.points(),n=0,r=0,i=0,s=e.length;s>i;i++){var o=e[i];n+=o.x,r+=o.y}return new t(n/s,r/s)},r.prototype._containsPointCore=function(e){var t=this.bbox();if(!t._containsPointCore(e))return!1;var r=.01*t.dx,i=new n(t.x-r,e.y,e.x,e.y),s=0,o=this.edges();return o.forEach(function(e){e.intersectsLine(i)&&s++}),1===(1&s)}}(),!function(){var t=e.Shape.Point,n=e.Shape.Line;e.Shape.Rect=function(e,t,n,r){this.x=e||0,this.y=t||0,this.dx=n||0,this.dy=r||0,this.dx<0&&(this.dx=Math.max(0,-this.dx),this.x=this.x-this.dx),this.dy<0&&(this.dy=Math.max(0,-this.dy),this.y=this.y-this.dy),this.x2=this.x+this.dx,this.y2=this.y+this.dy};var r=e.Shape.Rect;r.prototype=e.extend(e.Shape.Polygon),r.prototype.clone=function(){var e=Object.create(r.prototype);return e.x=this.x,e.y=this.y,e.dx=this.dx,e.dy=this.dy,e.x2=this.x2,e.y2=this.y2,e},r.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,i=e.k*this.dx,s=e.k*this.dy;return new r(t,n,i,s)},r.prototype._containsPointCore=function(t){return e.floatBelongsClosed(this.x,t.x,this.x2)&&e.floatBelongsClosed(this.y,t.y,this.y2)},r.prototype.intersectsRect=function(t){return e.floatGreater(this.x2,t.x)&&e.floatLess(this.x,t.x2)&&e.floatGreater(this.y2,t.y)&&e.floatLess(this.y,t.y2)},r.prototype.edges=function(){if(!this._edges){var e=this.x,t=this.y,r=this.x2,i=this.y2;this._edges=[new n(e,t,r,t),new n(r,t,r,i),new n(r,i,e,i),new n(e,i,e,t)]}return this._edges},r.prototype.center=function(){return new t(this.x+this.dx/2,this.y+this.dy/2)},r.prototype.points=function(){var e=this._points;if(!e){var n=this.x,r=this.y,i=this.x2,s=this.y2;e=this._points=[new t(n,r),new t(i,r),new t(i,s),new t(n,s)]}return e},r.prototype._calcBBox=function(){return this}}(),!function(){var t=e.Shape.Point,n=e.Shape.dist2,r=Math.sqrt,i=Math.abs,s=Math.pow;e.Shape.Circle=function(e,t,n){this.x=e||0,this.y=t||0,this.radius=n||0};var o=e.Shape.Circle;o.prototype=e.extend(e.Shape),o.prototype.clone=function(){return new o(this.x,this.y,this.radius)},o.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.radius;return new o(t,n,r)},o.prototype.intersectsRect=function(e){var t=e.dx/2,n=e.dy/2,r=this.radius,o=i(this.x-e.x-t),u=i(this.y-e.y-n);if(o>t+r||u>n+r)return!1;if(t>=o||n>=u)return!0;var a=s(o-t,2)+s(u-n,2);return r*r>=a},o.prototype.intersectLine=function(e,n){var i=e.x2-e.x,s=e.y2-e.y,o=this.x-e.x,u=this.y-e.y,a=i*i+s*s,f=i*o+s*u,l=this.radius,c=o*o+u*u-l*l,h=f/a,p=h*h-c/a;if(!(0>p)){var d=r(p),v=h-d,m=h+d,g=[];return(n||v>=0&&1>=v)&&g.push(new t(e.x+i*v,e.y+s*v)),0!==p&&(n||m>=0&&1>=m)&&g.push(new t(e.x+i*m,e.y+s*m)),g}},o.prototype.points=function(){return[this.center()]},o.prototype.center=function(){return new t(this.x,this.y)},o.prototype.normal=function(e){return e.minus(this.x,this.y).norm()},o.prototype._containsPointCore=function(e){var t=e.x-this.x,n=e.y-this.y,r=this.radius;return r*r>=t*t+n*n},o.prototype.distance2=function(e,t){var r=this.radius,i=e.minus(this).norm().times(r).plus(this),s=n(e,i,t);return s},o.prototype._calcBBox=function(){var t=this.radius,n=2*t;return new e.Shape.Rect(this.x-t,this.y-t,n,n)}}(),!function(){var t=e.Shape.Point,n=e.Shape.dist2,r=e.Shape.normalizeAngle,i=e.Shape.atan2Norm,s=Math.cos,o=Math.sin,u=Math.sqrt,a=Math.PI,f=2*a,l=a/2,c=3*a/2;e.Shape.Arc=function(t,n,i,s,o){this.x=t,this.y=n,this.radius=i,e.floatBelongsClosed(0,o,f)||(o=r(o)),this.startAngle=r(s),this.angleSpan=o,this.endAngle=this.startAngle+this.angleSpan};var h=e.Shape.Arc;h.prototype=e.extend(e.Shape),h.prototype.hasArea=function(){return!1},h.prototype.clone=function(){var e=Object.create(h.prototype),t=this;return e.x=t.x,e.y=t.y,e.radius=t.radius,e.startAngle=t.startAngle,e.angleSpan=t.angleSpan,e.endAngle=t.endAngle,e},h.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.radius;return new h(t,n,r,this.startAngle,this.angleSpan)},h.prototype.containsAngle=function(t,n){e.floatBelongsClosed(0,t,f)||(t=r(t));var i=this.startAngle,s=this.endAngle;return(n?e.floatBelongsOpen(i,t,s):e.floatBelongsClosed(i,t,s))?!0:e.floatLessOrEqual(s,f)?!1:(t+=f,n?e.floatBelongsOpen(i,t,s):e.floatBelongsClosed(i,t,s))},h.prototype._containsPointCore=function(t){var n=t.x-this.x,r=t.y-this.y,s=u(n*n+r*r);return e.floatEqual(s,this.radius)&&this.containsAngle(i(r,n))},h.prototype.intersectsRect=function(e){var t,n=this.points(),r=n.length;for(t=0;r>t;t++)if(n[t].intersectsRect(e))return!0;var i=e.edges();r=i.length;for(t=0;r>t;t++)if(this.intersectLine(i[t]))return!0;return!1};var p=e.Shape.Circle.prototype.intersectLine;h.prototype.intersectLine=function(e,t){var n=p.call(this,e,t);if(n){n=n.filter(function(e){return this._containsPointCore(e)},this);if(n.length)return n}},h.prototype.points=function(){function e(e){n.containsAngle(e,!0)&&p.push(new t(r+u*s(e),i+u*o(e)))}var n=this,r=n.x,i=n.y,u=n.radius,f=n.startAngle,h=n.endAngle,p=[new t(r+u*s(f),i+u*o(f)),new t(r+u*s(h),i+u*o(h))];return e(0),e(l),e(a),e(c),p},h.prototype.center=function(){var e=this.x,n=this.y,r=this.radius,i=(this.startAngle+this.endAngle)/2;return new t(e+r*s(i),n+r*o(i))},h.prototype.normal=function(e,t){var n=e.minus(this.x,this.y).norm();if(t){var r=this.center().minus(t);r.dot(n)<0&&(n=n.times(-1))}return n},h.prototype.distance2=function(r,u){var a=r.x-this.x,f=r.y-this.y,l=i(f,a);if(this.containsAngle(l)){var c=new t(this.x+this.radius*s(l),this.y+this.radius*o(l));return n(r,c,u)}var h=this.points(),p=n(r,h[0],u),d=n(r,h[1],u);return e.floatLess(p.cost,d.cost)?p:d}}(),!function(){var t=e.Shape.Arc,n=e.Shape.Line,r=e.Shape.Point,i=Math.cos,s=Math.sin,o=Math.sqrt,u=Math.PI,a=2*u,f=u/2,l=3*u/2,c=e.Shape.atan2Norm,h=e.Shape.normalizeAngle;e.Shape.Wedge=function(t,n,r,i,s,o){this.x=t,this.y=n,this.innerRadius=r,this.outerRadius=i,e.floatBelongsClosed(0,o,a)||(o=h(o)),this.startAngle=h(s),this.angleSpan=o,this.endAngle=this.startAngle+o};var p=e.Shape.Wedge;p.prototype=e.extend(e.Shape),p.prototype.clone=function(){return new p(this.x,this.y,this.innerRadius,this.outerRadius,this.startAngle,this.angleSpan)},p.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.innerRadius,i=e.k*this.outerRadius;return new p(t,n,r,i,this.startAngle,this.angleSpan)},p.prototype.containsAngle=t.prototype.containsAngle,p.prototype._containsPointCore=function(t){var n=t.x-this.x,r=t.y-this.y,i=o(n*n+r*r);return e.floatBelongsClosed(this.innerRadius,i,this.outerRadius)&&this.containsAngle(c(r,n))},p.prototype.intersectsRect=function(e){var t,n,r,i;r=this.points(),n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;r=e.points(),n=r.length;for(t=0;n>t;t++)if(this._containsPointCore(r[t]))return!0;i=this.edges(),n=i.length;for(t=0;n>t;t++)if(i[t].intersectsRect(e))return!0;return!1},p.prototype.points=function(){return this._points||this.edges(),this._points},p.prototype.edges=function(){function o(e){a.containsAngle(e,!0)&&L.push(new r(d+y*i(e),v+y*s(e)))}var a=this,c=a._edges;if(!c){var h,p,d=a.x,v=a.y,m=a.innerRadius,g=e.floatGreater(m,0),y=a.outerRadius,b=a.startAngle,w=a.endAngle,E=a.angleSpan,S=i(b),x=s(b),T=i(w),N=s(w);g?(h=new r(d+m*S,v+m*x),p=new r(d+m*T,v+m*N)):h=p=new r(d,v);var C=new r(d+y*S,v+y*x),k=new r(d+y*T,v+y*N);c=a._edges=[],g&&c.push(new t(d,v,m,b,E)),c.push(new n(h.x,h.y,C.x,C.y),new t(d,v,y,b,E),new n(p.x,p.y,k.x,k.y));var L=a._points=[h,C,k];g&&L.push(p),o(0),o(f),o(u),o(l)}return c},p.prototype.distance2=function(t,n){var r={cost:1/0,dist2:1/0};return this.edges().forEach(function(i){var s=i.distance2(t,n);e.floatLess(s.cost,r.cost)&&(r=s)}),r},p.prototype.center=function(){var e=(this.startAngle+this.endAngle)/2,t=(this.innerRadius+this.outerRadius)/2;return new r(this.x+t*i(e),this.y+t*s(e))}}(),!function(){var t=Math.round,n=function(e){var n=parseFloat(e);return"%"==e[e.length-1]?t(2.55*n):n},r=/([a-z]+)\((.*)\)/i,i=function(t){if("#"===t.charAt(0)){var i,s,o;return 4===t.length?(i=t.charAt(1),i+=i,s=t.charAt(2),s+=s,o=t.charAt(3),o+=o):7===t.length&&(i=t.substring(1,3),s=t.substring(3,5),o=t.substring(5,7)),e.rgb(parseInt(i,16),parseInt(s,16),parseInt(o,16),1)}var u=r.exec(t);if(u){var a=u[2].split(","),f=1;switch(u[1]){case"hsla":case"rgba":f=parseFloat(a[3]);if(!f)return e.Color.transparent}switch(u[1]){case"hsla":case"hsl":var l=parseFloat(a[0]),c=parseFloat(a[1])/100,h=parseFloat(a[2])/100;return(new e.Color.Hsl(l,c,h,f)).rgb();case"rgba":case"rgb":var i=n(a[0]),s=n(a[1]),o=n(a[2]);return e.rgb(i,s,o,f)}}return new e.Color(t,1)},s={};e.color=function(t){if(t.rgb)return t.rgb();var n=e.Color.names[t];return n||(n=s[t]||(s[t]=i(t))),n}}(),e.Color=function(e,t){this.color=e,this.opacity=t,this.key="solid "+e+" alpha("+t+")"},e.Color.prototype.hsl=function(){return this.rgb().hsl()},e.Color.prototype.brighter=function(e){return this.rgb().brighter(e)},e.Color.prototype.darker=function(e){return this.rgb().darker(e)},e.Color.prototype.alphaBlend=function(t){var n=this.rgb(),r=n.a;if(1===r)return this;t=t?e.color(t):e.Color.names.white,t=t.rgb();var i=1-r;return e.rgb(i*n.r+r*t.r,i*n.g+r*t.g,i*n.b+r*t.b,1)},e.Color.prototype.rgbDecimal=function(e){var t=this.alphaBlend(e);return t.r<<16|t.g<<8|t.b},e.Color.prototype.isDark=function(){return this.rgbDecimal()<8388607.5},e.rgb=function(t,n,r,i){return new e.Color.Rgb(t,n,r,4==arguments.length?i:1)},e.Color.Rgb=function(t,n,r,i){e.Color.call(this,i?"rgb("+t+","+n+","+r+")":"none",i),this.r=t,this.g=n,this.b=r,this.a=i},e.Color.Rgb.prototype=e.extend(e.Color),e.Color.Rgb.prototype.red=function(t){return e.rgb(t,this.g,this.b,this.a)},e.Color.Rgb.prototype.green=function(t){return e.rgb(this.r,t,this.b,this.a)},e.Color.Rgb.prototype.blue=function(t){return e.rgb(this.r,this.g,t,this.a)},e.Color.Rgb.prototype.alpha=function(t){return e.rgb(this.r,this.g,this.b,t)},e.Color.Rgb.prototype.rgb=function(){return this},e.Color.Rgb.prototype.brighter=function(t){t=Math.pow(.7,null!=t?t:1);var n=this.r,r=this.g,i=this.b,s=30;return!n&&!r&&!i?e.rgb(s,s,s,this.a):(n&&s>n&&(n=s),r&&s>r&&(r=s),i&&s>i&&(i=s),e.rgb(Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(r/t)),Math.min(255,Math.floor(i/t)),this.a))},e.Color.Rgb.prototype.darker=function(t){return t=Math.pow(.7,null!=t?t:1),e.rgb(Math.max(0,Math.floor(t*this.r)),Math.max(0,Math.floor(t*this.g)),Math.max(0,Math.floor(t*this.b)),this.a)},e.Color.Rgb.prototype.hsl=function(){var t,n,r=this.r/255,i=this.g/255,s=this.b/255,o=Math.max(r,i,s),u=Math.min(r,i,s),a=(o+u)/2;if(o===u)t=n=0;else{var f=o-u;n=a>.5?f/(2-o-u):f/(o+u);switch(o){case r:t=(i-s)/f+(s>i?6:0);break;case i:t=(s-r)/f+2;break;case s:t=(r-i)/f+4}t/=6}return e.hsl(360*t,n,a,this.a)},e.Color.Rgb.prototype.complementary=function(){return this.hsl().complementary().rgb()},e.hsl=function(t,n,r,i){return new e.Color.Hsl(t,n,r,4==arguments.length?i:1)},e.Color.Hsl=function(t,n,r,i){e.Color.call(this,"hsl("+t+","+100*n+"%,"+100*r+"%)",i),this.h=t,this.s=n,this.l=r,this.a=i},e.Color.Hsl.prototype=e.extend(e.Color),e.Color.Hsl.prototype.hsl=function(){return this},e.Color.Hsl.prototype.hue=function(t){return e.hsl(t,this.s,this.l,this.a)},e.Color.Hsl.prototype.saturation=function(t){return e.hsl(this.h,t,this.l,this.a)},e.Color.Hsl.prototype.lightness=function(t){return e.hsl(this.h,this.s,t,this.a)},e.Color.Hsl.prototype.alpha=function(t){return e.hsl(this.h,this.s,this.l,t)},e.Color.Hsl.prototype.complementary=function(){return e.hsl((this.h+180)%360,1-this.s,1-this.l,this.a)},e.Color.Hsl.prototype.rgb=function(){function t(e){return e>360?e-=360:0>e&&(e+=360),60>e?u+(o-u)*e/60:180>e?o:240>e?u+(o-u)*(240-e)/60:u}function n(e){return Math.round(255*t(e))}var r=this.h,i=this.s,s=this.l;r%=360,0>r&&(r+=360),i=Math.max(0,Math.min(i,1)),s=Math.max(0,Math.min(s,1));var o=.5>=s?s*(1+i):s+i-s*i,u=2*s-o;return e.rgb(n(r+120),n(r),n(r-120),this.a)},e.Color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:e.Color.transparent=e.rgb(0,0,0,0)},!function(){var t=e.Color.names;t.none=t.transparent;for(var n in t)t[n]=e.color(t[n])}(),e.colors=function(){var t=e.Scale.ordinal();return t.range.apply(t,arguments),t},e.Colors={},e.Colors.category10=function(){var t=e.colors("#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf");return t.domain.apply(t,arguments),t},e.Colors.category20=function(){var t=e.colors("#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5");return t.domain.apply(t,arguments),t},e.Colors.category19=function(){var t=e.colors("#9c9ede","#7375b5","#4a5584","#cedb9c","#b5cf6b","#8ca252","#637939","#e7cb94","#e7ba52","#bd9e39","#8c6d31","#e7969c","#d6616b","#ad494a","#843c39","#de9ed6","#ce6dbd","#a55194","#7b4173");return t.domain.apply(t,arguments),t},!function(){function t(t){var n=r(t);if(!n.length)return null;var s,o,a,f=Math.PI,l=n[0];0===l.indexOf("to ")?(o=/^to\s+(?:((top|bottom)(?:\s+(left|right))?)|((left|right)(?:\\s+(top|bottom))?))$/.exec(l),o&&(o[1]?(s=o[2],o[3]&&(s+=" "+o[3])):(s=o[5],o[6]&&(s=o[6]+" "+s)),f=e.radians(u[s]),n.shift())):(a=parseFloat(l),isNaN(a)||(f=a,/^.*?deg$/.test(l)&&(f=e.radians(f)),n.shift()));var c=i(n);switch(c.length){case 0:return null;case 1:return new e.FillStyle.Solid(c[0].color,1)}return new e.FillStyle.LinearGradient(f,c,t)}function n(t){var n=r(t);if(!n.length)return null;var s=i(n);switch(s.length){case 0:return null;case 1:return new e.FillStyle.Solid(s[0].color,1)}return new e.FillStyle.RadialGradient(50,50,s,t)}function r(e){var t={},n=0;e=e.replace(/\b\w+?\(.*?\)/g,function(e){var r="__color"+n++;return t[r]=e,r});var r=e.split(/\s*,\s*/);return r.length?(n&&r.forEach(function(e,n){t.hasOwnProperty(e)&&(r[n]=t[e])}),r):null}function i(t){function n(e){var t=o.length;if(t){for(var n=s,r=(e-n)/(t+1),i=0;t>i;i++)n+=r,o[i].offset=n;o.length=0}}for(var r=[],i=1/0,s=-1/0,o=[],u=0,a=t.length;a>u;){var f=t[u++],l=/^(.+?)\s*([+\-]?[e\.\d]+%)?$/i.exec(f);if(l){var c={color:e.color(l[1])},h=parseFloat(l[2]);isNaN(h)&&(r.length?u===a&&(h=Math.max(s,100)):h=0),r.push(c),isNaN(h)?o.push(c):(c.offset=h,n(h),h>s?s=h:s>h&&(h=s),i>h&&(i=h))}}if(r.length>=2&&(0>i||s>100)){var p=[],d=[];r.forEach(function(e){p.push(e.offset),d.push(e.color)});var v=e.scale.linear().domain(p).range(d);if(0>i){for(;r.length&&r[0].offset<=0;)r.shift();r.unshift({offset:0,color:v(0)})}if(s>100){for(;r.length&&r[r.length-1].offset>=100;)r.pop();r.push({offset:100,color:v(100)})}}return r}e.fillStyle=function(e){if(e.type)return e;var t=e.key||e,n=s[t];return n=n?n.clone():s[t]=o(e),n};var s={},o=function(r){if(r.rgb)return new e.FillStyle.Solid(r.color,r.opacity);var i=/^\s*([a-z\-]+)\(\s*(.*?)\s*\)\s*$/.exec(r);if(i)switch(i[1]){case"linear-gradient":return t(i[2]);case"radial-gradient":return n(i[2])}return new e.FillStyle.Solid(e.color(r))},u={top:0,"top right":45,right:90,"bottom right":135,bottom:180,"bottom left":225,left:270,"top left":315},a=e.FillStyle=function(e){this.type=e,this.key=e};e.extendType(a,new e.Color("none",1)),a.prototype.rgb=function(){var t=e.color(this.color);return this.opacity!==t.opacity&&(t=t.alpha(this.opacity)),t},a.prototype.alphaBlend=function(e){return this.rgb().alphaBlend(e)},a.prototype.rgbDecimal=function(e){return this.rgb().rgbDecimal(e)},a.prototype.isDark=function(){return this.rgb().isDark()};var f=e.FillStyle.Solid=function(e,t){a.call(this,"solid"),e.rgb?(this.color=e.color,this.opacity=e.opacity):(this.color=e,this.opacity=t),this.key+=" "+this.color+" alpha("+this.opacity+")"};e.extendType(f,a),f.prototype.alpha=function(e){return new f(this.color,e)},f.prototype.brighter=function(e){return new f(this.rgb().brighter(e))},f.prototype.darker=function(e){return new f(this.rgb().darker(e))},f.prototype.complementary=function(){return new f(this.rgb().complementary())},f.prototype.clone=function(){var t=e.extend(f);return t.type=this.type,t.key=this.key,t.color=this.color,t.opacity=this.opacity,t},e.FillStyle.transparent=new f(e.Color.transparent);var l=0,c=e.FillStyle.Gradient=function(e,t){a.call(this,e),this.id=++l,this.stops=t,t.length&&(this.color=t[0].color.color),this.key+=" stops("+t.map(function(e){var t=e.color;return t.color+" alpha("+t.opacity+") at("+e.offset+")"}).join(", ")+")"};e.extendType(c,a),c.prototype.rgb=function(){return this.stops.length?this.stops[0].color:void 0},c.prototype.alpha=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.alpha(e)}}))},c.prototype.darker=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.darker(e)}}))},c.prototype.brighter=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.brighter(e)}}))},c.prototype.complementary=function(){return this._cloneWithStops(this.stops.map(function(e){return{offset:e.offset,color:e.color.complementary()}}))},c.prototype.alphaBlend=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.alphaBlend(e)}}))},c.prototype.clone=function(){var t=this.constructor,n=e.extend(t);n.constructor=t,n.id=++l,n.type=this.type,n.key=this.key;var r=this.stops;return n.stops=r,r.length&&(n.color=r[0].color.color),this._initClone(n),n};var h=e.FillStyle.LinearGradient=function(e,t){c.call(this,"lineargradient",t),this.angle=e,this.key+=" angle("+e+")"};e.extendType(h,c),h.prototype._cloneWithStops=function(e){return new h(this.angle,e)},h.prototype._initClone=function(e){e.angle=this.angle};var p=e.FillStyle.RadialGradient=function(e,t,n){c.call(this,"radialgradient",n),this.cx=e,this.cy=t,this.key+=" center("+e+","+t+")"};e.extendType(p,c),p.prototype._cloneWithStops=function(e){return new p(this.cx,this.cy,e)},p.prototype._initClone=function(e){e.cx=this.cx,e.cy=this.cy}}(),e.ramp=function(){var t=e.Scale.linear();return t.range.apply(t,arguments),t},e.Scene=e.SvgScene={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml",scale:1,events:["DOMMouseScroll","mousewheel","mousedown","mouseup","mouseover","mouseout","mousemove","click","dblclick","contextmenu"],mousePositionEventSet:{mousedown:1,mouseup:1,mouseover:1,mouseout:1,mousemove:1,click:1,dblclick:1,contextmenu:1},implicit:{svg:{"shape-rendering":"auto","pointer-events":"painted",x:0,y:0,dy:0,"text-anchor":"start",transform:"translate(0,0)",fill:"none","fill-opacity":1,stroke:"none","stroke-opacity":1,"stroke-width":1.5,"stroke-linejoin":"miter","stroke-linecap":"butt","stroke-miterlimit":8,"stroke-dasharray":"none"},css:{font:"10px sans-serif"}}},e.SvgScene.updateAll=function(e){if(e.length&&e[0].reverse&&"line"!==e.type&&"area"!==e.type){for(var t=Object.create(e),n=0,r=e.length-1;r>=0;n++,r--)t[n]=e[r];e=t}this.removeSiblings(this[e.type](e))},e.SvgScene.create=function(e){return document.createElementNS(this.svg,e)},e.SvgScene.expect=function(e,t,n,r,i,s){var o;e&&(o=e.tagName,"defs"===o?(e=e.nextSibling,e&&(o=e.tagName)):"a"===o&&(e=e.firstChild));if(e){if(o!==t){var u=this.create(t);e.parentNode.replaceChild(u,e),e=u}}else e=this.create(t);return i&&this.setAttributes(e,i),s&&this.setStyle(e,s),e},e.SvgScene.setAttributes=function(e,t){var n=this.implicit.svg,r=e.__attributes__;r===t&&(r=null);for(var i in t){var s=t[i];r&&s===r[i]||(null==s||s==n[i]?e.removeAttribute(i):e.setAttribute(i,s))}e.__attributes__=t},e.SvgScene.setStyle=function(e,t){var n=this.implicit.css,r=e.__style__;r===t&&(r=null);for(var i in t){var s=t[i];r&&s===r[i]||(null==s||s==n[i]?e.style.removeProperty(i):e.style[i]=s)}e.__style__=t},e.SvgScene.append=function(e,t,n){return e.$scene={scenes:t,index:n},e=this.title(e,t[n]),e.parentNode||t.$g.appendChild(e),e.nextSibling},e.SvgScene.title=function(e,t){var n=e.parentNode;n&&"a"!=n.tagName&&(n=null);if(t.title){n||(n=this.create("a"),n.setAttributeNS(this.xlink,"xlink:href",""),e.parentNode&&e.parentNode.replaceChild(n,e),n.appendChild(e)),n.setAttributeNS(this.xlink,"xlink:title",t.title);for(var r=null,i=e.firstChild;null!=i;i=i.nextSibling)if("title"==i.nodeName){r=i;break}return r?r.removeChild(r.firstChild):(r=this.create("title"),e.appendChild(r)),r.appendChild(document.createTextNode(t.title)),n}return n&&n.parentNode.replaceChild(e,n),e},e.SvgScene.dispatch=e.listener(function(t){var n=t.target.$scene;if(n){var r=t.type;switch(r){case"DOMMouseScroll":r="mousewheel",t.wheel=-480*t.detail;break;case"mousewheel":t.wheel=(window.opera?12:1)*t.wheelDelta}e.Mark.dispatch(r,n.scenes,n.index,t)&&(t.preventDefault(),t.stopPropagation())}}),e.SvgScene.removeSiblings=function(e){for(;e;){var t=e.nextSibling;"defs"!==e.nodeName&&e.parentNode.removeChild(e),e=t}},e.SvgScene.undefined=function(){},!function(){var t={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},n={shortdash:[3,1],shortdot:[1,1],shortdashdot:[3,1,1,1],shortdashdotdot:[3,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};e.SvgScene.isStandardDashStyle=function(e){return n.hasOwnProperty(e)},e.SvgScene.translateDashStyleAlias=function(e){return t.hasOwnProperty(e)?t[e]:e},e.SvgScene.parseDasharray=function(e){var t=e.strokeDasharray;if(t&&"none"!==t){t=this.translateDashStyleAlias(t);var r=n[t];t=r?r:t.split(/[\s,]+/);var i=e.lineWidth,s=e.lineCap||"butt",o="butt"===s;t=t.map(function(e,t){return e=+e,o||(t%2?e++:e-=1),0>=e&&(e=.001),e*i/this.scale},this).join(" ")}else t=null;return t}}(),!function(){var t=/^url\(#/,n=1,r=Math.PI/2,i=r/2,s=Math.SQRT2/2,o=Math.abs,u=Math.sin,a=Math.cos,f=function(e){return o(e)<=1e-12?0:e};e.SvgScene.addFillStyleDefinition=function(e,r){if(r.type&&"solid"!==r.type&&!t.test(r.color)){var i=e.mark.root,s=i.__fillStyleMap__||(i.__fillStyleMap__={}),o=r.key,u=s[o];if(!u){u=s[o]="__pvGradient"+n++;var a=l.call(this,e,r,u);i.scene.$defs.appendChild(a)}r.color="url(#"+u+")"}};var l=function(e,t,n){var l="lineargradient"===t.type,c=this.create(l?"linearGradient":"radialGradient");c.setAttribute("id",n);if(l){var h=t.angle-r,p=o(h%r)-i,d=o(s*a(p)),v=d*a(h),m=d*u(h);c.setAttribute("x1",f(.5-v)),c.setAttribute("y1",f(.5-m)),c.setAttribute("x2",f(.5+v)),c.setAttribute("y2",f(.5+m))}for(var g=t.stops,y=g.length,b=0;y>b;b++){var w=g[b],E=c.appendChild(this.create("stop")),S=w.color;E.setAttribute("offset",w.offset+"%"),E.setAttribute("stop-color",S.color),E.setAttribute("stop-opacity",S.opacity+"")}return c}}(),e.SvgScene.pathBasis=function(){function e(e,t,n,r,i){return{x:e[0]*t.left+e[1]*n.left+e[2]*r.left+e[3]*i.left,y:e[0]*t.top+e[1]*n.top+e[2]*r.top+e[3]*i.top}}var t=[[1/6,2/3,1/6,0],[0,2/3,1/3,0],[0,1/3,2/3,0],[0,1/6,2/3,1/6]],n=function(n,r,i,s){var o=e(t[1],n,r,i,s),u=e(t[2],n,r,i,s),a=e(t[3],n,r,i,s);return"C"+o.x+","+o.y+","+u.x+","+u.y+","+a.x+","+a.y};return n.segment=function(n,r,i,s){var o=e(t[0],n,r,i,s),u=e(t[1],n,r,i,s),a=e(t[2],n,r,i,s),f=e(t[3],n,r,i,s);return["M"+o.x+","+o.y,"C"+u.x+","+u.y+","+a.x+","+a.y+","+f.x+","+f.y]},n}(),e.SvgScene.curveBasis=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;if(2>=r)return"";var i="",s=e[t],o=s,u=s,a=e[t+1];i+=this.pathBasis(s,o,u,a);for(var f=t+2;n>=f;f++)s=o,o=u,u=a,a=e[f],i+=this.pathBasis(s,o,u,a);return i+=this.pathBasis(o,u,a,a),i+=this.pathBasis(u,a,a,a),i},e.SvgScene.curveBasisSegments=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;if(2>=r)return"";var i=[],s=e[t],o=s,u=s,a=e[t+1],f=this.pathBasis.segment(s,o,u,a);s=o,o=u,u=a,a=e[t+2],f[1]+=this.pathBasis(s,o,u,a),i.push(f);for(var l=t+3;n>=l;l++)s=o,o=u,u=a,a=e[l],i.push(this.pathBasis.segment(s,o,u,a));var c=this.pathBasis.segment(o,u,a,a);return c[1]+=this.pathBasis(u,a,a,a),i.push(c),i},e.SvgScene.curveHermite=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;var s=t.length;if(1>s||i!==s&&i!==s+2)return"";var o=i!==s,u="",a=e[n],f=e[n+1],l=t[0],c=l,h=n+1;o&&(u+="Q"+(f.left-2*l.x/3)+","+(f.top-2*l.y/3)+","+f.left+","+f.top,a=e[n+1],h=n+2);if(s>1){c=t[1],f=e[h],h++,u+="C"+(a.left+l.x)+","+(a.top+l.y)+","+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top;for(var p=2;s>p;p++,h++)f=e[h],c=t[p],u+="S"+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top}if(o){var d=e[h];u+="Q"+(f.left+2*c.x/3)+","+(f.top+2*c.y/3)+","+d.left+","+d.top}return u},e.SvgScene.curveHermiteSegments=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;var s=t.length;if(1>s||i!==s&&i!==s+2)return[];var o=i!==s,u=[],a=e[n],f=a,l=t[0],c=l,h=n+1;o&&(f=e[n+1],u.push(["M"+a.left+","+a.top,"Q"+(f.left-2*c.x/3)+","+(f.top-2*c.y/3)+","+f.left+","+f.top]),h=n+2);for(var p=1;s>p;p++,h++)a=f,l=c,f=e[h],c=t[p],u.push(["M"+a.left+","+a.top,"C"+(a.left+l.x)+","+(a.top+l.y)+","+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top]);if(o){var d=e[h];u.push(["M"+f.left+","+f.top,"Q"+(f.left+2*c.x/3)+","+(f.top+2*c.y/3)+","+d.left+","+d.top])}return u},e.SvgScene.cardinalTangents=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;for(var s=[],o=(1-t)/2,u=e[n],a=e[n+1],f=e[n+2],l=n+3;r>=l;l++)s.push({x:o*(f.left-u.left),y:o*(f.top-u.top)}),u=a,a=f,f=e[l];return s.push({x:o*(f.left-u.left),y:o*(f.top-u.top)}),s},e.SvgScene.curveCardinal=function(e,t,n,r){var i;return null==n?(i=e.length,n=0,r=i-1):i=r-n+1,2>=i?"":this.curveHermite(e,this.cardinalTangents(e,t,n,r),n,r)},e.SvgScene.curveCardinalSegments=function(e,t,n,r){var i;return null==n?(i=e.length,n=0,r=i-1):i=r-n+1,2>=i?"":this.curveHermiteSegments(e,this.cardinalTangents(e,t,n,r),n,r)},e.SvgScene.monotoneTangents=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;var i,s=[],o=[],u=[],a=[],f=0;for(f=0;r-1>f;f++){i=t+f;var l=e[i+1].left-e[i].left;o[f]=Math.abs(l)<=1e-12?0:(e[i+1].top-e[i].top)/l}u[0]=o[0],a[0]=e[t+1].left-e[t].left;for(f=1,i=t+f;r-1>f;f++,i++)u[f]=(o[f-1]+o[f])/2,a[f]=(e[i+1].left-e[i-1].left)/2;u[f]=o[f-1],a[f]=e[i].left-e[i-1].left;for(f=0;r-1>f;f++)0==o[f]&&(u[f]=0,u[f+1]=0);for(f=0;r-1>f;f++)if(!(Math.abs(u[f])<1e-5||Math.abs(u[f+1])<1e-5)){var c=u[f]/o[f],h=u[f+1]/o[f],p=c*c+h*h;if(p>9){var d=3/Math.sqrt(p);u[f]=d*c*o[f],u[f+1]=d*h*o[f]}}for(var v,m=0;r>m;m++)v=1+u[m]*u[m],s.push({x:a[m]/3/v,y:u[m]*a[m]/3/v});return s},e.SvgScene.curveMonotone=function(e,t,n){var r;return null==t?(r=e.length,t=0,n=r-1):r=n-t+1,2>=r?"":this.curveHermite(e,this.monotoneTangents(e,t,n),t,n)},e.SvgScene.curveMonotoneSegments=function(e,t,n){var r;return null==t?(r=e.length,t=0,n=r-1):r=n-t+1,2>=r?"":this.curveHermiteSegments(e,this.monotoneTangents(e,t,n),t,n)},e.SvgScene.area=function(e){var t=e.$g.firstChild,n=e.length;if(!n)return t;var r=e[0];return"smart"===r.segmented?this.areaSegmentedSmart(t,e):r.segmented?this.areaSegmentedFull(t,e):this.areaFixed(t,e,0,n-1,!0)},e.SvgScene.areaFixed=function(e,t,n,r,i){var s=r-n+1;if(1===s)return this.lineAreaDotAlone(e,t,n);var o=t[n];if(!o.visible)return e;var u=o.fillStyle,a=o.strokeStyle;if(!u.opacity&&!a.opacity)return e;this.addFillStyleDefinition(t,u),this.addFillStyleDefinition(t,a);var f=!1,l=!1,c=!1,h=!1,p=!1;switch(o.interpolate){case"basis":f=!0;break;case"cardinal":l=!0;break;case"monotone":c=!0;break;case"step-after":h=!0;break;case"step-before":p=!0}for(var d,v,m=f||l||c,g=[],y=n;r>=y;y++){d=t[y];if(d.width||d.height){for(var b=y+1;r>=b;b++){v=t[b];if(!v.width&&!v.height)break}y>n&&!h&&y--,r>=b&&!p&&b++;var w=m&&b-y>2?this.areaPathCurve:this.areaPathStraight;g.push(w.call(this,t,y,b-1,o)),y=b-1}}if(!g.length)return e;var E=a.opacity;return e=this.expect(e,"path",t,n,{"shape-rendering":o.antialias?null:"crispEdges","pointer-events":i?o.events:"none",cursor:o.cursor,d:"M"+g.join("ZM")+"Z",fill:u.color,"fill-opacity":u.opacity||null,stroke:a.color,"stroke-opacity":E||null,"stroke-width":E?o.lineWidth/this.scale:null,"stroke-linecap":o.lineCap,"stroke-linejoin":o.lineJoin,"stroke-miterlimit":o.strokeMiterLimit,"stroke-dasharray":E?this.parseDasharray(o):null}),o.svg&&this.setAttributes(e,o.svg),o.css&&this.setStyle(e,o.css),this.append(e,t,n)},e.SvgScene.areaSegmentedSmart=function(e,t){return this.eachLineAreaSegment(e,t,function(e,t,n,r){var i=this.areaSegmentPaths(t,n,r),s=i.top,o=i.bottom,u=n,a={breakOnKeyChange:!0,from:n,to:r};return this.eachLineAreaSegment(e,t,a,function(e,t,n,r,i,a){var f=t[n],l=f.fillStyle,c=f.strokeStyle;this.addFillStyleDefinition(t,l),this.addFillStyleDefinition(t,c);if(n===r)return this.lineAreaDotAlone(e,t,n);var h=this.areaJoinPaths(s,o,n-u,r-u-1),p=c.opacity,d={"shape-rendering":f.antialias?null:"crispEdges","pointer-events":a,cursor:f.cursor,d:h,fill:l.color,"fill-opacity":l.opacity||null,stroke:c.color,"stroke-opacity":p||null,"stroke-width":p?f.lineWidth/this.scale:null,"stroke-linecap":f.lineCap,"stroke-linejoin":f.lineJoin,"stroke-miterlimit":f.strokeMiterLimit,"stroke-dasharray":p?this.parseDasharray(f):null};return e=this.expect(e,"path",t,n,d,f.css),this.append(e,t,n)})})},e.SvgScene.areaSegmentPaths=function(e,t,n){return this.areaSegmentCurvePaths(e,t,n)||this.areaSegmentStraightPaths(e,t,n)},e.SvgScene.areaSegmentCurvePaths=function(e,t,n){var r=n-t+1,i=e[t],s="basis"===i.interpolate,o=!s&&"cardinal"===i.interpolate;if(s||o||"monotone"==i.interpolate){for(var u=[],a=[],f=0;r>f;f++){var l=e[t+f],c=e[n-f];u.push(l),a.push({left:c.left+c.width,top:c.top+c.height})}var h,p;s?(h=this.curveBasisSegments(u),p=this.curveBasisSegments(a)):o?(h=this.curveCardinalSegments(u,i.tension),p=this.curveCardinalSegments(a,i.tension)):(h=this.curveMonotoneSegments(u),p=this.curveMonotoneSegments(a));if(h||h.length)return{from:t,top:h,bottom:p}}},e.SvgScene.areaSegmentStraightPaths=function(e,t,n){for(var r=[],i=[],s=n,o=t;s>t;t++,n--){var u=e[t],a=e[n],f=["M"+u.left+","+u.top],l=["M"+(a.left+a.width)+","+(a.top+a.height)],c=e[t+1],h=e[n-1];switch(u.interpolate){case"step-before":f.push("V"+c.top+"H"+c.left);break;case"step-after":f.push("H"+c.left+"V"+c.top);break;default:f.push("L"+c.left+","+c.top)}l.push("L"+(h.left+h.width)+","+(h.top+h.height)),r.push(f),i.push(l)}return{from:o,top:r,bottom:i}},e.SvgScene.areaJoinPaths=function(e,t,n,r){for(var i="",s="",o=e.length,u=n,a=o-1-r;r>=u;u++,a++){var f,l,c=e[u],h=t[a];u===n?(f=c.join(""),l="L"+h[0].substr(1)+h[1]):(f=c[1],l=h[1]),i+=f,s+=l}return i+s+"Z"},e.SvgScene.areaSegmentedFull=function(e,t){var n,r,i=t.length,s=this.areaSegmentCurvePaths(t,0,i-1);s&&(n=s.top,r=s.bottom);for(var o=(t[0],0);i-1>o;o++){var u=t[o],a=t[o+1];if(u.visible&&a.visible){var f=u.fillStyle,l=u.strokeStyle;if(f.opacity||l.opacity){var c;if(n){var h=n[o].join(""),p="L"+r[i-o-2].join("").substr(1);c=h+p+"Z"}else{var d=u,v=a;switch(u.interpolate){case"step-before":d=a;break;case"step-after":v=u}c="M"+u.left+","+d.top+"L"+a.left+","+v.top+"L"+(a.left+a.width)+","+(v.top+v.height)+"L"+(u.left+u.width)+","+(d.top+d.height)+"Z"}var m={"shape-rendering":u.antialias?null:"crispEdges","pointer-events":u.events,cursor:u.cursor,d:c,fill:f.color,"fill-opacity":f.opacity||null,stroke:l.color,"stroke-opacity":l.opacity||null,"stroke-width":l.opacity?u.lineWidth/this.scale:null};e=this.expect(e,"path",t,o,m),u.svg&&this.setAttributes(e,u.svg),u.css&&this.setStyle(e,u.css),e=this.append(e,t,o)}}}return e},e.SvgScene.areaPathStraight=function(e,t,n,r){for(var i=[],s=[],o=n;o>=t;t++,n--){var u=e[t],a=e[n],f=u.left+","+u.top,l=a.left+a.width+","+(a.top+a.height);if(o>t){var c=e[t+1],h=e[n-1];switch(r.interpolate){case"step-before":f+="V"+c.top,l+="H"+(h.left+h.width);break;case"step-after":f+="H"+c.left,l+="V"+(h.top+h.height)}}i.push(f),s.push(l)}return i.concat(s).join("L")},e.SvgScene.areaPathCurve=function(e,t,n,r){for(var i,s,o=[],u=[],a=n;a>=t;t++,n--){var f=e[n];o.push(e[t]),u.push({left:f.left+f.width,top:f.top+f.height})}switch(r.interpolate){case"basis":i=this.curveBasis(o),s=this.curveBasis(u);break;case"cardinal":i=this.curveCardinal(o,r.tension),s=this.curveCardinal(u,r.tension);break;default:i=this.curveMonotone(o),s=this.curveMonotone(u)}return o[0].left+","+o[0].top+i+"L"+u[0].left+","+u[0].top+s},e.SvgScene.minBarWidth=1,e.SvgScene.minBarHeight=1,e.SvgScene.minBarLineWidth=.2,e.SvgScene.bar=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(!(!r.visible||Math.abs(r.width)<=1e-10||Math.abs(r.height)<=1e-10)){r.width<this.minBarWidth&&(r.width=this.minBarWidth),r.height<this.minBarHeight&&(r.height=this.minBarHeight);var i=r.fillStyle,s=r.strokeStyle;if(i.opacity||s.opacity){this.addFillStyleDefinition(e,i),this.addFillStyleDefinition(e,s);var o;s.opacity?(o=r.lineWidth,o=1e-10>o?0:Math.max(this.minBarLineWidth,o/this.scale)):o=null,t=this.expect(t,"rect",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x:r.left,y:r.top,width:Math.max(1e-10,r.width),height:Math.max(1e-10,r.height),fill:i.color,"fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":s.opacity||null,"stroke-width":o,"stroke-linecap":r.lineCap,"stroke-dasharray":s.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},e.SvgScene.dot=function(t){for(var n=t.$g.firstChild,r=0,i=t.length;i>r;r++){var s=t[r];if(s.visible){var o=s.fillStyle,u=o.opacity,a=s.strokeStyle,f=a.opacity;if(u||f){this.addFillStyleDefinition(t,o),this.addFillStyleDefinition(t,a);var l={"shape-rendering":s.antialias?null:"crispEdges","pointer-events":s.events,cursor:s.cursor,fill:o.color,"fill-opacity":u||null,stroke:a.color,"stroke-opacity":f||null,"stroke-width":f?s.lineWidth/this.scale:null,"stroke-linecap":s.lineCap,"stroke-dasharray":f?this.parseDasharray(s):null},c=s.shape||"circle",h=s.aspectRatio,p=s.shapeAngle,d=null;if("circle"!==c&&this.hasSymbol(c)){var v=s.shapeRadius,m=v,g=v;if(h>0&&1!==h){var y=1/Math.sqrt(h),b=h*y;m*=b,g*=y}l.d=this.renderSymbol(c,s,m,g),c="path",d="translate("+s.left+","+s.top+") ",p&&(d+="rotate("+e.degrees(p)+") ")}else 1===h?(c="circle",l.cx=s.left,l.cy=s.top,l.r=s.shapeRadius):(c="ellipse",l.cx=l.cy=0,d="translate("+s.left+","+s.top+") ",p&&(d+="rotate("+e.degrees(p)+") "),l.rx=s._width/2,l.ry=s._height/2);d&&(l.transform=d),n=this.expect(n,c,t,r,l),s.svg&&this.setAttributes(n,s.svg),s.css&&this.setStyle(n,s.css),n=this.append(n,t,r)}}}return n},!function(t){var n={};t.registerSymbol=function(e,r){return n[e.toLowerCase()]=r,t},t.renderSymbol=function(e,r,i,s){return n[e].call(t,r,e,i,s)},t.hasSymbol=function(e){return n.hasOwnProperty(e)},t.symbols=function(){return e.keys(n)};var r=2/Math.sqrt(3);t.registerSymbol("circle",function(){throw new Error("Not implemented as a symbol")}).registerSymbol("cross",function(e,t,n,r){var i=(e.shapeRadius,-n),s=-r;return"M"+i+","+s+"L"+n+","+r+"M"+n+","+s+"L"+i+","+r}).registerSymbol("triangle",function(e,t,n,i){var s=i,o=n*r,u=-i,a=-o;return"M0,"+s+"L"+o+","+u+" "+a+","+u+"Z"}).registerSymbol("diamond",function(e,t,n,r){var i=n*Math.SQRT2,s=r*Math.SQRT2,o=-i,u=-s;return"M0,"+u+"L"+i+",0 0,"+s+" "+o+",0Z"}).registerSymbol("square",function(e,t,n,r){var i=-n,s=-r;return"M"+i+","+s+"L"+n+","+s+" "+n+","+r+" "+i+","+r+"Z"}).registerSymbol("tick",function(e,t,n,r){var i=-r*r;return"M0,0L0,"+i}).registerSymbol("bar",function(e,t,n,r){var i=r*r/2;return"M0,"+i+"L0,"+ -i})}(e.SvgScene),e.SvgScene.image=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){t=this.fill(t,e,n);if(r.image){t=this.expect(t,"foreignObject",e,n,{cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css);var i=t.firstChild||t.appendChild(document.createElementNS(this.xhtml,"canvas"));i.$scene={scenes:e,index:n},i.style.width=r.width,i.style.height=r.height,i.width=r.imageWidth,i.height=r.imageHeight,i.getContext("2d").putImageData(r.image,0,0)}else t=this.expect(t,"image",e,n,{preserveAspectRatio:"none",cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t.setAttributeNS(this.xlink,"xlink:href",r.url);t=this.append(t,e,n),t=this.stroke(t,e,n)}}return t},e.SvgScene.label=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.textStyle;if(i.opacity&&r.text){var s=0,o=0,u=0,a="start";switch(r.textBaseline){case"middle":u=".35em";break;case"top":u=".71em",o=r.textMargin;break;case"bottom":o="-"+r.textMargin}switch(r.textAlign){case"right":a="end",s="-"+r.textMargin;break;case"center":a="middle";break;case"left":s=r.textMargin}t=this.expect(t,"text",e,n,{"pointer-events":r.events,cursor:r.cursor,x:s,y:o,dy:u,transform:"translate("+r.left+","+r.top+")"+(r.textAngle?" rotate("+180*r.textAngle/Math.PI+")":"")+(1!=this.scale?" scale("+1/this.scale+")":""),fill:i.color,"fill-opacity":i.opacity||null,"text-anchor":a},{font:r.font,"text-shadow":r.textShadow,"text-decoration":r.textDecoration}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t.firstChild?t.firstChild.nodeValue=r.text:t.appendChild(document.createTextNode(r.text)),t=this.append(t,e,n)}}}return t},e.SvgScene.line=function(e){var t=e.$g.firstChild,n=e.length;if(!n)return t;var r=e[0];return"smart"===r.segmented?this.lineSegmentedSmart(t,e):2>n?t:r.segmented?this.lineSegmentedFull(t,e):this.lineFixed(t,e)},e.SvgScene.lineFixed=function(e,t){var n=t.length;if(1===n)return this.lineAreaDotAlone(e,t,0);var r=t[0];if(!r.visible)return e;var i=r.fillStyle,s=r.strokeStyle;if(!i.opacity&&!s.opacity)return e;this.addFillStyleDefinition(t,i),this.addFillStyleDefinition(t,s);var o="M"+r.left+","+r.top,u=n>2;if(u)switch(r.interpolate){case"basis":o+=this.curveBasis(t);break;case"cardinal":o+=this.curveCardinal(t,r.tension);break;case"monotone":o+=this.curveMonotone(t);break;default:u=!1}if(!u)for(var a=1;n>a;a++)o+=this.lineSegmentPath(t[a-1],t[a]);var f=s.opacity,l={"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,d:o,fill:i.color,"fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":f||null,"stroke-width":f?r.lineWidth/this.scale:null,"stroke-linecap":r.lineCap,"stroke-linejoin":r.lineJoin,"stroke-miterlimit":r.strokeMiterLimit,"stroke-dasharray":f?this.parseDasharray(r):null};return e=this.expect(e,"path",t,0,l,r.css),r.svg&&this.setAttributes(e,r.svg),this.append(e,t,0)},e.SvgScene.lineSegmentedSmart=function(e,t){return this.eachLineAreaSegment(e,t,function(e,t,n,r){var i=this.lineSegmentPaths(t,n,r),s=n,o={breakOnKeyChange:!0,from:n,to:r};return this.eachLineAreaSegment(e,t,o,function(e,t,n,r,o,u){var a=t[n],f=a.fillStyle;this.addFillStyleDefinition(t,f);var l=a.strokeStyle;this.addFillStyleDefinition(t,l);if(n===r)return this.lineAreaDotAlone(e,t,n);var c=this.lineJoinPaths(i,n-s,r-s-1),h=l.opacity,p={"shape-rendering":a.antialias?null:"crispEdges","pointer-events":u,cursor:a.cursor,d:c,fill:f.color,"fill-opacity":f.opacity||null,stroke:l.color,"stroke-opacity":h||null,"stroke-width":h?a.lineWidth/this.scale:null,"stroke-linecap":a.lineCap,"stroke-linejoin":a.lineJoin,"stroke-miterlimit":a.strokeMiterLimit,"stroke-dasharray":h?this.parseDasharray(a):null};return e=this.expect(e,"path",t,n,p,a.css),this.append(e,t,n)})})},e.SvgScene.lineSegmentedFull=function(t,n){var r,i=n[0];switch(i.interpolate){case"basis":r=this.curveBasisSegments(n);break;case"cardinal":r=this.curveCardinalSegments(n,i.tension);break;case"monotone":r=this.curveMonotoneSegments(n)}for(var s=0,o=n.length-1;o>s;s++){var u=n[s],a=n[s+1];if(u.visible&&a.visible){var f=u.strokeStyle,l=e.FillStyle.transparent;if(f.opacity){var c;"linear"==u.interpolate&&"miter"==u.lineJoin?(l=f,f=e.FillStyle.transparent,c=this.pathJoin(n[s-1],u,a,n[s+2])):c=r?r[s].join(""):"M"+u.left+","+u.top+this.lineSegmentPath(u,a),t=this.expect(t,"path",n,s,{"shape-rendering":u.antialias?null:"crispEdges","pointer-events":u.events,cursor:u.cursor,d:c,fill:l.color,"fill-opacity":l.opacity||null,stroke:f.color,"stroke-opacity":f.opacity||null,"stroke-width":f.opacity?u.lineWidth/this.scale:null,"stroke-linejoin":u.lineJoin}),u.svg&&this.setAttributes(t,u.svg),u.css&&this.setStyle(t,u.css),t=this.append(t,n,s)}}}return t},e.SvgScene.lineSegmentPath=function(e,t){var n=1;switch(e.interpolate){case"polar-reverse":n=0;case"polar":var r=t.left-e.left,i=t.top-e.top,s=1-e.eccentricity,o=Math.sqrt(r*r+i*i)/(2*s);if(0>=s||s>1)break;return"A"+o+","+o+" 0 0,"+n+" "+t.left+","+t.top;case"step-before":return"V"+t.top+"H"+t.left;case"step-after":return"H"+t.left+"V"+t.top}return"L"+t.left+","+t.top},e.SvgScene.lineSegmentPaths=function(e,t,n){var r,i=e[t];switch(i.interpolate){case"basis":r=this.curveBasisSegments(e,t,n);break;case"cardinal":r=this.curveCardinalSegments(e,i.tension,t,n);break;case"monotone":r=this.curveMonotoneSegments(e,t,n)}if(!r||!r.length){r=[];for(var s=t+1;n>=s;s++){var o=e[s-1],u=e[s];r.push(["M"+o.left+","+o.top,this.lineSegmentPath(o,u)])}}return r},e.strokeMiterLimit=4,e.SvgScene.pathJoin=function(t,n,r,i){var s,o,u,a=[],f=n.lineWidth/this.scale,l=e.vector(n.left,n.top),c=e.vector(r.left,r.top),h=c.minus(l),p=h.perp().norm(),d=p.times(f/2),v=l.plus(d),m=l.minus(d),g=c.plus(d),y=c.minus(d);if(t&&t.visible){var b=e.vector(t.left,t.top),w=l.minus(b),E=w.perp().norm(),S=E.plus(p).norm(),x=this.lineIntersect(l,S,v,h),T=this.lineIntersect(l,S,m,h);u=x.minus(T).length();var N=t.lineWidth/this.scale,C=(f+N)/2;o=u/C,s=n.strokeMiterLimit||e.strokeMiterLimit;if(s>=o)a.push(T,x);else{var k=h.times(-1),L=w.norm().plus(k.norm()).norm(),A=l.plus(L.times(C/2));L.dot(p)>=0?a.push(T,A,v):a.push(m,A,x)}}else a.push(m,v);if(i&&i.visible){var O=e.vector(i.left,i.top),M=O.minus(c),_=M.perp().norm(),D=_.plus(p).norm(),P=this.lineIntersect(c,D,g,h),H=this.lineIntersect(c,D,y,h);u=P.minus(H).length();var B=i.lineWidth/this.scale,j=(B+f)/2;o=u/j,s=r.strokeMiterLimit||e.strokeMiterLimit;if(s>=o)a.push(P,H);else{var F=M.times(-1),I=h.norm().plus(F.norm()).norm(),q=c.plus(I.times(j/2));I.dot(p)>=0?a.push(g,q,H):a.push(P,q,y)}}else a.push(g,y);var R=a.shift();return"M"+R.x+","+R.y+"L"+a.map(function(e){return e.x+","+e.y}).join(" ")},e.SvgScene.lineIntersect=function(e,t,n,r){return e.plus(t.times(n.minus(e).dot(r.perp())/t.dot(r.perp())))},e.SvgScene.lineJoinPaths=function(e,t,n){for(var r=e[t].join(""),i=t+1;n>=i;i++)r+=e[i][1];return r},e.SvgScene.lineAreaDotAlone=function(e){return e},e.Scene.eventsToNumber={"":0,none:0,painted:1,all:2},e.Scene.numberToEvents=["none","painted","all"],e.SvgScene.eachLineAreaSegment=function(t,n,r,i){"function"==typeof r&&(i=r,r=null);var s,o,u,a=e.get(r,"breakOnKeyChange",!1),f=e.get(r,"from")||0,l=e.get(r,"to",n.length-1);a&&(o=[],u=[]);for(var c=f;l>=c;){var h=n[c];if(this.isSceneVisible(h)){s=this.eventsToNumber[h.events]||0,a&&this.lineAreaSceneKey(h,o);for(var p,d=c;;){var v=d+1;if(v>l){p=v;break}var m=n[v];if(!this.isSceneVisible(m)){p=v+1;break}s=Math.max(s,this.eventsToNumber[m.events]||0),d=v;if(a){this.lineAreaSceneKey(m,u);if(!this.equalSceneKeys(o,u)){p=d;break}}}t=i.call(this,t,n,c,d,r,this.numberToEvents[s]),c=p}else c++}return t},e.SvgScene.lineAreaSceneKey=function(e,t){return t[0]=e.fillStyle.key,t[1]=e.strokeStyle.key,t[2]=e.lineWidth,t[3]=e.strokeDasharray||"none",t[4]=e.interpolate,t},e.SvgScene.isSceneVisible=function(e){return e.visible&&(e.fillStyle.opacity>0||e.strokeStyle.opacity>0)},e.SvgScene.equalSceneKeys=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]!==t[n])return!1;return!0},e.SvgScene.panel=function(e){for(var t=e.$g,n=t&&t.firstChild,r=0,i=e.length;i>r;r++){var s=e[r];if(s.visible){if(!e.parent){var o=s.canvas;this.applyCanvasStyle(o),t&&t.parentNode!==o&&(t=o.firstChild,n=t&&t.firstChild),t?n&&"defs"===n.tagName&&(n=n.nextSibling):(t=this.createRootPanelElement(),n=null,this.initRootPanelElement(t,e.mark),o.appendChild(t),e.$defs=t.appendChild(this.create("defs")),e.$g=t),t.setAttribute("width",s.width+s.left+s.right),t.setAttribute("height",s.height+s.top+s.bottom)}var u=null;if("hidden"===s.overflow){var a=this.addPanelClipPath(t,n,e,r,s);u=a.g,e.$g=t=u,n=a.next}n=this.fill(n,e,r);var f=this.scale,l=s.transform,c=s.left+l.x,h=s.top+l.y;this.scale*=l.k;if(s.children.length)for(var p={transform:"translate("+c+","+h+")"+(1!=l.k?" scale("+l.k+")":"")},d=this.getSortedChildScenes(e,r),v=0,m=d.length;m>v;v++){var g=d[v];g.$g=n=this.expect(n,"g",e,r,p),this.updateAll(g),n.parentNode||t.appendChild(n),n=n.nextSibling}this.scale=f,n=this.stroke(n,e,r),u&&(e.$g=t=u.parentNode,n=u.nextSibling)}}return n},e.SvgScene.applyCanvasStyle=function(e){e.style.display="inline-block"},e.SvgScene.createRootPanelElement=function(){return this.create("svg")},e.SvgScene.initRootPanelElement=function(e,t){e.setAttribute("font-size","10px"),e.setAttribute("font-family","sans-serif"),e.setAttribute("fill","none"),e.setAttribute("stroke","none"),e.setAttribute("stroke-width",1.5),this.disableElementSelection(e),this.listenRootPanelElement(e,t)},e.SvgScene.listenRootPanelElement=function(e,t){for(var n=0,r=this.events,i=r.length;i>n;n++)e.addEventListener(r[n],this.dispatch,!1),t._registerBoundEvent(e,r[n],this.dispatch,!1)},e.SvgScene.disableElementSelection=function(e){e.setAttribute("style","-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"),"undefined"!=typeof e.onselectstart&&(e.setAttribute("unselectable","on"),e.onselectstart=function(){return!1})},e.SvgScene.addPanelClipPath=function(t,n,r,i,s){var o=e.id().toString(36),u=this.expect(n,"g",r,i,{"clip-path":"url(#"+o+")"}),a=this.expect(u.firstChild,"clipPath",r,i,{id:o}),f=a.firstChild||a.appendChild(this.create("rect"));return f.setAttribute("x",s.left),f.setAttribute("y",s.top),f.setAttribute("width",s.width),f.setAttribute("height",s.height),a.parentNode||u.appendChild(a),u.parentNode||t.appendChild(u),{g:u,next:a.nextSibling}},e.SvgScene.getSortedChildScenes=function(e,t){var n=e[t].children;return e.mark._zOrderChildCount&&(n=n.slice(0),n.sort(function(e,t){var n=e.mark._zOrder-t.mark._zOrder;return 0===n&&(n=e.childIndex-t.childIndex),n})),n},e.SvgScene.fill=function(e,t,n){var r=t[n],i=r.fillStyle;if(i.opacity||"all"==r.events)this.addFillStyleDefinition(t,i),e=this.expect(e,"rect",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height,fill:i.color,"fill-opacity":i.opacity,stroke:null}),e=this.append(e,t,n);return e},e.SvgScene.stroke=function(e,t,n){var r=t[n],i=r.strokeStyle;if(i.opacity||"all"==r.events)e=this.expect(e,"rect",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":"all"==r.events?"stroke":r.events,cursor:r.cursor,x:r.left,y:r.top,width:Math.max(1e-10,r.width),height:Math.max(1e-10,r.height),fill:null,stroke:i.color,"stroke-opacity":i.opacity,"stroke-width":r.lineWidth/this.scale,"stroke-linecap":r.lineCap,"stroke-dasharray":i.opacity?this.parseDasharray(r):null}),e=this.append(e,t,n);return e},e.SvgScene.minRuleLineWidth=1,e.SvgScene.rule=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.strokeStyle;if(i.opacity){var s=r.lineWidth;s=1e-10>s?0:Math.max(this.minRuleLineWidth,s/this.scale),t=this.expect(t,"line",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x1:r.left,y1:r.top,x2:r.left+r.width,y2:r.top+r.height,stroke:i.color,"stroke-opacity":i.opacity,"stroke-width":s,"stroke-linecap":r.lineCap,"stroke-dasharray":i.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},e.SvgScene.wedge=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.fillStyle,s=r.strokeStyle;if(i.opacity||s.opacity){var o,u=r.innerRadius,a=r.outerRadius,f=Math.abs(r.angle);if(f>=2*Math.PI)o=u?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+ -a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+ -u+"A"+u+","+u+" 0 1,1 0,"+u+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+ -a+"A"+a+","+a+" 0 1,1 0,"+a+"Z";else{var l=Math.min(r.startAngle,r.endAngle),c=Math.max(r.startAngle,r.endAngle),h=Math.cos(l),p=Math.cos(c),d=Math.sin(l),v=Math.sin(c);o=u?"M"+a*h+","+a*d+"A"+a+","+a+" 0 "+(f<Math.PI?"0":"1")+",1 "+a*p+","+a*v+"L"+u*p+","+u*v+"A"+u+","+u+" 0 "+(f<Math.PI?"0":"1")+",0 "+u*h+","+u*d+"Z":"M"+a*h+","+a*d+"A"+a+","+a+" 0 "+(f<Math.PI?"0":"1")+",1 "+a*p+","+a*v+"L0,0Z"}this.addFillStyleDefinition(e,i),this.addFillStyleDefinition(e,s),t=this.expect(t,"path",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,transform:"translate("+r.left+","+r.top+")",d:o,fill:i.color,"fill-rule":"evenodd","fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":s.opacity||null,"stroke-width":s.opacity?r.lineWidth/this.scale:null,"stroke-linejoin":r.lineJoin,"stroke-miterlimit":r.strokeMiterLimit,"stroke-linecap":r.lineCap,"stroke-dasharray":s.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},e.Mark=function(){this.$properties=[],this.$propertiesMap={},this.$handlers={}},e.Mark.prototype.properties={},e.Mark.cast={},e.Mark.prototype.property=function(t,n){return this.hasOwnProperty("properties")||(this.properties=e.extend(this.properties)),this.properties[t]=!0,e.Mark.prototype.propertyMethod(t,!1,e.Mark.cast[t]=n),this},e.Mark.prototype.localProperty=function(t,n){this.hasOwnProperty("properties")||(this.properties=e.extend(this.properties)),this.properties[t]=!0;var r=e.Mark.cast[t];return n&&(e.Mark.cast[t]=r=n),this.propertyMethod(t,!1,r),this},e.Mark.prototype.def=function(e,t){return this.propertyMethod(e,!0),this[e](arguments.length>1?t:null)},e.Mark.prototype.propertyMethod=function(t,n,r){r||(r=e.Mark.cast[t]),this[t]=function(i,s){if(n&&this.scene){var o=this.scene.defs;if(arguments.length)return o[t]={id:null==i?0:e.id(),value:null!=i&&r?r(i):i},this;var u=o[t];return u?u.value:null}if(arguments.length)return this.setPropertyValue(t,i,n,r,!1,s),this;var a=this.instance();return e.propBuildMark===this&&1!==e.propBuilt[t]?(e.propBuilt[t]=1,a[t]=this.evalProperty(this.binds.properties[t])):a[t]}},e.Mark.funPropertyCaller=function(t,n){function r(){var e=t.apply(this,i);return null!=e?n(e):e}var i=e.Mark.stack;return r},e.Mark.prototype.setPropertyValue=function(t,n,r,i,s,o){var u=!r<<1|"function"==typeof n;1&u&&i?n=e.Mark.funPropertyCaller(n,i):null!=n&&i&&(n=i(n));var a=this.$propertiesMap,f=this.$properties,l={name:t,id:e.id(),value:n,type:u,tag:o,proto:null,root:null,_proto:null};l.root=l;var c=a[t];a[t]=l;if(c)for(var h=0,p=f.length;p>h;h++)if(f[h]===c){f.splice(h,1);break}return f.push(l),s&&c&&3===u&&(l.proto=c,l.root=c.root),l},e.Mark.prototype.intercept=function(t,n,r){return this.setPropertyValue(t,n,!1,e.get(r,"noCast")?null:e.Mark.cast[t],!0,e.get(r,"tag")),this},e.Mark.prototype.propertyValue=function(e,t){var n=this.$propertiesMap[e];if(n)return n.value;if(t){if(this.proto){var r=this.proto._propertyValueRecursive(e);if(void 0!==r)return r}return this.defaults._propertyValueRecursive(e)}},e.Mark.prototype._propertyValueRecursive=function(e){var t=this.$propertiesMap[e];return t?t.value:this.proto?this.proto._propertyValueRecursive(e):void 0},e.Mark.stack=[],e.Mark.prototype.property("data").property("visible",Boolean).property("css",Object).property("svg",Object).property("left",Number).property("right",Number).property("top",Number).property("bottom",Number).property("cursor",String).property("title",String).property("reverse",Boolean).property("antialias",Boolean).property("events",e.stringLowerCase).property("id",String),e.Mark.prototype.childIndex=-1,e.Mark.prototype.index=-1,e.Mark.prototype.scale=1,e.Mark.prototype._zOrder=0,e.Mark.prototype.defaults=(new e.Mark).data(function(e){return[e]}).visible(!0).antialias(!0).events("painted"),e.Mark.prototype.extend=function(e){return this.proto=e,this.target=e.target,this},e.Mark.prototype.add=function(e){return this.parent.add(e).extend(this)},e.Mark.prototype.zOrder=function(e){if(!arguments.length)return this._zOrder;e=+e||0;if(this._zOrder!==e){var t=this.parent;t&&0!==this._zOrder&&t._zOrderChildCount--,this._zOrder=e,t&&0!==this._zOrder&&t._zOrderChildCount++}return this},e.Mark.prototype.anchor=function(t){return(new e.Anchor(this)).name(t||"center").data(function(){return this.scene.target.map(function(e){return e.data})}).visible(function(){return this.scene.target[this.index].visible}).id(function(){return this.scene.target[this.index].id}).left(function(){var e=this.scene.target[this.index],t=e.width||0;switch(this.name()){case"bottom":case"top":case"center":return e.left+t/2;case"left":return null}return e.left+t}).top(function(){var e=this.scene.target[this.index],t=e.height||0;switch(this.name()){case"left":case"right":case"center":return e.top+t/2;case"top":return null}return e.top+t}).right(function(){var e=this.scene.target[this.index];return"left"==this.name()?e.right+(e.width||0):null}).bottom(function(){var e=this.scene.target[this.index];return"top"==this.name()?e.bottom+(e.height||0):null}).textAlign(function(){switch(this.name()){case"bottom":case"top":case"center":return"center";case"right":return"right"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"top"}return"bottom"})},e.Mark.prototype.anchorTarget=function(){return this.target},e.Mark.prototype.margin=function(e){return this.left(e).right(e).top(e).bottom(e)},e.Mark.prototype.instance=function(e){var t=this.scene||this.parent.instance(-1).children[this.childIndex],n=null==e||this.hasOwnProperty("index")?this.index:e;return t[0>n?t.length-1:n]},e.Mark.prototype.instances=function(t){for(var n,r=this,i=[];!(n=r.scene);)i.push({index:t.parentIndex,childIndex:r.childIndex}),t=t.parent,r=r.parent;for(var s=i.length;s--;){var o=i[s];n=n[o.index].children[o.childIndex]}if(this.hasOwnProperty("index")){var u=e.extend(n[this.index]);return u.right=u.top=u.left=u.bottom=0,[u]}return n},e.Mark.prototype.first=function(){return this.scene[0]},e.Mark.prototype.last=function(){return this.scene[this.scene.length-1]},e.Mark.prototype.sibling=function(){return 0==this.index?null:this.scene[this.index-1]},e.Mark.prototype.cousin=function(){var e=this.parent,t=e&&e.sibling();return t&&t.children?t.children[this.childIndex][this.index]:null},e.Mark.prototype._renderId=0,e.Mark.prototype.renderId=function(){return this.root._renderId},e.Mark.prototype.render=function(){var e=this.root;!this.parent||e.scene?(e._renderId++,this.renderCore()):e.render()},e.Mark.prototype.renderCore=function(){function t(t,r,s){t.scale=s;if(a>r){var o=r>=i.length;o&&i.unshift(null);if(t.hasOwnProperty("index"))n(t,r,s,o);else{for(var u=0,f=t.scene.length;f>u;u++)t.index=u,n(t,r,s,o);delete t.index}o&&i.shift()}else t.build(),e.Scene.scale=s,e.Scene.updateAll(t.scene);delete t.scale}function n(e,n,r,s){var u,a=e.scene[e.index];if(a.visible){var f=e.children,l=a.children,c=o[n],h=f[c];h.scene||c++;for(u=0;c>u;u++)f[u].scene=l[u];s&&(i[0]=a.data),t(h,n+1,r*a.transform.k);for(u=0;c>u;u++)f[u].scene=void 0}}for(var r=this.parent,i=e.Mark.stack,s=i.length,o=[],u=this;u.parent;u=u.parent)o.unshift(u.childIndex);var a=o.length;this.bind();for(;r&&!r.hasOwnProperty("index");)r=r.parent;try{this.context(r?r.scene:void 0,r?r.index:-1,function(){t(this.root,0,1)})}catch(f){throw i.length>s&&(i.length=s),f}},e.Mark.prototype.bind=function(){function t(e){do for(var t=e.$properties,u=t.length;u--;){var a=t[u],f=a.name,l=r[f];if(l){var c=i[f];3===c.type&&(c._proto=a,c=i[f]=a.root,c._proto=null)}else{r[f]=a,i[f]=a.root,a.root._proto=null;switch(f){case"data":n=a;break;case"visible":case"id":s.push(a);break;default:o[a.type].push(a)}}}while(e=e.proto)}var n,r={},i={},s=[],o=[[],[],[],[]];t(this),t(this.defaults);var u=o[0],a=o[1].reverse(),f=o[2];o[3].reverse();var l=this;do for(var c in l.properties)c in r||f.push(r[c]={name:c,type:2,value:null});while(l=l.proto);var h;if(u.length||a.length){h=u.concat(a);for(var p=0,d=h.length;d>p;p++)this.propertyMethod(h[p].name,!0)}else h=[];this.binds={properties:r,data:n,defs:h,required:s,optional:e.blend(o)}},e.Mark.prototype.build=function(){var t=e.Mark.stack,n=this.scene;if(!n){n=this.scene=[],n.mark=this,n.type=this.type,n.childIndex=this.childIndex;var r=this.parent;r&&(n.parent=r.scene,n.parentIndex=r.index)}this.target&&(n.target=this.target.instances(n));var i=this.binds.defs;if(i.length)for(var s=n.defs||(n.defs={}),o=0,u=i.length;u>o;o++){var a=i[o],f=s[a.name];(!f||a.id>f.id)&&(s[a.name]={id:0,value:1&a.type?a.value.apply(this,t):a.value})}var l=this.evalProperty(this.binds.data),c=l.length;n.length=c;if(c){var h=e.Mark.prototype;t.unshift(null);var p=e.propBuildMark,d=e.propBuilt;e.propBuildMark=this;try{for(var o=0;c>o;o++){h.index=this.index=o,e.propBuilt={};var v=n[o];v?v._state&&delete v._state:v=n[o]={},v.data=t[0]=l[o],this.preBuildInstance(v),this.buildInstance(v)}}finally{h.index=-1,delete this.index,t.shift(),e.propBuildMark=p,e.propBuilt=d}}return this},e.Mark.prototype.instanceState=function(e){return e||(e=this.instance()),e?e._state||(e._state={}):null},e.Mark.prototype.preBuildInstance=function(){},e.Mark.prototype.buildInstance=function(e){this.buildProperties(e,this.binds.required),e.visible&&(this.buildProperties(e,this.binds.optional),this.buildImplied(e))},!function(){var t,n=e.Mark.stack,r=[function(e){return this.scene.defs[e.name].value},null,function(e){return e.value},function(e){return t=e.proto||e._proto,e.value.apply(this,n)}];r[1]=r[0],e.Mark.prototype.buildProperties=function(n,i){var s=e.propBuilt,o=!s;o&&(e.propBuildMark=this,e.propBuilt=s={});for(var u=t,a=0,f=i.length;f>a;a++){var l=i[a],c=l.name;c in s||(s[c]=1,n[c]=r[l.type].call(this,l))}t=u,o&&(e.propBuildMark=e.propBuilt=null)},e.Mark.prototype.evalProperty=function(e){var n=t,i=r[e.type].call(this,e);return t=n,i},e.Mark.prototype.evalInPropertyContext=function(e,r){var i=t;t=r;var s=e.apply(this,n);return t=i,s},e.Mark.prototype.delegate=function(e,n){if(t&&(!n||t.tag===n)){var r=this.evalProperty(t);if(void 0!==r)return r}return e},e.Mark.prototype.delegateExcept=function(e,n){if(t&&(!n||t.tag!==n)){var r=this.evalProperty(t);if(void 0!==r)return r}return e},e.Mark.prototype.hasDelegate=function(e){return!(!t||e&&t.tag!==e)}}(),e.Mark.prototype.buildImplied=function(t){var n,r,i=t.left,s=t.right,o=t.top,u=t.bottom,a=this.properties,f=a.width?t.width:0,l=a.height?t.height:0;if(null==f||null==s||null==i){n=this.parent&&this.parent.instance(),r=!0;var c=n?n.width:f+i+s;null==f?f=c-(s=s||0)-(i=i||0):null==s?null==i?i=s=(c-f)/2:s=c-f-i:i=c-f-s}if(null==l||null==u||null==o){r||(n=this.parent&&this.parent.instance());var h=n?n.height:l+o+u;null==l?l=h-(o=o||0)-(u=u||0):null==u?u=null==o?o=(h-l)/2:h-l-o:o=h-l-u}t.left=i,t.right=s,t.top=o,t.bottom=u,a.width&&(t.width=f),a.height&&(t.height=l),a.textStyle&&!t.textStyle&&(t.textStyle=e.FillStyle.transparent),a.fillStyle&&!t.fillStyle&&(t.fillStyle=e.FillStyle.transparent),a.strokeStyle&&!t.strokeStyle&&(t.strokeStyle=e.FillStyle.transparent)},e.Mark.prototype.mouse=function(){var t=this.root.canvas(),n=e.event,r=n&&n.pageX||0,i=n&&n.pageY||0,s=e.elementOffset(t);if(s){var o=e.cssStyle(t);r-=s.left+parseFloat(o("paddingLeft")||0),i-=s.top+parseFloat(o("paddingTop")||0)}var u=e.Transform.identity,a=this.properties.transform?this:this.parent,f=[];do f.push(a);while(a=a.parent);for(;a=f.pop();){var l=a.instance();u=u.translate(l.left,l.top).times(l.transform)}return u=u.invert(),e.vector(r*u.k+u.x,i*u.k+u.y)},e.Mark.prototype.event=function(t,n){n=e.functor(n);var r=this.$handlers[t];return r?r instanceof Array?r.push(n):r=[r,n]:r=n,this.$hasHandlers=!0,this.$handlers[t]=r,this},e.Mark.prototype.context=function(t,n,r){function i(t,n){e.Mark.scene=t,o.index=n;if(t){var r,i=t.mark,s=i,a=[];do{a.push(s),u.push(t[n].data),s.index=n,s.scene=t;if(s=s.parent)n=t.parentIndex,t=t.parent}while(s);var f=1;r=a.length-1;if(r>0)do s=a[r--],s.scale=f,f*=s.scene[s.index].transform.k;while(r);i.scale=f;var l,c=i.children;if(c&&(l=c.length)>0){var h=i.scene[i.index];f*=h.transform.k;var p=h.children;r=l;for(;r--;)s=c[r],s.scene=p[r],s.scale=f}}}function s(e){if(e){var t,n=e.mark,r=n.children;if(r)for(var i=r.length;i--;)t=r[i],t.scene=void 0,t.scale=1;t=n;var s,o=0;do{o++,delete t.index;if(s=t.parent)t.scene=void 0,t.scale=1}while(t=s);o&&(u.length-=o)}}var o=e.Mark.prototype,u=e.Mark.stack,a=e.Mark.scene,f=o.index;if(t&&t===a&&n===f)try{r.apply(this,u)}catch(l){throw e.error(l),l}finally{e.Mark.scene=a,o.index=f}else{s(a,f),i(t,n);try{r.apply(this,u)}catch(l){throw e.error(l),l}finally{s(t,n),i(a,f)}}},e.Mark.prototype.getEventHandler=function(e,t,n,r){var i=this.$handlers[e];return i?[i,t,n,r]:this.getParentEventHandler(e,t,n,r)},e.Mark.prototype.getParentEventHandler=function(e,t,n,r){var i=t.parent;return i?i.mark.getEventHandler(e,i,t.parentIndex,r):void 0},e.Mark.dispatch=function(e,t,n,r){var i=t.mark.root;if(i.$transition)return!0;var s,o=i.$interceptors&&i.$interceptors[e];if(o)for(var u=0,a=o.length;a>u;u++){s=o[u](e,r);if(s)break;if(s===!1)return!0}if(!s){s=t.mark.getEventHandler(e,t,n,r);if(!s)return!1}return this.handle.apply(this,s)},e.Mark.handle=function(t,n,r,i){var s=n.mark;return s.context(n,r,function(){var n,r,o,u=e.Mark.stack.concat(i);if(t instanceof Array){var a;for(n=0,r=t.length;r>n;n++)o=t[n].apply(s,u),o&&o.render&&(a||(a=[])).push(o);if(a)for(n=0,r=a.length;r>n;n++)a[n].render()}else o=t.apply(s,u),o&&o.render&&o.render()}),!0},e.Mark.prototype.addEventInterceptor=function(e,t,n){var r=this.root;if(r){var i=r.$interceptors||(r.$interceptors={}),s=i[e]||(i[e]=[]);n?s.unshift(t):s.push(t)}},e.Mark.prototype.eachInstance=function(t,n){function r(e,i,o){var a=e.length;if(a>0){var f,l=i===u;l||(f=s[i]);for(var c=0;a>c;c++){var h=e[c];if(h.visible)if(i===u)t.call(n,e,c,o);else{var p=h.children[f];if(p){var d=o.times(h.transform).translate(h.left,h.top);r(p,i+1,d)}}}}}for(var i=this,s=[];i.parent;)s.unshift(i.childIndex),i=i.parent;var o=i.scene;if(o){var u=s.length;r(o,0,e.Transform.identity)}},e.Mark.prototype.toScreenTransform=function(){var t=e.Transform.identity;this instanceof e.Panel&&(t=t.translate(this.left(),this.top()).times(this.transform()));var n=this.parent;if(n)do t=t.translate(n.left(),n.top()).times(n.transform());while(n=n.parent);return t},e.Mark.prototype.transition=function(){return new e.Transition(this)},e.Mark.prototype.on=function(t){return this["$"+t]=new e.Transient(this)},e.Mark.prototype.getShape=function(e,t,n){var r=e[t];if(!r.visible)return null;null==n&&(n=0);var i="_shape_inset_"+n;return r[i]||(r[i]=this.getShapeCore(e,t,n))},e.Mark.prototype.getShapeCore=function(t,n,r){var i=t[n],s=i.left,o=i.top,u=i.width,a=i.height;if(r>0&&1>=r){var f=r*u,l=r*a;s+=f,o+=l,u-=2*f,a-=2*l}return new e.Shape.Rect(s,o,u,a)},e.Mark.prototype.pointingRadiusMax=function(e){return arguments.length?(e=+e,this._pointingRadiusMax=isNaN(e)||0>e?0:e,this):this._pointingRadiusMax},e.Mark.prototype._pointingRadiusMax=1/0,e.Anchor=function(t){e.Mark.call(this),this.target=t,this.parent=t.parent},e.Anchor.prototype=e.extend(e.Mark).property("name",String),e.Anchor.prototype.extend=function(e){return this.proto=e,this},e.Area=function(){e.Mark.call(this)},e.Area.castSegmented=function(e){if(!e)return"";e=String(e).toLowerCase();switch(e){case"smart":case"full":break;default:e="full"}return e},e.Area.prototype=e.extend(e.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("lineJoin",e.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",e.stringLowerCase).property("strokeDasharray",e.stringLowerCase).property("strokeStyle",e.fillStyle).property("fillStyle",e.fillStyle).property("segmented",e.Area.castSegmented).property("interpolate",e.stringLowerCase).property("tension",Number),e.Area.prototype.type="area",e.Area.prototype.defaults=(new e.Area).extend(e.Mark.prototype.defaults).lineWidth(1.5).fillStyle(e.Colors.category20().by(e.parent)).interpolate("linear").tension(.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),e.Area.prototype.buildImplied=function(t){null==t.height&&(t.height=0),null==t.width&&(t.width=0),e.Mark.prototype.buildImplied.call(this,t)},e.Area.fixed={lineWidth:1,lineJoin:1,strokeMiterLimit:1,lineCap:1,strokeStyle:1,strokeDasharray:1,fillStyle:1,segmented:1,interpolate:1,tension:1},e.Area.prototype.bind=function(){e.Mark.prototype.bind.call(this);for(var t=this.binds,n=t.required,r=t.optional,i=0,s=r.length;s>i;i++){var o=r[i];o.fixed=o.name in e.Area.fixed,"segmented"==o.name&&(n.push(o),r.splice(i,1),i--,s--)}this.binds.$required=n,this.binds.$optional=r},e.Area.prototype.buildInstance=function(t){function n(e){return!e.fixed||(i.push(e),!1)}var r=this.binds;if(this.index){var i=r.fixed;i||(i=r.fixed=[],r.required=r.required.filter(n),this.scene[0].segmented||(r.optional=r.optional.filter(n)));var s=i.length;if(s)for(var o=this.scene[0],u=0;s>u;u++){var a=i[u].name;t[a]=o[a]}}else r.required=r.$required,r.optional=r.$optional,r.fixed=null;e.Mark.prototype.buildInstance.call(this,t)},e.Area.prototype.anchor=function(t){return e.Mark.prototype.anchor.call(this,t).interpolate(function(){return this.scene.target[this.index].interpolate}).eccentricity(function(){return this.scene.target[this.index].eccentricity}).tension(function(){return this.scene.target[this.index].tension})},e.Area.prototype.getEventHandler=function(t,n,r,i){var s=n[r],o=1===e.Scene.mousePositionEventSet[t]&&(!s.segmented||"smart"===s.segmented);if(!o)return e.Mark.prototype.getEventHandler.call(this,t,n,r,i);var u,a="mousemove"===t?this.$handlers.mouseover:null,f=this.$handlers[t],l=f||a;return l&&(u=this.getNearestInstanceToMouse(n,r),a&&!this.filterMouseMove(n,u)&&(a=null,l=f)),l?(f&&a&&(l=[].concat(f,a)),[l,n,u,i]):this.getParentEventHandler(t,n,r,i)},e.Area.prototype.filterMouseMove=function(e,t){var n=this._mouseOverScene;if(!n||n!==e||this._mouseOverIndex!==t)return this._mouseOverScene=e,this._mouseOverIndex=t,!0},e.Area.prototype.getNearestInstanceToMouse=function(e,t){for(var n=this.mouse(),r=1/0,i=null,s=t,o=e.length;o>s;s++){var u=this.getShape(e,s);if(u){if(u.containsPoint(n))return s;var a=u.distance2(n).dist2;r>a&&(r=a,i=s)}}return null!=i?i:t},e.Area.prototype.getShapeCore=function(t,n){var r=t[n],i=r.width||0,s=r.height||0,o=r.left,u=r.top,a=n+1<t.length?t[n+1]:null;if(!a||!a.visible)return new e.Shape.Line(o,u,o+i,u+s);var f=a.left,l=a.top,c=a.height||0,h=a.width||0;return new e.Shape.Polygon([new e.Vector(o,u),new e.Vector(f,l),new e.Vector(f+h,l+c),new e.Vector(o+i,u+s)])},e.Bar=function(){e.Mark.call(this)},e.Bar.prototype=e.extend(e.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",e.fillStyle).property("fillStyle",e.fillStyle).property("lineCap",e.stringLowerCase).property("strokeDasharray",e.stringLowerCase),e.Bar.prototype.type="bar",e.Bar.prototype.defaults=(new e.Bar).extend(e.Mark.prototype.defaults).lineWidth(1.5).fillStyle(e.Colors.category20().by(e.parent)).lineCap("butt").strokeDasharray("none"),e.Dot=function(){e.Mark.call(this)},e.Dot.prototype=e.extend(e.Mark).property("shape",e.stringLowerCase).property("shapeAngle",Number).property("shapeRadius",Number).property("shapeSize",Number).property("aspectRatio",Number).property("lineWidth",Number).property("strokeStyle",e.fillStyle).property("lineCap",e.stringLowerCase).property("strokeDasharray",e.stringLowerCase).property("fillStyle",e.fillStyle),e.Dot.prototype.type="dot",e.Dot.prototype.defaults=(new e.Dot).extend(e.Mark.prototype.defaults).shape("circle").aspectRatio(1).lineWidth(1.5).strokeStyle(e.Colors.category10().by(e.parent)).lineCap("butt").strokeDasharray("none"),e.Dot.prototype.anchor=function(t){return e.Mark.prototype.anchor.call(this,t).left(function(){var e=this.scene.target[this.index];switch(this.name()){case"bottom":case"top":case"center":return e.left;case"left":return null}return e.left+e._width/2}).right(function(){var e=this.scene.target[this.index];return"left"==this.name()?e.right+e._width/2:null}).top(function(){var e=this.scene.target[this.index];switch(this.name()){case"left":case"right":case"center":return e.top;case"top":return null}return e.top+e._height/2}).bottom(function(){var e=this.scene.target[this.index];return"top"==this.name()?e.bottom+e._height/2:null}).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"bottom":return"top"}return"bottom"})},e.Dot.prototype.buildImplied=function(t){var n=t.shapeRadius,r=t.shapeSize,i=t.aspectRatio||1;null==n?null==r?(r=t.shapeSize=20.25,n=t.shapeRadius=4.5):n=t.shapeRadius=Math.sqrt(r):null==r&&(r=t.shapeSize=n*n);var s,o;1===i||0>i?s=o=2*n:(s=2*n/Math.sqrt(i),o=i*s),t._height=s,t._width=o,e.Mark.prototype.buildImplied.call(this,t)},e.Dot.prototype.width=function(){return this.instance()._width},e.Dot.prototype.height=function(){return this.instance()._height},e.Dot.prototype.getShapeCore=function(t,n){var r=t[n],i=r._width,s=r._height,o=r.left,u=r.top;switch(r.shape){case"diamond":i*=Math.SQRT2,s*=Math.SQRT2;case"square":case"cross":return new e.Shape.Rect(o-s/2,u-i/2,s,i)}return new e.Shape.Circle(o,u,r.shapeRadius)},e.Label=function(){e.Mark.call(this)},e.Label.prototype=e.extend(e.Mark).property("text",String).property("font",String).property("textAngle",Number).property("textStyle",e.color).property("textAlign",e.stringLowerCase).property("textBaseline",e.stringLowerCase).property("textMargin",Number).property("textDecoration",String).property("textShadow",String),e.Label.prototype.type="label",e.Label.prototype.defaults=(new e.Label).extend(e.Mark.prototype.defaults).events("none").text(e.identity).font("10px sans-serif").textAngle(0).textStyle("black").textAlign("left").textBaseline("bottom").textMargin(3),e.Label.prototype.getShapeCore=function(t,n,r){var i=t[n],s=e.Text.measure(i.text,i.font),o=i.left,u=i.top,a=s.width,f=s.height;if(r>0&&1>=r){var l=r*a,c=r*f;o+=l,u+=c,a-=2*l,f-=2*c}return e.Label.getPolygon(a,f,i.textAlign,i.textBaseline,i.textAngle,i.textMargin).apply(e.Transform.identity.translate(o,u))},e.Label.getPolygon=function(t,n,r,i,s,o){var u,a;switch(i){case"middle":a=n/2;break;case"top":a=o+n;break;case"bottom":a=-o}switch(r){case"right":u=-o-t;break;case"center":u=-t/2;break;case"left":u=o}var f=new e.Vector(u,a),l=f.plus(t,0),c=l.plus(0,-n),h=f.plus(0,-n);return 0!==s&&(f=f.rotate(s),l=l.rotate(s),h=h.rotate(s),c=c.rotate(s)),new e.Shape.Polygon([f,l,c,h])},e.Line=function(){e.Mark.call(this)},e.Line.prototype=e.extend(e.Mark).property("lineWidth",Number).property("lineJoin",e.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",e.stringLowerCase).property("strokeStyle",e.fillStyle).property("strokeDasharray",e.stringLowerCase).property("fillStyle",e.fillStyle).property("segmented",e.Area.castSegmented).property("interpolate",e.stringLowerCase).property("eccentricity",Number).property("tension",Number),e.Line.prototype.type="line",e.Line.prototype.defaults=(new e.Line).extend(e.Mark.prototype.defaults).lineWidth(1.5).strokeStyle(e.Colors.category10().by(e.parent)).interpolate("linear").eccentricity(0).tension(.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),e.Line.prototype.bind=e.Area.prototype.bind,e.Line.prototype.buildInstance=e.Area.prototype.buildInstance,e.Line.prototype.getEventHandler=e.Area.prototype.getEventHandler,e.Line.prototype.getNearestInstanceToMouse=e.Area.prototype.getNearestInstanceToMouse,e.Line.prototype.filterMouseMove=e.Area.prototype.filterMouseMove,e.Line.prototype.anchor=function(t){return e.Area.prototype.anchor.call(this,t).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center";case"right":return"left"}}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"bottom";case"bottom":return"top"}})},e.Line.prototype.getShapeCore=function(t,n){var r=t[n],i=n+1<t.length?t[n+1]:null;return null!=i&&i.visible?new e.Shape.Line(r.left,r.top,i.left,i.top):new e.Shape.Point(r.left,r.top)},e.Rule=function(){e.Mark.call(this)},e.Rule.prototype=e.extend(e.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",e.fillStyle).property("lineCap",e.stringLowerCase).property("strokeDasharray",e.stringLowerCase),e.Rule.prototype.type="rule",e.Rule.prototype.defaults=(new e.Rule).extend(e.Mark.prototype.defaults).lineWidth(1).strokeStyle("black").antialias(!1).lineCap("butt").strokeDasharray("none"),e.Rule.prototype.anchor=e.Line.prototype.anchor,e.Rule.prototype.buildImplied=function(t){var n=t.left,r=t.right;t.top,t.bottom,null!=t.width||null==n&&null==r||null!=r&&null!=n?t.height=0:t.width=0,e.Mark.prototype.buildImplied.call(this,t)},e.Rule.prototype.getShapeCore=function(t,n){var r=t[n];return new e.Shape.Line(r.left,r.top,r.left+r.width,r.top+r.height)},e.Panel=function(){e.Bar.call(this),this.children=[],this.root=this,this.$dom=e.$&&e.$.s},e.Panel.prototype=e.extend(e.Bar).property("transform").property("overflow",e.stringLowerCase).property("canvas",function(e){return"string"==typeof e?document.getElementById(e):e}),e.Panel.prototype.type="panel",e.Panel.prototype.isPointingBarrier=!1,e.Panel.prototype._zOrderChildCount=0,e.Panel.prototype.defaults=(new e.Panel).extend(e.Bar.prototype.defaults).fillStyle(null).overflow("visible"),e.Panel.prototype.anchor=function(t){var n=e.Bar.prototype.anchor.call(this,t);return n.parent=this,n},e.Panel.prototype.add=function(e){var t=new e;t.parent=this,t.root=this.root,t.childIndex=this.children.length,this.children.push(t);var n=+t._zOrder||0;return 0!==n&&this._zOrderChildCount++,t},e.Panel.prototype.bind=function(){e.Mark.prototype.bind.call(this);for(var t=this.children,n=0,r=t.length;r>n;n++)t[n].bind()},e.Panel.prototype.buildInstance=function(t){e.Bar.prototype.buildInstance.call(this,t);if(t.visible){var n=this.scale*t.transform.k;e.Mark.prototype.index=-1;for(var r,i=this.children,s=t.children||(t.children=[]),o=0,u=i.length;u>o;o++)r=i[o],r.scene=s[o],r.scale=n,r.build();o=u;for(;o--;)r=i[o],s[o]=r.scene,delete r.scene,delete r.scale;s.length=u}},e.Panel.prototype.buildImplied=function(t){this.parent||this._buildRootInstanceImplied(t)?(t.transform||(t.transform=e.Transform.identity),e.Mark.prototype.buildImplied.call(this,t)):t.visible=!1},e.Panel.prototype._buildRootInstanceImplied=function(e){var t=e.canvas;if(t){if(!this._rootInstanceStealCanvas(e,t))return!1;this._rootInstanceInitCanvas(e,t)}else e.canvas=this._rootInstanceGetInlineCanvas(e);return!0},e.Panel.prototype._rootInstanceStealCanvas=function(t,n){var r=n.$panel;if(r!==this){if(r){if(this.$lastCreateId)return!1;r._disposeRootPanel(),this._updateCreateId(n)}n.$panel=this,e.removeChildren(n)}else this._updateCreateId(n);return!0},e.Panel.prototype._registerBoundEvent=function(e,t,n,r){if(e.removeEventListener){var i=this._boundEvents||(this._boundEvents=[]);i.push([e,t,n,r])}},e.Panel.prototype.dispose=function(){var e=this.root;e._disposeRootPanel();var t=e.canvas();e.canvas(null),t.$panel=null,e.binds=null;var n=e.scene;n&&(n.$defs=null,n.$g=null,e.scene=null)},e.Panel.prototype._disposeRootPanel=function(){var e=this.$transition;e&&e.stop();var t=this._boundEvents;if(t){this._boundEvents=null;for(var n=0,r=t.length;r>n;n++){var i=t[n];i[0].removeEventListener(i[1],i[2],i[3])}}},e.Panel.prototype._rootInstanceInitCanvas=function(t,n){var r,i,s;null==t.width&&(s=e.cssStyle(n),r=parseFloat(s("width")||0),t.width=r-t.left-t.right),null==t.height&&(s||(s=e.cssStyle(n)),i=parseFloat(s("height")||0),t.height=i-t.top-t.bottom),s=null},e.Panel.prototype._rootInstanceGetInlineCanvas=function(){var e,t=this.$canvas||(this.$canvas=[]);if(!(e=t[this.index])){e=t[this.index]=document.createElement("span");if(this.$dom)this.$dom.parentNode.insertBefore(e,this.$dom);else{for(var n=document.body;n.lastChild&&n.lastChild.tagName;)n=n.lastChild;n!=document.body&&(n=n.parentNode),n.appendChild(e)}}return e},e.Panel.prototype._updateCreateId=function(e){this.$lastCreateId=e.$pvCreateId=(e.$pvCreateId||0)+1},e.Image=function(){e.Bar.call(this)},e.Image.prototype=e.extend(e.Bar).property("url",String).property("imageWidth",Number).property("imageHeight",Number),e.Image.prototype.type="image",e.Image.prototype.defaults=(new e.Image).extend(e.Bar.prototype.defaults).fillStyle(null),e.Image.prototype.image=function(t){return this.$image=function(){var n=t.apply(this,arguments);return null==n?e.Color.transparent:"string"==typeof n?e.color(n):n},this},e.Image.prototype.bind=function(){e.Bar.prototype.bind.call(this);var t=this.binds,n=this;do t.image=n.$image;while(!t.image&&(n=n.proto))},e.Image.prototype.buildImplied=function(t){e.Bar.prototype.buildImplied.call(this,t);if(t.visible){null==t.imageWidth&&(t.imageWidth=t.width),null==t.imageHeight&&(t.imageHeight=t.height);if(null==t.url&&this.binds.image){var n,r=this.$canvas||(this.$canvas=document.createElement("canvas")),i=r.getContext("2d"),s=t.imageWidth,o=t.imageHeight,u=e.Mark.stack;r.width=s,r.height=o,n=(t.image=i.createImageData(s,o)).data,u.unshift(null,null);for(var a=0,f=0;o>a;a++){u[1]=a;for(var l=0;s>l;l++){u[0]=l;var c=this.binds.image.apply(this,u);n[f++]=c.r,n[f++]=c.g,n[f++]=c.b,n[f++]=255*c.a}}u.splice(0,2)}}},e.Wedge=function(){e.Mark.call(this)},e.Wedge.prototype=e.extend(e.Mark).property("startAngle",Number).property("endAngle",Number).property("angle",Number).property("innerRadius",Number).property("outerRadius",Number).property("lineWidth",Number).property("strokeStyle",e.fillStyle).property("lineJoin",e.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",e.stringLowerCase).property("strokeDasharray",e.stringLowerCase).property("fillStyle",e.fillStyle),e.Wedge.prototype.type="wedge",e.Wedge.prototype.defaults=(new e.Wedge).extend(e.Mark.prototype.defaults).startAngle(function(){var e=this.sibling();return e?e.endAngle:-Math.PI/2}).innerRadius(0).lineWidth(1.5).strokeStyle(null).fillStyle(e.Colors.category20().by(e.index)).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),e.Wedge.prototype.midRadius=function(){return(this.innerRadius()+this.outerRadius())/2},e.Wedge.prototype.midAngle=function(){return(this.startAngle()+this.endAngle())/2},e.Wedge.prototype.anchor=function(t){function n(e){return e.innerRadius||e.angle<2*Math.PI}function r(e){return(e.innerRadius+e.outerRadius)/2}function i(e){return(e.startAngle+e.endAngle)/2}return e.Mark.prototype.anchor.call(this,t).left(function(){var e=this.scene.target[this.index];if(n(e))switch(this.name()){case"outer":return e.left+e.outerRadius*Math.cos(i(e));case"inner":return e.left+e.innerRadius*Math.cos(i(e));case"start":return e.left+r(e)*Math.cos(e.startAngle);case"center":return e.left+r(e)*Math.cos(i(e));case"end":return e.left+r(e)*Math.cos(e.endAngle)}return e.left}).top(function(){var e=this.scene.target[this.index];if(n(e))switch(this.name()){case"outer":return e.top+e.outerRadius*Math.sin(i(e));case"inner":return e.top+e.innerRadius*Math.sin(i(e));case"start":return e.top+r(e)*Math.sin(e.startAngle);case"center":return e.top+r(e)*Math.sin(i(e));case"end":return e.top+r(e)*Math.sin(e.endAngle)}return e.top}).textAlign(function(){var t=this.scene.target[this.index];if(n(t))switch(this.name()){case"outer":return e.Wedge.upright(i(t))?"right":"left";case"inner":return e.Wedge.upright(i(t))?"left":"right"}return"center"}).textBaseline(function(){var t=this.scene.target[this.index];if(n(t))switch(this.name()){case"start":return e.Wedge.upright(t.startAngle)?"top":"bottom";case"end":return e.Wedge.upright(t.endAngle)?"bottom":"top"}return"middle"}).textAngle(function(){var t=this.scene.target[this.index],r=0;if(n(t))switch(this.name()){case"center":case"inner":case"outer":r=i(t);break;case"start":r=t.startAngle;break;case"end":r=t.endAngle}return e.Wedge.upright(r)?r:r+Math.PI})},e.Wedge.upright=function(e){return e%=2*Math.PI,e=0>e?2*Math.PI+e:e,e<Math.PI/2||e>=3*Math.PI/2},e.Wedge.prototype.buildImplied=function(t){null==t.angle?t.angle=t.endAngle-t.startAngle:null==t.endAngle&&(t.endAngle=t.startAngle+t.angle),e.Mark.prototype.buildImplied.call(this,t)},e.Wedge.prototype.getShapeCore=function(t,n){var r=t[n];return new e.Shape.Wedge(r.left,r.top,r.innerRadius,r.outerRadius,r.startAngle,r.angle)},e.Ease=function(){function t(e){return function(t){return 1-e(1-t)}}function n(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function r(e){return function(t){return 0>t?0:t>1?1:Math.pow(t,e)}}function i(e){return 1-Math.cos(e*Math.PI/2)}function s(e){return e?Math.pow(2,10*(e-1))-.001:0}function o(e){return-(Math.sqrt(1-e*e)-1)}function u(e,t){var n;return t||(t=.45),!e||1>e?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(r){return 0>=r||r>=1?r:-(e*Math.pow(2,10*--r)*Math.sin(2*(r-n)*Math.PI/t))}}function a(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function f(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}var l=r(2),c=r(3),h=u(),p=a(),d={linear:e.identity,"quad-in":l,"quad-out":t(l),"quad-in-out":n(l),"quad-out-in":n(t(l)),"cubic-in":c,"cubic-out":t(c),"cubic-in-out":n(c),"cubic-out-in":n(t(c)),"sin-in":i,"sin-out":t(i),"sin-in-out":n(i),"sin-out-in":n(t(i)),"exp-in":s,"exp-out":t(s),"exp-in-out":n(s),"exp-out-in":n(t(s)),"circle-in":o,"circle-out":t(o),"circle-in-out":n(o),"circle-out-in":n(t(o)),"elastic-in":h,"elastic-out":t(h),"elastic-in-out":n(h),"elastic-out-in":n(t(h)),"back-in":p,"back-out":t(p),"back-in-out":n(p),"back-out-in":n(t(p)),"bounce-in":f,"bounce-out":t(f),"bounce-in-out":n(f),"bounce-out-in":n(t(f))};return e.ease=function(e){return d[e]},{reverse:t,reflect:n,linear:function(){return e.identity},sin:function(){return i},exp:function(){return s},circle:function(){return o},elastic:u,back:a,bounce:f,poly:r}}(),e.Transient=function(t){e.Mark.call(this),this.fillStyle(null).strokeStyle(null).textStyle(null),this.on=function(e){return t.on(e)}},e.Transient.prototype=e.extend(e.Mark),!function(){function t(e){for(var t={},n=e.length;n--;){var r=e[n],i=r.id;i&&(t[i]=r)}return t}function n(t,n,r,i){var s;if(n in u){var o=e.Scale.interpolator(r[n],i[n]);s=function(e){r[n]=o(e)}}else s=function(e){e>.5&&(r[n]=i[n])};s.next=t.head,t.head=s}function r(e,t,r){for(var i in t)"children"!==i&&t[i]!=r[i]&&n(e,i,t,r);var o=t.children;if(o)for(var u=r.children,a=0,f=o.length;f>a;a++)s(e,o[a],u[a])}function i(e,t,n,r){var i,s=Object.create(e[t]),o=e.mark,u=o.root.scene;r.target&&(i=r.target[r.length])&&(e=Object.create(e),e.target=Object.create(r.target),e.target[t]=i),n||(n=a);var f=n.$properties,l=n.$propertiesMap;return f=o.binds.optional.filter(function(e){return!(e.name in l)}).concat(f),o.context(e,t,function(){this.buildProperties(s,f),this.buildImplied(s)}),o.root.scene=u,s}function s(e,n,s){for(var o,u,a=n.mark,f=t(n),l=t(s),c=0,h=n.length;h>c;c++){o=n[c],u=o.id?l[o.id]:s[c],o.index=c;if(o.visible){if(!u||!u.visible){var p=i(n,c,a.$exit,s);o.transition=u?2:(s.push(p),1),u=p}r(e,o,u)}}c=0,h=s.length;for(;h>c;c++){u=s[c],o=u.id?f[u.id]:n[c];if((!o||!o.visible)&&u.visible){var d=i(s,c,a.$enter,n);o?n[o.index]=d:n.push(d),r(e,d,u)}}}function o(e){for(var t=0,n=0;t<e.length;t++){var r=e[t];1!=r.transition&&(e[n++]=r,2==r.transition&&(r.visible=!1),r.children&&r.children.forEach(o))}e.length=n}var u={top:1,left:1,right:1,bottom:1,width:1,height:1,innerRadius:1,outerRadius:1,radius:1,shapeRadius:1,shapeSize:1,startAngle:1,endAngle:1,angle:1,fillStyle:1,strokeStyle:1,lineWidth:1,eccentricity:1,tension:1,textAngle:1,textStyle:1,textMargin:1},a=new e.Transient;e.Transition=function(t){function n(e){var n=t.root.$transition===a;n&&(t.root.$transition=null),null!=r&&(clearInterval(r),r=null),n&&c(t.scene);if(i){var s=i;i=null,s(e)}return e}var r,i,u,a=this,f=e.ease("cubic-in-out"),l=250,c=function(e){u||(u=!0,o(e))};a.ease=function(t){return arguments.length?(f="function"==typeof t?t:e.ease(t),a):f},a.duration=function(e){return arguments.length?(l=Number(e),a):l},a.start=function(o){if(t.parent)throw new Error("Animated partial rendering is not supported.");i=o;var u=t.root;if(u.$transition)try{u.$transition.stop()}catch(h){return n(!1)}var p,d;u.$transition=a,u._renderId++;var v=t.scene;t.scene=null;var m=e.Mark.prototype.index;try{t.bind(),t.build();var g=t.scene;t.scene=v,e.Mark.prototype.index=m,d=Date.now(),p={},s(p,v,g)}catch(h){return e.Mark.prototype.index=m,n(!1)}if(!p.head)return n(!0);var y=function(){var r=Math.max(0,Math.min(1,(Date.now()-d)/l)),i=f(r),s=p.head;do s(i);while(s=s.next);1===r?(c(t.scene),e.Scene.updateAll(v),n(!0)):e.Scene.updateAll(v)};r=setInterval(function(){try{y()}catch(e){n(!1)}},24)},a.stop=function(){n(!0)}}}(),e.simulation=function(t){return new e.Simulation(t)},e.Simulation=function(e){for(var t=0;t<e.length;t++)this.particle(e[t])},e.Simulation.prototype.particle=function(e){return e.next=this.particles,isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y),isNaN(e.fx)&&(e.fx=0),isNaN(e.fy)&&(e.fy=0),this.particles=e,this},e.Simulation.prototype.force=function(e){return e.next=this.forces,this.forces=e,this},e.Simulation.prototype.constraint=function(e){return e.next=this.constraints,this.constraints=e,this},e.Simulation.prototype.stabilize=function(t){var n;arguments.length||(t=3);for(var r=0;t>r;r++){var i=new e.Quadtree(this.particles);for(n=this.constraints;n;n=n.next)n.apply(this.particles,i)}for(var s=this.particles;s;s=s.next)s.px=s.x,s.py=s.y;return this},e.Simulation.prototype.step=function(){var t,n,r;for(t=this.particles;t;t=t.next){var i=t.px,s=t.py;t.px=t.x,t.py=t.y,t.x+=t.vx=t.x-i+t.fx,t.y+=t.vy=t.y-s+t.fy}var o=new e.Quadtree(this.particles);for(r=this.constraints;r;r=r.next)r.apply(this.particles,o);for(t=this.particles;t;t=t.next)t.fx=t.fy=0;for(n=this.forces;n;n=n.next)n.apply(this.particles,o)},e.Quadtree=function(t){function n(e,t,n,i,s,o){if(!isNaN(t.x)&&!isNaN(t.y))if(e.leaf)if(e.p)if(Math.abs(e.p.x-t.x)+Math.abs(e.p.y-t.y)<.01)r(e,t,n,i,s,o);else{var u=e.p;e.p=null,r(e,u,n,i,s,o),r(e,t,n,i,s,o)}else e.p=t;else r(e,t,n,i,s,o)}function r(t,r,i,s,o,u){var a=.5*(i+o),f=.5*(s+u),l=r.x>=a,c=r.y>=f;t.leaf=!1;switch((c<<1)+l){case 0:t=t.c1||(t.c1=new e.Quadtree.Node);break;case 1:t=t.c2||(t.c2=new e.Quadtree.Node);break;case 2:t=t.c3||(t.c3=new e.Quadtree.Node);break;case 3:t=t.c4||(t.c4=new e.Quadtree.Node)}l?i=a:o=a,c?s=f:u=f,n(t,r,i,s,o,u)}var i,s=Number.POSITIVE_INFINITY,o=s,u=Number.NEGATIVE_INFINITY,a=u;for(i=t;i;i=i.next)i.x<s&&(s=i.x),i.y<o&&(o=i.y),i.x>u&&(u=i.x),i.y>a&&(a=i.y);var f=u-s,l=a-o;f>l?a=o+f:u=s+l,this.xMin=s,this.yMin=o,this.xMax=u,this.yMax=a,this.root=new e.Quadtree.Node;for(i=t;i;i=i.next)n(this.root,i,s,o,u,a)},e.Quadtree.Node=function(){this.leaf=!0,this.c1=null,this.c2=null,this.c3=null,this.c4=null,this.p=null},e.Force={},e.Force.charge=function(e){function t(n){function r(e){t(e),n.cn+=e.cn,i+=e.cn*e.cx,s+=e.cn*e.cy}var i=0,s=0;n.cn=0,n.leaf||(n.c1&&r(n.c1),n.c2&&r(n.c2),n.c3&&r(n.c3),n.c4&&r(n.c4)),n.p&&(n.cn+=e,i+=e*n.p.x,s+=e*n.p.y),n.cx=i/n.cn,n.cy=s/n.cn}function n(t,r,s,a,f,l){var c=t.cx-r.x,h=t.cy-r.y,p=1/Math.sqrt(c*c+h*h);if(t.leaf&&t.p!=r||u>(f-s)*p){if(o>p)return;p>i&&(p=i);var d=t.cn*p*p*p,v=c*d,m=h*d;r.fx+=v,r.fy+=m}else if(!t.leaf){var g=.5*(s+f),y=.5*(a+l);t.c1&&n(t.c1,r,s,a,g,y),t.c2&&n(t.c2,r,g,a,f,y),t.c3&&n(t.c3,r,s,y,g,l),t.c4&&n(t.c4,r,g,y,f,l);if(o>p)return;p>i&&(p=i);if(t.p&&t.p!=r){var d=e*p*p*p,v=c*d,m=h*d;r.fx+=v,r.fy+=m}}}var r=2,i=1/r,s=500,o=1/s,u=.9,a={};return arguments.length||(e=-40),a.constant=function(t){return arguments.length?(e=Number(t),a):e},a.domain=function(e,t){return arguments.length?(r=Number(e),i=1/r,s=Number(t),o=1/s,a):[r,s]},a.theta=function(e){return arguments.length?(u=Number(e),a):u},a.apply=function(e,r){t(r.root);for(var i=e;i;i=i.next)n(r.root,i,r.xMin,r.yMin,r.xMax,r.yMax)},a},e.Force.drag=function(e){var t={};return arguments.length||(e=.1),t.constant=function(n){return arguments.length?(e=n,t):e},t.apply=function(t){if(e)for(var n=t;n;n=n.next)n.fx-=e*n.vx,n.fy-=e*n.vy},t},e.Force.spring=function(e){var t,n,r=.1,i=20,s={};return arguments.length||(e=.1),s.links=function(e){return arguments.length?(t=e,n=e.map(function(e){return 1/Math.sqrt(Math.max(e.sourceNode.linkDegree,e.targetNode.linkDegree))}),s):t},s.constant=function(t){return arguments.length?(e=Number(t),s):e},s.damping=function(e){return arguments.length?(r=Number(e),s):r},s.length=function(e){return arguments.length?(i=Number(e),s):i},s.apply=function(){for(var s=0;s<t.length;s++){var o=t[s].sourceNode,u=t[s].targetNode,a=o.x-u.x,f=o.y-u.y,c=Math.sqrt(a*a+f*f),h=c?1/c:1,p=e*n[s],v=r*n[s],m=(p*(c-i)+v*(a*(o.vx-u.vx)+f*(o.vy-u.vy))*h)*h,g=-m*(c?a:.01*(.5-Math.random())),y=-m*(c?f:.01*(.5-Math.random()));o.fx+=g,o.fy+=y,u.fx-=g,u.fy-=y}},s},e.Constraint={},e.Constraint.collision=function(e){function t(u,a,f,l,c,h){if(!u.leaf){var p=.5*(f+c),d=.5*(l+h),v=d>i,m=o>d,g=p>r,y=s>p;v&&(u.c1&&g&&t(u.c1,a,f,l,p,d),u.c2&&y&&t(u.c2,a,p,l,c,d)),m&&(u.c3&&g&&t(u.c3,a,f,d,p,h),u.c4&&y&&t(u.c4,a,p,d,c,h))}if(u.p&&u.p!=a){var b=a.x-u.p.x,w=a.y-u.p.y,E=Math.sqrt(b*b+w*w),S=n+e(u.p);if(S>E){var x=(E-S)/E*.5;b*=x,w*=x,a.x-=b,a.y-=w,u.p.x+=b,u.p.y+=w}}}var n,r,i,s,o,u=1,a={};return arguments.length||(n=10),a.repeat=function(e){return arguments.length?(u=Number(e),a):u},a.apply=function(a,f){var l,c,h=-1/0;for(l=a;l;l=l.next)c=e(l),c>h&&(h=c);for(var p=0;u>p;p++)for(l=a;l;l=l.next)c=(n=e(l))+h,r=l.x-c,s=l.x+c,i=l.y-c,o=l.y+c,t(f.root,l,f.xMin,f.yMin,f.xMax,f.yMax)},a},e.Constraint.position=function(e){var t=1,n={};return arguments.length||(e=function(e){return e.fix}),n.alpha=function(e){return arguments.length?(t=Number(e),n):t},n.apply=function(n){for(var r=n;r;r=r.next){var i=e(r);i&&(r.x+=(i.x-r.x)*t,r.y+=(i.y-r.y)*t,r.fx=r.fy=r.vx=r.vy=0)}},n},e.Constraint.bound=function(){var e,t,n={};return n.x=function(t,n){return arguments.length?(e={min:Math.min(t,n),max:Math.max(t,n)},this):e},n.y=function(e,n){return arguments.length?(t={min:Math.min(e,n),max:Math.max(e,n)},this):t},n.apply=function(n){if(e)for(var r=n;r;r=r.next)r.x=r.x<e.min?e.min:r.x>e.max?e.max:r.x;if(t)for(var r=n;r;r=r.next)r.y=r.y<t.min?t.min:r.y>t.max?t.max:r.y},n},e.Layout=function(){e.Panel.call(this)},e.Layout.prototype=e.extend(e.Panel),e.Layout.prototype.property=e.Mark.prototype.localProperty,e.Layout.Network=function(){e.Layout.call(this);var t=this;this.$id=e.id(),(this.node=(new e.Mark).data(function(){return t.nodes()}).strokeStyle("#1f77b4").fillStyle("#fff").left(function(e){return e.x}).top(function(e){return e.y})).parent=this,this.link=(new e.Mark).extend(this.node).data(function(e){return[e.sourceNode,e.targetNode]}).fillStyle(null).lineWidth(function(e,t){return 1.5*t.linkValue}).strokeStyle("rgba(0,0,0,.2)"),this.link.add=function(n){return t.add(e.Panel).data(function(){return t.links()}).add(n).extend(this)},(this.label=(new e.Mark).extend(this.node).textMargin(7).textBaseline("middle").text(function(e){return e.nodeName||e.nodeValue}).textAngle(function(t){var n=t.midAngle;return e.Wedge.upright(n)?n:n+Math.PI}).textAlign(function(t){return e.Wedge.upright(t.midAngle)?"left":"right"})).parent=this},e.Layout.Network.prototype=e.extend(e.Layout).property("nodes",function(e){return e.map(function(e,t){return"object"!=typeof e&&(e={nodeValue:e}),e.index=t,e})}).property("links",function(e){return e.map(function(e){return isNaN(e.linkValue)&&(e.linkValue=isNaN(e.value)?1:e.value),e})}),e.Layout.Network.prototype.reset=function(){return this.$id=e.id(),this},e.Layout.Network.prototype.buildProperties=function(t,n){(t.$id||0)<this.$id&&e.Layout.prototype.buildProperties.call(this,t,n)},e.Layout.Network.prototype.buildImplied=function(t){e.Layout.prototype.buildImplied.call(this,t);if(t.$id>=this.$id)return!0;t.$id=this.$id,t.nodes.forEach(function(e){e.linkDegree=0}),t.links.forEach(function(e){var n=e.linkValue;(e.sourceNode||(e.sourceNode=t.nodes[e.source])).linkDegree+=n,(e.targetNode||(e.targetNode=t.nodes[e.target])).linkDegree+=n})},e.Layout.Hierarchy=function(){e.Layout.Network.call(this),this.link.strokeStyle("#ccc")},e.Layout.Hierarchy.prototype=e.extend(e.Layout.Network),e.Layout.Hierarchy.prototype.buildImplied=function(t){t.links||(t.links=e.Layout.Hierarchy.links.call(this)),e.Layout.Network.prototype.buildImplied.call(this,t)},e.Layout.Hierarchy.links=function(){return this.nodes().filter(function(e){return e.parentNode}).map(function(e){return{sourceNode:e,targetNode:e.parentNode,linkValue:1}})},e.Layout.Hierarchy.NodeLink={buildImplied:function(e){function t(e){return e.parentNode?e.depth*(c-l)+l:0}function n(e){return e.parentNode?2*(e.breadth-.25)*Math.PI:0}function r(e){switch(o){case"left":return e.depth*a;case"right":return a-e.depth*a;case"top":return e.breadth*a;case"bottom":return a-e.breadth*a;case"radial":return a/2+t(e)*Math.cos(e.midAngle)}}function i(e){switch(o){case"left":return e.breadth*f;case"right":return f-e.breadth*f;case"top":return e.depth*f;case"bottom":return f-e.depth*f;case"radial":return f/2+t(e)*Math.sin(e.midAngle)}}var s=e.nodes,o=e.orient,u=/^(top|bottom)$/.test(o),a=e.width,f=e.height;if("radial"==o){var l=e.innerRadius,c=e.outerRadius;null==l&&(l=0),null==c&&(c=Math.min(a,f)/2)}for(var h=0;h<s.length;h++){var p=s[h];p.midAngle="radial"==o?n(p):u?Math.PI/2:0,p.x=r(p),p.y=i(p),p.firstChild&&(p.midAngle+=Math.PI)}}},e.Layout.Hierarchy.Fill={constructor:function(){this.node.strokeStyle("#fff").fillStyle("#ccc").width(function(e){return e.dx}).height(function(e){return e.dy}).innerRadius(function(e){return e.innerRadius}).outerRadius(function(e){return e.outerRadius}).startAngle(function(e){return e.startAngle}).angle(function(e){return e.angle}),this.label.textAlign("center").left(function(e){return e.x+e.dx/2}).top(function(e){return e.y+e.dy/2}),delete this.link},buildImplied:function(e){function t(e,t){return(e+t)/(1+t)}function n(e){switch(c){case"left":return t(e.minDepth,v)*p;case"right":return(1-t(e.maxDepth,v))*p;case"top":return e.minBreadth*p;case"bottom":return(1-e.maxBreadth)*p;case"radial":return p/2}}function r(e){switch(c){case"left":return e.minBreadth*d;case"right":return(1-e.maxBreadth)*d;case"top":return t(e.minDepth,v)*d;case"bottom":return(1-t(e.maxDepth,v))*d;case"radial":return d/2}}function i(e){switch(c){case"left":case"right":return(e.maxDepth-e.minDepth)/(1+v)*p;case"top":case"bottom":return(e.maxBreadth-e.minBreadth)*p;case"radial":return e.parentNode?(e.innerRadius+e.outerRadius)*Math.cos(e.midAngle):0}}function s(e){switch(c){case"left":case"right":return(e.maxBreadth-e.minBreadth)*d;case"top":case"bottom":return(e.maxDepth-e.minDepth)/(1+v)*d;case"radial":return e.parentNode?(e.innerRadius+e.outerRadius)*Math.sin(e.midAngle):0}}function o(e){return Math.max(0,t(e.minDepth,v/2))*(g-m)+m}function u(e){return t(e.maxDepth,v/2)*(g-m)+m}function a(e){return 2*(e.parentNode?e.minBreadth-.25:0)*Math.PI}function f(e){return 2*(e.parentNode?e.maxBreadth-e.minBreadth:1)*Math.PI}var l=e.nodes,c=e.orient,h=/^(top|bottom)$/.test(c),p=e.width,d=e.height,v=-l[0].minDepth;if("radial"==c){var m=e.innerRadius,g=e.outerRadius;null==m&&(m=0),m&&(v*=2),null==g&&(g=Math.min(p,d)/2)}for(var y=0;y<l.length;y++){var b=l[y];b.x=n(b),b.y=r(b),"radial"==c?(b.innerRadius=o(b),b.outerRadius=u(b),b.startAngle=a(b),b.angle=f(b),b.midAngle=b.startAngle+b.angle/2):b.midAngle=h?-Math.PI/2:0,b.dx=i(b),b.dy=s(b)}}},e.Layout.Grid=function(){e.Layout.call(this);var t=this;(this.cell=(new e.Mark).data(function(){return t.scene[t.index].$grid}).width(function(){return t.width()/t.cols()}).height(function(){return t.height()/t.rows()}).left(function(){return this.width()*(this.index%t.cols())}).top(function(){return this.height()*Math.floor(this.index/t.cols())})).parent=this},e.Layout.Grid.prototype=e.extend(e.Layout).property("rows").property("cols"),e.Layout.Grid.prototype.defaults=(new e.Layout.Grid).extend(e.Layout.prototype.defaults).rows(1).cols(1),e.Layout.Grid.prototype.buildImplied=function(t){e.Layout.prototype.buildImplied.call(this,t);var n=t.rows,r=t.cols;"object"==typeof r&&(n=e.transpose(r)),"object"==typeof n?(t.$grid=e.blend(n),t.rows=n.length,t.cols=n[0]?n[0].length:0):t.$grid=e.repeat([t.data],n*r)},e.Layout.Stack=function(){function t(e){return function(){return s[e](this.parent.index,this.index)}}e.Layout.call(this);var n,r=this,i=function(){return null},s={t:i,l:i,r:i,b:i,w:i,h:i},o=r.buildImplied;this.buildImplied=function(t){o.call(this,t);var r,u=t.layers,a=u.length,f=t.orient,l=/^(top|bottom)\b/.test(f),c=this.parent[l?"height":"width"](),h=[],p=[],d=[],v=e.Mark.stack,m={parent:{parent:this}};v.unshift(null),n=[];for(var g=0;a>g;g++){d[g]=[],p[g]=[],m.parent.index=g,v[0]=u[g],n[g]=this.$values.apply(m.parent,v),g||(r=n[g].length),v.unshift(null);for(var y=0;r>y;y++)v[0]=n[g][y],m.index=y,g||(h[y]=this.$x.apply(m,v)),d[g][y]=this.$y.apply(m,v);v.shift()}v.shift();var b;switch(t.order){case"inside-out":for(var w=d.map(function(t){return e.max.index(t)}),E=e.range(a).sort(function(e,t){return w[e]-w[t]}),S=d.map(function(t){return e.sum(t)}),x=0,T=0,N=[],C=[],g=0;a>g;g++){var y=E[g];T>x?(x+=S[y],N.push(y)):(T+=S[y],C.push(y))}b=C.reverse().concat(N);break;case"reverse":b=e.range(a-1,-1,-1);break;default:b=e.range(a)}switch(t.offset){case"silohouette":for(var y=0;r>y;y++){for(var m=0,g=0;a>g;g++)m+=d[g][y];p[b[0]][y]=(c-m)/2}break;case"wiggle":for(var m=0,g=0;a>g;g++)m+=d[g][0];p[b[0]][0]=m=(c-m)/2;for(var y=1;r>y;y++){for(var k=0,L=0,A=h[y]-h[y-1],g=0;a>g;g++)k+=d[g][y];for(var g=0;a>g;g++){for(var O=(d[b[g]][y]-d[b[g]][y-1])/(2*A),M=0;g>M;M++)O+=(d[b[M]][y]-d[b[M]][y-1])/A;L+=O*d[b[g]][y]}p[b[0]][y]=m-=k?L/k*A:0}break;case"expand":for(var y=0;r>y;y++){p[b[0]][y]=0;for(var M=0,g=0;a>g;g++)M+=d[g][y];if(M){M=c/M;for(var g=0;a>g;g++)d[g][y]*=M}else{M=c/a;for(var g=0;a>g;g++)d[g][y]=M}}break;default:for(var y=0;r>y;y++)p[b[0]][y]=0}for(var y=0;r>y;y++)for(var m=p[b[0]][y],g=1;a>g;g++)m+=d[b[g-1]][y],p[b[g]][y]=m;var g=f.indexOf("-"),_=l?"h":"w",D=0>g?l?"l":"b":f.charAt(g+1),P=f.charAt(0);for(var H in s)s[H]=i;s[D]=function(e,t){return h[t]},s[P]=function(e,t){return p[e][t]},s[_]=function(e,t){return d[e][t]}},this.layer=(new e.Mark).data(function(){return n[this.parent.index]}).top(t("t")).left(t("l")).right(t("r")).bottom(t("b")).width(t("w")).height(t("h")),this.layer.add=function(t){return r.add(e.Panel).data(function(){return r.layers()}).add(t).extend(this)}},e.Layout.Stack.prototype=e.extend(e.Layout).property("orient",String).property("offset",String).property("order",String).property("layers"),e.Layout.Stack.prototype.defaults=(new e.Layout.Stack).extend(e.Layout.prototype.defaults).orient("bottom-left").offset("zero").layers([[]]),e.Layout.Stack.prototype.$x=e.Layout.Stack.prototype.$y=function(){return 0},e.Layout.Stack.prototype.x=function(t){return this.$x=e.functor(t),this},e.Layout.Stack.prototype.y=function(t){return this.$y=e.functor(t),this},e.Layout.Stack.prototype.$values=e.identity,e.Layout.Stack.prototype.values=function(t){return this.$values=e.functor(t),this},e.Layout.Band=function(){function t(e){return function(){return n[e](this.index,this.parent.index)}}e.Layout.call(this);var n,r,i=this,s=i.buildImplied,o=(new e.Mark).data(function(){return r[this.parent.index]}).top(t("t")).left(t("l")).right(t("r")).bottom(t("b")).width(t("w")).height(t("h")).antialias(t("antialias"));this.buildImplied=function(t){s.call(this,t),n=Object.create(e.Layout.Band.$baseItemProps),r=[];var i=t.layers,o=i.length;if(o>0){var u=t.orient,a=/^(top|bottom)\b/.test(u),f=this.parent[a?"height":"width"](),l=this._readData(i,r,t),c=l.length;"reverse"===t.bandOrder&&l.reverse();if("reverse"===t.order){r.reverse();for(var h=0;c>h;h++)l[h].items.reverse()}switch(t.layout){case"grouped":this._calcGrouped(l,o,f,t);break;case"stacked":this._calcStacked(l,o,f,t)}for(var p=t.hZero||0,d="stacked"===t.layout,v=0;c>v;v++)for(var m=l[v],g=d?Math.max(0,m.vertiMargin)/2:0,y=0;o>y;y++){var b=m.items[y];b.zero&&(b.h=p,b.y-=g+p/2)}this._bindItemProps(l,n,u,a)}};var u=this.item={end:this,add:function(t){return i.add(e.Panel).data(function(){return i.layers()}).add(t).extend(o)},order:function(e){return i.order(e),this},w:function(t){return i.$iw=e.functor(t),this},h:function(t){return i.$ih=e.functor(t),this},horizontalRatio:function(t){return i.$ihorizRatio=e.functor(t),this},verticalMargin:function(t){return i.$ivertiMargin=e.functor(t),this}},a=this.band={end:this,w:function(t){return i.$bw=e.functor(t),this},x:function(t){return i.$bx=e.functor(t),this},order:function(e){return i.bandOrder(e),this},differentialControl:function(t){return i.$bDiffControl=e.functor(t),this}};this.band.item=u,this.item.band=a},e.Layout.Band.$baseItemProps=function(){var e=function(){return null};return{t:e,l:e,r:e,b:e,w:e,h:e}}(),e.Layout.Band.prototype=e.extend(e.Layout).property("orient",String).property("layout",String).property("layers").property("yZero",Number).property("hZero",Number).property("verticalMode",String).property("horizontalMode",String).property("order",String).property("bandOrder",String),e.Layout.Band.prototype.defaults=(new e.Layout.Band).extend(e.Layout.prototype.defaults).orient("bottom-left").layout("grouped").yZero(0).hZero(1.5).layers([[]]),e.Layout.Band.prototype.$bx=e.Layout.Band.prototype.$bw=e.Layout.Band.prototype.$bDiffControl=e.Layout.Band.prototype.$iw=e.Layout.Band.prototype.$ih=e.Layout.Band.prototype.$ivertiMargin=e.functor(0),e.Layout.Band.prototype.$ihorizRatio=e.functor(.9),e.Layout.Band.prototype.$values=e.identity,e.Layout.Band.prototype.values=function(t){return this.$values=e.functor(t),this},e.Layout.prototype._readData=function(t,n,r){var i,s=t.length,o=[],u=e.Mark.stack,a=r.hZero,f={parent:{parent:this}};u.unshift(null);for(var l=0;s>l;l++){f.parent.index=l,u[0]=t[l];var c=n[l]=this.$values.apply(f.parent,u);l||(i=c.length),u.unshift(null);for(var h=0;i>h;h++){u[0]=c[h],f.index=h;var p=o[h];p||(p=o[h]={horizRatio:this.$ihorizRatio.apply(f,u),vertiMargin:this.$ivertiMargin.apply(f,u),w:this.$bw.apply(f,u),x:this.$bx.apply(f,u),diffControl:this.$bDiffControl?this.$bDiffControl.apply(f,u):0,items:[]});var d=this.$ih.apply(f,u),v=null!=d?Math.abs(d):d;p.items[l]={y:r.yZero||0,x:0,w:this.$iw.apply(f,u),h:v,zero:null!=v&&a>=v,dir:0>d?-1:1}}u.shift()}return u.shift(),o},e.Layout.Band.prototype._normalizeBands=function(e,t,n,r){var i,s=e.length;if("expand"===r.verticalMode)for(var o=0;s>o;o++){i=e[o].items;for(var u=null,a=0,f=0;t>f;f++){var l=i[f];l.dir=1;var c=l.h;null!=c&&(a++,u+=c)}if(a)if(u)for(var h=n/u,f=0;t>f;f++){var c=i[f].h;null!=c&&(i[f].h=c*h)}else if(0==u)for(var f=0;t>f;f++)i[f].h=0;else for(var p=n/a,f=0;t>f;f++){var c=i[f].h;null!=c&&(i[f].h=p)}}return i},e.Layout.Band.prototype._calcGrouped=function(e,t,n,r){for(var i=this._normalizeBands(e,t,n,r),s=0,o=e.length;o>s;s++){for(var u=e[s],i=u.items,a=u.w,f=u.horizRatio,l=0,c=0;t>c;c++)l+=i[c].w;1===t?f=1:f>0&&1>=f||(f=1);if(null==a)a=u.w=l/f;else if("expand"===r.horizontalMode){var h=f*a;if(l)for(var p=h/l,c=0;t>c;c++)i[c].w*=p;else for(var d=h/t,c=0;t>c;c++)i[c].w=d;l=h}for(var v=l/f,m=u.x-v/2,g=t>1?(v-l)/(t-1):0,c=0;t>c;c++){var y=i[c];y.x=m,m+=y.w+g,y.dir<0&&(y.y-=y.h)}}},e.Layout.Band.prototype._calcStacked=function(e,t,n,r){for(var i=this._normalizeBands(e,t,n,r),s=r.yZero,o=s,u=0,a=e.length;a>u;u++){var f=e[u],l=f.x,c=f.diffControl,h=0>c,p=Math.max(0,f.vertiMargin);i=f.items;var d=this._layoutItemsOfDir(1,h,i,p,l,o),v=null;d.existsOtherDir&&(v=this._layoutItemsOfDir(-1,h,i,p,l,o));if(c){if(1===Math.abs(c)){var m=o;o=d.yOffset,v&&(o-=m-v.yOffset)}}else o=s}},e.Layout.Band.prototype._layoutItemsOfDir=function(e,t,n,r,i,s){for(var o=!1,u=r/2,a=t?-e:e,f=t,l=0,c=n.length;c>l;l+=1){var h=n[f?c-l-1:l];if(h.dir===e){var p=h.h||0;a>0?(h.y=s+u,s+=p):(h.y=s-(p-u),s-=p);var d=p-r;h.h=d>0?d:0,h.x=i-h.w/2}else o=!0}return{existsOtherDir:o,yOffset:s}},e.Layout.Band.prototype._bindItemProps=function(e,t,n,r){var i=n.indexOf("-"),s=r?"h":"w",o=r?"w":"h",u=0>i?r?"l":"b":n.charAt(i+1),a=n.charAt(0);t[u]=function(t,n){return e[t].items[n].x},t[a]=function(t,n){return e[t].items[n].y},t[o]=function(t,n){return e[t].items[n].w},t[s]=function(t,n){return e[t].items[n].h||0},t.antialias=function(t,n){return e[t].items[n].zero}},e.Layout.Treemap=function(){e.Layout.Hierarchy.call(this),this.node.strokeStyle("#fff").fillStyle("rgba(31, 119, 180, .25)").width(function(e){return e.dx}).height(function(e){return e.dy}),this.label.visible(function(e){return!e.firstChild}).left(function(e){return e.x+e.dx/2}).top(function(e){return e.y+e.dy/2}).textAlign("center").textAngle(function(e){return e.dx>e.dy?0:-Math.PI/2}),(this.leaf=(new e.Mark).extend(this.node).fillStyle(null).strokeStyle(null).visible(function(e){return!e.firstChild})).parent=this,delete this.link},e.Layout.Treemap.prototype=e.extend(e.Layout.Hierarchy).property("round",Boolean).property("mode",String).property("order",String),e.Layout.Treemap.prototype.defaults=(new e.Layout.Treemap).extend(e.Layout.Hierarchy.prototype.defaults).mode("squarify").order("ascending"),e.Layout.Treemap.prototype.$size=function(e){return Number(e.nodeValue)},e.Layout.Treemap.prototype.$padLeft=e.Layout.Treemap.prototype.$padRight=e.Layout.Treemap.prototype.$padBottom=e.Layout.Treemap.prototype.$padTop=function(){return 0},e.Layout.Treemap.prototype.size=function(t){return this.$size=e.functor(t),this},e.Layout.Treemap.prototype.padding=function(t){return t=e.functor(t),this.paddingLeft(t).paddingRight(t).paddingTop(t).paddingBottom(t)},e.Layout.Treemap.prototype.paddingLeft=function(t){return arguments.length?(this.$padLeft=e.functor(t),this):this.$padLeft},e.Layout.Treemap.prototype.paddingRight=function(t){return arguments.length?(this.$padRight=e.functor(t),this):this.$padRight},e.Layout.Treemap.prototype.paddingBottom=function(t){return arguments.length?(this.$padBottom=e.functor(t),this):this.$padBottom},e.Layout.Treemap.prototype.paddingTop=function(t){return arguments.length?(this.$padTop=e.functor(t),this):this.$padTop},e.Layout.Treemap.prototype.buildImplied=function(t){function n(e,t,n,r,i,s,o){for(var u=0,a=0;u<e.length;u++){var f=e[u];n?(f.x=r+a,f.y=i,a+=f.dx=l(s*f.size/t),f.dy=o):(f.x=r,f.y=i+a,f.dx=s,a+=f.dy=l(o*f.size/t))}f&&(n?f.dx+=s-a:f.dy+=o-a)}function r(e,t){for(var n=-1/0,r=1/0,i=0,s=0;s<e.length;s++){var o=e[s].size;r>o&&(r=o),o>n&&(n=o),i+=o}return i*=i,t*=t,Math.max(t*n/i,i/(t*r))}function i(t,i){function s(t){var r=h==m,i=e.sum(t,f),s=m?l(i/m):0;return n(t,i,r,u,a,r?h:s,r?s:p),r?(a+=s,p-=s):(u+=s,h-=s),m=Math.min(h,p),r}var o=t.parentNode,u=t.x,a=t.y,h=t.dx,p=t.dy;o&&(u+=o.paddingLeft,a+=o.paddingTop,h+=-o.paddingLeft-o.paddingRight,p+=-o.paddingTop-o.paddingBottom);if("squarify"==c){var d=[],v=1/0,m=Math.min(h,p),g=h*p/t.size;if(!(t.size<=0)){t.visitBefore(function(e){e.size*=g});for(var y=t.childNodes.slice();y.length;){var b=y[y.length-1];if(b.size){d.push(b);var g=r(d,m);v>=g?(y.pop(),v=g):(d.pop(),s(d),d.length=0,v=1/0)}else y.pop()}if(s(d))for(var i=0;i<d.length;i++)d[i].dy+=p;else for(var i=0;i<d.length;i++)d[i].dx+=h}}else n(t.childNodes,t.size,"slice"==c?!0:"dice"==c?!1:1&i,u,a,h,p)}if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var s=this,o=t.nodes,u=o[0],a=e.Mark.stack,f=function(e){return e.size},l=t.round?Math.round:Number,c=t.mode;a.unshift(null);try{u.visitAfter(function(t,n){t.depth=n,t.x=t.y=t.dx=t.dy=0,a[0]=t,t.firstChild?(t.size=e.sum(t.childNodes,f),t.paddingRight=+s.$padRight.apply(s,a)||0,t.paddingLeft=+s.$padLeft.apply(s,a)||0,t.paddingBottom=+s.$padBottom.apply(s,a)||0,t.paddingTop=+s.$padTop.apply(s,a)||0):t.size=s.$size.apply(s,a)})}finally{a.shift()}switch(t.order){case"ascending":u.sort(function(e,t){return e.size-t.size});break;case"descending":u.sort(function(e,t){return t.size-e.size});break;case"reverse":u.reverse()}u.x=0,u.y=0,u.dx=t.width,u.dy=t.height,u.visitBefore(i)}},e.Layout.Tree=function(){e.Layout.Hierarchy.call(this)},e.Layout.Tree.prototype=e.extend(e.Layout.Hierarchy).property("group",Number).property("breadth",Number).property("depth",Number).property("orient",String),e.Layout.Tree.prototype.defaults=(new e.Layout.Tree).extend(e.Layout.Hierarchy.prototype.defaults).group(1).breadth(15).depth(60).orient("top"),e.Layout.Tree.prototype.buildImplied=function(t){function n(e){var t,r,s;if(e.firstChild){t=e.firstChild,r=e.lastChild,s=t;for(var o=t;o;o=o.nextSibling)n(o),s=i(o,s);a(e);var u=.5*(t.prelim+r.prelim);(t=e.previousSibling)?(e.prelim=t.prelim+l(e.depth,!0),e.mod=e.prelim-u):e.prelim=u}else(t=e.previousSibling)&&(e.prelim=t.prelim+l(e.depth,!0))}function r(e,t,n){e.breadth=e.prelim+t,t+=e.mod;for(var i=e.firstChild;i;i=i.nextSibling)r(i,t,n)}function i(e,t){var n=e.previousSibling;if(n){for(var r=e,i=e,a=n,c=e.parentNode.firstChild,h=r.mod,p=i.mod,d=a.mod,v=c.mod,m=o(a),g=s(r);m&&g;){a=m,r=g,c=s(c),i=o(i),i.ancestor=e;var y=a.prelim+d-(r.prelim+h)+l(a.depth,!1);y>0&&(u(f(a,e,t),e,y),h+=y,p+=y),d+=a.mod,h+=r.mod,v+=c.mod,p+=i.mod,m=o(a),g=s(r)}m&&!o(i)&&(i.thread=m,i.mod+=d-p),g&&!s(c)&&(c.thread=g,c.mod+=h-v,t=e)}return t}function s(e){return e.firstChild||e.thread}function o(e){return e.lastChild||e.thread}function u(e,t,n){var r=t.number-e.number;t.change-=n/r,t.shift+=n,e.change+=n/r,t.prelim+=n,t.mod+=n}function a(e){for(var t=0,n=0,r=e.lastChild;r;r=r.previousSibling)r.prelim+=t,r.mod+=t,n+=r.change,t+=r.shift+n}function f(e,t,n){return e.ancestor.parentNode==t.parentNode?e.ancestor:n}function l(e,t){return(t?1:y+1)/("radial"==v?e:1)}function c(e){return"radial"==v?e.breadth/m:0}function h(e){switch(v){case"left":return e.depth;case"right":return b-e.depth;case"top":case"bottom":return e.breadth+b/2;case"radial":return b/2+e.depth*Math.cos(c(e))}}function p(e){switch(v){case"left":case"right":return e.breadth+w/2;case"top":return e.depth;case"bottom":return w-e.depth;case"radial":return w/2+e.depth*Math.sin(c(e))}}if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var d=t.nodes,v=t.orient,m=t.depth,g=t.breadth,y=t.group,b=t.width,w=t.height,E=d[0];E.visitAfter(function(e,t){e.ancestor=e,e.prelim=0,e.mod=0,e.change=0,e.shift=0,e.number=e.previousSibling?e.previousSibling.number+1:0,e.depth=t}),n(E),r(E,-E.prelim,0),E.visitAfter(function(e){e.breadth*=g,e.depth*=m,e.midAngle=c(e),e.x=h(e),e.y=p(e),e.firstChild&&(e.midAngle+=Math.PI),delete e.breadth,delete e.depth,delete e.ancestor,delete e.prelim,delete e.mod,delete e.change,delete e.shift,delete e.number,delete e.thread})}},e.Layout.Indent=function(){e.Layout.Hierarchy.call(this),this.link.interpolate("step-after")},e.Layout.Indent.prototype=e.extend(e.Layout.Hierarchy).property("depth",Number).property("breadth",Number),e.Layout.Indent.prototype.defaults=(new e.Layout.Indent).extend(e.Layout.Hierarchy.prototype.defaults).depth(15).breadth(15),e.Layout.Indent.prototype.buildImplied=function(t){function n(e,t,r){e.x=o+r++*s,e.y=u+t++*i,e.midAngle=0;for(var a=e.firstChild;a;a=a.nextSibling)t=n(a,t,r);return t}if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var r=t.nodes,i=t.breadth,s=t.depth,o=0,u=0;n(r[0],1,1)}},e.Layout.Pack=function(){e.Layout.Hierarchy.call(this),this.node.shapeRadius(function(e){return e.radius}).strokeStyle("rgb(31, 119, 180)").fillStyle("rgba(31, 119, 180, .25)"),this.label.textAlign("center"),delete this.link},e.Layout.Pack.prototype=e.extend(e.Layout.Hierarchy).property("spacing",Number).property("order",String),e.Layout.Pack.prototype.defaults=(new e.Layout.Pack).extend(e.Layout.Hierarchy.prototype.defaults).spacing(1).order("ascending"),e.Layout.Pack.prototype.$radius=function(){return 1},e.Layout.Pack.prototype.size=function(e){return this.$radius="function"==typeof e?function(){return Math.sqrt(e.apply(this,arguments))}:(e=Math.sqrt(e),function(){return e}),this},e.Layout.Pack.prototype.buildImplied=function(t){function n(t){var n=e.Mark.stack;n.unshift(null);for(var r=0,i=t.length;i>r;r++){var s=t[r];s.firstChild||(s.radius=u.$radius.apply(u,(n[0]=s,n)))}n.shift()}function r(e){for(var n=[],s=e.firstChild;s;s=s.nextSibling)s.firstChild&&(s.radius=r(s)),s.n=s.p=s,n.push(s);switch(t.order){case"ascending":n.sort(function(e,t){return e.radius-t.radius});break;case"descending":n.sort(function(e,t){return t.radius-e.radius});break;case"reverse":n.reverse()}return i(n)}function i(e){function n(e){h=Math.min(e.x-e.radius,h),p=Math.max(e.x+e.radius,p),d=Math.min(e.y-e.radius,d),v=Math.max(e.y+e.radius,v)}function r(e,t){var n=e.n;e.n=t,t.p=e,t.n=n,n.p=t}function i(e,t){e.n=t,t.p=e}function o(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.radius+t.radius;return i*i-n*n-r*r>.001}var u,a,f,l,c,h=1/0,p=-1/0,d=1/0,v=-1/0;u=e[0],u.x=-u.radius,u.y=0,n(u);if(e.length>1){a=e[1],a.x=a.radius,a.y=0,n(a);if(e.length>2){f=e[2],s(u,a,f),n(f),r(u,f),u.p=f,r(f,a),a=u.n;for(var m=3;m<e.length;m++){s(u,a,f=e[m]);var g=0,y=1,b=1;for(l=a.n;l!=a;l=l.n,y++)if(o(l,f)){g=1;break}if(1==g)for(c=u.p;c!=l.p;c=c.p,b++)if(o(c,f)){y>b&&(g=-1,l=c);break}0==g?(r(u,f),a=f,n(f)):g>0?(i(u,l),a=l,m--):0>g&&(i(l,a),u=l,m--)}}}for(var w=(h+p)/2,E=(d+v)/2,S=0,m=0;m<e.length;m++){var x=e[m];x.x-=w,x.y-=E,S=Math.max(S,x.radius+Math.sqrt(x.x*x.x+x.y*x.y))}return S+t.spacing}function s(e,t,n){var r=t.radius+n.radius,i=e.radius+n.radius,s=t.x-e.x,o=t.y-e.y,u=Math.sqrt(s*s+o*o),a=(i*i+u*u-r*r)/(2*i*u),f=Math.acos(a),l=a*i,c=Math.sin(f)*i;s/=u,o/=u,n.x=e.x+l*s+c*o,n.y=e.y+l*o-c*s}function o(e,t,n,r){for(var i=e.firstChild;i;i=i.nextSibling)i.x+=e.x,i.y+=e.y,o(i,t,n,r);e.x=t+r*e.x,e.y=n+r*e.y,e.radius*=r}if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var u=this,a=t.nodes,f=a[0];n(a),f.x=0,f.y=0,f.radius=r(f);var l=this.width(),c=this.height(),h=1/Math.max(2*f.radius/l,2*f.radius/c);o(f,l/2,c/2,h)}},e.Layout.Force=function(){e.Layout.Network.call(this),this.link.lineWidth(function(e,t){return 1.5*Math.sqrt(t.linkValue)}),this.label.textAlign("center")},e.Layout.Force.prototype=e.extend(e.Layout.Network).property("bound",Boolean).property("iterations",Number).property("dragConstant",Number).property("chargeConstant",Number).property("chargeMinDistance",Number).property("chargeMaxDistance",Number).property("chargeTheta",Number).property("springConstant",Number).property("springDamping",Number).property("springLength",Number),e.Layout.Force.prototype.defaults=(new e.Layout.Force).extend(e.Layout.Network.prototype.defaults).dragConstant(.1).chargeConstant(-40).chargeMinDistance(2).chargeMaxDistance(500).chargeTheta(.9).springConstant(.1).springDamping(.3).springLength(20),e.Layout.Force.prototype.buildImplied=function(t){function n(e){return e.fix?1:e.vx*e.vx+e.vy*e.vy}if(e.Layout.Network.prototype.buildImplied.call(this,t)){var r=t.$force;r&&(r.next=this.binds.$force,this.binds.$force=r)}else{for(var i,s=this,o=t.nodes,u=t.links,a=t.iterations,f=t.width,l=t.height,c=0;c<o.length;c++)i=o[c],isNaN(i.x)&&(i.x=f/2+40*Math.random()-20),isNaN(i.y)&&(i.y=l/2+40*Math.random()-20);var h=e.simulation(o);h.force(e.Force.drag(t.dragConstant)),h.force(e.Force.charge(t.chargeConstant).domain(t.chargeMinDistance,t.chargeMaxDistance).theta(t.chargeTheta)),h.force(e.Force.spring(t.springConstant).damping(t.springDamping).length(t.springLength).links(u)),h.constraint(e.Constraint.position()),t.bound&&h.constraint(e.Constraint.bound().x(6,f-6).y(6,l-6));if(null==a)h.step(),h.step(),t.$force=this.binds.$force={next:this.binds.$force,nodes:o,min:1e-4*(u.length+1),sim:h},this.$timer||(this.$timer=setInterval(function(){for(var t=!1,r=s.binds.$force;r;r=r.next)e.max(r.nodes,n)>r.min&&(r.sim.step(),t=!0);t&&s.render()},42));else for(var c=0;a>c;c++)h.step()}},e.Layout.Cluster=function(){e.Layout.Hierarchy.call(this);var t,n=this.buildImplied;this.buildImplied=function(e){n.call(this,e),t=/^(top|bottom)$/.test(e.orient)?"step-before":/^(left|right)$/.test(e.orient)?"step-after":"linear"},this.link.interpolate(function(){return t})},e.Layout.Cluster.prototype=e.extend(e.Layout.Hierarchy).property("group",Number).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),e.Layout.Cluster.prototype.defaults=(new e.Layout.Cluster).extend(e.Layout.Hierarchy.prototype.defaults).group(0).orient("top"),e.Layout.Cluster.prototype.buildImplied=function(t){if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var n,r,i=t.nodes[0],s=t.group,o=0,u=.5-s/2,a=void 0;i.visitAfter(function(t){t.firstChild?t.depth=1+e.max(t.childNodes,function(e){return e.depth}):(s&&a!=t.parentNode&&(a=t.parentNode,o+=s),o++,t.depth=0)}),n=1/o,r=1/i.depth;var a=void 0;i.visitAfter(function(t){t.firstChild?t.breadth=e.mean(t.childNodes,function(e){return e.breadth}):(s&&a!=t.parentNode&&(a=t.parentNode,u+=s),t.breadth=n*u++),t.depth=1-t.depth*r}),i.visitAfter(function(e){e.minBreadth=e.firstChild?e.firstChild.minBreadth:e.breadth-n/2,e.maxBreadth=e.firstChild?e.lastChild.maxBreadth:e.breadth+n/2}),i.visitBefore(function(e){e.minDepth=e.parentNode?e.parentNode.maxDepth:0,e.maxDepth=e.parentNode?e.depth+i.depth:e.minDepth+2*i.depth}),i.minDepth=-r,e.Layout.Hierarchy.NodeLink.buildImplied.call(this,t)}},e.Layout.Cluster.Fill=function(){e.Layout.Cluster.call(this),e.Layout.Hierarchy.Fill.constructor.call(this)},e.Layout.Cluster.Fill.prototype=e.extend(e.Layout.Cluster),e.Layout.Cluster.Fill.prototype.buildImplied=function(t){e.Layout.Cluster.prototype.buildImplied.call(this,t)||e.Layout.Hierarchy.Fill.buildImplied.call(this,t)},e.Layout.Partition=function(){e.Layout.Hierarchy.call(this)},e.Layout.Partition.prototype=e.extend(e.Layout.Hierarchy).property("order",String).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),e.Layout.Partition.prototype.defaults=(new e.Layout.Partition).extend(e.Layout.Hierarchy.prototype.defaults).orient("top"),e.Layout.Partition.prototype.$size=function(){return 1},e.Layout.Partition.prototype.size=function(e){return this.$size=e,this},e.Layout.Partition.prototype.buildImplied=function(t){if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var n=this,r=t.nodes[0],i=e.Mark.stack,s=0;i.unshift(null),r.visitAfter(function(t,r){r>s&&(s=r),t.size=t.firstChild?e.sum(t.childNodes,function(e){return e.size}):n.$size.apply(n,(i[0]=t,i))}),i.shift();switch(t.order){case"ascending":r.sort(function(e,t){return e.size-t.size});break;case"descending":r.sort(function(e,t){return t.size-e.size})}r.minBreadth=0,r.breadth=.5,r.maxBreadth=1,r.visitBefore(function(e){for(var t=e.minBreadth,n=e.maxBreadth-t,r=e.firstChild;r;r=r.nextSibling)r.minBreadth=t,t+=r.size/e.size*n,r.maxBreadth=t,r.breadth=(t+r.minBreadth)/2}),r.visitAfter(function(e,t){e.minDepth=(t-1)/s,e.maxDepth=e.depth=t/s}),e.Layout.Hierarchy.NodeLink.buildImplied.call(this,t)}},e.Layout.Partition.Fill=function(){e.Layout.Partition.call(this),e.Layout.Hierarchy.Fill.constructor.call(this)},e.Layout.Partition.Fill.prototype=e.extend(e.Layout.Partition),e.Layout.Partition.Fill.prototype.buildImplied=function(t){e.Layout.Partition.prototype.buildImplied.call(this,t)||e.Layout.Hierarchy.Fill.buildImplied.call(this,t)},e.Layout.Arc=function(){e.Layout.Network.call(this);var t,n,r,i=this.buildImplied;this.buildImplied=function(e){i.call(this,e),n=e.directed,t="radial"==e.orient?"linear":"polar",r="right"==e.orient||"top"==e.orient},this.link.data(function(e){var t=e.sourceNode,i=e.targetNode;return r!=(n||t.breadth<i.breadth)?[t,i]:[i,t]}).interpolate(function(){return t})},e.Layout.Arc.prototype=e.extend(e.Layout.Network).property("orient",String).property("directed",Boolean),e.Layout.Arc.prototype.defaults=(new e.Layout.Arc).extend(e.Layout.Network.prototype.defaults).orient("bottom"),e.Layout.Arc.prototype.sort=function(e){return this.$sort=e,this},e.Layout.Arc.prototype.buildImplied=function(t){function n(e){switch(o){case"top":return-Math.PI/2;case"bottom":return Math.PI/2;case"left":return Math.PI;case"right":return 0;case"radial":return 2*(e-.25)*Math.PI}}function r(e){switch(o){case"top":case"bottom":return e*f;case"left":return 0;case"right":return f;case"radial":return f/2+c*Math.cos(n(e))}}function i(e){switch(o){case"top":return 0;case"bottom":return l;case"left":case"right":return e*l;case"radial":return l/2+c*Math.sin(n(e))}}if(!e.Layout.Network.prototype.buildImplied.call(this,t)){var s=t.nodes,o=t.orient,u=this.$sort,a=e.range(s.length),f=t.width,l=t.height,c=Math.min(f,l)/2;u&&a.sort(function(e,t){return u(s[e],s[t])});for(var h=0;h<s.length;h++){var p=s[a[h]],d=p.breadth=(h+.5)/s.length;p.x=r(d),p.y=i(d),p.midAngle=n(d)}}},e.Layout.Horizon=function(){e.Layout.call(this);var t,n,r,i,s,o,u=this,a=this.buildImplied;this.buildImplied=function(u){a.call(this,u),t=u.bands,n=u.mode,r=Math.round(("color"==n?.5:1)*u.height),i=u.backgroundStyle,s=e.ramp(i,u.negativeStyle).domain(0,t),o=e.ramp(i,u.positiveStyle).domain(0,t)};var t=(new e.Panel).data(function(){return e.range(2*t)}).overflow("hidden").height(function(){return r}).top(function(e){return"color"==n?(1&e)*r:0}).fillStyle(function(e){return e?null:i});this.band=(new e.Mark).top(function(e,t){return"mirror"==n&&1&t?(t+1>>1)*r:null}).bottom(function(e,t){return"mirror"==n?1&t?null:(t+1>>1)*-r:(1&t||-1)*(t+1>>1)*r}).fillStyle(function(e,t){return(1&t?s:o)((t>>1)+1)}),this.band.add=function(n){return u.add(e.Panel).extend(t).add(n).extend(this)}},e.Layout.Horizon.prototype=e.extend(e.Layout).property("bands",Number).property("mode",String).property("backgroundStyle",e.fillStyle).property("positiveStyle",e.fillStyle).property("negativeStyle",e.fillStyle),e.Layout.Horizon.prototype.defaults=(new e.Layout.Horizon).extend(e.Layout.prototype.defaults).bands(2).mode("offset").backgroundStyle("white").positiveStyle("#1f77b4").negativeStyle("#d62728"),e.Layout.Rollup=function(){e.Layout.Network.call(this);var t,n,r=this,i=r.buildImplied;this.buildImplied=function(e){i.call(this,e),t=e.$rollup.nodes,n=e.$rollup.links},this.node.data(function(){return t}).shapeSize(function(e){return 20*e.nodes.length}),this.link.interpolate("polar").eccentricity(.8),this.link.add=function(t){return r.add(e.Panel).data(function(){return n}).add(t).extend(this)}},e.Layout.Rollup.prototype=e.extend(e.Layout.Network).property("directed",Boolean),e.Layout.Rollup.prototype.x=function(t){return this.$x=e.functor(t),this},e.Layout.Rollup.prototype.y=function(t){return this.$y=e.functor(t),this},e.Layout.Rollup.prototype.buildImplied=function(t){function n(e){return u[e]+","+a[e]}if(!e.Layout.Network.prototype.buildImplied.call(this,t)){var r=t.nodes,i=t.links,s=t.directed,o=r.length,u=[],a=[],f=0,l={},c={},h=e.Mark.stack,p={parent:this};h.unshift(null);for(var d=0;o>d;d++)p.index=d,h[0]=r[d],u[d]=this.$x.apply(p,h),a[d]=this.$y.apply(p,h);h.shift();for(var d=0;d<r.length;d++){var v=n(d),m=l[v];m||(m=l[v]=Object.create(r[d]),m.index=f++,m.x=u[d],m.y=a[d],m.nodes=[]),m.nodes.push(r[d])}for(var d=0;d<i.length;d++){var g=i[d].sourceNode,y=i[d].targetNode,b=l[n(g.index)],w=l[n(y.index)],E=!s&&b.index>w.index,S=E?w.index+","+b.index:b.index+","+w.index,x=c[S];x||(x=c[S]={sourceNode:b,targetNode:w,linkValue:0,links:[]}),x.links.push(i[d]),x.linkValue+=i[d].linkValue}t.$rollup={nodes:e.values(l),links:e.values(c)}}},e.Layout.Matrix=function(){e.Layout.Network.call(this);var t,n,r,i,s,o=this,u=o.buildImplied;this.buildImplied=function(e){u.call(this,e),t=e.nodes.length,n=e.width/t,r=e.height/t,i=e.$matrix.labels,s=e.$matrix.pairs},this.link.data(function(){return s}).left(function(){return n*(this.index%t)}).top(function(){return r*Math.floor(this.index/t)}).width(function(){return n}).height(function(){return r}).lineWidth(1.5).strokeStyle("#fff").fillStyle(function(e){return e.linkValue?"#555":"#eee"}).parent=this,delete this.link.add,this.label.data(function(){return i}).left(function(){return 1&this.index?n*((this.index>>1)+.5):0}).top(function(){return 1&this.index?0:r*((this.index>>1)+.5)}).textMargin(4).textAlign(function(){return 1&this.index?"left":"right"}).textAngle(function(){return 1&this.index?-Math.PI/2:0}),delete this.node},e.Layout.Matrix.prototype=e.extend(e.Layout.Network).property("directed",Boolean),e.Layout.Matrix.prototype.sort=function(e){return this.$sort=e,this},e.Layout.Matrix.prototype.buildImplied=function(t){if(!e.Layout.Network.prototype.buildImplied.call(this,t)){var n=t.nodes,r=t.links,i=this.$sort,s=n.length,o=e.range(s),u=[],a=[],f={};t.$matrix={labels:u,pairs:a},i&&o.sort(function(e,t){return i(n[e],n[t])});for(var l=0;s>l;l++)for(var c=0;s>c;c++){var h=o[l],p=o[c],d={row:l,col:c,sourceNode:n[h],targetNode:n[p],linkValue:0};a.push(f[h+"."+p]=d)}for(var l=0;s>l;l++){var h=o[l];u.push(n[h],n[h])}for(var l=0;l<r.length;l++){var v=r[l],m=v.sourceNode.index,g=v.targetNode.index,y=v.linkValue;f[m+"."+g].linkValue+=y,t.directed||(f[g+"."+m].linkValue+=y)}}},e.Layout.Bullet=function(){e.Layout.call(this);var t,n,r,i,s,o=this,u=o.buildImplied,a=o.x=e.Scale.linear();this.buildImplied=function(o){u.call(this,s=o),t=o.orient,n=/^left|right$/.test(t),r=e.ramp("#bbb","#eee").domain(0,Math.max(1,s.ranges.length-1)),i=e.ramp("steelblue","lightsteelblue").domain(0,Math.max(1,s.measures.length-1))},(this.range=new e.Mark).data(function(){return s.ranges}).reverse(!0).left(function(){return"left"==t?0:null}).top(function(){return"top"==t?0:null}).right(function(){return"right"==t?0:null}).bottom(function(){return"bottom"==t?0:null}).width(function(e){return n?a(e):null}).height(function(e){return n?null:a(e)}).fillStyle(function(){return r(this.index)}).antialias(!1).parent=o,(this.measure=new e.Mark).extend(this.range).data(function(){return s.measures}).left(function(){return"left"==t?0:n?null:this.parent.width()/3.25}).top(function(){return"top"==t?0:n?this.parent.height()/3.25:null}).right(function(){return"right"==t?0:n?null:this.parent.width()/3.25}).bottom(function(){return"bottom"==t?0:n?this.parent.height()/3.25:null}).fillStyle(function(){return i(this.index)}).parent=o,(this.marker=new e.Mark).data(function(){return s.markers}).left(function(e){return"left"==t?a(e):n?null:this.parent.width()/2}).top(function(e){return"top"==t?a(e):n?this.parent.height()/2:null}).right(function(e){return"right"==t?a(e):null}).bottom(function(e){return"bottom"==t?a(e):null}).strokeStyle("black").shape("bar").shapeAngle(function(){return n?0:Math.PI/2}).parent=o,(this.tick=new e.Mark).data(function(){return a.ticks(7)}).left(function(e){return"left"==t?a(e):null}).top(function(e){return"top"==t?a(e):null}).right(function(e){return"right"==t?a(e):n?null:-6}).bottom(function(e){return"bottom"==t?a(e):n?-8:null}).height(function(){return n?6:null}).width(function(){return n?null:6}).parent=o},e.Layout.Bullet.prototype=e.extend(e.Layout).property("orient",String).property("ranges").property("markers").property("measures").property("minimum").property("maximum"),e.Layout.Bullet.prototype.defaults=(new e.Layout.Bullet).extend(e.Layout.prototype.defaults).orient("left").ranges([]).markers([]).measures([]),e.Layout.Bullet.prototype._originIsZero=!0,e.Layout.Bullet.prototype.originIsZero=function(e){return arguments.length?this._originIsZero=!!e:this._originIsZero},e.Layout.Bullet.prototype.buildImplied=function(t){e.Layout.prototype.buildImplied.call(this,t);var n,r=this.parent[/^left|right$/.test(t.orient)?"width":"height"](),i=t.maximum,s=t.minimum,o=1e-10;null==i?(n=[].concat(t.ranges,t.markers,t.measures),i=e.max(n)):i=+i,null==s?(n||(n=[].concat(t.ranges,t.markers,t.measures)),s=e.min(n),s=.95*s):s=+s,(s>i||o>i-s)&&(s=Math.abs(i)<o?-0.1:.99*i),this._originIsZero&&s*i>0&&(s>0?s=0:i=0),t.minimum=s,t.maximum=i,this.x.domain(s,i).range(0,r)},e.Behavior={},e.Behavior.dragBase=function(t){function n(n){c||(c=!0,this.addEventInterceptor("click",u,!0));if(!a){var o=this.root.scene.$g;a=[[o,"mousemove",e.listen(o,"mousemove",r)],[o,"mouseup",e.listen(o,"mouseup",i)],[document,"mousemove",e.listen(document,"mousemove",r)],[document,"mouseup",e.listen(document,"mouseup",i)]]}var p=arguments[arguments.length-1];f=p.target,l=!1,p.stopPropagation();var d=this.mouse(),v=this.scene,m=this.index;h=v[m].drag={phase:"start",m:d,m1:d,m2:null,d:n,scene:v,index:m},p=s(p,h),t.dragstart.call(this,p);var g=h.m;g!==d&&(d.x=g.x,d.y=g.y)}function r(e){if(h){h.phase="move",e.stopPropagation(),e=s(e,h);var n=h.scene;n.mark.context(n,h.index,function(){var n=h.m2||h.m1,r=this.mouse();if(!(n&&r.distance2(n).dist2<=2)){h.m=h.m2=r,t.drag.call(this,e);var i=h.m;i!==r&&(r.x=i.x,r.y=i.y)}})}}function i(n){if(h){h.phase="end";var r=h.m2,i=r&&h.m1.distance2(r).dist2>.1;h.canceled=!i,l=i&&f===n.target,l||(f=null),n.stopPropagation(),n=s(n,h),a&&(a.forEach(function(t){e.unlisten.apply(e,t)}),a=null);var o=h.scene,u=h.index;try{o.mark.context(o,u,function(){t.dragend.call(this,n)})}finally{h=null,delete o[u].drag}}}function s(e,t){try{return e.drag=t,e}catch(n){}var r={};for(var i in e){var s=e[i];r[i]="function"!=typeof s?s:o(s,e)}return r._sourceEvent=e,r}function o(e,t){return function(){return e.apply(t,arguments)}}function u(e,t){if(l&&f===t.target)return l=!1,f=null,!1}var a,f,l,c,h;return t.autoRender=!0,t.positionConstraint=null,t.bound=function(e,t){return Math.max(h.min[t],Math.min(h.max[t],e))},n.autoRender=function(e){return arguments.length?(t.autoRender=!!e,n):t.autoRender},n.positionConstraint=function(e){return arguments.length?(t.positionConstraint=e,n):t.positionConstraint},n},e.Behavior.drag=function(){var t,n=null,r=1,i=1,s={dragstart:function(n){var r=n.drag;r.type="drag";var i=r.d,o=e.vector(i.x,i.y);i.fix=o,i.drag=r,t=o.minus(r.m1);var u=this.parent;r.max={x:u.width()-(i.dx||0),y:u.height()-(i.dy||0)},r.min={x:0,y:0},s.autoRender&&this.render(),e.Mark.dispatch("dragstart",r.scene,r.index,n)},drag:function(n){var o=n.drag,u=o.m2,a=o.d;o.m=t.plus(u);var f=s.positionConstraint;f&&f(o);var l=o.m;r&&(a.x=a.fix.x=s.bound(l.x,"x")),i&&(a.y=a.fix.y=s.bound(l.y,"y")),s.autoRender&&this.render(),e.Mark.dispatch("drag",o.scene,o.index,n)},dragend:function(n){var r=n.drag,i=r.d;i.fix=null,t=null,s.autoRender&&this.render();try{e.Mark.dispatch("dragend",r.scene,r.index,n)}finally{delete i.drag}}},o=e.Behavior.dragBase(s);return o.collapse=function(e){if(arguments.length){n=String(e);switch(n){case"y":r=1,i=0;break;case"x":r=0,i=1;break;default:r=1,i=1}return o}return n},o},e.Behavior.point=function(t){function n(e,t){if(e.visible)for(var n=e.children.length-1;n>=0;n--)if(r(e.children[n],t))return!0}function r(e,t){var r,o,u,a=e.mark,f="panel"===a.type;if(a.$handlers.point){var l,c=(f&&a.parent||a).mouse(),h=a._pointingRadiusMax,p=h*h;o=e.length;for(;o--;)if((l=i(e,o))&&s(e,o,c,t,l,p)){r=!0;break}}if(f){a.scene=e,u=!!a.isPointingBarrier&&!!a.parent;try{o=e.length;for(;o--;){a.index=o;if((!u||a.getShape(e,o).containsPoint(a.parent.mouse()))&&n(e[o],t))return!0}}finally{delete a.scene,delete a.index}}return r}function i(e,t){var n=e[t];if(!n.visible)return 0;if(!h)return 1;var r=e.mark.properties;if(!r.fillStyle&&!r.strokeStyle)return 1;var i=n.fillStyle?n.fillStyle.opacity:0,s=n.strokeStyle?n.strokeStyle.opacity:0,o=Math.max(i,s);return.02>o?0:o>.98?1:.5}function s(t,n,r,i,s,o){function u(){if(v&&0>=o)return-1;a=f.distance2(r,d);if(v&&e.floatLess(o,a.cost))return-2;if(g&&!p&&e.floatLess(m,a.dist2))return-3;if(h===i.hasArea){if(p<i.inside)return-4;if(p>i.inside)return 1}else{if(c){if(!p&&i.inside)return-5;if(p&&!i.inside)return 2}if(h||2!==i.inside){if(h&&2===p){if(2===i.inside)return-7;if(0===i.inside&&e.floatLess(3,i.cost))return 4}}else{if(2===p)return 3;if(0===p&&e.floatLess(3,a.cost))return-6}}if(!c||!p){if(e.floatLess(i.dist2,a.dist2))return-8;if(e.floatLess(a.dist2,i.dist2))return 5}return c&&e.floatLess(a.cost,i.cost)?6:-9}var a,f=t.mark.getShape(t,n),h=f.hasArea(),p=f.containsPoint(r,d)?!c||f.containsPoint(r)?2:1:0,v=isFinite(o)&&2>p,y=u();l&&function(){if(-3>y||y>0){var e=t&&t.mark;console.log("POINT "+(y>0?"choose":"skip")+" ("+y+") "+(e?e.type+" "+n:"none")+" in="+p+" d2="+(a&&a.dist2)+" cost="+(a&&a.cost)+" opaq="+(1===s))}}();if(y>0){i.hasArea=h,i.inside=p,i.dist2=a.dist2,i.cost=a.cost,i.scenes=t,i.index=n,i.shape=f;if(h&&2===p&&1===s)return!0}}function o(){var t=e.event;l&&console.log("POINT MOUSE MOVE BEG");try{var r={cost:1/0,dist2:1/0,inside:0,hasArea:!1,x:t.pageX||0,y:t.pageY||0};if(f&&y&&e.Shape.dist2(r,f).cost<y)return;n(this.scene[this.index],r),r.inside||isFinite(r.cost)||(r=null),t.pointFrom=f,t.pointTo=r;if(f){if(r&&f.scenes==r.scenes&&f.index==r.index)return;t.isPointSwitch=!!r,e.Mark.dispatch("unpoint",f.scenes,f.index,t)}f=r,r&&(e.Mark.dispatch("point",r.scenes,r.index,t),v||("panel"===this.type?(v=this,this.event("mouseout",function(){u.call(this.scene.$g)}),p&&v.addEventInterceptor("click",a)):e.listen(this.root.canvas(),"mouseout",u)))}finally{l&&console.log("POINT MOUSE MOVE END")}}function u(){var t=e.event;f&&!e.ancestor(this,t.relatedTarget)&&(e.Mark.dispatch("unpoint",f.scenes,f.index,t),f=null)}function a(e,t){if(f){var n=f.scenes,r=n.mark.$handlers[e];if(r)return[r,n,f.index,t]}}"object"!=typeof t&&(t={radius:t});var f,l=0,c=null,h=!!e.get(t,"painted",!1),p=!!e.get(t,"stealClick",!1),d={x:1,y:1},v=null,m=function(){var n=e.parseNumNonNeg(e.get(t,"radius"),30);return n*n}(),g=isFinite(m),y=function(){var n=e.parseNumNonNeg(e.get(t,"radiusHyst"),0);return isFinite(n)||(n=4),n*n}();return o.collapse=function(e){if(arguments.length){c=String(e);switch(c){case"y":d.x=1,d.y=0;break;case"x":d.x=0,d.y=1;break;default:d.x=1,d.y=1,c=null}return o}return c},t&&null!=t.collapse&&o.collapse(t.collapse),t=null,o},e.Behavior.select=function(){var t=null,n=1,r=1,i=!1,s={dragstart:function(t){var o=t.drag;o.type="select",o.dxmin=0,o.dymin=0;var u=o.d;u.drag=o,o.max={x:this.width(),y:this.height()},o.min={x:0,y:0};var a=s.positionConstraint;a&&(o.m=o.m.clone(),a(o));var f=o.m;n&&(u.x=s.bound(f.x,"x"),i||(u.dx=Math.max(0,o.dxmin))),r&&(u.y=s.bound(f.y,"y"),i||(u.dy=Math.max(0,o.dymin))),e.Mark.dispatch("selectstart",o.scene,o.index,t)},drag:function(t){var o=t.drag,u=o.m1,a=o.d;o.max.x=this.width(),o.max.y=this.height();var f=s.positionConstraint;f&&(o.m=o.m.clone(),f(o));var l=o.m;if(n){var c=Math.min(u.x,l.x);c=s.bound(c,"x"),a.x=c;if(!i){var h=Math.max(l.x,u.x);h=s.bound(h,"x"),a.dx=Math.max(0,o.dxmin,h-c)}}if(r){var p=Math.min(u.y,l.y);p=s.bound(p,"y"),a.y=p;if(!i){var d=Math.max(l.y,u.y);d=s.bound(d,"y"),a.dy=Math.max(0,o.dymin,d-p)}}s.autoRender&&this.render(),e.Mark.dispatch("select",o.scene,o.index,t)},dragend:function(t){var n=t.drag;try{e.Mark.dispatch("selectend",n.scene,n.index,t)}finally{var r=n.d;delete r.drag}}},o=e.Behavior.dragBase(s);return o.collapse=function(e){if(arguments.length){t=String(e);switch(t){case"y":n=1,r=0;break;case"x":n=0,r=1;break;default:n=1,r=1}return o}return t},o.preserveLength=function(e){return arguments.length?(i=!!e,o):i},o},e.Behavior.resize=function(t){var n=!1,r="left"===t||"right"===t,i={dragstart:function(n){var r=n.drag;r.type="resize";var i=r.m1,s=r.d;s.drag=r;switch(t){case"left":i.x=s.x+s.dx;break;case"right":i.x=s.x;break;case"top":i.y=s.y+s.dy;break;case"bottom":i.y=s.y}var o=this.parent;r.max={x:o.width(),y:o.height()},r.min={x:0,y:0},e.Mark.dispatch("resizestart",r.scene,r.index,n)},drag:function(t){var s=t.drag,o=s.m1,u=i.positionConstraint;u&&(s.m=s.m.clone(),u(s));var a=s.m,f=s.d;if(!n||r){var l=Math.min(o.x,a.x),c=Math.max(a.x,o.x);l=i.bound(l,"x"),c=i.bound(c,"x"),f.x=l,f.dx=c-l}if(!n||!r){var h=Math.min(o.y,a.y),p=Math.max(a.y,o.y);h=i.bound(h,"y"),p=i.bound(p,"y"),f.y=h,f.dy=p-h}i.autoRender&&this.render(),e.Mark.dispatch("resize",s.scene,s.index,t)},dragend:function(t){var n=t.drag;n.max=null;try{e.Mark.dispatch("resizeend",n.scene,n.index,t)}finally{var r=n.d;delete r.drag}}},s=e.Behavior.dragBase(i);return s.preserveOrtho=function(e){return arguments.length?(n=!!e,s):n},s},e.Behavior.pan=function(){function t(){s=this.index,i=this.scene,u=e.vector(e.event.pageX,e.event.pageY),o=this.transform(),a=1/(o.k*this.scale),f&&(f={x:(1-o.k)*this.width(),y:(1-o.k)*this.height()})}function n(t){i&&(i.mark.context(i,s,function(){var t=(e.event.pageX-u.x)*a,n=(e.event.pageY-u.y)*a,r=o.translate(t,n);f&&(r.x=Math.max(f.x,Math.min(0,r.x)),r.y=Math.max(f.y,Math.min(0,r.y))),this.transform(r).render()}),e.Mark.dispatch("pan",i,s,t))}function r(){i=null}var i,s,o,u,a,f;return t.bound=function(e){return arguments.length?(f=Boolean(e),this):Boolean(f)},e.listen(window,"mousemove",n),e.listen(window,"mouseup",r),t},e.Behavior.zoom=function(t){function n(n){var i=this.mouse(),s=e.event.wheel*t,o=this.transform().translate(i.x,i.y).scale(0>s?1e3/(1e3-s):(1e3+s)/1e3).translate(-i.x,-i.y);r&&(o.k=Math.max(1,o.k),o.x=Math.max((1-o.k)*this.width(),Math.min(0,o.x)),o.y=Math.max((1-o.k)*this.height(),Math.min(0,o.y))),this.transform(o).render(),e.Mark.dispatch("zoom",this.scene,this.index,n)}var r;return arguments.length||(t=1/48),n.bound=function(e){return arguments.length?(r=Boolean(e),this):Boolean(r)},n},e.Geo=function(){},e.Geo.projections={mercator:{project:function(t){return{x:t.lng/180,y:t.lat>85?1:t.lat<-85?-1:Math.log(Math.tan(Math.PI/4+e.radians(t.lat)/2))/Math.PI}},invert:function(t){return{lng:180*t.x,lat:e.degrees(2*Math.atan(Math.exp(t.y*Math.PI))-Math.PI/2)}}},"gall-peters":{project:function(t){return{x:t.lng/180,y:Math.sin(e.radians(t.lat))}},invert:function(t){return{lng:180*t.x,lat:e.degrees(Math.asin(t.y))}}},sinusoidal:{project:function(t){return{x:e.radians(t.lng)*Math.cos(e.radians(t.lat))/Math.PI,y:t.lat/90}},invert:function(t){return{lng:e.degrees(t.x*Math.PI/Math.cos(t.y*Math.PI/2)),lat:90*t.y}}},aitoff:{project:function(t){var n=e.radians(t.lng),r=e.radians(t.lat),i=Math.acos(Math.cos(r)*Math.cos(n/2));return{x:2*(i?Math.cos(r)*Math.sin(n/2)*i/Math.sin(i):0)/Math.PI,y:2*(i?Math.sin(r)*i/Math.sin(i):0)/Math.PI}},invert:function(t){var n=t.x*Math.PI/2,r=t.y*Math.PI/2;return{lng:e.degrees(n/Math.cos(r)),lat:e.degrees(r)}}},hammer:{project:function(t){var n=e.radians(t.lng),r=e.radians(t.lat),i=Math.sqrt(1+Math.cos(r)*Math.cos(n/2));return{x:2*Math.SQRT2*Math.cos(r)*Math.sin(n/2)/i/3,y:Math.SQRT2*Math.sin(r)/i/1.5}},invert:function(t){var n=3*t.x,r=1.5*t.y,i=Math.sqrt(1-n*n/16-r*r/4);return{lng:e.degrees(2*Math.atan2(i*n,2*(2*i*i-1))),lat:e.degrees(Math.asin(i*r))}}},identity:{project:function(e){return{x:e.lng/180,y:e.lat/90}},invert:function(e){return{lng:180*e.x,lat:90*e.y}}}},e.Geo.scale=function(t){function n(e){if(!s||e.lng!=s.lng||e.lat!=s.lat){s=e;var t=r(e);o={x:c(t.x),y:h(t.y)}}return o}function r(e){var t={lng:e.lng-p.lng,lat:e.lat};return l.project(t)}function i(e){var t=l.invert(e);return t.lng+=p.lng,t}var s,o,u={x:0,y:0},a={x:1,y:1},f=[],l=e.Geo.projections.identity,c=e.Scale.linear(-1,1).range(0,1),h=e.Scale.linear(-1,1).range(1,0),p={lng:0,lat:0};return n.x=function(e){return n(e).x},n.y=function(e){return n(e).y},n.ticks={lng:function(t){var n,r;if(f.length>1){var i=e.Scale.linear();void 0==t&&(t=10),n=i.domain(f,function(e){return e.lat}).ticks(t),r=i.domain(f,function(e){return e.lng}).ticks(t)}else n=e.range(-80,81,10),r=e.range(-180,181,10);return r.map(function(e){return n.map(function(t){return{lat:t,lng:e}})})},lat:function(t){return e.transpose(n.ticks.lng(t))}},n.invert=function(e){return i({x:c.invert(e.x),y:h.invert(e.y)})},n.domain=function(t,n){if(arguments.length){f=t instanceof Array?arguments.length>1?e.map(t,n):t:Array.prototype.slice.call(arguments);if(f.length>1){var i=f.map(function(e){return e.lng}),o=f.map(function(e){return e.lat});p={lng:(e.max(i)+e.min(i))/2,lat:(e.max(o)+e.min(o))/2};var u=f.map(r);c.domain(u,function(e){return e.x}),h.domain(u,function(e){return e.y})}else p={lng:0,lat:0},c.domain(-1,1),h.domain(-1,1);return s=null,this}return f},n.range=function(e,t){return arguments.length?("object"==typeof e?(u={x:Number(e.x),y:Number(e.y)},a={x:Number(t.x),y:Number(t.y)}):(u={x:0,y:0},a={x:Number(e),y:Number(t)}),c.range(u.x,a.x),h.range(a.y,u.y),s=null,this):[u,a]},n.projection=function(t){return arguments.length?(l="string"==typeof t?e.Geo.projections[t]||e.Geo.projections.identity:t,this.domain(f)):t},e.copyOwn(n,e.Scale.common),arguments.length&&n.projection(t),n},e}),pen.define("cdf/lib/CCC/cdo",["./def","./protovis-compat!"],function(e,t){function n(e,t){var n=e&&e.length;if(n){for(var r=0;n>r;r++){var i=e[r];t&&(i[t]=null),i.dispose()}e.length=0}}function r(e,t,n,r,i){n[r]=e;var s=e[t]||(e[t]=[]);null==i||i>=s.length?s.push(n):s.splice(i,0,n)}function i(t,n,r,i){var s,o=t[n];o&&(s=o.indexOf(r))>=0&&e.array.removeAt(o,s),r[i]=null}function s(e,t){return e.id-t.id}function o(e,t){return t.id-e.id}function u(){delete this.isSelected}function a(e){return e.isNull||e.isSelected}function f(e){return e.isSelected===!0}function l(e){return e.isSelected===!1}function c(e){return e.isVisible===!0}function h(e){return e.isVisible===!1}function p(e){return e.isNull===!0}function d(e){return e.isNull===!1}function v(t,n,r,i,s,o){var u;if(this.owner===this){if(null==s){var a=t._formatter;s=a?a(i,n):i}s=e.string.to(s),!s&&e.debug>=2&&e.log("Only the null value should have an empty label."),u=new Ct.Atom(this,i,s,n,r),o&&(u.isVirtual=!0)}else{var f=this.parent||this.linkParent;u=f._atomsByKey[r]||v.call(f,t,n,r,i,s,o)}return e.array.insert(this._atoms,u,this._atomComparer),S.call(this),this._atomsByKey[r]=u,u}function m(t){var n=t.key,r=this;if(t.dimension===r)return r.owner===r||e.assert("Should be an owner dimension"),n||t!==r._virtualNullAtom||(t=r.intern(null)),t;var i=!r._lazyInit;if(i){var s=r._atomsByKey[n];if(s){if(s!==t)throw e.error.operationInvalid("Atom is from a different root data.");return t}if(r.owner===r)throw e.error.operationInvalid("Atom is from a different root data.")}return m.call(r.parent||r.linkParent,t),i&&(r._atomsByKey[n]=t,n?e.array.insert(r._atoms,t,r._atomComparer):(r._nullAtom=t,r._atoms.unshift(t)),S.call(r)),t}function g(t){var n=e.get(t,"visible"),r=e.get(t,"selected");return(null==n?null:!!n)+":"+(null==r?null:!!r)}function y(t){var n=this._nullAtom;if(!n){if(this.owner===this){var r=this.type._formatter,i=r?e.string.to(r.call(null,null,t)):"";n=new Ct.Atom(this,null,i,null,""),this.data._atomsBase[this.name]=n}else n=y.call(this.parent||this.linkParent,t);this._atomsByKey[""]=this._nullAtom=n,this._atoms.unshift(n)}return n}function b(){return this.owner===this||e.assert("Can only create atoms on an owner dimension."),this._virtualNullAtom||(this._virtualNullAtom=new Ct.Atom(this,null,"",null,""),this.data._atomsBase[this.name]=this._virtualNullAtom),this._virtualNullAtom}function w(){this.owner===this||e.assert("Can only unintern atoms of an owner dimension.");var t=this._atoms;if(t){for(var n=this._atomsByKey,r=0,i=t.length;i>r;){var s=t[r];if(s.visited)delete s.visited,r++;else if(s!==this._virtualNullAtom){t.splice(r,1),i--;var o=s.key;delete n[o],o||(delete this._nullAtom,this.data._atomsBase[this.name]=this._virtualNullAtom)}}S.call(this)}}function E(){var t=this._atoms;if(t){for(var n,r=this._atomsByKey,i=0,s=t.length;s>i;){var o=t[i];if(o.isVirtual){t.splice(i,1),s--,n=!0;var u=o.key||e.assert("Cannot be the null or virtual null atom.");delete r[u]}else i++}n&&S.call(this)}}function S(){this._atomVisibleDatumsCount=this._sumCache=this._visibleAtoms=this._visibleIndexes=null}function x(e){r(this,"childNodes",e,"parent"),e.owner=this.owner}function T(e){r(this,"_linkChildren",e,"linkParent"),e.owner=this.owner}function N(e,t){var n;if(!this._disposed&&(n=this._atomVisibleDatumsCount)){var r=e.atoms[this.name],i=r.key,s=n[i];n[i]=(s||0)+(t?1:-1),this._visibleAtoms=this._sumCache=this._visibleIndexes=null}}function C(){var e=this._atomVisibleDatumsCount;return e||(e={},this.data.datums(null,{visible:!0}).each(function(t){var n=t.atoms[this.name],r=n.key;e[r]=(e[r]||0)+1},this),this._atomVisibleDatumsCount=e),e}function k(e){var t=[];return this._atoms.forEach(function(n,r){this.isVisible(n)===e&&t.push(r)},this),t}function L(t){return e.query(this._atoms).where(function(e){return this.isVisible(e)===t},this).array()}function A(t,n){this.insertAt(t,n),e.lazy(this,"_childrenByKey")[t.key]=t}function O(e,t){r(this,"_linkChildren",e,"linkParent",t)}function M(e){i(this,"_linkChildren",e,"linkParent")}function _(){n(this.childNodes,"parent"),this._childrenByKey=null,n(this._linkChildren,"linkParent"),this._groupByCache=null,this._sumAbsCache=null}function D(){this.isOwner()||e.fail("Can only be called on the owner data.")}function P(t,n){!t.isNull||e.assert("Null datums do not notify selected changes"),n?this._selectedNotNullDatums.set(t.id,t):this._selectedNotNullDatums.rem(t.id),this._sumAbsCache=null}function H(t,n){var r=t.id,i=this,s=e.hasOwnProp;if(s.call(i._datumsById,r)){!t.isNull||e.assert("Null datums do not notify visible changes"),n?i._visibleNotNullDatums.set(r,t):i._visibleNotNullDatums.rem(r),i._sumAbsCache=null;for(var o=i._dimensionsList,u=0,a=o.length;a>u;)N.call(o[u++],t,n);o=i.childNodes,u=0,a=o.length;for(;a>u;)H.call(o[u++],t,n);o=i._linkChildren;if(o&&(a=o.length)){u=0;for(;a>u;)H.call(o[u++],t,n)}}}function B(e){for(var t,n=[e];t=e.parent||e.linkParent;)n.unshift(e=t);return n}function j(e,t){for(var n,r=0,i=Math.min(e.length,t.length),s=null;i>r&&(n=e[r])===t[r];)s=n,r++;return s}function F(t,n){function r(t){if(t){var n=t.key;if(!e.hasOwnProp.call(l,n)){!p&&o&&e.hasOwnProp.call(o,n)&&(t=o[n]);var r=t.id;f.push(t),l[n]=t,c[r]=t,a&&a.push(t),I.call(this,t,d,h),t.isNull||(m&&t.isSelected&&m.set(r,t),t.isVisible&&v.set(r,t))}}}t||e.fail.argumentRequired("addDatums");var i,s,o,u,a,f,l,c,h=e.get(n,"doAtomGC",!1),p=e.get(n,"isAdditive",!1),d=!!this._dimensions,v=this._visibleNotNullDatums,m=this._selectedNotNullDatums,g=this._datums;g?(o=this._datumsByKey,u=this._datumsById,p&&h&&g.forEach(function(e){I.call(this,e,!1,!0)},this)):p=!1,p?(a=[],f=g,c=u,l=o,this._sumAbsCache=null):(this._datums=f=[],this._datumsById=c={},this._datumsByKey=l={},g&&(_.call(this),v.clear(),m&&m.clear()));if(e.array.is(t)){i=0,s=t.length;for(;s>i;)r.call(this,t[i++])}else{if(!(t instanceof e.Query))throw e.error.argumentInvalid("addDatums","Argument is of invalid type.");t.each(r,this)}if(h){var y=this._dimensionsList;i=0,s=y.length;for(;s>i;)w.call(y[i++])}if(p){var b=this._linkChildren;if(b){i=0,s=b.length;for(;s>i;)q.call(b[i++],a)}}}function I(e,t,n){var r=this._dimensionsList;r||(t=!1);if(t||n){var i,s,o,u=e.atoms,a=0;if(r){i=r.length;for(;i>a;)o=r[a++],s=u[o.name],s&&(t&&m.call(o,s),n&&(s.visited=!0))}else{var f=this.type.dimensionsNames();i=f.length;for(;i>a;)s=u[f[a++]],s&&(s.visited=!0)}}}function q(t){t||e.fail.argumentRequired("newDatums");var n=this._groupOper;if(n)t=n.executeAdd(this,t);else{var r=this._wherePred;r&&(t=t.filter(r)),R.call(this,t)}var i=this._linkChildren,s=i&&i.length;if(s)for(var o=0;s>o;o++)q.call(i[o],t)}function R(e){var t=this,n=t._datums,r=t._visibleNotNullDatums,i=t._selectedNotNullDatums,s=t._datumsById;t._sumAbsCache=null;for(var o=0,u=e.length;u>o;o++){var a=e[o],f=a.id;s[f]=a,I.call(t,a,!0,!1),a.isNull||(i&&a.isSelected&&i.set(f,a),a.isVisible&&r.set(f,a)),n.push(a)}}function U(t){function n(t){if(null!=t){"object"==typeof t||e.fail.invalidArgument("datumFilter");var n={},i=!1;for(var s in t){var o=this.dimensions(s).getDistinctAtoms(e.array.as(t[s]));o.length&&(i=!0,n[s]=o)}i&&r.push(n)}}var r=[];return t=e.array.as(t),t&&t.forEach(n,this),r}function z(t,n){var r=e.get(n,"visible"),i=e.get(n,"isNull"),s=e.get(n,"selected"),o=e.get(n,"where");return null!=r&&(t=t.where(r?c:h)),null!=i&&(t=t.where(i?p:d)),null!=s&&(t=t.where(s?f:l)),o&&(t=t.where(o)),t}function W(t,n){var r=e.get(n,"visible"),i=e.get(n,"isNull"),s=e.get(n,"selected"),o=e.get(n,"where"),u=[];null!=r&&u.unshift(r?c:h),null!=i&&u.unshift(i?p:d),null!=s&&u.unshift(s?f:l),o&&u.unshift(o),t&&u.unshift(X(t));var a=u.length;if(a){if(1===a)return u[0];var v=function(e){for(var t=a;t;)if(!u[--t](e))return!1;return!0};return v}}function X(e){function t(t){for(var i=t.atoms,s=0;r>s;s++)if(n(i,e[s]))return!0;return!1}function n(e,t){for(var n in t)if(t[n].indexOf(e[n])<0)return!1;return!0}var r=e.length;return t}function V(t,n){var r=e.array.as(e.get(n,"orderBy")),i=e.create(n||{},{orderBy:null}),s=e.query(t).selectMany(function(e,t){return r&&(i.orderBy=r[t]),$.call(this,e,i)},this);return s.distinct(e.propGet("id"))}function $(t,n){var r=n.orderBy;if(r){if(r.indexOf("|")>=0)throw e.error.argumentInvalid("keyArgs.orderBy","Multi-dimension order by is not supported.")}else r=Object.keys(t).sort().join(",");var i=this.groupBy(r,n),s=i.treeHeight,o=[];return e.query(function(){var n;if(this._data){if(this._datumsQuery){this._data||e.assert("Must have a current data"),o.length||e.assert("Must have a parent data"),!this._dimAtomsOrQuery||e.assert();if(this._datumsQuery.next())return this.item=this._datumsQuery.item,1;this._datumsQuery=null,n=o.pop(),this._data=n.data,this._dimAtomsOrQuery=n.dimAtomsOrQuery}}else this._data=i,this._dimAtomsOrQuery=e.query(t[i._groupLevelSpec.dimensions[0].name]);this._dimAtomsOrQuery||e.assert("Invalid programmer"),this._data||e.assert("Must have a current data");for(var r=o.length;;){for(;this._dimAtomsOrQuery.next();){var u=this._dimAtomsOrQuery.item,a=this._data.child(u.key);if(a&&(s-1>r||a._datums.length)){o.push({data:this._data,dimAtomsOrQuery:this._dimAtomsOrQuery}),this._data=a;if(!(s-1>r))return this._dimAtomsOrQuery=null,this._datumsQuery=e.query(a._datums),this._datumsQuery.next(),this.item=this._datumsQuery.item,1;this._dimAtomsOrQuery=e.query(t[a._groupLevelSpec.dimensions[0].name]),r++}}if(!r)return 0;n=o.pop(),this._data=n.data,this._dimAtomsOrQuery=n.dimAtomsOrQuery,r--}return 0})}function J(t,n){return e.string.is(t)||e.fail.argumentInvalid("groupLevelText","Invalid grouping specification."),e.query(t.split(/\s*\|\s*/)).where(e.truthy).select(function(t){var r=Ot.exec(t)||e.fail.argumentInvalid("groupLevelText","Invalid grouping level syntax '{0}'.",[t]),i=r[1],s=(r[2]||"").toLowerCase(),o="desc"===s;return new Ct.GroupingDimensionSpec(i,o,n)})}function K(t,n){function r(){var r={},s=e.query(i.source).select(function(e){n(e,r);var t=r.series;return null!=t&&null!=t.v&&(t=t.v),t||null}).distinct().array();return i._createPlot2SeriesKeySet(t,s)}var i=this;this._dataPartGet(r)}function Q(t){return e.string.is(t)?!!this.mask(t):e.is(t,Pt)?!!this.mask(t.mask()).style(t.style()):void 0}function G(e){e||(e="");var t="_"+e,n=Ht[t];return n||(Bt===Pt.cacheLimit&&(Ht={},Bt=0),Ht[t]=n=Y(e),Bt++),n}function Y(e){function t(e,t){return null==e?o?o(t):"":(e=+e,isNaN(e)||!isFinite(e)?"":r?0===e?s?s(t):r(t,e,null,!1):e>0?r(t,e,s,!1):i?i(t,-e,s||r):r(t,-e,s,!0):String(e))}function n(){var t,n,u,a=Z(e);a.forEach(et),t=a.length,r=o=i=s=null;if(t){r=st(u=a[0]);if(t>1){n=a[1],i=st(n.empty?u:n);if(t>2){n=a[2],s=rt(n.empty?u:n);if(t>3){n=a[3],o=it(n.empty?u:n);if(t>4)throw new Error("Invalid mask. More than 4 sections.")}}}}}var r,i,s,o;return n(),t}function Z(e){var t=[];if(e){var n,r,i,s,o=-1,u=e.length,a="",f=1,l=1,c=0,h=0,p=function(e){f=0,i.list.push(e)},d=function(e){f=0,a+=e},v=function(){a&&(b(),p({type:0,text:a}),a="")},m=function(e){v(),p(e)},g=function(){v(),!c&&h&&p({type:2}),i.digits=s,s=0,l=0,i=r.fractional},y=function(){r&&(!f||!t.length)&&(l?g():v(),i.digits=s,t.push(r)),f=l=1,h=s=c=0,r={empty:0,scale:0,groupOn:0,scientific:0,abbreviationOn:0,integer:{list:[],digits:0},fractional:{list:[],digits:0}},i=r.integer},b=function(){"A"===a?(a="",m({type:6})):"C"===a?(a="",m({type:4})):"AC"===a?(a="",m({type:6}),m({type:4})):"CA"===a&&(a="",m({type:4}),m({type:6}))},w=function(){var t,i=o+1,s=!1,a=0;if(u>i){t=e.charAt(i);if("-"===t||"+"===t){s="+"===t;if(!(++i<u))return 0;t=e.charAt(i)}for(;"0"===t&&++a&&++i<u&&(t=e.charAt(i)););if(a)return o=i-1,m({type:5,text:n,digits:a,positive:s}),r.scientific=1,1}return 0};y();for(;++o<u;){n=e.charAt(o);if("0"===n)m({type:1}),c=1,s++;else if("#"===n)m({type:2}),c=1,s++;else if(","===n)l&&m({type:3});else if("."===n)l&&(h=1,g());else if(""===n)m({type:4});else if("C"===n&&"Currency"===e.substring(o,o+8))m({type:4}),o+=7;else if("A"===n&&"Abbreviation"===e.substring(o,o+12))m({type:6}),o+=11;else if(";"===n){y();if(o+1>=u||";"===e.charAt(o+1))o++,t.push({empty:1})}else if("\\"===n)o++,u>o&&d(e.charAt(o));else if('"'===n){o++;var E=e.indexOf(n,o);0>E&&(E=u),d(e.substring(o,E)),o=E}else if(" "===n)m({type:7});else if("e"!==n&&"E"!==n||!w())"%"===n?r.scale+=2:""===n?r.scale+=3:""===n&&(r.scale+=4),d(n)}y()}return t}function et(e){e.empty||(tt(e,!0),tt(e,!1))}function tt(e,t){function n(e){a[s](e)}for(var r,i,s=t?"push":"unshift",o=e[t?"integer":"fractional"],u=o.list,a=o.list=[],f=o.digits-1,l=0,c=0,h=u.length,p=t?0:h,d=t?function(){return h>p?u[p++]:null}:function(){return p>0?u[--p]:null};r=d();)switch(i=r.type){case 0:n(at(r.text));break;case 1:case 2:c&&2===i&&(i=1),n(ft(t,f,1===i,!l)),f--,l=1,c||1!==i||(c=1);break;case 3:nt(u,p,h)?l&&(e.groupOn=1):e.scale-=3;break;case 4:n(dt);break;case 5:n(ct(e,r));break;case 6:e.abbreviationOn=1,n(vt);break;case 7:n(at(" "))}!t&&o.digits&&a.unshift(lt(c))}function nt(e,t,n){for(;n>t;){var r=e[t++].type;if(1===r||2===r)return 1}return 0}function rt(e){function t(t){return ot(e,t,0,!1)}return t}function it(e){function t(t){return ot(e,t,"",!1)}return t}function st(t){function n(n,r,i,s){var o,u,a=r,f=0,l=t.scale;if(t.abbreviationOn)for(var c=n.abbreviations.length,h=c;h>0;h--){var p=3*h;if(Math.pow(10,p)<=r){l-=p,u=h-1;break}}return t.scientific&&(o=Math.floor(Math.log(r)/Math.LN10),f=l+o-t.integer.digits+1,l-=f),l&&(r=e.mult10(r,l)),r=e.round10(r,t.fractional.digits),!r&&i?i(n,a):ot(t,n,r,s,f,u)}return n}function ot(e,t,n,r,i,s){var o=""+n,u=o.indexOf("."),a=0>u?o:o.substr(0,u),f=0>u?"":o.substr(u+1);"0"===a&&(a=""),i||(i=0);var l=[];return r&&l.push(t.negativeSign),a=a.split(""),f=f.split(""),t.group&&e.groupOn&&ut(t,a),e.integer.list.forEach(function(e){l.push(e(t,a,i,s))}),e.fractional.list.forEach(function(e){l.push(e(t,f,i,s))}),l.join("")}function ut(e,t){for(var n,r=e.group,i=function(){t[s-a-1]+=r},s=t.length,o=e.groupSizes,u=o.length,a=0,f=-1;++f<u;){a+=n=o[f];if(!(s>a))return;i()}for(;(a+=n)<s;)i()}function at(e){function t(){return e}return t}function ft(e,t,n,r){function i(t){return t[e?"integerPad":"fractionPad"]}function s(e,n){var i=n.length;if(i>t){var s=i-1-t;return r?n.slice(0,s+1).join(""):n[s]}return u?u(e):""}function o(e,n){return t<n.length?n[t]:u?u(e):""}var u=n?i:null;return e?s:o}function lt(e){return e?ht:pt}function ct(e,t){function n(e,n,r){var i=0>r?e.negativeSign:t.positive?"+":"",s=""+Math.abs(r),o=t.digits-s.length;return o>0&&(s=(new Array(o+1)).join("0")+s),t.text+i+s}return n}function ht(e){return e.decimal}function pt(e,t){return t.length?e.decimal:""}function dt(e){return e.currency}function vt(e,t,n,r){return null!=r?e.abbreviations[r]:void 0}function mt(t){return e.string.is(t)?!!this.mask(t):e.is(t,jt)?!!this.mask(t.mask()):void 0}function gt(n){return n?t.Format.createFormatter(t.Format.date(n)):e.string.to}function yt(t){return e.is(t,Ft)?!!this.formatter(t.formatter()):e.fun.is(t)?!!this.formatter(t):void 0}function bt(e){return null!=e?String(e):""}function wt(t){function n(n){return e.is(n,t)||e.is(n,Ft)?n:null}function r(n,r){var i=e.fun.is(n)?Ft:t;return i(n,r)}return{cast:n,factory:r}}function Et(t){switch(e.classOf(t)){case qt:return!!this.number(t.number()).percent(t.percent()).date(t.date()).any(t.any());case Pt:return!!this.number(t);case jt:return!!this.date(t);case Ft:return!!this.any(t)}if(e.string.is(t)){var n=zt(t);if(n)return!!e.configure(this,n)}}function St(t,n){t=Tt(t);var r=e.getOwn(Rt,t);return r?e.configure(r,n):(r=Rt[t]=qt(n),r.languageCode=t),r}function xt(e){var t=/^([a-z]{2,8})(?:[-_]([a-z]{2}|\d{3}))?$/i,n=t.exec(e);if(!n)return null;var r=n[1]?n[1].toLowerCase():"",i=n[2]?n[2].toLowerCase():"";return{code:r+(i?"-"+i:""),primary:r,region:i}}function Tt(e){return e?e.toLowerCase():""}function Nt(t,n){t=Tt(t);var r=e.getOwn(Rt,t);if(r)return r;if(!n)return null;var i=xt(t);if(i){if(i.code!==t&&(r=e.getOwn(Rt,i.code)))return r;if(i.region&&(r=e.getOwn(Rt,i.primary)))return r}return e.getOwn(Rt,It,null)}var Ct=e.globalSpace("cdo",{});e.type("cdo.DimensionType").init(function(n,r,i){this.complexType=n,this.name=r,this.label=e.get(i,"label")||e.titleFromName(r);var s=e.splitIndexedId(r);this.group=s[0],this.groupLevel=e.nullyTo(s[1],0),this.label.indexOf("{")>=0&&(this.label=e.format(this.label,[this.groupLevel+1])),this.isHidden=!!e.get(i,"isHidden");var o=e.get(i,"valueType")||null,u=Ct.DimensionType.valueTypeName(o),a=e.getOwn(Ct.DimensionType.cast,u,null);this.valueType=o,this.valueTypeName=u,this.cast=a;var f=this.valueType===Number,l=!f&&this.valueType===Date;this.isDiscreteValueType=!f&&!l,this.isDiscrete=e.get(i,"isDiscrete");if(null==this.isDiscrete)this.isDiscrete=this.isDiscreteValueType;else{this.isDiscrete=!!this.isDiscrete;if(!this.isDiscrete&&this.isDiscreteValueType)throw e.error.argumentInvalid("isDiscrete","The only supported continuous value types are Number and Date.")}this._converter=e.get(i,"converter")||null;if(!this._converter){var c=e.get(i,"rawFormat");if(c)switch(this.valueType){case Date:this._converter=t.Format.createParser(t.Format.date(c))}}this._key=e.get(i,"key")||null,this._comparer=e.get(i,"comparer");if(void 0===this._comparer)switch(this.valueType){case Number:case Date:this._comparer=e.compare;break;default:this._comparer=null}this.isComparable=null!=this._comparer;var h,p=e.get(i,"formatter"),d=e.get(i,"formatProto"),v=f?"number":l?"date":"any";p?h=Ct.format(e.set({},v,p),d):this.isDiscreteValueType?h=qt(null,d):(h=e.get(i,"format"),!h&&!f&&(h=e.get(i,"rawFormat"),h&&(h=h.replace(/-/g,"/"))),h?e.is(h,qt)||((e.string.is(h)||e.fun.is(h)&&!e.classOf(h))&&(h=e.set({},v,h)),h=qt(h,d)):h=qt(null,d),p=h[v]()),this._formatter=p||null,this._format=h||null}).add({isCalculated:!1,compare:function(e,t){return null==e?null==t?0:-1:null==t?1:this._comparer.call(null,e,t)},comparer:function(e){var t=this;return t.isComparable?e?t._rc||(t._rc=function(e,n){return t.compare(n,e)}):t._dc||(t._dc=function(e,n){return t.compare(e,n)}):null},atomComparer:function(e){return e?this._rac||(this._rac=this._createReverseAtomComparer()):this._dac||(this._dac=this._createDirectAtomComparer())},_toDiscrete:function(){this.isDiscrete=!0},_toCalculated:function(){this.isCalculated=!0},_createReverseAtomComparer:function(){function e(e,n){return e===n?0:t.compare(n.value,e.value)}if(!this.isComparable)return o;var t=this;return e},_createDirectAtomComparer:function(){function e(e,n){return e===n?0:t.compare(e.value,n.value)}if(!this.isComparable)return s;var t=this;return e},format:function(){return this._format},formatter:function(){return this._formatter},converter:function(){return this._converter}}),Ct.DimensionType.cast={Date:function(e){return e instanceof Date?e:new Date(e)},Number:function(e){return e=Number(e),isNaN(e)?null:e},String:String,Boolean:Boolean,Object:Object,Any:null},Ct.DimensionType.dimensionGroupName=function(e){return e.replace(/^(.*?)(\d*)$/,"$1")},Ct.DimensionType.valueTypeName=function(t){if(null==t)return"Any";switch(t){case Boolean:return"Boolean";case Number:return"Number";case String:return"String";case Object:return"Object";case Date:return"Date";default:throw e.error.argumentInvalid("valueType","Invalid valueType function: '{0}'.",[t])}},Ct.DimensionType.extendSpec=function(t,n,r){var i=Ct.DimensionType.dimensionGroupName(t),s=e.get(r,"dimensionGroups");if(s){var o=s[i];o&&(n=e.create(o,n))}n||(n={});switch(i){case"category":var u=e.get(r,"isCategoryTimeSeries",!1);u&&void 0===n.valueType&&(n.valueType=Date);break;case"value":void 0===n.valueType&&(n.valueType=Number)}return void 0!==n.converter||n.valueType!==Date||n.rawFormat||(n.rawFormat=e.get(r,"timeSeriesFormat")),n.formatProto=e.get(r,"formatProto"),n},e.type("cdo.ComplexType").init(function(e){this._dims={},this._dimsList=[],this._dimsNames=[],this._calculations=[],this._calculatedDimNames={},this._dimsIndexByName=null,this._dimsByGroup={},this._dimsNamesByGroup={};if(e)for(var t in e)this.addDimension(t,e[t])}).add({describe:function(){var t=e.textTable(2).rowSep().row("Dimension","Properties").rowSep();return this._dimsList.forEach(function(e){var n=[];n.push('"'+e.label+'"'),n.push(e.valueTypeName),e.isComparable&&n.push("comparable"),e.isDiscrete||n.push("continuous"),e.isHidden&&n.push("hidden"),t.row(e.name,n.join(", "))}),t.rowSep(!0),"COMPLEX TYPE INFORMATION\n"+t()+"\n"},dimensions:function(t,n){if(null==t)return this._dims;var r=e.getOwn(this._dims,t,null);if(!r&&e.get(n,"assertExists",!0))throw e.error.argumentInvalid("name","Undefined dimension '{0}'",[t]);return r},dimensionsList:function(){return this._dimsList},calculatedDimensionsList:function(){return this._calcDimsList},dimensionsNames:function(){return this._dimsNames},groupDimensions:function(t,n){var r=e.getOwn(this._dimsByGroup,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.operationInvalid("There is no dimension type group with name '{0}'.",[t]);return r},groupDimensionsNames:function(t,n){var r=e.getOwn(this._dimsNamesByGroup,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.operationInvalid("There is no dimension type group with name '{0}'.",[t]);return r},addDimension:function(t,n){t||e.fail.argumentRequired("name"),!e.hasOwn(this._dims,t)||e.fail.operationInvalid("A dimension type with name '{0}' is already defined.",[t]);var r=new Ct.DimensionType(this,t,n);this._dims[t]=r,this._dimsIndexByName=null;var i,s=r.group;if(s){var o,u=e.getOwn(this._dimsByGroup,s);u?o=this._dimsNamesByGroup[s]:(u=this._dimsByGroup[s]=[],o=this._dimsNamesByGroup[s]=[]),i=e.array.insert(o,t,e.compare),i=~i,e.array.insertAt(u,i,r)}var a,f=this._dimsList.length;if(s){i=r.groupLevel;for(var l=0;f>l;l++){var c=this._dimsList[l];if(c.group===s){if(c.groupLevel>i){a=l;break}a=l+1}}null==a&&(a=f)}else a=f;return e.array.insertAt(this._dimsList,a,r),e.array.insertAt(this._dimsNames,a,t),r._calculate&&(a=e.array.binarySearch(this._calcDimsList,r._calculationOrder,e.compare,function(e){return e._calculationOrder}),a>=0?a++:a=~a,e.array.insertAt(this._calcDimsList,a,r)),r},addCalculation:function(t,n){t||e.fail.argumentRequired("calcSpec");var r=t.calculation||e.fail.argumentRequired("calculations[i].calculation"),i=t.names;i=e.string.is(i)?i.split(/\s*\,\s*/):e.array.as(i);if(i&&i.length){var s=this._calculatedDimNames;i.forEach(function(t){if(t){t=t.replace(/^\s*(.+?)\s*$/,"$1"),!e.hasOwn(s,t)||e.fail.argumentInvalid("calculations[i].names","Dimension name '{0}' is already being calculated.",[t]);var r=this._dims[t];if(!r){var i=Ct.DimensionType.extendSpec(t,null,n);this.addDimension(t,i)}s[t]=!0,r._toCalculated()}},this)}this._calculations.push(r)},isCalculated:function(t){return e.hasOwn(this._calculatedDimNames,t)},_calculate:function(e){var t=this._calculations,n=t.length;if(n){for(var r={},i=0;n>i;i++){var s=t[i];s(e,r)}return r}},sortDimensionNames:function(t,n){var r=this._dimsIndexByName;return r||(r=e.query(this._dimsList).object({name:function(e){return e.name},value:function(e,t){return t}}),this._dimsIndexByName=r),t.sort(function(t,i){return e.compare(r[n?n(t):t],r[n?n(i):i])}),t}}),e.type("cdo.ComplexTypeProject").init(function(e){this._dims={},this._dimList=[],this._dimGroupsDims={},this._dimGroupSpecs=e||{},this._calcList=[]}).add({_ensureDim:function(t,n){t||e.fail.argumentInvalid("name","Invalid dimension name '{0}'.",[t]);var r=e.getOwn(this._dims,t);if(r)n&&e.setUDefaults(r.spec,n);else{r=this._dims[t]=this._createDim(t,n),this._dimList.push(r);var i=e.array.lazy(this._dimGroupsDims,r.groupName);e.array.insert(i,t,e.compare)}return r},hasDim:function(t){return e.hasOwn(this._dims,t)},setDim:function(t,n){var r=this._ensureDim(t).spec;return n&&e.copy(r,n),this},setDimDefaults:function(t,n){return e.setUDefaults(this._ensureDim(t).spec,n),this},_createDim:function(t,n){var r=Ct.DimensionType.dimensionGroupName(t),i=this._dimGroupSpecs[r];return i&&(n=e.create(i,n)),{name:t,groupName:r,spec:n||{}}},readDim:function(t,n){var r=this._ensureDim(t,n);if(r.isRead)throw e.error.operationInvalid("Dimension '{0}' already is the target of a reader.",[t]);if(r.isCalc)throw e.error.operationInvalid("Dimension '{0}' is being calculated, so it cannot be the target of a reader.",[t]);r.isRead=!0},calcDim:function(t,n){var r=this._ensureDim(t,n);if(r.isCalc)throw e.error.operationInvalid("Dimension '{0}' already is being calculated.",[t]);if(r.isRead)throw e.error.operationInvalid("Dimension '{0}' is the target of a reader, so it cannot be calculated.",[t]);r.isCalc=!0},isReadOrCalc:function(t){if(t){var n=e.getOwn(this._dims,t);if(n)return n.isRead||n.isCalc}return!1},groupDimensionsNames:function(e){return this._dimGroupsDims[e]},setCalc:function(t){t||e.fail.argumentRequired("calculations[i]"),t.calculation||e.fail.argumentRequired("calculations[i].calculation");var n=t.names;n=e.string.is(n)?n.split(/\s*\,\s*/):e.array.as(n),n&&n.length&&n.forEach(this.calcDim,this),this._calcList.push(t)},configureComplexType:function(e,t){this._dimList.forEach(function(n){var r=n.name,i=n.spec;i=Ct.DimensionType.extendSpec(r,i,t),e.addDimension(r,i)}),this._calcList.forEach(function(n){e.addCalculation(n,t)})}}),e.type("cdo.Atom").init(function(t,n,r,i,s){this.dimension=t,this.id=null==n?-e.nextId():e.nextId(),this.value=n,this.label=r,void 0!==i&&(this.rawValue=i),this.key=s}).add({isVirtual:!1,rawValue:void 0,toString:function(){var e=this.label;return null!=e?e:(e=this.value,null!=e?""+e:"")}});var kt=1;e.type("cdo.Complex").init(function(t,n,r,i,s,o){var u=this;u.id=kt++;var a;t&&(a=t.owner,i||(i=t.atoms)),u.owner=a=a||u;var f=a.type||e.fail.argumentRequired("owner.type");u.atoms=i?Object.create(i):{};var l=!!r;r||(r=f._dimsNames);var c,h,p=u.atoms,d=r.length;if(n){var v=a._dimensions,m=function(e){var t=n[e],r=v[e].intern(t);null==t||i&&r===i[e]||(p[e]=r)};if(l){c=d;for(;c--;)m(r[c])}else for(h in n)m(h);if(o){n=f._calculate(u);for(h in n)e.hasOwnProp.call(p,h)||m(h)}}var g;if(d)if(1===d)g=p[r[0]],u.value=g.value,u.rawValue=g.rawValue,u.key=g.key,s&&(u.label=g.label);else{var y,b,w,E=a.keySep,S=a.labelSep;for(c=0;d>c;c++)g=p[r[c]],c?y+=E+g.key:y=g.key,s&&(w=g.label)&&(b?b+=S+w:b=w);u.value=u.rawValue=u.key=y,s&&(u.label=b)}else u.value=null,u.key="",s&&(u.label="")}).add({labelSep:" ~ ",keySep:"~",value:null,label:null,rawValue:void 0,ensureLabel:function(){var t=this.label;if(null==t){t="";var n=this.owner.labelSep;e.eachOwn(this.atoms,function(e){var r=e.label;r&&(t?t+=n+r:t=r)}),this.label=t}return t},view:function(e){return new Ct.ComplexView(this,e)},toString:function(){var t=[""+e.qualNameOf(this.constructor)];return null!=this.index&&t.push("#"+this.index),this.owner.type.dimensionsNames().forEach(function(n){t.push(n+": "+e.describe(this.atoms[n].value))},this),t.join(" ")},rightTrimKeySep:function(e){return e&&Ct.Complex.rightTrimKeySep(e,this.owner.keySep)},absKeyTrimmed:function(){return this.rightTrimKeySep(this.absKey)},keyTrimmed:function(){return this.rightTrimKeySep(this.key)}}),Ct.Complex.rightTrimKeySep=function(e,t){if(e&&t)for(var n,r=t.length;e.lastIndexOf(t)===(n=e.length-r)&&n>=0;)e=e.substr(0,n);return e},Ct.Complex.values=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].value})},Ct.Complex.compositeKey=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].key}).join(e.owner.keySep)},Ct.Complex.labels=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].label})};var Lt=e.propGet("id");e.type("cdo.ComplexView",Ct.Complex).init(function(e,t){this.source=e,this.viewDimNames=t,this.base(e,e.atoms,t,e.owner.atoms,!0)}).add({values:function(){return Ct.Complex.values(this,this.viewDimNames)},labels:function(){return Ct.Complex.labels(this,this.viewDimNames)}}),e.type("cdo.Datum",Ct.Complex).init(function(e,t){this.base(e,t,null,null,!1,!0)}).add({isSelected:!1,isVisible:!0,isNull:!1,isVirtual:!1,isTrend:!1,trend:null,isInterpolated:!1,interpolation:null,setSelected:function(e){if(this.isNull)return!1;e=null==e||!!e;var t=this.isSelected!==e;return t&&(e?this.isSelected=!0:delete this.isSelected,P.call(this.owner,this,e)),t},toggleSelected:function(){return this.setSelected(!this.isSelected)},setVisible:function(e){if(this.isNull)return!1;e=null==e||!!e;var t=this.isVisible!==e;return t&&(this.isVisible=e,H.call(this.owner,this,e)),t},toggleVisible:function(){return this.setVisible(!this.isVisible)}});var At=Ct.Datum.isSelected=e.propGet("isSelected");Ct.Datum.isSelectedT=f,Ct.Datum.isSelectedF=l,Ct.Datum.isVisibleT=c,Ct.Datum.isVisibleF=h,Ct.Datum.isNullT=p,Ct.Datum.isNullF=d,e.type("cdo.TrendDatum",Ct.Datum).init(function(e,t,n){this.base(e,t),this.trend=n}).add({isVirtual:!0,isTrend:!0}),e.type("cdo.InterpolationDatum",Ct.Datum).init(function(e,t,n,r){this.base(e,t),this.interpolation=n,this.interpDimName=r}).add({isVirtual:!0,isInterpolated:!0}),e.type("cdo.Dimension").init(function(t,n){this.data=t,this.type=n,this.root=this,this.owner=this;var r=n.name;this.name=r,this._atomComparer=n.atomComparer(),this._atomsByKey={};if(t.isOwner())this._atoms=[],b.call(this);else{var i,s=t.parent;s?(i=s._dimensions[r],x.call(i,this),this.root=t.parent.root):(s=t.linkParent,s||e.assert("Data must have a linkParent"),i=s._dimensions[r],T.call(i,this)),this._nullAtom=this.owner._nullAtom,this._lazyInit=function(){this._lazyInit=null;for(var t=this.data._datums,n=t.length,s=this._atomsByKey,o=0;n>o;o++){var u=t[o].atoms[r];s[u.key]=u}this._atoms=i.atoms().filter(function(t){return e.hasOwnProp.call(s,t.key)})}}}).add({parent:null,linkParent:null,_linkChildren:null,_atomsByKey:null,_atomVisibleDatumsCount:null,_disposed:!1,_nullAtom:null,_virtualNullAtom:null,_visibleAtoms:null,_visibleIndexes:null,_atomComparer:null,_atoms:null,_sumCache:null,count:function(){return this._lazyInit&&this._lazyInit(),this._atoms.length},isVisible:function(t){return this._lazyInit&&this._lazyInit(),e.hasOwn(this._atomsByKey,t.key)||e.assert("Atom must exist in this dimension."),C.call(this)[t.key]>0},atoms:function(t){this._lazyInit&&this._lazyInit();var n=e.get(t,"visible");return null==n?this._atoms:(n=!!n,this._visibleAtoms||(this._visibleAtoms={}),this._visibleAtoms[n]||(this._visibleAtoms[n]=L.call(this,n)))},indexes:function(n){this._lazyInit&&this._lazyInit();var r=e.get(n,"visible");return null==r?t.range(0,this._atoms.length):(r=!!r,this._visibleIndexes||(this._visibleIndexes={}),this._visibleIndexes[r]||(this._visibleIndexes[r]=k.call(this,r)))},atom:function(e){if(null==e||""===e)return this._nullAtom;if(e instanceof Ct.Atom)return e;this._lazyInit&&this._lazyInit();var t=this.type._key,n=t?t.call(null,e):e;return this._atomsByKey[n]||null},getDistinctAtoms:function(e){var t,n,r,i=[],s=e?e.length:0;if(s){r={};for(var o=0;s>o;o++)(t=this.atom(e[o]))&&!r[n="\0"+t.key]&&(r[n]=t,i.push(t))}return i},extent:function(t){var n,r=this.atoms(t),i=r.length;if(!i)return void 0;var s=this._nullAtom&&null==r[0].value?1:0,o=i-s;if(o>0){var u=r[s],a=r[i-1];if(u!==a&&e.get(t,"abs",!1)){var f=u.value<0?-1:1,l=a.value<0?-1:1;if(f===l)0>l&&(n=a,a=u,u=n);else if(o>2){a.value<-u.value&&(a=u);var c=e.array.binarySearch(r,0,this.type.comparer(),function(e){return e.value});if(0>c){c=~c;var h=r[c-1],p=r[c];u=-h.value<p.value?h:p}else u=r[c]}else a.value<-u.value&&(n=a,a=u,u=n)}return{min:u,max:a}}return void 0},min:function(e){var t=this.atoms(e),n=t.length;if(!n)return void 0;var r=this._nullAtom&&null==t[0].value?1:0;return n>r?t[r]:void 0},max:function(e){var t=this.atoms(e),n=t.length;return n&&null!=t[n-1].value?t[n-1]:void 0},sumAbs:function(t){return this.sum(e.create(t,{abs:!0}))},value:function(t){return this.sum(t&&t.abs?e.create(t,{abs:!1}):t)},valueAbs:function(e){var t=this.value(e);return t?Math.abs(t):t},sum:function(t){var n=!!e.get(t,"abs",!1),r=e.get(t,"zeroIfNone",!0),i=g(t)+":"+n,s=e.getOwn(this._sumCache,i);if(void 0===s){var o=this.name;s=this.data.datums(null,t).reduce(function(e,t){var r=t.atoms[o].value;return n&&0>r&&(r=-r),null!=e?e+r:r},null),(this._sumCache||(this._sumCache={}))[i]=s}return r?s||0:s},percent:function(e,t){var n=e instanceof Ct.Atom?e.value:e;if(!n)return 0;var r=this.sumAbs(t);return r?Math.abs(n)/r:0},valuePercent:function(e){var t=this.valueAbs(e);if(!t)return 0;var n=this.data.parent;if(!n)return 1;var r=n.dimensionsSumAbs(this.name,e);return t/r},percentOverParent:function(e){return this.valuePercent(e)},format:function(t,n){return e.string.to(this.type._formatter?this.type._formatter.call(null,t,n):t)},intern:function(t,n){if(null==t||""===t)return this._nullAtom||y.call(this,t);if(t instanceof Ct.Atom){if(t.dimension!==this)throw e.error.operationInvalid("Atom is of a different dimension.");return t}var r,i,s=this.type;if("object"==typeof t&&"v"in t){i=t.f,t=t.v;if(null==t||""===t)return this._nullAtom||y.call(this)}if(n)r=t;else{var o=s._converter;if(o){r=o(t);if(null==r||""===r)return this._nullAtom||y.call(this,t);i=void 0}else r=t}var u=s.cast;if(u){r=u(r);if(null==r||""===r)return this._nullAtom||y.call(this)}var a=s._key,f=""+(a?a(r):r);f||e.fail.operationInvalid("Only a null value can have an empty key.");var l=this._atomsByKey[f];return l?(!n&&l.isVirtual&&delete l.isVirtual,l):v.call(this,s,t,f,r,i,n)},read:function(t,n){if(null==t||""===t)return null;var r,i=this.type,s=null!=n;if("object"==typeof t&&"v"in t){n=t.f,t=t.v;if(null==t||""===t)return null}var o=i._converter;r=o?o(t):t;if(null==r||""===r)return null;!s&&o&&(n=null);var u=i.cast;if(u){r=u(r);if(null==r||""===r)return null}var a=i._key,f=""+(a?a(r):r),l=this._atomsByKey[f];if(l)return{rawValue:t,key:f,value:l.value,label:""+(null==n?l.label:n)};if(null==n){var c=i._formatter;n=c?c(r,t):r}return n=e.string.to(n),{rawValue:t,key:f,value:r,label:n}},dispose:function(){var e,t=this;t._disposed||(n(t.childNodes,"parent"),n(t._linkChildren,"linkParent"),(e=t.parent)&&i(e,"childNodes",t,"parent"),(e=t.linkParent)&&i(e,"_linkChildren",t,"linkParent"),S.call(t),t._lazyInit=t._atoms=t._nullAtom=t._virtualNullAtom=null,t._disposed=!0)}}),e.type("cdo.Data",Ct.Complex).init(function(n){n||e.fail.argumentRequired("keyArgs"),this._visibleNotNullDatums=new e.Map;var r,i,s,o,u,a,f=this.parent=n.parent||null;if(f)this.root=f.root,this.depth=f.depth+1,this.type=f.type,u=n.datums||e.fail.argumentRequired("datums"),r=f.owner,i=n.atoms||e.fail.argumentRequired("atoms"),o=n.atomsDimNames||e.fail.argumentRequired("atomsDimNames"),s=f.atoms;else{this.root=this,o=[];var l=n.linkParent||null;l?(r=l.owner,this.type=r.type,u=n.datums||e.fail.argumentRequired("datums"),this._leafs=[],this._wherePred=n.where||null,s=l.atoms,a=e.get(n,"index",null),O.call(l,this,a)):(r=this,s={},n.labelSep&&(this.labelSep=n.labelSep),n.keySep&&(this.keySep=n.keySep),this.type=n.type||e.fail.argumentRequired("type"),this._selectedNotNullDatums=new e.Map)}u&&F.call(this,u),this.owner=r,this._atomsBase=s,this._dimensions={},this._dimensionsList=[],this.type.dimensionsList().forEach(this._initDimension,this),this.base(r,i,o,s,!0),t.Dom.Node.call(this),f?(a=e.get(n,"index",null),A.call(f,this,a),this.absLabel=f.absLabel?e.string.join(r.labelSep,f.absLabel,this.label):this.label,this.absKey=f.absKey?e.string.join(r.keySep,f.absKey,this.key):this.key):(this.absLabel=this.label,this.absKey=this.key)}).add(t.Dom.Node).add({parent:null,linkParent:null,_dimensions:null,_dimensionsList:null,_freeDimensionNames:null,_linkChildren:null,_leafs:null,_childrenByKey:null,_visibleNotNullDatums:null,_selectedNotNullDatums:null,_groupByCache:null,_sumAbsCache:null,treeHeight:null,_groupOper:null,_wherePred:null,_groupSpec:null,_groupLevel:null,_datums:null,_datumsById:null,_datumsByKey:null,depth:0,label:"",absLabel:"",_disposed:!1,_isFlattenGroup:!1,_isDegenerateFlattenGroup:!1,_initDimension:function(e){var t=new Ct.Dimension(this,e);this._dimensions[e.name]=t,this._dimensionsList.push(t)},dimensions:function(t,n){if(null==t)return this._dimensions;var r=e.getOwn(this._dimensions,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.argumentInvalid("name","Undefined dimension '{0}'.",[t]);return r},dimensionsList:function(){return this._dimensionsList},freeDimensionsNames:function(){var e=this._freeDimensionNames;return e||(this._freeDimensionNames=e=this.type.dimensionsNames().filter(function(e){var t=this.atoms[e];return!(t instanceof Ct.Atom)||null==t.value},this)),e},isOwner:function(){return this.owner===this},children:function(){var t=this.childNodes;return t.length?e.query(t):e.query()},child:function(t){return e.getOwn(this._childrenByKey,t,null)},childCount:function(){return this.childNodes.length},contains:function(t){var n=this._datumsById;return!!n&&e.hasOwn(n,t.id)},leafs:function(){return e.query(this._leafs)},count:function(){return this._datums.length},firstDatum:function(){return this._datums.length?this._datums[0]:null},firstAtoms:function(){return(this.firstDatum()||this).atoms},singleDatum:function(){var e=this._datums;return 1===e.length?e[0]:null},dispose:function(){var e=this;if(!e._disposed){_.call(e);var t;(t=e._selectedNotNullDatums)&&t.clear(),e._visibleNotNullDatums.clear(),t=e._dimensionsList;for(var n=0,r=t.length;r>n;n++)t[n].dispose();e._dimensions=null,e._dimensionsList=null;if(t=e.parent)t.removeChild(e),e.parent=null;(t=e.linkParent)&&M.call(t,e),e._disposed=!0}},disposeChildren:function(){_.call(this)}}),Ct.Data.add({selectedCount:function(){return this.isOwner()?this._selectedNotNullDatums.count:this.datums(null,{selected:!0}).count()},selectedDatums:function(){return this.isOwner()?this._selectedNotNullDatums.values():this.datums(null,{selected:!0}).array()},selectedDatumMap:function(){if(this.isOwner())return this._selectedNotNullDatums.clone();var t=this.datums(null,{selected:!0}).object({name:e.propGet("id")});return new e.Set(t)},visibleCount:function(){return this._visibleNotNullDatums.count},replaceSelected:function(t){e.array.is(t)||(t=t.array());var n=e.query(t).where(At).object({name:Lt}),r=this.owner.clearSelected(function(t){return!e.hasOwn(n,t.id)});return r|=Ct.Data.setSelected(t,!0),r},clearSelected:function(e){if(this.owner!==this)return this.owner.clearSelected(e);if(!this._selectedNotNullDatums.count)return!1;var t;return e?(t=!1,this._selectedNotNullDatums.values().filter(e).forEach(function(e){t=!0,u.call(e),this._selectedNotNullDatums.rem(e.id)},this)):(t=!0,this._selectedNotNullDatums.values().forEach(function(e){u.call(e)}),this._selectedNotNullDatums.clear()),t}}),Ct.Data.setSelected=function(t,n){var r=0;return t&&e.query(t).each(function(e){r|=e.setSelected(n)}),!!r},Ct.Data.toggleSelected=function(t,n){e.array.isLike(t)||(t=e.query(t).array());var r=e.query(t),i=n?r.any(At):r.all(a);return this.setSelected(t,!i)},Ct.Data.setVisible=function(t,n){var r=0;return t&&e.query(t).each(function(e){r|=e.setVisible(n)}),!!r},Ct.Data.toggleVisible=function(t){e.array.isLike(t)||(t=e.query(t).array());var n=e.query(t).all(e.propGet("isVisible"));return Ct.Data.setVisible(t,!n)},Ct.Data.add({load:function(t,n){D.call(this);var r=e.get(n,"where"),i=e.get(n,"isNull"),s=e.query(t).select(function(e){var t=new Ct.Datum(this,e);return i&&i(t)&&(t.isNull=!0),r&&!r(t)?null:t},this);F.call(this,s,{isAdditive:!1,doAtomGC:!0})},clearVirtuals:function(){var t=this._datums;if(t){this._sumAbsCache=null;for(var n,r=this._visibleNotNullDatums,i=this._selectedNotNullDatums,s=this._datumsByKey,o=this._datumsById,u=0,a=t.length;a>u;){var f=t[u];if(f.isVirtual){var l=f.id,c=f.key;t.splice(u,1),delete o[l],delete s[c],i&&f.isSelected&&i.rem(l),f.isVisible&&r.rem(l),a--,n=!0}else u++}if(n){if(!t.length&&this.parent)return void this.dispose();var h=this.childNodes;if(h){u=0,a=h.length;for(;a>u;){var p=h[u];p.clearVirtuals(),p.parent?u++:a--}}this._linkChildren&&this._linkChildren.forEach(function(e){e.clearVirtuals()})}}e.eachOwn(this._dimensions,function(e){E.call(e)})},add:function(e){D.call(this),F.call(this,e,{isAdditive:!0,doAtomGC:!0})},groupBy:function(t,n){var r,i,s=new Ct.GroupingOper(this,t,n),o=s.key;return o&&(r=this._groupByCache,i=r&&r[o]),i?e.debug>=7&&e.log("[GroupBy] Cache key hit '"+o+"'"):(e.debug>=7&&e.log("[GroupBy] "+(o?"Cache key not found: '"+o+"'":"No Cache key")),i=s.execute(),o&&((r||(this._groupByCache={}))[o]=i)),i},where:function(t,n){var r;if(t)t=U.call(this,t,n),r=V.call(this,t,n);else{if(!n)return e.query(this._datums);r=z(e.query(this._datums),n)}var i=W(t,n);return new Ct.Data({linkParent:this,datums:r,where:i})},datums:function(t,n){return t?(t=U.call(this,t,n),V.call(this,t,n)):n?z(e.query(this._datums),n):e.query(this._datums)},datum:function(t,n){return t||e.fail.argumentRequired("whereSpec"),t=U.call(this,t,n),V.call(this,t,n).first()||null},dimensionsSumAbs:function(t,n){var r=t+":"+g(n),i=e.getOwn(this._sumAbsCache,r);return null==i&&(i=this.children().where(function(e){return!e._isFlattenGroup||e._isDegenerateFlattenGroup}).select(function(e){return e.dimensions(t).valueAbs(n)||0},this).reduce(e.add,0),(this._sumAbsCache||(this._sumAbsCache={}))[r]=i),i}}).type().add({lca:function(e){var t,n,r,i,s=e.length,o=null;if(s){if(1===s)return e[0];var u=1;r=B(e[0]);do{n=e[u],i=B(n);if(!(o=j(r,i)))return null;t=n,r=i}while(++u<s)}return o}}),Ct.whereSpecPredicate=X,Ct.Data.add({getInfo:function(){var t=["DATA SUMMARY",e.logSeparator,"  Dimension",e.logSeparator];return e.eachOwn(this.dimensions(),function(e,n){var r=e.count(),i=e.type,s=[];s.push(),s.push(i.valueTypeName),i.isComparable&&s.push("comparable"),i.isDiscrete||s.push("continuous"),i.isHidden&&s.push("hidden"),t.push("  "+n+' ("'+i.label+'", #'+r+")\n	"+e.atoms().slice(0,10).map(function(e){return e.label}).join(", ")+(r>10?"...":""))}),t.join("\n")},getValues:function(){return t.range(0,this.getCategoriesSize()).map(function(e){return this._getValuesForCategoryIndex(e)},this)},_getDimensionValues:function(e){return this.dimensions(e).atoms().map(function(e){return e.value})},_getDimensionVisibleValues:function(e){return this.dimensions(e).atoms({visible:!0}).map(function(e){return e.value})},getSeries:function(){return this._getDimensionValues("series")},getVisibleSeriesIndexes:function(){return this.dimensions("series").indexes({visible:!0})},getVisibleCategoriesIndexes:function(){return this.dimensions("category").indexes({visible:!0})},getVisibleSeries:function(){return this._getDimensionVisibleValues("series")},getCategories:function(){return this._getDimensionValues("category")},getVisibleCategories:function(){return this._getDimensionVisibleValues("category")},_getValuesForCategoryIndex:function(t){var n=this.dimensions("category").atoms()[t],r=this.datums({category:n}).uniqueIndex(function(e){return e.atoms.series.key});return this.dimensions("series").atoms().map(function(t){var n=e.getOwn(r,t.key);return n?n.atoms.value.value:null})},getSeriesSize:function(){var e=this.dimensions("series",{assertExists:!1});return e?e.count():0},getCategoriesSize:function(){var e=this.dimensions("category",{assertExists:!1});return e?e.count():0}}),e.type("cdo.DataOper").init(function(t){t||e.fail.argumentRequired("linkParent"),this._linkParent=t}).add({key:null,execute:e.abstractMethod}),e.type("cdo.GroupingOper",Ct.DataOper).init(function(t,n,r){n||e.fail.argumentRequired("groupingSpecs"),this.base(t,r),this._where=e.get(r,"where"),this._visible=e.get(r,"visible",null),this._selected=e.get(r,"selected",null);var i=this._isNull=e.get(r,"isNull",null);this._postFilter=null!=i?function(e){return e.isNull===i}:null;var s=null==this._selected,o="";this._where&&(o=e.get(r,"whereKey"),o||(r&&null!==o?(o=""+e.nextId("dataOperWhereKey"),r.whereKey=o):s=!1));var u=[];this._groupSpecs=e.array.as(n).map(function(n){if(n instanceof Ct.GroupingSpec){if(n.type!==t.type)throw e.error.argumentInvalid("groupingSpecText","Invalid associated complex type.")}else n=Ct.GroupingSpec.parse(n,t.type);return u.push(n.id),n}),s&&(this.key=u.join("!!")+"$"+[this._visible,this._isNull,o].join("||"))}).add({execute:function(){var t=z(e.query(this._linkParent._datums),{visible:this._visible,selected:this._selected,where:this._where}),n=this._group(t);return this._generateData(n,null,this._linkParent)},executeAdd:function(t,n){var r=z(e.query(n),{visible:this._visible,selected:this._selected,where:this._where}),i=this._group(r);return this._generateData(i,null,this._linkParent,t),i.datums},_group:function(t){var n={isRoot:!0,treeHeight:e.query(this._groupSpecs).select(function(e){var t=e.levels.length;return t?e.flatteningMode?1:t:0}).reduce(e.add,0),datums:[]};return n.treeHeight>0&&this._groupSpecRecursive(n,e.query(t).array(),0),n},_groupSpecRecursive:function(e,t,n){var r=this._groupSpecs[n];r.flatteningMode?this._groupSpecRecursiveFlattened(e,t,r,n):this._groupSpecRecursiveNormal(e,t,r,n)},_groupSpecRecursiveNormal:function(t,n,r,i){function s(t,n,f){var l=o[f],c=f===u-1,h=a&&c;t.groupSpec=r,t.groupLevelSpec=l;for(var p=t.children=this._groupLevelDatums(l,t,n,!1),d=0,v=p.length;v>d;d++){var m=p[d];if(!h){var g=m.datums;m.datums=[],c?this._groupSpecRecursive(m,g,i+1):s.call(this,m,g,f+1)}e.array.append(t.datums,m.datums)}}var o=r.levels,u=o.length,a=i===this._groupSpecs.length-1;t.isRoot&&(t.label=r.rootLabel),s.call(this,t,n,0)},_groupSpecRecursiveFlattened:function(t,n,r,i){function s(t,n,r){for(var h=u[r],d=r===a-1,v=f&&d,m=this._groupLevelDatums(h,t,n,!0),g=f?t.datums:[],y=0,b=m.length;b>y;y++){var w=m[y],E=w.datums;e.array.lazy(t,"_children").push(w);if(e.hasOwn(c,w.key))e.array.append(g,E);else{var S=l.length;o||(p(w),t.isFlattenGroup=!0),v||(w.datums=[],d?this._groupSpecRecursive(w,E,i+1):s.call(this,w,E,r+1)),e.array.append(g,w.datums),o&&(e.hasOwn(c,w.key)&&(w.isFlattenGroup||e.assert("Must be a parent for duplicate keys to exist."),1===w._children.length&&(l.splice(S,l.length-S),w.isDegenerateFlattenGroup=!0)),p(w),t.isFlattenGroup=!0)}}f||this._groupSpecRecursive(t,g,i+1)}var o=r.flatteningMode===Ct.FlatteningMode.DfsPost,u=r.levels,a=u.length,f=i===this._groupSpecs.length-1,l=[],c={},h={key:"",absKey:"",atoms:{},datums:[],label:r.rootLabel,dimNames:[]},p=function(e){l.push(e),c[e.key]=e};t.children=l,t.childrenByKey=c,o||p(h),s.call(this,h,n,0),o&&p(h),t.datums=h.datums},_groupLevelDatums:function(t,n,r,i){for(var s,o=[],u={},a=this._postFilter,f=t.comparer,l=function(e,t){return f(e.firstDatum,t.firstDatum)},c=0,h=r.length;h>c;c++){var p=r[c],d=t.key(p),v=e.hasOwnProp.call(u,d)&&u[d];v?(!a||a(p))&&v.datums.push(p):(v=t.atomsInfo(p),v.key=d,v.firstDatum=p,v.datums=!a||a(p)?[p]:[],i&&(s||(s=p.owner.keySep),this._onNewChildNodeFlattened(d,s,v,t,n)),e.array.insert(o,v,l),u[d]=v)}if(a){c=o.length;for(;c--;)o[c].datums.length||o.splice(c,1)}return o},_onNewChildNodeFlattened:function(t,n,r,i,s){e.copy(r.atoms,s.atoms),r.dimNames=i.accDimensionNames();if(s.dimNames.length){var o=s.absKey+n+t;r.absKey=o,r.key=Ct.Complex.rightTrimKeySep(o,n)}else r.absKey=t},_generateData:function(t,n,r,i){var s,o;if(t.isRoot)i?(s=i,R.call(s,t.datums)):(o=!0,s=new Ct.Data({linkParent:r,datums:t.datums}),s.treeHeight=t.treeHeight,s._groupOper=this);else{i&&(s=r.child(t.key),s&&q.call(s,t.datums));if(!s){o=!0;var u,a;i&&(a=r.childNodes)&&(u=~e.array.binarySearch(a,t.datums[0],n.groupLevelSpec.comparer)),s=new Ct.Data({parent:r,atoms:t.atoms,atomsDimNames:t.dimNames,datums:t.datums,index:u})}}if(o){t.isFlattenGroup&&(s._isFlattenGroup=!0,s._isDegenerateFlattenGroup=!!t.isDegenerateFlattenGroup);var f=t.label;f&&(s.label+=f,s.absLabel+=f)}var l=t.children,c=l&&l.length;if(c){o&&(s._groupSpec=t.groupSpec,s._groupLevelSpec=t.groupLevelSpec);for(var h=0;c>h;h++)this._generateData(l[h],t,s,i)}else if(o&&!t.isRoot){var p=s.root._leafs;s.leafIndex=p.length,p.push(s)}return s}}),e.space("cdo").FlatteningMode=e.set(e.makeEnum(["DfsPre","DfsPost"]),"None",0),e.type("cdo.GroupingSpec").init(function(t,n,r){this.type=n||null;var i=[],s=[];this.hasCompositeLevels=!1,this.levels=e.query(t||void 0).where(function(e){return e.dimensions.length>0}).select(function(t){return i.push(t.id),e.array.append(s,t.dimensionNames()),!this.hasCompositeLevels&&t.dimensions.length>1&&(this.hasCompositeLevels=!0),t._setAccDimNames(s.slice(0)),t},this).array(),this._dimNames=s,this.depth=this.levels.length,this.isSingleLevel=1===this.depth,this.isSingleDimension=this.isSingleLevel&&!this.hasCompositeLevels,this.firstDimension=this.depth>0?this.levels[0].dimensions[0]:null,this.lastDimension=this.depth>0?this.levels[this.depth-1].lastDimension():null,this.rootLabel=e.get(r,"rootLabel")||"",this.flatteningMode=e.get(r,"flatteningMode")||Ct.FlatteningMode.None,this._cacheKey=this._calcCacheKey(),this.id=this._cacheKey+"##"+i.join("||")}).add({_calcCacheKey:function(t){return[e.get(t,"flatteningMode")||this.flatteningMode,e.get(t,"reverse")||"false",e.get(t,"isSingleLevel")||this.isSingleLevel,e.get(t,"rootLabel")||this.rootLabel].join("#")},bind:function(t){this.type=t||e.fail.argumentRequired("type"),this.levels.forEach(function(e){e.bind(t)})},dimensions:function(){return e.query(this.levels).prop("dimensions").selectMany()},dimensionNames:function(){return this._dimNames},view:function(e){return e.view(this.dimensionNames())},isDiscrete:function(){var e;return!this.isSingleDimension||!!(e=this.lastDimension)&&e.type.isDiscrete},firstDimensionType:function(){var e=this.firstDimension;return e&&e.type},firstDimensionName:function(){var e=this.firstDimensionType();return e&&e.name},firstDimensionValueType:function(){var e=this.firstDimensionType();return e&&e.valueType},lastDimensionType:function(){var e=this.lastDimension;return e&&e.type},lastDimensionName:function(){var e=this.lastDimensionType();return e&&e.name},lastDimensionValueType:function(){var e=this.lastDimensionType();return e&&e.valueType},isNull:function(){return!this.levels.length},ensure:function(t){var n;if(t){var r=this._calcCacheKey(t);if(r!==this._cacheKey){var i=e.lazy(this,"_groupingCache");n=e.getOwn(i,r),n||(n=i[r]=this._ensure(t))}}return n||this},_ensure:function(t){var n=this;if(e.get(t,"isSingleLevel")&&!n.isSingleLevel)return n._singleLevelGrouping(t);if(e.get(t,"reverse"))return n._reverse(t);var r=e.get(t,"flatteningMode")||n.flatteningMode,i=e.get(t,"rootLabel")||n.rootLabel;return r!==n.flatteningMode||i!==n.rootLabel?new Ct.GroupingSpec(n.levels,n.type,{flatteningMode:r,rootLabel:i}):n},_singleLevelGrouping:function(t){var n=!!e.get(t,"reverse"),r=this.dimensions().select(function(e){return n?new Ct.GroupingDimensionSpec(e.name,!e.reverse,e.type.complexType):e}),i=new Ct.GroupingLevelSpec(r,this.type);return new Ct.GroupingSpec([i],this.type,{flatteningMode:null,rootLabel:e.get(t,"rootLabel")||this.rootLabel})},_reverse:function(t){var n=e.query(this.levels).select(function(t){var n=e.query(t.dimensions).select(function(e){return new Ct.GroupingDimensionSpec(e.name,!e.reverse,e.type.complexType)});return new Ct.GroupingLevelSpec(n,this.type)},this);return new Ct.GroupingSpec(n,this.type,{flatteningMode:e.get(t,"flatteningMode")||this.flatteningMode,rootLabel:e.get(t,"rootLabel")||this.rootLabel})},toString:function(){return this.levels.map(String).join(", ")}}),e.type("cdo.GroupingLevelSpec").init(function(t,n){var r=[],i=[];this.dimensions=e.query(t).select(function(e){return r.push(e.id),i.push(e.name),e}).array(),this._dimNames=i,this.dimensionsInDefOrder=this.dimensions.slice(0),n&&this._sortDimensions(n),this.id=r.join(","),this.depth=this.dimensions.length;var s=this;this.comparer=function(e,t){return s.compare(e,t)}}).add({_sortDimensions:function(e){e.sortDimensionNames(this.dimensionsInDefOrder,function(e){return e.name})},_setAccDimNames:function(e){this._accDimNames=e},accDimensionNames:function(){return this._accDimNames},dimensionNames:function(){return this._dimNames},lastDimension:function(){return this.dimensions[this.depth-1]},bind:function(e){this._sortDimensions(e),this.dimensions.forEach(function(t){t.bind(e)})},compare:function(e,t){for(var n,r=this.dimensions,i=this.depth,s=0;i>s;s++)if(n=r[s].compareDatums(e,t))return n;return 0},key:function(e){for(var t="",n=this._dimNames,r=this.depth,i=e.owner.keySep,s=e.atoms,o=0;r>o;o++){var u=s[n[o]].key;o?t+=i+u:t=u}return t},atomsInfo:function(e){for(var t={},n=this._dimNames,r=this.depth,i=e.atoms,s=0;r>s;s++){var o=n[s];t[o]=i[o]}return{atoms:t,dimNames:n}},toString:function(){return e.query(this.dimensions).select(String).array().join("|")}}),e.type("cdo.GroupingDimensionSpec").init(function(e,t,n){this.name=e,this.reverse=!!t,this.id=e+":"+(t?"0":"1"),n&&this.bind(n)}).add({type:null,comparer:null,bind:function(t){t||e.fail.argumentRequired("type"),this.type=t.dimensions(this.name),this.comparer=this.type.atomComparer(this.reverse)},compareDatums:function(e,t){if(this.type.isComparable){var n=this.name;return this.comparer(e.atoms[n],t.atoms[n])}return this.reverse?t.id-e.id:e.id-t.id},toString:function(){return this.name+(this.type?' ("'+this.type.label+'")':"")+(this.reverse?" desc":"")}}),Ct.GroupingSpec.parse=function(t,n){if(!t)return new Ct.GroupingSpec(null,n);var r=e.string.is(t)?t.split(/\s*,\s*/):e.array.as(t),i=e.query(r).select(function(e){var t=J(e,n);return new Ct.GroupingLevelSpec(t,n)});return new Ct.GroupingSpec(i,n)};var Ot=/^\s*(.+?)(?:\s+(asc|desc))?\s*$/i;e.type("cdo.LinearInterpolationOper").init(function(t,n,r,i,s,o,u){this._newDatums=[],this._data=r;var a=i.flatten(t).children(),f=s.isBound()?s.flatten(n,{visible:!0,isNull:!1}).children().array():[null],l=this._valDim=t.owner.dimensions(o.lastDimensionName()),c={visible:!0,zeroIfNone:!1};this._isCatDiscrete=i.grouping.isDiscrete(),this._stretchEnds=u,this._catInfos=a.select(function(e,t){var n=r.child(e.key),i={data:n||e,value:e.value,isInterpolated:!1,serInfos:null,index:t};return i.serInfos=f.map(function(e){var t=n;t&&e&&(t=t.child(e.key));var r=t?t.dimensions(l.name).value(c):null;return{data:e,group:t,value:r,isNull:null==r,catInfo:i}}),i}).array(),this._serCount=f.length,this._serStates=e.range(0,this._serCount).select(function(e){return new Ct.LinearInterpolationOperSeriesState(this,e)},this).array()}).add({interpolate:function(){for(var e;e=this._catInfos.shift();)e.serInfos.forEach(this._visitSeries,this);var t=this._newDatums;t.length&&this._data.owner.add(t)},_visitSeries:function(e,t){this._serStates[t].visit(e)},nextUnprocessedNonNullCategOfSeries:function(e){for(var t=0,n=this._catInfos.length;n>t;){var r=this._catInfos[t++],i=r.serInfos[e];if(!i.isNull)return i}}}),e.type("cdo.LinearInterpolationOperSeriesState").init(function(e,t){this.interpolation=e,this.index=t,this._lastNonNull(null)}).add({visit:function(e){e.isNull?this._interpolate(e):this._lastNonNull(e)},_lastNonNull:function(e){return arguments.length&&(this.__lastNonNull=e,this.__nextNonNull=void 0),this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(void 0===this.__nextNonNull){var t=this.__lastNonNull,n=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(n&&t){var r=t.value,i=n.value,s=i-r;if(this.interpolation._isCatDiscrete){var o=n.catInfo.index-t.catInfo.index;o>=2||e.assert("Must have at least one interpolation point."),this._stepValue=s/o,this._middleIndex=~~(o/2);var u=o-1;this._isOdd=u%2>0}else{var a=+t.catInfo.value,f=+n.catInfo.value,l=f-a;this._steep=s/l,this._middleCat=(f+a)/2}}}},_interpolate:function(t){this._initInterpData();var n=this.__nextNonNull,r=this.__lastNonNull,i=n||r;if(i){var s,o,u=this.interpolation,a=t.catInfo;if(n&&r)if(u._isCatDiscrete){var f=a.index-r.catInfo.index;s=r.value+this._stepValue*f,o=(this._isOdd?f<this._middleIndex:f<=this._middleIndex)?r.group:n.group}else{var l=+a.value,c=+r.catInfo.value;s=r.value+this._steep*(l-c),o=l<this._middleCat?r.group:n.group}else{if(!u._stretchEnds)return;s=i.value,o=i.group}var h=Object.create(o.atoms);e.copyOwn(h,a.data.atoms);var p=u._valDim,d=p.intern(s,!0);h[p.name]=d,u._newDatums.push(new Ct.InterpolationDatum(o.owner,h,"linear",p.name))}}}),e.type("cdo.ZeroInterpolationOper").init(function(t,n,r,i,s,o,u){this._newDatums=[],this._data=r;var a=i.flatten(t).children(),f=s.isBound()?s.flatten(n,{visible:!0,isNull:!1}).children().array():[null],l=this._valDim=t.owner.dimensions(o.lastDimensionName()),c={visible:!0,zeroIfNone:!1};this._isCatDiscrete=i.grouping.isDiscrete(),this._stretchEnds=u,this._catInfos=a.select(function(e,t){var n=r.child(e.key),i={data:n||e,value:e.value,isInterpolated:!1,serInfos:null,index:t};return i.serInfos=f.map(function(e){var t=n;t&&e&&(t=t.child(e.key));var r=t?t.dimensions(l.name).value(c):null;return{data:e,group:t,value:r,isNull:null==r,catInfo:i}}),i}).array(),this._serCount=f.length,this._serStates=e.range(0,this._serCount).select(function(e){return new Ct.ZeroInterpolationOperSeriesState(this,e)},this).array()}).add({interpolate:function(){for(var e;e=this._catInfos.shift();)e.serInfos.forEach(this._visitSeries,this);var t=this._newDatums;t.length&&this._data.owner.add(t)},_visitSeries:function(e,t){this._serStates[t].visit(e)},nextUnprocessedNonNullCategOfSeries:function(e){for(var t=0,n=this._catInfos.length;n>t;){var r=this._catInfos[t++],i=r.serInfos[e];if(!i.isNull)return i}}}),e.type("cdo.ZeroInterpolationOperSeriesState").init(function(e,t){this.interpolation=e,this.index=t,this._lastNonNull(null)}).add({visit:function(e){e.isNull?this._interpolate(e):this._lastNonNull(e)},_lastNonNull:function(e){return arguments.length&&(this.__lastNonNull=e,this.__nextNonNull=void 0),this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(void 0===this.__nextNonNull){var t=this.__lastNonNull,n=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(n&&t)if(this.interpolation._isCatDiscrete){var r=n.catInfo.index-t.catInfo.index;r>=2||e.assert("Must have at least one interpolation point."),this._middleIndex=~~(r/2);var i=r-1;this._isOdd=i%2>0}else{var s=+t.catInfo.value,o=+n.catInfo.value;this._middleCat=(o+s)/2}}},_interpolate:function(t){this._initInterpData();var n=this.__nextNonNull,r=this.__lastNonNull,i=n||r;if(i){var s,o=this.interpolation,u=t.catInfo;if(n&&r)if(o._isCatDiscrete){var a=u.index-r.catInfo.index;s=this._isOdd?a<this._middleIndex?r.group:n.group:a<=this._middleIndex?r.group:n.group}else{var f=+u.value;s=f<this._middleCat?r.group:n.group}else{if(!o._stretchEnds)return;s=i.group}var l=Object.create(s.atoms);e.copyOwn(l,u.data.atoms);var c=o._valDim,h=o._zeroAtom||(o._zeroAtom=c.intern(0,!0));l[c.name]=h,o._newDatums.push(new Ct.InterpolationDatum(s.owner,l,"zero",c.name))}}}),e.type("cdo.TranslationOper").init(function(t,n,r,i){this.complexTypeProj=t||e.fail.argumentRequired("complexTypeProj"),this.source=n||e.fail.argumentRequired("source"),this.metadata=r||e.fail.argumentRequired("metadata"),this.options=i||{},this._initType(),e.debug>=4&&(this._logLogicalRows=!0,this._logLogicalRowCount=0)}).add({_logLogicalRows:!1,logSource:e.abstractMethod,logLogicalRow:e.abstractMethod,_translType:"Unknown",logTranslatorType:function(){return this._translType+" data source translator"},logicalColumnCount:function(){return this.metadata.length},setSource:function(t){if(!t)throw e.error.argumentRequired("source");this.source=t},defReader:function(t){t||e.fail.argumentRequired("readerSpec");var n=e.string.is(t)?t:t.names;n=e.string.is(n)?n.split(/\s*\,\s*/):e.array.as(n);var r=e.array.as(t.indexes);r&&r.forEach(this._userUseIndex,this);var i=!!n&&!!n.length,s=t.reader;if(s)i||e.fail.argumentRequired("reader.names","Required argument when a reader function is specified."),this._userRead(s,n);else{if(i)return this._userCreateReaders(n,r);r&&r.forEach(function(e){this._userIndexesToSingleDim[e]=null},this)}return r},configureType:function(){this._configureTypeCore()},_configureTypeCore:e.abstractMethod,_initType:function(){this._userDimsReaders=[],this._userDimsReadersByDim={},this._userUsedIndexes={},this._userIndexesToSingleDim=[];var t=this.options.readers;t&&e.array.each(t,this.defReader,this);var n=e.parseDistinctIndexArray(this.options.multiChartIndexes);n&&(this._multiChartIndexes=this.defReader({names:"multiChart",indexes:n}))},_userUseIndex:function(t){t=+t;if(0>t)throw e.error.argumentInvalid("index","Invalid reader index: '{0}'.",[t]);if(e.hasOwn(this._userUsedIndexes,t))throw e.error.argumentInvalid("index","Column '{0}' of the logical table is already assigned.",[t]);return this._userUsedIndexes[t]=!0,t},_userCreateReaders:function(t,n){n?n.forEach(function(e,t){n[t]=+e}):n=[];var r,i=n.length,s=t.length;if(s>i){var o=i>0?n[i-1]+1:0;do o=this._getNextFreeLogicalColumnIndex(o),n[i]=o,this._userUseIndex(o),i++;while(s>i)}for(var u,a=i===s?s:s-1,f=0;a>f;f++)r=t[f],u=n[f],this._userIndexesToSingleDim[u]=r,this._userRead(this._propGet(r,u),r);if(s>a)for(var l=e.splitIndexedId(t[s-1]),c=l[0],h=e.nullyTo(l[1],0),p=a;i>p;p++,h++)r=e.indexedId(c,h),u=n[p],this._userIndexesToSingleDim[u]=r,this._userRead(this._propGet(r,u),r);return n},_userRead:function(t,n){e.fun.is(t)||e.fail.argumentInvalid("reader","Reader must be a function."),e.array.is(n)?n.forEach(function(e){this._readDim(e,t)},this):this._readDim(n,t),this._userDimsReaders.push(t)},_readDim:function(t,n){var r,i,s=this._userIndexesToSingleDim.indexOf(t);if(s>=0){r=this._logicalRowInfos[s];if(r&&!this.options.ignoreMetadataLabels){var o=r.label||r.name&&e.titleFromName(r.name);o&&(i={label:o})}}this.complexTypeProj.readDim(t,i),this._userDimsReadersByDim[t]=n},execute:function(e){return this.data=e,this._executeCore()},_executeCore:function(){var t=this._getDimensionsReaders();return e.query(this._getLogicalRows()).select(function(e){return this._readLogicalRow(e,t)},this)},_getLogicalRows:function(){return this.source},_getDimensionsReaders:function(){return this._userDimsReaders.slice().reverse()},_readLogicalRow:function(e,t){for(var n=this._logLogicalRows&&this._logLogicalRowBefore(e),r=t.length,i=this.data,s={};r--;)t[r].call(i,e,s);return n&&this._logLogicalRowAfter(s),s},_logLogicalRowBefore:function(t){return this._logLogicalRowCount<10?(e.log("logical row ["+this._logLogicalRowCount++ +"]: "+e.describe(t)),!0):(e.log("..."),this._logLogicalRows=!1)},_logLogicalRowAfter:function(t){var n={};for(var r in t){var i=t[r];e.object.is(i)&&(i="v"in i?i.v:"value"in i?i.value:"..."),n[r]=i}e.log("-> read: "+e.describe(n))},_propGet:function(e,t){function n(n,r){r[e]=n[t]}return n},_getNextFreeLogicalColumnIndex:function(t,n){null==t&&(t=0),null==n&&(n=1/0);for(;n>t&&e.hasOwn(this._userUsedIndexes,t);)t++;return n>t?t:-1},_getPhysicalGroupStartIndex:function(t){return e.getOwn(this._logicalRowPhysicalGroupIndex,t)},_getPhysicalGroupLength:function(t){return e.getOwn(this._logicalRowPhysicalGroupsLength,t)},_configureTypeByPhysicalGroup:function(t,n,r,i){var s=this._logicalRowPhysicalGroupIndex[t],o=this._logicalRowPhysicalGroupsLength[t],u=s+o-1,a=s;r=null==r?o:Math.min(o,r);if(r&&u>=a){n||(n=t),i||(i=1/0);for(var f,l=0;r&&i>l;){f=e.indexedId(n,l++);if(!this.complexTypeProj.isReadOrCalc(f)){a=this._getNextFreeLogicalColumnIndex(a);if(a>u)return a;this.defReader({names:f,indexes:a}),a++,r--}}}return a},_configureTypeByOrgLevel:function(e,t){var n=[],r=[];this._logicalRowInfos.forEach(function(e,t){if(!this[t]){var i=1===e.type?n:r;i&&i.push(t)}},this._userUsedIndexes),this._configureTypeByDimGroups(r,this._processDimGroupSpecs(e,!0,1/0)),this._configureTypeByDimGroups(n,this._processDimGroupSpecs(t,!1,1))},_processDimGroupSpecs:function(t,n,r){return t.map(function(t){return e.string.is(t)?{name:t,greedy:n,maxCount:r}:e.setDefaults(t,{greedy:n,maxCount:r})})},_configureTypeByDimGroups:function(e,t){if(t)for(var n,r=-1,i=t.length;++r<i&&(n=e.length);){var s=t[r],o=Math.min(s.maxCount,n),u=this._getFreeDimGroupNames(s.name,o,s.greedy);u&&(u.length,this.defReader({names:u,indexes:e.splice(0,u.length)}))}},_getFreeDimGroupNames:function(t,n,r){if(!t)return null;var i=[],s=0;null==n&&(n=1);for(;n;){var o=e.indexedId(t,s++);this.complexTypeProj.isReadOrCalc(o)?r||n--:(i.push(o),n--)}return i.length?i:null}}),e.type("cdo.MatrixTranslationOper",Ct.TranslationOper).add({_initType:function(){this.J=this.metadata.length,this.I=this.source.length,this._processMetadata(),this.base()},setSource:function(e){this.base(e),this.I=this.source.length},_knownContinuousColTypes:{numeric:1,number:1,integer:1},_processMetadata:function(){var t,n=this.options.typeCheckingMode,r=this._knownContinuousColTypes;if("none"===n)t=e.query(this.metadata).select(function(e,t){e.colIndex=t;var n=e.colType;return n&&1===r[n.toLowerCase()]?1:0}).array();else{var i="extended"===n,s=e.query(this.metadata).select(function(e,t){return e.colIndex=t,e}).where(function(e){var t=e.colType;return!t||1!==r[t.toLowerCase()]}).select(function(e){return e.colIndex}).array(),o=this.I,u=this.source,a=s.length;t=e.array.create(this.J,1);for(var f=0;o>f&&a>0;f++)for(var l=u[f],c=0;a>c;){var h=s[c],p=l[h];null!=p?(t[h]=this._getSourceValueType(p,i),s.splice(c,1),a--):c++}}this._columnTypes=t},_buildLogicalColumnInfoFromMetadata:function(e){var t=this.metadata[e];return{type:this._columnTypes[e],name:t.colName,label:t.colLabel}},_getSourceValueType:function(e,t){switch(typeof e){case"number":return 1;case"string":return t&&""!==e&&!isNaN(+e)?1:0;case"object":return e instanceof Date?1:0}return 0},logSource:function(){var t=Ct.previewRowsMax,n=Ct.previewColsMax,r=this.metadata,i=r.length,s=e.array.prepend;i>n&&(r=r.slice(0,n),r.push({colName:"("+n+"/"+i+")",colType:"..."}));var o=e.textTable(r.length+1).rowSep().row.apply(o,s(r.map(function(e){return e.colName}),["Name"])).rowSep().row.apply(o,s(r.map(function(e){return e.colLabel?'"'+e.colLabel+'"':""}),["Label"])).rowSep().row.apply(o,s(r.map(function(e){return e.colType}),["Type"])).rowSep();return e.query(this.source).take(t).each(function(t,r){i>n&&(t=t.slice(0,n)),o.row.apply(o,s(t.map(function(t){return e.describe(t)}),[r+1]))}),o.rowSep().row("("+Math.min(t,this.I)+"/"+this.I+")").rowSep(!0),"DATA SOURCE SUMMARY\n"+o()+"\n"},_logLogicalRow:function(t,n){var r=e.textTable(6).rowSep().row("Index","Kind","Type","Name","Label","Dimension").rowSep(),i=0;return t.forEach(function(e){for(var t=0,s=n[e];s>t;t++){var o=this._logicalRowInfos[i];r.row(i,e,o.type?"number":"string",o.name||"",o.label||"",this._userIndexesToSingleDim[i]||""),i++}},this),r.rowSep(!0),"LOGICAL TABLE\n"+r()+"\n"},_createPlot2SeriesKeySet:function(t,n){var r=null,i=n.length;return e.query(t).each(function(t){var s=+t;if(isNaN(s))throw e.error.argumentInvalid("plot2SeriesIndexes","Element is not a number '{0}'.",[t]);if(0>s){if(-i>=s)throw e.error.argumentInvalid("plot2SeriesIndexes","Index is out of range '{0}'.",[s]);s=i+s}else if(s>=i)throw e.error.argumentInvalid("plot2SeriesIndexes","Index is out of range '{0}'.",[s]);r||(r={}),r[n[s]]=!0}),r},_dataPartGet:function(t){function n(t,n){n[a]=e.hasOwn(i,t)?o||(o=r.intern("1")):s||(s=r.intern("0"))}var r,i,s,o,u=this,a=this.options.dataPartDimName,f=function(){i=t(),r=u.data.dimensions(a),e.debug>=3&&i&&e.log("Second axis series values: "+e.describe(e.keys(i))),f=null};this.complexTypeProj.setCalc({names:a,calculation:function(e,t){f&&f(),n(e.atoms.series.value,t)}})},_configureTypeCore:function(){["series","category","value"].forEach(function(e){this._configureTypeByPhysicalGroup(e)},this)}}),Ct.previewRowsMax=15,Ct.previewColsMax=6,e.type("cdo.CrosstabTranslationOper",Ct.MatrixTranslationOper).add({_translType:"Crosstab",logicalColumnCount:function(){return this.R+this.C+this.M},_executeCore:function(){function t(e,t){for(var n=s[e],r=0,u=o[e];u-->0;)i[n++]=t[r++]}function n(e,t){for(var n=s.M,r=o._colGroupsIndexes[t],u=o.M,a=0;u>a;a++){var f=r[a];i[n++]=null!=f?e[f]:null}}if(!this.metadata.length)return e.query();var r=this._getDimensionsReaders(),i=new Array(this.logicalColumnCount()),s=this._logicalRowCrossGroupIndex,o=this,u=e.query(this.source);if(this._colGroups&&this._colGroups.length){var a=function(s){return t("R",s),e.query(this._colGroups).select(function(e,o){return t("C",e),n(s,o),this._readLogicalRow(i,r)},this)};return u.selectMany(a,this)}return u.select(function(e){return t("R",e),this._readLogicalRow(i,r)},this)},_processMetadata:function(){this.base(),this._separator=this.options.separator||"~";var t=this.R=1;this.C=1,this.M=1,this.measuresDirection=null;var n=this.options.seriesInRows,r=this.metadata,i=this.options.compatVersion<=1,s=function(){var e=n?function(e){return e.colName}:i?function(e){return{v:e.colName}}:function(e){return{v:e.colName,f:e.colLabel}};return r.map(e)}(),o=this._logicalRowCrossGroupInfos={};if(this.options.isMultiValued){var u=e.get(this.options,"measuresInColumns",!0);if(u||null==this.options.measuresIndex){t=this.R=this._getCategoriesCount();var a=s.slice(t),f=a.length;f>0?(u?(this.measuresDirection="columns",this._processEncodedColGroups(a)):(this._colGroups=a,this._colGroupsIndexes=[],this._colGroups.forEach(function(e,t){this._colGroups[t]=this._splitEncodedColGroupCell(e),this._colGroupsIndexes[t]=[this.R+t]},this),o.M=[this._buildLogicalColumnInfoFromMetadata(t)]),this.C=this._colGroups[0].length,o.C=e.range(0,this.C).select(function(){return{type:0}}).array()):(this.C=this.M=0,o.M=[],o.C=[])}else{this.measuresDirection="rows",this.R=+this.options.measuresIndex;var l=this.options.measuresCount;null==l&&(l=1),this.M=l,this._colGroups=s.slice(this.R+1),this._colGroups.forEach(function(e,t){this._colGroups[t]=[e]},this)}}else t=this.R=this._getCategoriesCount(),this._colGroups=s.slice(t),this._colGroupsIndexes=new Array(this._colGroups.length),this._colGroups.forEach(function(e,n){this._colGroups[n]=[e],this._colGroupsIndexes[n]=[t+n]},this),o.C=[{type:0}],o.M=[{type:this._columnTypes[t]}];o.R=e.range(0,this.R).select(this._buildLogicalColumnInfoFromMetadata,this).array();var c=this._logicalRowCrossGroupIndex={C:n?this.R:0,R:n?0:this.C,M:this.C+this.R},h=this._logicalRowInfos=new Array(this.logicalColumnCount());e.eachOwn(c,function(e,t){o[t].forEach(function(t,n){h[e+n]=t})}),this._logicalRowPhysicalGroupsLength={series:n?this.R:this.C,category:n?this.C:this.R,value:this.M},this._logicalRowPhysicalGroupIndex={series:0,category:this._logicalRowPhysicalGroupsLength.series,value:this.C+this.R}},logLogicalRow:function(){return this._logLogicalRow(["C","R","M"],{C:this.C,R:this.R,M:this.M})},_getCategoriesCount:function(){var t=this.options.categoriesCount;return null!=t&&(!isFinite(t)||0>t)&&(t=null),null==t&&(t=e.query(this._columnTypes).whayl(function(e){return 0===e}).count(),t||(t=1)),t},_splitEncodedColGroupCell:function(e){var t,n=e.v;return null==n?n=[]:(n=n.split(this._separator),t=e.f,t&&(t=t.split(this._separator))),n.map(function(e,n){return{v:e,f:t&&t[n]}})},_processEncodedColGroups:function(t){for(var n,r=t.length||e.assert("Must have columns"),i=this.R,s=[],o={},u=[],a=0;r>a;a++){var f,l,c,h,p=t[a],d=p.v,v=p.f,m=d.lastIndexOf(this._separator);0>m?(f=d,l=v,d="",c=[]):(f=d.substring(m+1),d=d.substring(0,m),c=d.split(this._separator),null!=v&&(h=v.split(this._separator),l=h.pop()),c.forEach(function(e,t){var n=h&&h[t];c[t]={v:e,f:n}})),n&&n.encValues===d?n.measureNames.push(f):(n={startIndex:a,encValues:d,values:c,measureNames:[f]},s.push(n));var g=a-n.startIndex,y=e.getOwn(o,f);y?g>y.groupIndex&&(y.groupIndex=g):(o[f]=y={name:f,label:l,type:this._columnTypes[i+a],groupIndex:g,index:a},u.push(y))}u.sort(function(t,n){return e.compare(t.groupIndex,n.groupIndex)||e.compare(t.index,n.index)}),u.forEach(function(e,t){e.groupIndex=t});var b=s.length,w=new Array(b),E=new Array(b),S=u.length;s.map(function(e,t){w[t]=e.values;var n=e.startIndex,r=E[t]=new Array(S);e.measureNames.forEach(function(e,t){var s=o[e].groupIndex;r[s]=i+n+t})}),this._colGroups=w,this._colGroupsIndexes=E,this._logicalRowCrossGroupInfos.M=u,this.M=S},configureType:function(){if("rows"===this.measuresDirection)throw e.error.notImplemented();var t=this.options.dataPartDimName;if(t&&1===this.C&&!this.complexTypeProj.isReadOrCalc(t)){var n=this.options.plot2DataSeriesIndexes;if(null!=n){var r=this._colGroups.map(function(e){return""+e[0].v});this._plot2SeriesKeySet=this._createPlot2SeriesKeySet(n,r)}}this.base();if(this._plot2SeriesKeySet){var i=this._userDimsReadersByDim.series;if(i){var s=e.fun.constant(this._plot2SeriesKeySet);this._dataPartGet(s)}}}}),e.type("cdo.RelationalTranslationOper",Ct.MatrixTranslationOper).add({M:0,C:0,S:0,_translType:"Relational",_processMetadata:function(){this.base();var t,n,r,i,s=this.metadata,o=this.J,u=this.options.categoriesCount;null!=u&&(!isFinite(u)||0>u)&&(u=0),this.options.isMultiValued&&(n=e.parseDistinctIndexArray(this.options.measuresIndexes,0,o-1),r=n?n.length:0);if(null==r)if(o>0&&3>=o&&(null==u||1===u))r=1,n=[o-1],u=o>=2?1:0,t=o>=3?1:0,i=u+t;else if(null!=u&&u>=o)i=u=o,t=r=0;else{var a=null!=u?o-u:1/0;n=e.query(s).where(function(e,t){return 0!==this._columnTypes[t]},this).select(function(e){return e.colIndex}).take(a).array(),r=n.length}null==i&&(i=o-r,0===i?t=u=0:null!=u?u>i?(u=i,t=0):t=i-u:(t=i>1?1:0,u=i-t));var f=this.options.seriesInRows,l=[];i&&(t&&!f&&l.push({name:"S",count:t}),u&&l.push({name:"C",count:u}),t&&f&&l.push({name:"S",count:t})),r&&l.push({name:"M",count:r});var c=e.range(0,o).array();n&&n.slice().sort(e.descending).forEach(function(e){c.splice(e,1)});var h={};l.forEach(function(e){var t=e.count,r=e.name;h[r]=e,e.indexes=n&&"M"===r?n:c.splice(0,t)}),this.M=r,this.S=t,this.C=u;var p=[];["S","C","M"].forEach(function(t){var n=h[t];n&&e.array.append(p,n.indexes)}),this._logicalRowInfos=p.map(this._buildLogicalColumnInfoFromMetadata,this),this._logicalRowPerm=p,this._logicalRowPhysicalGroupsLength={series:this.S,category:this.C,value:this.M},this._logicalRowPhysicalGroupIndex={series:0,category:this._logicalRowPhysicalGroupsLength.series,value:this.S+this.C}},logLogicalRow:function(){return this._logLogicalRow(["S","C","M"],{S:this.S,C:this.C,M:this.M})},configureType:function(){this.base();var e=this.options.dataPartDimName;if(e&&!this.complexTypeProj.isReadOrCalc(e)){var t=this.options.plot2DataSeriesIndexes;if(null!=t){var n=this._userDimsReadersByDim.series;n&&K.call(this,t,n)}}},_executeCore:function(){var n=this._getDimensionsReaders(),r=this._logicalRowPerm;return e.query(this._getLogicalRows()).select(function(e){return e=t.permute(e,r),this._readLogicalRow(e,n)},this)}});var Mt=Ct.numberFormatStyle=function(e,t){return new Dt(e,t)},_t=e.priv.key().property(),Dt=Mt.of=e("cdo.NumberFormatStyle",e.FieldsBase.extend({init:function(){e.classify(this,Mt)},fields:{decimal:{cast:String,fail:e.falsy},group:{cast:String},groupSizes:{fail:e.array.empty},negativeSign:{cast:String,fail:e.falsy},currency:{cast:String,fail:e.falsy},integerPad:{cast:String,fail:e.falsy},fractionPad:{cast:String,fail:e.falsy},abbreviations:{fail:e.array.empty}},methods:{tryConfigure:function(t){if(e.is(t,Mt))return!!this.integerPad(t.integerPad()).fractionPad(t.fractionPad()).decimal(t.decimal()).group(t.group()).groupSizes(t.groupSizes()).negativeSign(t.negativeSign()).currency(t.currency()).abbreviations(t.abbreviations());if(e.string.is(t)){var n=zt(t);if(n)return!!e.configure(this,n.number().style())}}}},{fieldsPrivProp:_t}));e.classify(Dt.prototype,Mt),Mt.defaults=Mt({integerPad:"0",fractionPad:"0",decimal:".",group:",",groupSizes:[3],abbreviations:["k","m","b","t"],negativeSign:"-",currency:"$"});var Pt=Ct.numberFormat=function(t,n){function r(e){return s||(s=G(i.mask)),s(e,_t(i.style))}var i,s;return r.format=r,r.tryConfigure=Q,e.classify(r,Pt),i=e.instance(r,t,n,{mask:{cast:String,change:function(){s=null}},style:{cast:e.createAs(Dt),factory:Mt}}),r};Pt.defaults=Pt().style(Mt()),Pt.cacheLimit=20;var Ht={},Bt=0,jt=Ct.dateFormat=function(t,n){function r(e){return s||(s=gt(i.mask)),s(e)}var i,s;return r.format=r,r.tryConfigure=mt,e.classify(r,jt),i=e.instance(r,t,n,{mask:{cast:String,change:function(){s=null}}}),arguments.length&&e.configure(r,arguments[0]),r};jt.defaults=jt();var Ft=Ct.customFormat=function(t,n){function r(){var e=i.formatter;return String(e&&e.apply(null,arguments))}var i;return r.format=r,r.tryConfigure=yt,e.classify(r,Ft),i=e.instance(r,t,n,{formatter:{cast:e.fun.as}}),r};Ft.defaults=Ft().formatter(bt);var It="en-us",qt=Ct.format=function(t,n){function r(){}r.tryConfigure=Et;var i;if(!n&&e.string.is(t)){var s=zt(t);i=s.languageCode,s&&(n=s,t=null)}return r.languageCode=i?i:It,e.classify(r,qt),e.instance(r,t,n,{number:wt(Pt),percent:wt(Pt),date:wt(jt),any:{cast:e.createAs(Ft),factory:Ft}}),r};qt.defaults=qt({number:"#,0.##",percent:"#,0.#%",date:"%Y/%m/%d",any:Ft()});var Rt={},Ut=Rt[It]=qt.defaults,zt=Ct.format.language=function(t,n){var r=arguments.length;if(!r)return Ut;if(1==r){if(void 0===t)throw e.error.operationInvalid("Undefined 'style' value.");if(null===t||""===t)t=It;else{if(e.is(t,qt))return Ut=t;if("object"==typeof t){for(var i in t)St(i,e.getOwn(t,i));return Ct.format}}return Nt(t,!0)}if(2==r)return St(t,n);throw e.error.operationInvalid("Wrong number of arguments")};return zt({"en-gb":{number:{mask:"#,0.##",style:{integerPad:"0",fractionPad:"0",decimal:".",group:",",groupSizes:[3],abbreviations:["k","m","b","t"],negativeSign:"-",currency:""}},date:{mask:"%d/%m/%Y"}},"pt-pt":{number:{mask:"#,0.##",style:{integerPad:"0",fractionPad:"0",decimal:",",group:" ",groupSizes:[3],abbreviations:["k","m","b","t"],negativeSign:"-",currency:""}},date:{mask:"%d/%m/%Y"}}}),Ct}),pen.define("cdf/dashboard/Utils",["../Logger","amd!../lib/underscore","../lib/moment","../lib/CCC/cdo","../lib/jquery","amd!../lib/queryParser"],function(e,t,n,r,i){function a(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n][0]]=e[n][1]);return t}function f(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t}var s={},o=undefined,u=undefined;return s.escapeHtml=function(e){var t=e.replace(/&(?!amp;)(?!lt;)(?!gt;)(?!#34;)(?!#39;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;");return t},s.getPathParameter=function(e){e=e||window.location.pathname,e=decodeURIComponent(e);var t=e.match("/:(.[^/]+)(.*)/");if(t&&t.length>1)return(":"+t[1]).replace(/:/g,"/")},s.getLocationSearchString=function(){return window.location.search},s.getQueryParameter=function(e){return u===undefined&&(u=i.parseQuery(this.getLocationSearchString())),u[e]||""},s.numberFormat=function(e,t,n){o===undefined&&(o=r.format.language().createChild());if(n!=null){var i=r.format.language(n).createChild();return i.number({mask:t}),i.number()(e)}return o.number({mask:t}),o.number()(e)},s.configLanguage=function(e,t){var i=t.dateLocale||{},s=n.locale();delete t.dateLocale,r.format.language(e,t),n.locale(e,i),n.locale(s)},s.dateFormat=function(e,t,r){var i=n(e);return i.isValid()?(r!=null&&(n.localeData(r)===null&&(r="en-US"),i.locale(r)),i.format(t)):i.toDate()},s.dateParse=function(e,t){return n(e,t).toDate()},s.propertiesArrayToObject=function(e){return t.isArray(e)&&a(e)||t.isObject(e)&&e||undefined},s.objectToPropertiesArray=function(e){return t.isArray(e)&&e||t.isObject(e)&&f(e)||undefined},s.getURLParameters=function(e){if(e.indexOf("?")>0){var t=e.split("?"),n=t[1].split("&"),r=[];for(var i=0;i<n.length;i++){var s=n[i].split("=");if(s[0].indexOf("param",0)==0){var o=[s[0].substring(5,s[0].length),unescape(s[1])];r.push(o)}}}return r},s.toFormatedString=function(e){e+="";var t=e.split("."),n=t[0],r=t.length>1?"."+t[1]:"",i=/(\d+)(\d{3})/;while(i.test(n))n=n.replace(i,"$1,$2");return n+r},s.doCsvQuoting=function(e,t,n){var r='"';if(t==null)return e;if(e==null)return null;e.indexOf(r)>=0&&(e=e.replace(r,r.concat(r)));if(n||e.indexOf(t)>=0)e=r.concat(e,r);return e},s.ev=function(e){return typeof e=="function"?e():e},s.post=function(e,t){var n='<form action="'+e+'" method="post">';for(var r in t){var o=s.ev(t[r]);typeof o=="string"&&(o=o.replace(/"/g,"'")),n+='"<input type="hidden" name="'+r+'" value="'+o+'"/>'}n+="</form>",i(n).appendTo("body").submit().remove()},s.clone=function(e){var t=e instanceof Array?[]:{};for(var n in e){var r=e[n];if(typeof r=="object")if(r instanceof Array){t[n]=[];for(var i=0;i<r.length;i++)typeof r[i]!="object"?t[n].push(r[i]):t[n].push(this.clone(r[i]))}else t[n]=this.clone(r);else t[n]=r}return t},s.addArgs=function(e){e!=undefined&&(this.args=getURLParameters(e))},s.getArgValue=function(e){for(var t=0;t<this.args.length;t++)if(this.args[t][0]==e)return this.args[t][1];return undefined},s.eachValuesArray=function(e,t,n,r){typeof t=="function"&&(r=n,n=t,t=null);var i=!!t&&!!t.valueAsId;for(var s=0,o=0,u=e.length;s<u;s++){var a=e[s];if(a&&a.length){var f=a[0],l,c,h=undefined;a.length>1?(i&&(h=f),c=""+a[1],l=i||f==null?c:""+f):l=c=""+f;if(n.call(r,l,c,h,o,s)===!1)return!1;o++}}return!0},s.parseMultipleValues=function(e){if(e!=null&&e!==""){if(this.isArray(e))return e;if(typeof e=="string")return e.split("|")}return null},s.normalizeValue=function(e){return e===""||e==null?null:this.isArray(e)&&!e.length?null:e},s.isArray=function(e){return!!e&&(e instanceof Array||typeof e=="object"&&e.join&&e.length!=null)},s.equalValues=function(e,t){e=this.normalizeValue(e),t=this.normalizeValue(t);if(e===t)return!0;if(this.isArray(e)&&this.isArray(t)){var n=e.length;if(n!==t.length)return!1;while(n--)if(!this.equalValues(e[n],t[n]))return!1;return!0}return e==t},s.hsvToRgb=function(e,t,n){n/=100,t/=100;var r=e%360/60,i=n*t,s=n-i,o=Math.abs(r%2-1),u=n*(1-t*o),a=n,f;switch(~~r){case 0:f=[a,u,s];break;case 1:f=[u,a,s];break;case 2:f=[s,a,u];break;case 3:f=[s,u,a];break;case 4:f=[u,s,a];break;case 5:f=[a,s,u]}return f.forEach(function(e,t){f[t]=Math.min(255,Math.round(e*256))}),"rgb("+f.join(",")+")"},s}),pen.define("cdf/components/BaseComponent",["../lib/Base","../lib/jquery","amd!../lib/underscore","amd!../lib/backbone","../Logger","../dashboard/Utils"],function(e,t,n,r,i,s){var o=e.extend(r.Events).extend({visible:!0,isManaged:!0,timerStart:0,timerSplit:0,elapsedSinceSplit:-1,elapsedSinceStart:-1,logColor:undefined,constructor:function(e){this.extend(e)},placeholder:function(e){var n=this.htmlObject;return n?t("#"+n+(e?" "+e:"")):t()},focus:function(){try{this.placeholder("*:first").focus()}catch(e){}},_doAutoFocus:function(){this.autoFocus&&(delete this.autoFocus,this.focus())},clear:function(){this.placeholder().empty()},copyEvents:function(e,t){n.each(t,function(t,n){var r=t,i=t.tail;while((r=r.next)!==i)e.on(n,r.callback,r.context)})},clone:function(e,n,r){var i,s,o;return s=this.dashboard,o=this._events,delete this.dashboard,delete this._events,i=t.extend(!0,{},this),i.dashboard=this.dashboard=s,this._events=o,this.copyEvents(i,o),i.parameters&&(i.parameters=i.parameters.map(function(t){return t[1]in e?[t[0],e[t[1]]]:t})),i.components&&(i.components=i.components.map(function(e){return e in n?n[e]:e})),i.htmlObject=i.htmlObject?r[i.htmlObject]:undefined,i.listeners&&(i.listeners=i.listeners.map(function(t){return t in e?e[t]:t})),i.parameter&&i.parameter in e&&(i.parameter=e[i.parameter]),i},getAddIn:function(e,t){if(!this.dashboard)return i.warn("dashboard not yet defined, can't call getAddIn"),!1;var n=typeof this.type=="function"?this.type():this.type;return this.dashboard.getAddIn(n,e,t)},hasAddIn:function(e,t){if(!this.dashboard)return i.warn("dashboard not yet defined, can't call hasAddIn"),!1;var n=typeof this.type=="function"?this.type():this.type;return this.dashboard.hasAddIn(n,e,t)},getValuesArray:function(){var e;if(typeof this.valuesArray=="undefined"||this.valuesArray.length==0){if(typeof this.queryDefinition!="undefined"){var n=this.queryDefinition.queryType=="sql"?"sql":"none";this.queryDefinition.queryType=="mdx"&&!this.valueAsId?n="mdx":this.queryDefinition.dataAccessId!==undefined&&!this.valueAsId&&(n="cda"),QueryComponent.makeQuery(this);var r=new Array;for(s in this.result)if(this.result.hasOwnProperty(s))switch(n){case"sql":r.push([this.result[s][0],this.result[s][1]]);break;case"mdx":r.push([this.result[s][1],this.result[s][0]]);break;case"cda":r.push([this.result[s][0],this.result[s][1]]);break;default:r.push([this.result[s][0],this.result[s][0]])}return r}if(!this.dashboard)return i.warn("dashboard not yet defined, returning an empty array"),[];var s=new Array(this.parameters?this.parameters.length:0);for(var o=0,u=s.length;o<u;o++){var a=this.parameters[o][0],f=this.parameters[o][1]==""||this.parameters[o][1]=="NIL"?this.parameters[o][2]:this.dashboard.getParameterValue(this.parameters[o][1]);s[o]=[a,f]}var l=this;if(this.url){var c={};t.each(s,function(e,t){c[t[0]]=t[1]}),e=this.dashboard.parseXActionResult(l,this.dashboard.urlAction(this.url,c))}else e=this.dashboard.callPentahoAction(l,this.solution,this.path,this.action,s,null);return this.parseArray(e,!1)}return this.valuesArray},parseArray:function(e,n){if(e===null)return[];if(t(e).find("CdaExport").size()>0)return this.parseArrayCda(e,n);var r=new Array,i=t(e).find("COLUMN-HDR-ITEM");if(n&&i.size()>0){var s=new Array;i.each(function(){s.push(t(this).text())}),r.push(s)}var o=t(e).find("DATA-ROW");return o.each(function(){var e=new Array;t(this).children("DATA-ITEM").each(function(){e.push(t(this).text())}),r.push(e)}),r},parseArrayCda:function(e,n){var r=new Array,i=t(e).find("ColumnMetaData");if(i.size()>0&&n){var s=new Array;i.each(function(){s.push(t(this).attr("name"))}),r.push(s)}var o=t(e).find("Row");return o.each(function(){var e=new Array;t(this).children("Col").each(function(){e.push(t(this).text())}),r.push(e)}),r},setAddInDefaults:function(e,t,n){i.log("BaseComponent.setAddInDefaults was removed. You should call setAddInOptions or dashboard.setAddInDefaults")},setAddInOptions:function(e,t,n){this.addInOptions||(this.addInOptions={}),this.addInOptions[e]||(this.addInOptions[e]={}),this.addInOptions[e][t]=n},getAddInOptions:function(e,t){var n=null;try{n=this.addInOptions[e][t]}catch(r){}return n||{}},startTimer:function(){this.timerStart=new Date,this.timerSplit=new Date},splitTimer:function(){(this.elapsedSinceStart===-1||this.elapsedSinceSplit===-1)&&this.startTimer();var e=new Date;return this.elapsedSinceStart=e.getTime()-this.timerStart.getTime(),this.elapsedSinceSplit=e.getTime()-this.timerSplit.getTime(),this.timerSplit=e,this.getTimerInfo()},formatTimeDisplay:function(e){return Math.log(e)/Math.log(10)>=3?Math.round(e/100)/10+"s":e+"ms"},getTimerInfo:function(){return{timerStart:this.timerStart,timerSplit:this.timerSplit,elapsedSinceStart:this.elapsedSinceStart,elapsedSinceStartDesc:this.formatTimeDisplay(this.elapsedSinceStart),elapsedSinceSplit:this.elapsedSinceSplit,elapsedSinceSplitDesc:this.formatTimeDisplay(this.elapsedSinceSplit)}},getLogColor:function(){if(this.logColor)return this.logColor;var e=function(e){var t=0;if(e.length==0)return t;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t},t=e(this.name).toString(),n=t.substr(t.length-6,2)||0,r=t.substr(t.length-2,2)||0,i=t.substr(t.length-4,2)||0;return this.logColor=s.hsvToRgb(3.6*n,.75*r,45+.35*i),this.logColor}});return o}),pen.define("common-ui/prompting/components/CompositeComponent",["cdf/lib/jquery","cdf/components/BaseComponent","cdf/dashboard/Utils"],function(e,t,n){return t.extend({components:undefined,executeAtStart:!0,getComponents:function(){return this.components},clear:function(){this.components&&e.each(this.components,function(e,t){t.clear()}),this.base()},remove:function(){this.placeholder().remove()},getClassFor:function(e){return e.cssClass},getMarkupFor:function(e){var t=this.getClassFor(e),n='<div id="'+e.htmlObject+'"';return t&&(n+=' class="'+t+'"'),n+="></div>",n},update:function(){var t="";this.label!==undefined&&(t+="<fieldset>",this.label.length>0&&(t+="<legend>"+n.escapeHtml(this.label)+"</legend>"),t+="<div>"),this.components&&this.components.length>0&&(t+=this.updateInternal()),this.label!==undefined&&(t+="</div></fieldset>");var r=e("#"+this.htmlObject);r.html(t),this.cssClass&&r.addClass(this.cssClass)},updateInternal:function(){var t="";return e.each(this.components,function(e,n){t+=this.getMarkupFor(n)}.bind(this)),t}})}),pen.define("common-ui/prompting/components/PromptLayoutComponent",["./CompositeComponent"],function(e){return e.extend({getClassFor:function(e){if(!e.param)return;return"parameter"}})}),pen.define("common-ui/prompting/components/ScrollingPromptPanelLayoutComponent",["./PromptLayoutComponent"],function(e){return e.extend({update:function(){if(this.components){var e=$("#"+this.htmlObject);if(this.components.length==0){e.empty();return}var t='<div class="prompt-panel">',n='<div class="submit-panel">';$.each(this.components,function(e,r){r.promptType==="submit"?n+=this.getMarkupFor(r):t+=this.getMarkupFor(r)}.bind(this)),t+="</div>"+n+"</div>",e.html(t)}}})}),pen.define("common-ui/prompting/builders/PromptPanelBuilder",["cdf/lib/Base","../components/ScrollingPromptPanelLayoutComponent"],function(e,t){return e.extend({build:function(e){var n="prompt"+e.guid;return new t({name:n,type:"ScrollingPromptPanelLayoutComponent",htmlObject:e.destinationId,promptPanel:e,components:e.buildPanelComponents(),postExecution:function(){e._ready()}})}})}),pen.define("common-ui/prompting/components/TableBasedPromptLayoutComponent",["./PromptLayoutComponent"],function(e){return e.extend({buildComponentCell:function(e){return"<td align='left' style='vertical-align: top;'><div id='"+e.htmlObject+"'></div></td>"},getMarkupFor:function(e){throw"TableBasedPromptLayoutComponent should not be used directly."},updateInternal:function(){var e='<table cellspacing="0" cellpadding="0" class="parameter-container" style="width: 100%;">';return e+='<tr><td><div><table cellspacing="0" cellpadding="0">',e+=this.getMarkupFor(this.components),e+"</table></div></td></tr></table>"}})}),pen.define("common-ui/prompting/components/HorizontalTableBasedPromptLayoutComponent",["./TableBasedPromptLayoutComponent"],function(e){return e.extend({getMarkupFor:function(e){var t="<tr>";return $.each(e,function(e,n){var r=this.getClassFor(n);t+='<td align="left" style="vertical-align: top;"><div id="'+n.htmlObject+'"',r&&(t+=' class="'+r+'"'),t+="></div></td>"}.bind(this)),t+"</tr>"}})}),pen.define("common-ui/prompting/components/FlowPromptLayoutComponent",["cdf/lib/jquery","./PromptLayoutComponent"],function(e,t){return t.extend({update:function(){e("#"+this.htmlObject).addClass("flow"),this.base()}})}),pen.define("common-ui/prompting/components/VerticalTableBasedPromptLayoutComponent",["./TableBasedPromptLayoutComponent"],function(e){return e.extend({getMarkupFor:function(e){var t="";return $.each(e,function(e,n){var r=this.getClassFor(n);t+='<tr><td><div id="'+n.htmlObject+'"',r&&(t+=' class="'+r+'"'),t+="></div></td></tr>"}.bind(this)),t}})}),pen.define("common-ui/prompting/builders/ParameterGroupPanelBuilder",["cdf/lib/Base","../components/HorizontalTableBasedPromptLayoutComponent","../components/FlowPromptLayoutComponent","../components/VerticalTableBasedPromptLayoutComponent"],function(e,t,n,r){return e.extend({_layoutTypes:{horizontal:"HorizontalTableBasedPromptLayoutComponent",flow:"FlowPromptLayoutComponent",vertical:"VerticalTableBasedPromptLayoutComponent"},_lookupPromptType:function(e){switch(e.layout){case"horizontal":return this._layoutTypes.horizontal;case"flow":return this._layoutTypes.flow;default:return this._layoutTypes.vertical}},build:function(e){var i=e.promptPanel.generateWidgetGUID(),s=undefined,o={type:this._lookupPromptType(e.promptPanel.paramDefn),name:e.paramGroup.name,htmlObject:i,promptPanel:e.promptPanel,label:s,components:e.components,cssClass:"parameter-wrapper"};switch(o.type){case this._layoutTypes.horizontal:return new t(o);case this._layoutTypes.flow:return new n(o);case this._layoutTypes.vertical:return new r(o)}}})}),pen.define("common-ui/prompting/builders/ParameterWidgetBuilderBase",["cdf/lib/Base"],function(e){return e.extend({build:function(e){var t=e.promptPanel.generateWidgetGUID();return{promptType:"prompt",executeAtStart:!0,param:e.param,name:t,htmlObject:t,type:undefined,parameter:e.promptPanel.getParameterName(e.param),postExecution:function(){this.base();var e=this.param.attributes.tooltip;e&&$("#"+this.htmlObject).attr("title",e)}}}})}),pen.define("common-ui/prompting/components/PanelComponent",["./CompositeComponent"],function(e){return e.extend({getClassFor:function(e){return undefined},getMarkupFor:function(e){var t=this.getClassFor(e),n='<div id="'+e.htmlObject+'"';return t&&(n+=' class="'+t+'"'),n+="></div>",n}})}),pen.define("common-ui/prompting/components/ParameterPanelComponent",["./PanelComponent"],function(e){return e.extend({getClassFor:function(e){if(e.promptType==="label")return"parameter-label"},removeErrorClass:function(){var e=this.placeholder();e.removeClass("error")}})}),pen.define("common-ui/prompting/builders/ParameterPanelBuilder",["./ParameterWidgetBuilderBase","../components/ParameterPanelComponent"],function(e,t){return e.extend({build:function(e){var n=this.base(e),r="panel-"+n.name;return $.extend(n,{name:r,htmlObject:r,type:"ParameterPanelComponent",executeAtStart:!0,components:e.components,param:e.param}),new t(n)}})}),pen.define("common-ui/prompting/builders/SubmitPanelBuilder",["cdf/lib/Base","../components/FlowPromptLayoutComponent"],function(e,t){return e.extend({build:function(e){var n=e.promptPanel.generateWidgetGUID();return new t({type:"FlowPromptLayoutComponent",promptType:"submit",name:n,htmlObject:n,executeAtStart:!0,components:[e.promptPanel.createWidgetForSubmitComponent()]})}})}),pen.define("common-ui/prompting/components/ScopedPentahoButtonComponent",["cdf/components/BaseComponent","cdf/lib/jquery"],function(e,t){return e.extend({update:function(){this.registerSubmitClickEvent()},registerSubmitClickEvent:function(){if(!this.viewReportButtonRegistered){var e=t("#"+this.htmlObject).empty();t("<button type='button' class='pentaho-button'/>").text(this.label).bind("mousedown",this.expressionStart.bind(this)).bind("click",function(){this.expression(!1)}.bind(this)).appendTo(e)}},expression:function(e){},expressionStart:function(){}})}),pen.define("common-ui/prompting/components/SubmitPromptComponent",["./ScopedPentahoButtonComponent"],function(e){return e.extend({update:function(){this.base();var e=this.promptPanel;if(this.paramDefn.autoSubmit==undefined){var t='<label class="auto-complete-checkbox"><input type="checkbox"'+(e.autoSubmit?' checked="checked"':"")+" />"+this.autoSubmitLabel+"</label>";$(t).appendTo($("#"+this.htmlObject)).bind("click",function(t){e.autoSubmit=t.target.checked})}(e.forceAutoSubmit||e.autoSubmit)&&this.expression(!0)},expression:function(e){this.promptPanel._submit({isInit:e})},expressionStart:function(){this.promptPanel._submitStart()}})}),pen.define("common-ui/prompting/builders/SubmitComponentBuilder",["cdf/lib/Base","../components/SubmitPromptComponent"],function(e,t){return e.extend({build:function(e){var n=e.promptPanel.generateWidgetGUID();return new t({promptType:"submit",type:"SubmitPromptComponent",name:n,htmlObject:n,label:e.promptPanel.getString("submitButtonLabel","Submit"),autoSubmitLabel:e.promptPanel.getString("autoSubmitLabel","Auto-Submit"),promptPanel:e.promptPanel,paramDefn:e.promptPanel.paramDefn,executeAtStart:!0})}})}),pen.define("cdf/components/TextComponent",["./BaseComponent"],function(e){var t=e.extend({update:function(){this.placeholder().html(this.expression())}});return t}),pen.define("common-ui/prompting/builders/LabelBuilder",["cdf/dashboard/Utils","cdf/components/TextComponent","./ParameterWidgetBuilderBase"],function(e,t,n){return n.extend({build:function(n){var r=this.base(n),i=r.name+"-label",s=e.escapeHtml(n.param.attributes.label||n.param.name);return $.extend(r,{promptType:"label",name:i,htmlObject:i,type:"TextComponent",expression:function(){return s}}),delete r.parameter,new t(r)}})}),pen.define("common-ui/prompting/builders/ErrorLabelBuilder",["./LabelBuilder"],function(e){return e.extend({build:function(e){var t=this.base(e),n=e.errorMessage;return t.isErrorIndicator=!0,t.expression=function(){return n},t}})}),pen.define("cdf/components/UnmanagedComponent",["./BaseComponent","amd!../lib/underscore","../lib/jquery","../Logger"],function(e,t,n,r){var i=e.extend({isManaged:!1,isRunning:!1,preExec:function(){this.runCounter==null&&(this.runCounter=0);var e=!0;if(typeof this.preExecution=="function")try{var t=this.preExecution();t!==undefined&&!t&&(e=!1)}catch(n){e=!1,this.failExec(n)}return this.trigger("cdf cdf:preExecution",this,e),e},postExec:function(){typeof this.postExecution=="function"&&this.postExecution(),this.trigger("cdf cdf:postExecution",this)},postFetchData:function(e){if(typeof this.postFetch=="function"){var t=this.postFetch(e);e=t===undefined?e:t,this.trigger("cdf cdf:postFetch",this,e)}return e},drawTooltip:function(){this.htmlObject&&this.tooltip&&(this._tooltip=typeof this.tooltip=="function"?this.tooltip():this.tooltip)},showTooltip:function(){var e;this.htmlObject&&(e=this._tooltip)!==undefined&&this.placeholder().attr("title",e).tooltip({delay:0,track:!0,fade:250,content:e})},beginExec:function(){var e=this.preExec();return e&&this._maybeBlock(),e},failExec:function(e){if(e&&"responseText"in e){var t=this.dashboard.parseServerError.apply(this.dashboard,arguments);this.error(t.msg,t.error)}else this.error(null,e)},endExec:function(){try{this.drawTooltip(),this.postExec(),this.showTooltip(),this._maybeUnblock()}catch(e){this.failExec(e)}},execute:function(e){if(this.beginExec())try{e.call(this)}catch(t){this.failExec(t)}},synchronous:function(e,n){function r(){try{e.call(this,n||[])}catch(t){this.failExec(t);return}this.endExec()}if(!this.beginExec())return;setTimeout(t.bind(r,this),10)},triggerQuery:function(e,t,n){this.beginQuery(e,function(e){t(e),this.endExec()},n)},beginQuery:function(e,t,n){this.execute(function(){var r=this._setQuery(e,n);r.fetchData(this.parameters,this.getSuccessHandler(t,undefined,this._maybeUnblock),this.getErrorHandler())})},triggerAjax:function(e,r,i,s){var o=n.extend({},s);typeof i!="function"?(i=r,t.extend(o,e)):t.extend(o,{url:e,data:r}),this.beginAjax(o,function(e){i.call(this,e),this.trigger("cdf cdf:render",this,e),this.endExec()})},beginAjax:function(e,t){this.execute(function(){var r=n.extend({async:!0},e,{success:this.getSuccessHandler(t,undefined,this._maybeUnblock),error:this.getErrorHandler()});n.ajax(r)})},_setQuery:function(e,n){var r=this.queryState=this.query=this.dashboard.getQuery(e),i={async:!0};return n&&n.ajax&&t.extend(i,n.ajax),r.setAjaxOptions(i),n&&n.pageSize&&r.setPageSize(n.pageSize),r},callCounter:function(){return++this.runCounter},getSuccessHandler:function(e,n,r,i){function s(t){if(e>=this.runCounter)try{var s=this.postFetchData(t);n.call(this,s)}catch(o){this.failExec(o)}else i&&i.call(this,t);typeof r=="function"&&r.call(this)}return arguments.length===1?(n=e,e=this.callCounter()):typeof e=="function"&&(i=r,r=n,n=e,e=this.callCounter()),t.bind(s,this)},getErrorHandler:function(){return t.bind(this.failExec,this)},error:function(e,t){e||(e=this.dashboard.getErrorObj("COMPONENT_ERROR").msg),this._maybeUnblock(),this.errorNotification({msg:e,error:t}),this.trigger("cdf cdf:error",this,e,t||null),t&&r.log(t,"error")},errorNotification:function(e,t){t||(t=this.htmlObject?this.placeholder():undefined);var n=this.name.replace("render_","");e.msg=e.msg+" ("+n+")",this.dashboard.errorNotification(e,t)},block:function(){this.isRunning||(this.dashboard.incrementRunningCalls(),this.isRunning=!0)},unblock:function(){this.isRunning&&(this.dashboard.decrementRunningCalls(),this.isRunning=!1)},isSilent:function(){return!!this.lifecycle&&!!this.lifecycle.silent},_maybeBlock:function(){this.isSilent()||this.block()},_maybeUnblock:function(){this.isSilent()||this.unblock()}});return i}),pen.define("cdf/components/InputBaseComponent",["./UnmanagedComponent","amd!../lib/underscore","../dashboard/Utils"],function(e,t,n){var r=e.extend({update:function(){var e=this.queryDefinition;if(this.valuesArray&&this.valuesArray.length>0){var n=t.bind(function(){this.draw(this.valuesArray)},this);this.synchronous(n)}else if(e){var n=t.bind(function(e){var t;this.valueAsId?t=e.resultset.map(function(e){return[e[0],e[0]]}):t=e.resultset,this.draw(t)},this);this.triggerQuery(e,n)}else{var n=t.bind(function(){var e=this.getValuesArray();this.draw(e)},this);this.synchronous(n)}},_getParameterValue:function(){return n.normalizeValue(n.ev(this.dashboard.getParameterValue(this.parameter)))}});return r}),pen.define("common-ui/util/require-css/normalize",[],function(){function s(e,i,s){if(e.match(r)||e.match(n))return e;e=t(e);var a=s.match(n),f=i.match(n);return f&&(!a||a[1]!=f[1]||a[2]!=f[2])?o(e,i):u(o(e,i),s)}function o(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));if(e.match(r)||e.match(n))return e;var i=t.split("/"),s=e.split("/");i.pop();while(curPart=s.shift())curPart==".."?i.pop():i.push(curPart);return i.join("/")}function u(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var e=/([^:])\/+/g,t=function(t){return t.replace(e,"$1/")},n=/[^\:\/]*:\/\/([^\/])*/,r=/^(\/|data:)/,a=function(e,n,r){n=t(n),r=t(r);var i=/@import\s*("([^"]*)"|'([^']*)')|url\s*\((?!#)\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,o,u,e;while(o=i.exec(e)){u=o[3]||o[2]||o[5]||o[6]||o[4];var a;a=s(u,n,r);var f=o[5]||o[6]?1:0;e=e.substr(0,i.lastIndex-u.length-f-1)+a+e.substr(i.lastIndex-f-1),i.lastIndex=i.lastIndex+(a.length-u.length)}return e};return a.convertURIBase=s,a.absoluteURI=o,a.relativeURI=u,a}),pen.define("common-ui/util/require-css/css",[],function(){if(typeof window=="undefined")return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,r=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?r=!1:t[4]&&(n=parseInt(t[4])<18);var i={};i.pluginBuilder="./css-builder";var s,o,u=function(){s=document.createElement("style"),e.appendChild(s),o=s.styleSheet||s.sheet},a=0,f=[],l,c=function(e){a++,a==32&&(u(),a=0),o.addImport(e),s.onload=function(){h()}},h=function(){l();var e=f.shift();if(!e){l=null;return}l=e[1],c(e[0])},p=function(e,t){(!o||!o.addImport)&&u();if(o&&o.addImport)l?f.push([e,t]):(c(e),l=t);else{s.textContent='@import "'+e+'";';var n=setInterval(function(){try{s.sheet.cssRules,clearInterval(n),t()}catch(e){}},10)}},d=function(t,n){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet";if(r)i.onload=function(){i.onload=function(){},setTimeout(n,7)};else var s=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==i.href)return clearInterval(s),n()}},10);i.href=t,e.appendChild(i)};return i.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)},i.load=function(e,t,r,i){(n?p:d)(t.toUrl(e+".css"),r)},i}),pen.define("common-ui/util/require-css/css!cdf/lib/chosen/chosen",[],function(){}),pen.define("common-ui/util/require-css/css!cdf/lib/theme/cupertino/jquery-ui-1.10.4.custom",[],function(){}),pen.define("common-ui/util/require-css/css!cdf/lib/hynds/jquery.multiselect",[],function(){}),pen.define("common-ui/util/require-css/css!cdf/lib/select2/select2",[],function(){}),pen.define("common-ui/util/require-css/css!cdf/lib/select2/select2-bootstrap",[],function(){}),pen.define("cdf/components/SelectBaseComponent",["./InputBaseComponent","../Logger","../lib/jquery","amd!../lib/underscore","../dashboard/Utils","amd!../lib/jquery.chosen","amd!../lib/jquery.multiselect","amd!../lib/jquery.select2"],function(e,t,n,r,i){var s=e.extend({visible:!1,draw:function(e){var r=this.placeholder();if(r.length===0)return t.warn("Placeholder not in DOM - Will not draw"),!1;var s=this.name,o="<select",u=this._allowMultipleValues();u&&(o+=" multiple");var a=this._getPlaceholderText();a&&(o+=" data-placeholder='"+a+"'");var f=this._getListSize(e);f!=null&&(o+=" size='"+f+"'",e.length>f&&(o+=" style='overflow-y: scroll;' "));var l=this.externalPlugin;switch(l){case"chosen":o+=" class='chzn-select'";break;case"hynds":o+=" class='hynds-select'";break;case"select2":o+=" class='select2-container'"}o+=">";var c=this._getParameterValue(),h=i.parseMultipleValues(c),p={},d;i.eachValuesArray(e,{valueAsId:this.valueAsId},function(e,t,n,r){o+="<option value = '"+i.escapeHtml(e)+"' >"+i.escapeHtml(t)+"</option>",r||(d=e),p[e]=!0},this),o+="</select>",r.html(o);var v=!0;if(h!=null){var m=h.length;while(m--)p[h[m]]!==!0&&(v=!1,h.splice(m,1));h.length||(h=null)}var g=h==null,y=!v;g&&this.defaultIfEmpty&&d!=null&&(h=[d],y=!0),n("select",r).val(h==null?[]:h),u&&(this.autoTopValue!=null?(this.topValue(this.autoTopValue),delete this.autoTopValue):this.autoTopIndex!=null&&(this.topIndex(this.autoTopIndex),delete this.autoTopIndex)),this._doAutoFocus(),y&&(this.dashboard.setParameter(this.parameter,h),this.dashboard.processChange(s));switch(l){case"chosen":var b=n.browser;n.browser="",r.find("select.chzn-select").chosen(this._readExtraOptions()),n.browser=b;break;case"hynds":r.find("select.hynds-select").multiselect({multiple:u});break;case"select2":var w=this._readExtraOptions()||{};typeof w.dropdownAutoWidth=="undefined"&&(w.dropdownAutoWidth=!0),w.width||(w.width="off"),r.find("select.select2-container").select2(w)}this._listenElement(r)},_allowMultipleValues:function(){return!1},_getPlaceholderText:function(){var e=this.placeholderText;return r.isString(e)&&!r.isEmpty(e)&&e||!1},_getListSize:function(e){return this.size},_readExtraOptions:function(){if(this.externalPlugin&&this.extraOptions)return i.propertiesArrayToObject(this.extraOptions)},_listenElement:function(e){var t=this,r=t.getValue(),s,o=function(){s&&s();var e=t.dashboard;if(e){var n=t.getValue();i.equalValues(r,n)||(r=n,e.processChange(t.name))}},u=n("select",e);u.keypress(function(e){e.which===13&&o()});var a=this._getChangeMode();if(a!=="timeout-focus")u.on(t._changeTrigger(),o);else{var f=t.changeTimeoutScrollFraction;f=Math.max(0,f!=null?f:1);var l=t.changeTimeoutChangeFraction;l=Math.max(0,l!=null?l:5/8);var c=Math.max(100,t.changeTimeout||2e3),h=f*c,p=l*c,d;s=function(){d!=null&&(clearTimeout(d),d=null)};var v=function(e){s(),t.dashboard&&(d=setTimeout(o,e||c))};u.change(function(){v(p)}).scroll(function(){v(h)}).focusout(o)}},_getChangeMode:function(){var e=this.changeMode;if(e){e=e.toLowerCase();switch(e){case"immediate":case"focus":return e;case"timeout-focus":if(/android|ipad|iphone/i.test(navigator.userAgent))return"focus";return e;default:t.log("Invalid 'changeMode' value: '"+e+"'.","warn")}}return"immediate"},_changeTrigger:function(){return this._getChangeMode()==="immediate"?"change":/android/i.test(navigator.userAgent)?"change":"focusout"}});return s}),pen.define("cdf/components/SelectComponent",["./SelectBaseComponent"],function(e){var t=e.extend({defaultIfEmpty:!0,getValue:function(){return this.placeholder("select").val()}});return t}),pen.define("common-ui/prompting/builders/ValueBasedParameterWidgetBuilder",["./ParameterWidgetBuilderBase"],function(e){return e.extend({_getCDFValuesArray:function(e){var t=[];return $.each(e.values,function(e,n){t.push([n.value,n.label])}),t},build:function(e){var t=this.base(e);return $.extend(t,{valueAsId:!1,valuesArray:this._getCDFValuesArray(e.param)})}})}),pen.define("common-ui/prompting/builders/DropDownBuilder",["cdf/components/SelectComponent","./ValueBasedParameterWidgetBuilder"],function(e,t){return t.extend({build:function(t){var n=this.base(t);return t.promptPanel.paramDefn.ignoreBiServer5538&&!t.param.hasSelection()&&(n.valuesArray=[["",""]].concat(n.valuesArray)),$.extend(n,{type:"SelectComponent",preExecution:function(){this.defaultIfEmpty=!t.promptPanel.paramDefn.ignoreBiServer5538&&!t.param.hasSelection()}}),new e(n)}})}),pen.define("cdf/components/ToggleButtonBaseComponent",["../lib/jquery","./InputBaseComponent"],function(e,t){var n=t.extend({draw:function(t){var n=this,r=n.dashboard.getParameterValue(n.parameter);r=typeof r=="function"?r():r;var i=!1,s=[];r==null||r==undefined?s=[]:r instanceof Array||typeof r=="object"&&r.join?s=r:typeof r=="string"&&(s=r.split("|"));var o=n.valueAsId==0?0:1,u=!1;e:for(var a=0;a<s.length;a++)for(var f=0;f<t.length;f++)if(s[a]==t[f][o]){u=!0;break e}!u&&n.defaultIfEmpty&&(s=[t[0][o]],n.currentVal=s,n.dashboard.setParameter(n.parameter,s),n.dashboard.processChange(n.name));var l=n.verticalOrientation?"toggleGroup vertical":"toggleGroup horizontal",c=e("<ul/>").attr({"class":l});for(var a=0,h=t.length;a<h;a++){var p=e("<li/>").attr({"class":l}),d=e("<input/>").click(function(){n.callAjaxAfterRender(n,n.name)});i=!1;for(var v=0,m=s.length;v<m;v++){i=s[v]==t[a][o];if(i)break}n.type=="radio"||n.type=="radioComponent"?((a==0&&!u||u&&t[a][o]==r)&&d.prop("checked",!0),d.attr({type:"radio"})):((a==0&&!u&&n.defaultIfEmpty||u&&i)&&d.prop("checked",!0),d.attr({type:"checkbox"})),d.attr({"class":n.name,name:n.name,id:n.name+a,value:t[a][o]}),d.appendTo(p),p.append(e("<label/>").attr({"for":n.name+a}).text(t[a][1])),c.append(p).append(n.separator==undefined||n.separator==null||n.separator=="null"?"":n.separator)}n.placeholder().html(c),n.currentVal=null,n._doAutoFocus()},callAjaxAfterRender:function(e,t){var n=e;setTimeout(function(){n.dashboard.processChange(t)},1)}});return n}),pen.define("cdf/components/RadioComponent",["./ToggleButtonBaseComponent","../lib/jquery"],function(e,t){var n=e.extend({getValue:function(){return this.currentVal!="undefined"&&this.currentVal!=null?this.currentVal:this.placeholder("."+this.name+":checked").val()}});return n}),pen.define("common-ui/prompting/builders/ToggleButtonBaseBuilder",["./ValueBasedParameterWidgetBuilder"],function(e){return e.extend({build:function(e){var t=this.base(e);return $.extend(t,{defaultIfEmpty:!1,verticalOrientation:"vertical"==e.param.attributes["parameter-layout"]})}})}),pen.define("common-ui/prompting/builders/RadioBuilder",["cdf/components/RadioComponent","./ToggleButtonBaseBuilder"],function(e,t){return t.extend({build:function(t){var n=this.base(t);return n.type="radio",new e(n)}})}),pen.define("cdf/components/CheckComponent",["../lib/jquery","./ToggleButtonBaseComponent"],function(e,t){var n=t.extend({getValue:function(){if(this.currentVal!="undefined"&&this.currentVal!=null)return this.currentVal;var t=new Array;return this.placeholder("."+this.name+":checked").each(function(n,r){t.push(e(this).val())}),t}});return n}),pen.define("common-ui/prompting/builders/CheckBuilder",["cdf/components/CheckComponent","./ToggleButtonBaseBuilder"],function(e,t){return t.extend({build:function(t){var n=this.base(t);return n.type="CheckComponent",new e(n)}})}),pen.define("cdf/components/MultiButtonComponent.ext",[],function(){var e={getCssWrapperClass:function(e){return"pentaho-toggle-button pentaho-toggle-button-up "+(e?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")},getSelectedCss:function(e){return"pentaho-toggle-button pentaho-toggle-button-down "+(e?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")},getUnselectedCss:function(e){return"pentaho-toggle-button pentaho-toggle-button-up "+(e?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")},getExtraCss:function(e,t,n){var r="";return e==0&&t==1?" pentaho-toggle-button-single":(e==0?r+=" "+(n?" pentaho-toggle-button-vertical-first":" pentaho-toggle-button-horizontal-first"):e==t-1&&(r+=" "+(n?" pentaho-toggle-button-vertical-last":" pentaho-toggle-button-horizontal-last")),r)},getToggleButtonClass:function(){return"pentaho-toggle-button"},getToggleButtonHoveringClass:function(){return"pentaho-toggle-button-up-hovering"}};return e}),pen.define("cdf/components/MultiButtonComponent",["./MultiButtonComponent.ext","../lib/jquery","./ToggleButtonBaseComponent","../dashboard/Utils"],function(e,t,n,r){var i=n.extend({indexes:[],draw:function(n){this.cachedArray=n;var i=this,s=e.getCssWrapperClass(i.verticalOrientation),o="",u,a=i.valueAsId?1:0,f=1;i.isMultiple==undefined&&(i.isMultiple=!1);var l=t("<div>");l.appendTo(i.placeholder().empty());for(var c=0,h=n.length;c<h;c++){var p=n[c][a],d=n[c][f],v=s+e.getExtraCss(c,h,i.verticalOrientation),m;p=p==null?null:p.replace('"',"&quot;"),d=d==null?null:d.replace('"',"&quot;"),c==0&&(u=p),o="<div class='"+v+"'><button type='button' name='"+i.name+"'>"+d+"</button  >"+"</div>",m=t(o),function(e){m.click(function(){i.clickButton(i.htmlObject,i.name,e,i.isMultiple,i.verticalOrientation)})}(c),l.append(m);var g=i.separator;g!=undefined&&g!=null&&g!="null"&&c!=n.length-1&&l.append(g)}var y=r.ev(i.dashboard.getParameterValue(i.parameter)),b=!1,w;y==null||y==undefined?w=[]:y instanceof Array||typeof y=="object"&&y.join?w=y:w=y.toString().split("|");var E=!1;i.clearSelections(i.htmlObject,i.name,i.verticalOrientation);for(var c=0;c<n.length;c++){b=!1;for(var S=0,x=w.length;S<x;S++){b=w[S]==n[c][a];if(b)break}if(t.isArray(y)&&b||b||n[c][a]==y||n[c][f]==y){i.clickButton(i.htmlObject,i.name,c,i.isMultiple,i.verticalOrientation,!0),E=!0;if(!i.isMultiple)break}}(!E&&!i.isMultiple||!E&&i.isMultiple&&i.defaultIfEmpty)&&n.length>0&&((y==null||y==""||typeof y=="object"&&y.length==0)&&i.parameter&&i.dashboard.fireChange(i.parameter,i.isMultiple?[u]:u),i.clickButton(i.htmlObject,i.name,0,i.isMultiple,i.verticalOrientation,!0)),t("."+e.getToggleButtonClass()).hover(function(){t(i).addClass(e.getToggleButtonHoveringClass())},function(){t(i).removeClass(e.getToggleButtonHoveringClass())}),t("."+e.getToggleButtonClass()+" button").hover(function(){t(i).parent().addClass(e.getToggleButtonHoveringClass())},function(){}),i._doAutoFocus()},getValue:function(){var e=this;if(e.isMultiple){var t=e.getSelectedIndex(e.name),n=new Array;if(t.length==undefined)n.push(e.getValueByIdx(t));else for(var r=0;r<t.length;r++)n.push(e.getValueByIdx(t[r]));return n}return e.getValueByIdx(e.getSelectedIndex(e.name))},getValueByIdx:function(e){return this.cachedArray[e][this.valueAsId?1:0]},clickButton:function(n,r,i,s,o,u){var a=e.getUnselectedCss(o),f=e.getSelectedCss(o),l=t("#"+n+" button");if(s){this.indexes[r]==undefined?this.indexes[r]=[]:t.isArray(this.indexes[r])||(this.indexes[r]=[this.indexes[r]]);var c=!1;for(var h=0;h<this.indexes[r].length;++h)if(this.indexes[r][h]==i){c=!0,this.indexes[r].splice(h,1);break}c?l[i].parentNode.className=a+e.getExtraCss(i,l.length,o):(l[i].parentNode.className=f+e.getExtraCss(i,l.length,o),this.indexes[r].push(i))}else{if(this.indexes[r]===i)return!1;this.clearSelections(n,r,o),this.indexes[r]=i,l[i].parentNode.className=f+e.getExtraCss(i,l.length,o)}u||this.callAjaxAfterRender(this,r)},clearSelections:function(n,r,i){var s=t("#"+n+" button"),o=e.getUnselectedCss(i);for(var u=0;u<s.length;u++)s[u].parentNode.className=o+e.getExtraCss(u,s.length,i);this.indexes[r]=[]},getSelectedIndex:function(e){return this.indexes[e]}});return i}),pen.define("common-ui/prompting/builders/MultiButtonBuilder",["cdf/components/MultiButtonComponent","./ValueBasedParameterWidgetBuilder"],function(e,t){return t.extend({build:function(t){var n=this.base(t);return $.extend(n,{type:"MultiButtonComponent",isMultiple:t.param.multiSelect,verticalOrientation:"vertical"===t.param.attributes["parameter-layout"],expression:function(){return this.dashboard.getParameterValue(this.parameter)},postExecution:function(){$("#"+this.htmlObject).addClass("pentaho-toggle-button-container")}}),new e(n)}})}),pen.define("cdf/components/SelectMultiComponent",["./SelectBaseComponent","../lib/jquery"],function(e,t){var n=e.extend({getValue:function(){var e=this.placeholder("select"),t=e.val();return t==null?[]:t},_allowMultipleValues:function(){return this.isMultiple==null||!!this.isMultiple},_getListSize:function(e){var t=this.base(e);return t==null&&(this._allowMultipleValues()||(t=e.length)),t},topIndex:function(e){var t=this.placeholder("select"),n=t[0],r=n.length;if(!r)return arguments.length?this:0;var i=Math.max(1,n.scrollHeight),s=Math.max(1,i/r);if(arguments.length){var o=+e;return o=isNaN(o)?0:Math.max(0,Math.min(o,r-1)),t.scrollTop(Math.ceil(o*s)),this}return Math.round(t.scrollTop()/s)},indexOf:function(e){if(e!=null){var t=this.placeholder("select option"),n=t.length;if(n){e=String(e);for(var r=0;r<n;r++)if(t[r].value===e)return r}}return-1},valueAt:function(e){if(e>=0)return this.placeholder("select :nth-child("+(e+1)+")").val()},topValue:function(e){if(arguments.length){var t=this.indexOf(e);return t>=0&&this.topIndex(t),this}return this.valueAt(this.topIndex())}});return n}),pen.define("common-ui/prompting/builders/ListBuilder",["cdf/components/SelectComponent","cdf/components/SelectMultiComponent","./ValueBasedParameterWidgetBuilder"],function(e,t,n){return n.extend({build:function(n){var r=this.base(n);return $.extend(r,{type:n.param.multiSelect?"SelectMultiComponent":"SelectComponent",size:n.param.attributes["parameter-visible-items"]||5,changeMode:n.param.multiSelect?"timeout-focus":"immediate",preExecution:function(){this.defaultIfEmpty=!1}}),n.param.multiSelect?new t(r):new e(r)}})}),pen.define("common-ui/prompting/builders/FormattedParameterWidgetBuilderBase",["common-ui/util/formatting","./ParameterWidgetBuilderBase"],function(e,t){return t.extend({_createDataTransportFormatter:function(t,n){return e.createDataTransportFormatter(t,n)},_createFormatter:function(t,n){return e.createFormatter(t,n)},build:function(e){var t=this.base(e);return $.extend(t,{transportFormatter:this._createDataTransportFormatter(e.promptPanel.paramDefn,e.param),formatter:this._createFormatter(e.promptPanel.paramDefn,e.param)})}})}),pen.define("dojo/date",["./has","./_base/lang"],function(e,t){var n={};return n.getDaysInMonth=function(e){var t=e.getMonth(),r=[31,28,31,30,31,30,31,31,30,31,30,31];return t==1&&n.isLeapYear(e)?29:r[t]},n.isLeapYear=function(e){var t=e.getFullYear();return!(t%400)||!(t%4)&&!!(t%100)},n.getTimezoneName=function(e){var t=e.toString(),n="",r,i=t.indexOf("(");if(i>-1)n=t.substring(++i,t.indexOf(")"));else{var s=/([A-Z\/]+) \d{4}$/;if(r=t.match(s))n=r[1];else{t=e.toLocaleString(),s=/ ([A-Z\/]+)$/;if(r=t.match(s))n=r[1]}}return n=="AM"||n=="PM"?"":n},n.compare=function(e,t,n){return e=new Date(+e),t=new Date(+(t||new Date)),n=="date"?(e.setHours(0,0,0,0),t.setHours(0,0,0,0)):n=="time"&&(e.setFullYear(0,0,0),t.setFullYear(0,0,0)),e>t?1:e<t?-1:0},n.add=function(e,t,n){var r=new Date(+e),i=!1,s="Date";switch(t){case"day":break;case"weekday":var o,u,a=n%5;a?(o=a,u=parseInt(n/5)):(o=n>0?5:-5,u=n>0?(n-5)/5:(n+5)/5);var f=e.getDay(),l=0;f==6&&n>0?l=1:f==0&&n<0&&(l=-1);var c=f+o;if(c==0||c==6)l=n>0?2:-2;n=7*u+o+l;break;case"year":s="FullYear",i=!0;break;case"week":n*=7;break;case"quarter":n*=3;case"month":i=!0,s="Month";break;default:s="UTC"+t.charAt(0).toUpperCase()+t.substring(1)+"s"}return s&&r["set"+s](r["get"+s]()+n),i&&r.getDate()<e.getDate()&&r.setDate(0),r},n.difference=function(e,t,r){t=t||new Date,r=r||"day";var i=t.getFullYear()-e.getFullYear(),s=1;switch(r){case"quarter":var o=e.getMonth(),u=t.getMonth(),a=Math.floor(o/3)+1,f=Math.floor(u/3)+1;f+=i*4,s=f-a;break;case"weekday":var l=Math.round(n.difference(e,t,"day")),c=parseInt(n.difference(e,t,"week")),h=l%7;if(h==0)l=c*5;else{var p=0,d=e.getDay(),v=t.getDay();c=parseInt(l/7),h=l%7;var m=new Date(e);m.setDate(m.getDate()+c*7);var g=m.getDay();if(l>0)switch(!0){case d==6:p=-1;break;case d==0:p=0;break;case v==6:p=-1;break;case v==0:p=-2;break;case g+h>5:p=-2}else if(l<0)switch(!0){case d==6:p=0;break;case d==0:p=1;break;case v==6:p=2;break;case v==0:p=1;break;case g+h<0:p=2}l+=p,l-=c*2}s=l;break;case"year":s=i;break;case"month":s=t.getMonth()-e.getMonth()+i*12;break;case"week":s=parseInt(n.difference(e,t,"day")/7);break;case"day":s/=24;case"hour":s/=60;case"minute":s/=60;case"second":s/=1e3;case"millisecond":s*=t.getTime()-e.getTime()}return Math.round(s)},e("extend-dojo")&&t.mixin(t.getObject("dojo.date",!0),n),n}),pen.define("dojo/cldr/supplemental",["../_base/lang","../i18n"],function(e,t){var n={};return e.setObject("dojo.cldr.supplemental",n),n.getFirstDayOfWeek=function(e){var t={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0},r=n._region(e),i=t[r];return i===undefined?1:i},n._region=function(e){e=t.normalizeLocale(e);var n=e.split("-"),r=n[1];return r?r.length==4&&(r=n[2]):r={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[n[0]],r},n.getWeekend=function(e){var t={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},r={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},i=n._region(e),s=t[i],o=r[i];return s===undefined&&(s=6),o===undefined&&(o=0),{start:s,end:o}},n}),pen.define("dojo/text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.10",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}d.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),pen.define("dojo/text!dijit/templates/Calendar.html",[],function(){return'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year" data-dojo-attach-point="gridNode">\n	<thead>\n		<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n			<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth" scope="col">\n				<span class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"></span>\n				<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n			</th>\n			<th class=\'dijitReset\' colspan="5" scope="col">\n				<div data-dojo-attach-point="monthNode">\n				</div>\n			</th>\n			<th class=\'dijitReset dijitCalendarArrow\' scope="col" data-dojo-attach-point="incrementMonth">\n				<span class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"></span>\n				<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n			</th>\n		</tr>\n		<tr role="row">\n			${!dayCellsHtml}\n		</tr>\n	</thead>\n	<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="ondijitclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n			${!dateRowsHtml}\n	</tbody>\n	<tfoot class="dijitReset dijitCalendarYearContainer">\n		<tr>\n			<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n				<div class="dijitCalendarYearLabel">\n					<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n					<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n					<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n				</div>\n			</td>\n		</tr>\n	</tfoot>\n</table>\n'}),pen.define("dojo/domReady",["./has"],function(e){function a(e){o.push(e),s&&f()}function f(){if(u)return;u=!0;while(o.length)try{o.shift()(n)}catch(e){console.log("Error on domReady callback: "+e)}u=!1,a._onQEmpty()}var t=this,n=document,r={loaded:1,complete:1},i=typeof n.readyState!="string",s=!!r[n.readyState],o=[],u;a.load=function(e,t,n){a(n)},a._Q=o,a._onQEmpty=function(){},i&&(n.readyState="loading");if(!s){var l=[],c=function(e){e=e||t.event;if(s||e.type=="readystatechange"&&!r[n.readyState])return;i&&(n.readyState="complete"),s=1,f()},h=function(e,t){e.addEventListener(t,c,!1),o.push(function(){e.removeEventListener(t,c,!1)})};if(!e("dom-addeventlistener")){h=function(e,t){t="on"+t,e.attachEvent(t,c),o.push(function(){e.detachEvent(t,c)})};var p=n.createElement("div");try{p.doScroll&&t.frameElement===null&&l.push(function(){try{return p.doScroll("left"),1}catch(e){}})}catch(d){}}h(n,"DOMContentLoaded"),h(t,"load"),"onreadystatechange"in n?h(n,"readystatechange"):i||l.push(function(){return r[n.readyState]});if(l.length){var v=function(){if(s)return;var e=l.length;while(e--)if(l[e]()){c("poller");return}setTimeout(v,30)};v()}}return a}),pen.define("dojo/touch",["./_base/kernel","./aspect","./dom","./dom-class","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(e,t,n,r,i,s,o,u,a,f){function x(e,t,n){return h&&n?function(e,t){return s(e,n,t)}:l?function(n,r){var i=s(n,t,r),o=s(n,e,function(e){(!S||(new Date).getTime()>S+1e3)&&r.call(this,e)});return{remove:function(){i.remove(),o.remove()}}}:function(t,n){return s(t,e,n)}}function T(e){do if(e.dojoClick!==undefined)return e.dojoClick;while(e=e.parentNode)}function N(e,t,i){v=!e.target.disabled&&T(e.target);if(v){m=e.target,g=e.touches?e.touches[0].pageX:e.clientX,y=e.touches?e.touches[0].pageY:e.clientY,b=(typeof v=="object"?v.x:typeof v=="number"?v:0)||4,w=(typeof v=="object"?v.y:typeof v=="number"?v:0)||4;if(!d){d=!0,f.doc.addEventListener(t,function(e){v=v&&e.target==m&&Math.abs((e.touches?e.touches[0].pageX:e.clientX)-g)<=b&&Math.abs((e.touches?e.touches[0].pageY:e.clientY)-y)<=w},!0),f.doc.addEventListener(i,function(e){if(v){E=(new Date).getTime();var t=e.target;t.tagName==="LABEL"&&(t=n.byId(t.getAttribute("for"))||t),setTimeout(function(){s.emit(t,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0);function o(e){f.doc.addEventListener(e,function(t){!t._dojo_click&&(new Date).getTime()<=E+1e3&&(t.target.tagName!="INPUT"||!r.contains(t.target,"dijitOffScreen"))&&(t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),e=="click"&&(t.target.tagName!="INPUT"||t.target.type=="radio"||t.target.type=="checkbox")&&t.target.tagName!="TEXTAREA"&&t.target.tagName!="AUDIO"&&t.target.tagName!="VIDEO"&&t.preventDefault())},!0)}o("click"),o("mousedown"),o("mouseup")}}}var l=o("touch"),c=o("ios")<5,h=navigator.pointerEnabled||navigator.msPointerEnabled,p=function(){var e={};for(var t in{down:1,move:1,up:1,cancel:1,over:1,out:1})e[t]=navigator.pointerEnabled?"pointer"+t:"MSPointer"+t.charAt(0).toUpperCase()+t.slice(1);return e}(),d,v,m,g,y,b,w,E,S,C;l&&(h?a(function(){f.doc.addEventListener(p.down,function(e){N(e,p.move,p.up)},!0)}):a(function(){function e(e){var t=i.delegate(e,{bubbles:!0});return o("ios")>=6&&(t.touches=e.touches,t.altKey=e.altKey,t.changedTouches=e.changedTouches,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.targetTouches=e.targetTouches),t}C=f.body(),f.doc.addEventListener("touchstart",function(e){S=(new Date).getTime();var t=C;C=e.target,s.emit(t,"dojotouchout",{relatedTarget:C,bubbles:!0}),s.emit(C,"dojotouchover",{relatedTarget:t,bubbles:!0}),N(e,"touchmove","touchend")},!0),s(f.doc,"touchmove",function(t){S=(new Date).getTime();var n=f.doc.elementFromPoint(t.pageX-(c?0:f.global.pageXOffset),t.pageY-(c?0:f.global.pageYOffset));n&&(C!==n&&(s.emit(C,"dojotouchout",{relatedTarget:n,bubbles:!0}),s.emit(n,"dojotouchover",{relatedTarget:C,bubbles:!0}),C=n),s.emit(n,"dojotouchmove",e(t))||t.preventDefault())}),s(f.doc,"touchend",function(t){S=(new Date).getTime();var n=f.doc.elementFromPoint(t.pageX-(c?0:f.global.pageXOffset),t.pageY-(c?0:f.global.pageYOffset))||f.body();s.emit(n,"dojotouchend",e(t))})}));var k={press:x("mousedown","touchstart",p.down),move:x("mousemove","dojotouchmove",p.move),release:x("mouseup","dojotouchend",p.up),cancel:x(u.leave,"touchcancel",l?p.cancel:null),over:x("mouseover","dojotouchover",p.over),out:x("mouseout","dojotouchout",p.out),enter:u._eventHandler(x("mouseover","dojotouchover",p.over)),leave:u._eventHandler(x("mouseout","dojotouchout",p.out))};return o("extend-dojo")&&(e.touch=k),k}),pen.define("dijit/a11yclick",["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(e,t,n,r){function i(t){if((t.keyCode===e.ENTER||t.keyCode===e.SPACE)&&!/input|button|textarea/i.test(t.target.nodeName))for(var n=t.target;n;n=n.parentNode)if(n.dojoClick)return!0}var s;n(document,"keydown",function(e){i(e)?(s=e.target,e.preventDefault()):s=null}),n(document,"keyup",function(e){i(e)&&e.target==s&&(s=null,n.emit(e.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altKey,_origType:e.type}))});var o=function(e,t){return e.dojoClick=!0,n(e,"click",t)};return o.click=o,o.press=function(i,s){var o=n(i,r.press,function(e){if(e.type=="mousedown"&&!t.isLeft(e))return;s(e)}),u=n(i,"keydown",function(t){(t.keyCode===e.ENTER||t.keyCode===e.SPACE)&&s(t)});return{remove:function(){o.remove(),u.remove()}}},o.release=function(i,s){var o=n(i,r.release,function(e){if(e.type=="mouseup"&&!t.isLeft(e))return;s(e)}),u=n(i,"keyup",function(t){(t.keyCode===e.ENTER||t.keyCode===e.SPACE)&&s(t)});return{remove:function(){o.remove(),u.remove()}}},o.move=r.move,o}),pen.define("dojo/hccss",["require","./_base/config","./dom-class","./dom-style","./has","./domReady","./_base/window"],function(e,t,n,r,i,s,o){return i.add("highcontrast",function(){var n=o.doc.createElement("div");n.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(t.blankGif||e.toUrl("./resources/blank.gif"))+");",o.body().appendChild(n);var s=r.getComputedStyle(n),u=s.backgroundImage,a=s.borderTopColor==s.borderRightColor||u&&(u=="none"||u=="url(invalid-url:)");return i("ie")<=8?n.outerHTML="":o.body().removeChild(n),a}),s(function(){i("highcontrast")&&n.add(o.body(),"dj_a11y")}),i}),pen.define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(e,t,n,r){return n(function(){t("highcontrast")&&e.add(r.body(),"dijit_a11y")}),t}),pen.define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./a11yclick","./hccss"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=t("dijit.CalendarLite",[h,p],{templateString:d,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar",_isValidDate:function(e){return e&&!isNaN(e)&&typeof e=="object"&&e.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var e=this._get("value");if(e&&!isNaN(e)){var t=new this.dateClassObj(e);return t.setHours(0,0,0,0),t.getDate()<e.getDate()&&(t=this.dateModule.add(t,"hour",1)),t}return null},_setValueAttr:function(e,t){typeof e=="string"&&(e=s.fromISOString(e)),e=this._patchDate(e),this._isValidDate(e)&&!this.isDisabledDate(e,this.lang)?(this._set("value",e),this.set("currentFocus",e),this._markSelectedDates([e]),this._created&&(t||typeof t=="undefined")&&this.onChange(this.get("value"))):(this._set("value",null),this._markSelectedDates([]))},_patchDate:function(e){return e&&(e=new this.dateClassObj(e),e.setHours(1,0,0,0)),e},_setText:function(e,t){while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(e.ownerDocument.createTextNode(t))},_populateGrid:function(){var t=new this.dateClassObj(this.currentFocus);t.setDate(1);var r=t.getDay(),i=this.dateModule.getDaysInMonth(t),s=this.dateModule.getDaysInMonth(this.dateModule.add(t,"month",-1)),o=new this.dateClassObj,u=n.getFirstDayOfWeek(this.lang);u>r&&(u-=7);if(!this.summary){var a=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,t);this.gridNode.setAttribute("summary",a[t.getMonth()])}this._date2cell={},e.forEach(this.dateCells,function(e,n){var a=n+u,f=new this.dateClassObj(t),l,c="dijitCalendar",h=0;a<r?(l=s-r+a+1,h=-1,c+="Previous"):a>=r+i?(l=a-r-i+1,h=1,c+="Next"):(l=a-r+1,c+="Current"),h&&(f=this.dateModule.add(f,"month",h)),f.setDate(l),this.dateModule.compare(f,o,"date")||(c="dijitCalendarCurrentDate "+c),this.isDisabledDate(f,this.lang)?(c="dijitCalendarDisabledDate "+c,e.setAttribute("aria-disabled","true")):(c="dijitCalendarEnabledDate "+c,e.removeAttribute("aria-disabled"),e.setAttribute("aria-selected","false"));var p=this.getClassForDate(f,this.lang);p&&(c=p+" "+c),e.className=c+"Month dijitCalendarDateTemplate";var d=f.valueOf();this._date2cell[d]=e,e.dijitDateValue=d,this._setText(this.dateLabels[n],f.getDateLocalized?f.getDateLocalized(this.lang):f.getDate())},this)},_populateControls:function(){var t=new this.dateClassObj(this.currentFocus);t.setDate(1),this.monthWidget.set("month",t);var n=t.getFullYear()-1,r=new this.dateClassObj;e.forEach(["previous","current","next"],function(e){r.setFullYear(n++),this._setText(this[e+"YearLabelNode"],this.dateLocaleModule.format(r,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(e){this.dateModule=e.datePackage?a.getObject(e.datePackage,!1):r,this.dateClassObj=this.dateModule.Date||Date,this.dateLocaleModule=e.datePackage?a.getObject(e.datePackage+".locale",!1):i},_createMonthWidget:function(){return v._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var e=this.dowTemplateString,t=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),r=n.getFirstDayOfWeek(this.lang);this.dayCellsHtml=c.substitute([e,e,e,e,e,e,e].join(""),{d:""},function(){return t[r++%7]});var i=c.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[i,i,i,i,i,i].join(""),this.dateCells=[],this.dateLabels=[],this.inherited(arguments),o.setSelectable(this.domNode,!1);var s=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget(),this.set("currentFocus",s,!1)},postCreate:function(){this.inherited(arguments),this._connectControls()},_connectControls:function(){var e=a.hitch(this,function(e,t,n){return f(this[e],"click",a.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,t,n))}))});this.own(e("incrementMonth","month",1),e("decrementMonth","month",-1),e("nextYearLabelNode","year",1),e("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(e,t){var n=this.currentFocus,r=this._getNodeByDate(n);e=this._patchDate(e),this._set("currentFocus",e);if(!this._date2cell||this.dateModule.difference(n,e,"month")!=0)this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);var i=this._getNodeByDate(e);i.setAttribute("tabIndex",this.tabIndex),(this.focused||t)&&i.focus(),r&&r!=i&&(l("webkit")?r.setAttribute("tabIndex","-1"):r.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(e){e.stopPropagation(),e.preventDefault();for(var t=e.target;t&&!t.dijitDateValue;t=t.parentNode);t&&!u.contains(t,"dijitCalendarDisabledDate")&&this.set("value",t.dijitDateValue)},_getNodeByDate:function(e){return e=this._patchDate(e),e&&this._date2cell?this._date2cell[e.valueOf()]:null},_markSelectedDates:function(t){function n(e,t){u.toggle(t,"dijitCalendarSelectedDate",e),t.setAttribute("aria-selected",e?"true":"false")}e.forEach(this._selectedCells||[],a.partial(n,!1)),this._selectedCells=e.filter(e.map(t,this._getNodeByDate,this),function(e){return e}),e.forEach(this._selectedCells,a.partial(n,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});return v._MonthWidget=t("dijit.CalendarLite._MonthWidget",h,{_setMonthAttr:function(t){var n=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,t),r=l("ie")==6?"":"<div class='dijitSpacer'>"+e.map(n,function(e){return"<div>"+e+"</div>"}).join("")+"</div>";this.domNode.innerHTML=r+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+n[t.getMonth()]+"</div>"}}),v}),pen.define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(e,t,n,r,i,s){var o=r("dijit._OnDijitClickMixin",null,{connect:function(e,t,n){return this.inherited(arguments,[e,t=="ondijitclick"?s:t,n])}});return o.a11yclick=s,o}),pen.define("dojo/window",["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],function(e,t,n,r,i,s,o){t.add("rtl-adjust-position-for-verticalScrollBar",function(e,t){var r=n.body(t),s=o.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},r,"last"),u=o.create("div",{style:{overflow:"hidden",direction:"ltr"}},s,"last"),a=i.position(u).x!=0;return s.removeChild(u),r.removeChild(s),a}),t.add("position-fixed-support",function(e,t){var r=n.body(t),s=o.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},r,"last"),u=o.create("span",{style:{position:"fixed",left:"0",top:"0"}},s,"last"),a=i.position(u).x!=i.position(s).x;return s.removeChild(u),r.removeChild(s),a});var u={getBox:function(e){e=e||n.doc;var r=e.compatMode=="BackCompat"?n.body(e):e.documentElement,s=i.docScroll(e),o,a;if(t("touch")){var f=u.get(e);o=f.innerWidth||r.clientWidth,a=f.innerHeight||r.clientHeight}else o=r.clientWidth,a=r.clientHeight;return{l:s.x,t:s.y,w:o,h:a}},get:function(e){if(t("ie")&&u!==document.parentWindow){e.parentWindow.execScript("document._parentWindow = window;","Javascript");var n=e._parentWindow;return e._parentWindow=null,n}return e.parentWindow||e.defaultView},scrollIntoView:function(e,o){try{e=r.byId(e);var u=e.ownerDocument||n.doc,a=n.body(u),f=u.documentElement||a.parentNode,l=t("ie"),c=t("webkit");if(e==a||e==f)return;if(!(t("mozilla")||l||c||t("opera")||t("trident"))&&"scrollIntoView"in e){e.scrollIntoView(!1);return}var h=u.compatMode=="BackCompat",p=Math.min(a.clientWidth||f.clientWidth,f.clientWidth||a.clientWidth),d=Math.min(a.clientHeight||f.clientHeight,f.clientHeight||a.clientHeight),v=c||h?a:f,m=o||i.position(e),g=e.parentNode,y=function(e){return l<=6||l==7&&h?!1:t("position-fixed-support")&&s.get(e,"position").toLowerCase()=="fixed"};if(y(e))return;while(g){g==a&&(g=v);var b=i.position(g),w=y(g),E=s.getComputedStyle(g).direction.toLowerCase()=="rtl";if(g==v){b.w=p,b.h=d,v==f&&l&&E&&(b.x+=v.offsetWidth-b.w);if(b.x<0||!l||l>=9)b.x=0;if(b.y<0||!l||l>=9)b.y=0}else{var S=i.getPadBorderExtents(g);b.w-=S.w,b.h-=S.h,b.x+=S.l,b.y+=S.t;var x=g.clientWidth,T=b.w-x;x>0&&T>0&&(E&&t("rtl-adjust-position-for-verticalScrollBar")&&(b.x+=T),b.w=x),x=g.clientHeight,T=b.h-x,x>0&&T>0&&(b.h=x)}w&&(b.y<0&&(b.h+=b.y,b.y=0),b.x<0&&(b.w+=b.x,b.x=0),b.y+b.h>d&&(b.h=d-b.y),b.x+b.w>p&&(b.w=p-b.x));var N=m.x-b.x,C=m.y-b.y,k=N+m.w-b.w,L=C+m.h-b.h,A,O;k*N>0&&(!!g.scrollLeft||g==v||g.scrollWidth>g.offsetHeight)&&(A=Math[N<0?"max":"min"](N,k),E&&(l==8&&!h||l>=9)&&(A=-A),O=g.scrollLeft,g.scrollLeft+=A,A=g.scrollLeft-O,m.x-=A),L*C>0&&(!!g.scrollTop||g==v||g.scrollHeight>g.offsetHeight)&&(A=Math.ceil(Math[C<0?"max":"min"](C,L)),O=g.scrollTop,g.scrollTop+=A,A=g.scrollTop-O,m.y-=A),g=g!=v&&!w&&g.parentNode}}catch(M){console.error("scrollIntoView: "+M),e.scrollIntoView(!1)}}};return t("extend-dojo")&&e.setObject("dojo.window",u),u}),pen.define("dijit/a11y",["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(e,t,n,r,i,s,o){var u,a={_isElementShown:function(e){var t=r.get(e);return t.visibility!="hidden"&&t.visibility!="collapsed"&&t.display!="none"&&n.get(e,"type")!="hidden"},hasDefaultTabStop:function(e){switch(e.nodeName.toLowerCase()){case"a":return n.has(e,"href");case"area":case"button":case"input":case"object":case"select":case"textarea":return!0;case"iframe":var t;try{var r=e.contentDocument;if("designMode"in r&&r.designMode=="on")return!0;t=r.body}catch(i){try{t=e.contentWindow.document.body}catch(s){return!1}}return t&&(t.contentEditable=="true"||t.firstChild&&t.firstChild.contentEditable=="true");default:return e.contentEditable=="true"}},effectiveTabIndex:function(e){return n.get(e,"disabled")?u:n.has(e,"tabIndex")?+n.get(e,"tabIndex"):a.hasDefaultTabStop(e)?0:u},isTabNavigable:function(e){return a.effectiveTabIndex(e)>=0},isFocusable:function(e){return a.effectiveTabIndex(e)>=-1},_getTabNavigable:function(e){function c(e){return e&&e.tagName.toLowerCase()=="input"&&e.type&&e.type.toLowerCase()=="radio"&&e.name&&e.name.toLowerCase()}function v(e){return l[c(e)]||e}var t,r,i,o,u,f,l={},h=a._isElementShown,p=a.effectiveTabIndex,d=function(e){for(var a=e.firstChild;a;a=a.nextSibling){if(a.nodeType!=1||s("ie")<=9&&a.scopeName!=="HTML"||!h(a))continue;var v=p(a);if(v>=0){if(v==0)t||(t=a),r=a;else if(v>0){if(!i||v<o)o=v,i=a;if(!u||v>=f)f=v,u=a}var m=c(a);n.get(a,"checked")&&m&&(l[m]=a)}a.nodeName.toUpperCase()!="SELECT"&&d(a)}};return h(e)&&d(e),{first:v(t),last:v(r),lowest:v(i),highest:v(u)}},getFirstInTabbingOrder:function(e,n){var r=a._getTabNavigable(t.byId(e,n));return r.lowest?r.lowest:r.first},getLastInTabbingOrder:function(e,n){var r=a._getTabNavigable(t.byId(e,n));return r.last?r.last:r.highest}};return s("extend-dojo")&&i.mixin(o,a),a}),pen.define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g,y=t([c,o],{curNode:null,activeStack:[],constructor:function(){var t=u.hitch(this,function(e){n.isDescendant(this.curNode,e)&&this.set("curNode",null),n.isDescendant(this.prevNode,e)&&this.set("prevNode",null)});e.before(s,"empty",t),e.before(s,"destroy",t)},registerIframe:function(e){return this.registerWin(e.contentWindow,e)},registerWin:function(e,t){var n=this,r=e.document&&e.document.body;if(r){var i=a(e.document,"mousedown, touchstart",function(e){n._justMouseDowned=!0,setTimeout(function(){n._justMouseDowned=!1},0);if(e&&e.target&&e.target.parentNode==null)return;n._onTouchNode(t||e.target,"mouse")}),s=a(r,"focusin",function(e){g=(new Date).getTime();if(!e.target.tagName)return;var r=e.target.tagName.toLowerCase();if(r=="#document"||r=="body")return;d.isFocusable(e.target)?n._onFocusNode(t||e.target):n._onTouchNode(t||e.target)}),o=a(r,"focusout",function(e){if((new Date).getTime()<g+100)return;n._onBlurNode(t||e.target)});return{remove:function(){i.remove(),s.remove(),o.remove(),i=s=o=null,r=null}}}},_onBlurNode:function(e){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(u.hitch(this,function(){this.set("prevNode",this.curNode),this.set("curNode",null)}),0);if(this._justMouseDowned)return;this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(u.hitch(this,function(){delete this._clearActiveWidgetsTimer,this._setStack([])}),0)},_onTouchNode:function(e,t){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer),i.contains(e,"dijitPopup")&&(e=e.firstChild);var n=[];try{while(e){var s=r.get(e,"dijitPopupParent");if(s)e=v.byId(s).domNode;else if(e.tagName&&e.tagName.toLowerCase()=="body"){if(e===h.body())break;e=p.get(e.ownerDocument).frameElement}else{var o=e.getAttribute&&e.getAttribute("widgetId"),u=o&&v.byId(o);u&&(t!="mouse"||!u.get("disabled"))&&n.unshift(o),e=e.parentNode}}}catch(a){}this._setStack(n,t)},_onFocusNode:function(e){if(!e)return;if(e.nodeType==9)return;this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(e);if(e==this.curNode)return;this.set("prevNode",this.curNode),this.set("curNode",e)},_setStack:function(e,t){var n=this.activeStack,r=n.length-1,i=e.length-1;if(e[i]==n[r])return;this.set("activeStack",e);var s,o;for(o=r;o>=0&&n[o]!=e[o];o--)s=v.byId(n[o]),s&&(s._hasBeenBlurred=!0,s.set("focused",!1),s._focusManager==this&&s._onBlur(t),this.emit("widget-blur",s,t));for(o++;o<=i;o++)s=v.byId(e[o]),s&&(s.set("focused",!0),s._focusManager==this&&s._onFocus(t),this.emit("widget-focus",s,t))},focus:function(e){if(e)try{e.focus()}catch(t){}}}),b=new y;f(function(){var e=b.registerWin(p.get(document));l("ie")&&a(window,"unload",function(){e&&(e.remove(),e=null)})}),m.focus=function(e){b.focus(e)};for(var w in b)/^_/.test(w)||(m.focus[w]=typeof b[w]=="function"?u.hitch(b,w):b[w]);return b.watch(function(e,t,n){m.focus[e]=n}),b}),pen.define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(e,t,n,r){return r.extend(t,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}}),n("dijit._FocusMixin",null,{_focusManager:e})}),pen.define("dojo/uacss",["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(e,t,n,r,i){var s=i.doc.documentElement,o=r("ie"),u=r("opera"),a=Math.floor,f=r("ff"),l=e.boxModel.replace(/-/,""),c={dj_quirks:r("quirks"),dj_opera:u,dj_khtml:r("khtml"),dj_webkit:r("webkit"),dj_safari:r("safari"),dj_chrome:r("chrome"),dj_gecko:r("mozilla"),dj_ios:r("ios"),dj_android:r("android")};o&&(c.dj_ie=!0,c["dj_ie"+a(o)]=!0,c.dj_iequirks=r("quirks")),f&&(c["dj_ff"+a(f)]=!0),c["dj_"+l]=!0;var h="";for(var p in c)c[p]&&(h+=p+" ");return s.className=t.trim(s.className+" "+h),n(function(){if(!e.isBodyLtr()){var n="dj_rtl dijitRtl "+h.replace(/ /g,"-rtl ");s.className=t.trim(s.className+" "+n+"dj_rtl dijitRtl "+h.replace(/ /g,"-rtl "))}}),r}),pen.define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function p(){}function d(e){return function(t,r,i,s){return t&&typeof r=="string"&&t[r]==p?t.on(r.substring(2).toLowerCase(),o.hitch(i,s)):e.apply(n,arguments)}}e.around(n,"connect",d),s.connect&&e.around(s,"connect",d);var v=r("dijit._Widget",[l,c,h],{onClick:p,onDblClick:p,onKeyDown:p,onKeyPress:p,onKeyUp:p,onMouseDown:p,onMouseMove:p,onMouseOut:p,onMouseOver:p,onMouseLeave:p,onMouseEnter:p,onMouseUp:p,constructor:function(e){this._toConnect={};for(var t in e)this[t]===p&&(this._toConnect[t.replace(/^on/,"").toLowerCase()]=e[t],delete e[t])},postCreate:function(){this.inherited(arguments);for(var e in this._toConnect)this.on(e,this._toConnect[e]);delete this._toConnect},on:function(e,t){return this[this._onMap(e)]===p?n.connect(this.domNode,e.toLowerCase(),this,t):this.inherited(arguments)},_setFocusedAttr:function(e){this._focused=e,this._set("focused",e)},setAttribute:function(e,t){s.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0"),this.set(e,t)},attr:function(e,t){var n=arguments.length;return n>=2||typeof e=="object"?this.set.apply(this,arguments):this.get(e)},getDescendants:function(){return s.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0"),this.containerNode?u("[widgetId]",this.containerNode).map(f.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});return i("dijit-legacy-requires")&&a(0,function(){var e=["dijit/_base"];require(e)}),v}),pen.define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=t("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments),e.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(e){this.watch(e,s.hitch(this,"_setStateClass"))},this);for(var t in this.cssStateNodes||{})this._trackMouseState(this[t],this.cssStateNodes[t]);this._trackMouseState(this.domNode,this.baseClass),this._setStateClass()},_cssMouseEvent:function(e){if(!this.disabled)switch(e.type){case"mouseover":case"MSPointerOver":case"pointerover":this._set("hovering",!0),this._set("active",this._mouseDown);break;case"mouseout":case"MSPointerOut":case"pointerout":this._set("hovering",!1),this._set("active",!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":this._set("active",!0);break;case"mouseup":case"dojotouchend":case"MSPointerUp":case"pointerup":case"keyup":this._set("active",!1)}},_setStateClass:function(){function n(n){t=t.concat(e.map(t,function(e){return e+n}),"dijit"+n)}var t=this.baseClass.split(" ");this.isLeftToRight()||n("Rtl");var r=this.checked=="mixed"?"Mixed":this.checked?"Checked":"";this.checked&&n(r),this.state&&n(this.state),this.selected&&n("Selected"),this._opened&&n("Opened"),this.disabled?n("Disabled"):this.readOnly?n("ReadOnly"):this.active?n("Active"):this.hovering&&n("Hover"),this.focused&&n("Focused");var i=this.stateNode||this.domNode,s={};if(typeof i=="undefined"||i==null)return;e.forEach(i.className.split(" "),function(e){s[e]=!0}),"_stateClasses"in this&&e.forEach(this._stateClasses,function(e){delete s[e]}),e.forEach(t,function(e){s[e]=!0});var o=[];for(var u in s)o.push(u);i.className=o.join(" "),this._stateClasses=t},_subnodeCssMouseEvent:function(e,t,n){function i(n){r.toggle(e,t+"Hover",n)}function s(n){r.toggle(e,t+"Active",n)}function o(n){r.toggle(e,t+"Focused",n)}if(this.disabled||this.readOnly)return;switch(n.type){case"mouseover":case"MSPointerOver":case"pointerover":i(!0);break;case"mouseout":case"MSPointerOut":case"pointerout":i(!1),s(!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":s(!0);break;case"mouseup":case"MSPointerUp":case"pointerup":case"dojotouchend":case"keyup":s(!1);break;case"focus":case"focusin":o(!0);break;case"blur":case"focusout":o(!1)}},_trackMouseState:function(e,t){e._cssState=t}});return u(function(){function e(e,t,r){if(r&&n.isDescendant(r,t))return;for(var i=t;i&&i!=r;i=i.parentNode)if(i._cssState){var s=c.getEnclosingWidget(i);s&&(i==s.domNode?s._cssMouseEvent(e):s._subnodeCssMouseEvent(i,i._cssState,e))}}var t=f.body(),r;o(t,a.over,function(t){e(t,t.target,t.relatedTarget)}),o(t,a.out,function(t){e(t,t.target,t.relatedTarget)}),o(t,l.press,function(t){r=t.target,e(t,r)}),o(t,l.release,function(t){e(t,r),r=null}),o(t,"focusin, focusout",function(e){var t=e.target;if(t._cssState&&!t.getAttribute("widgetId")){var n=c.getEnclosingWidget(t);n&&n._subnodeCssMouseEvent(t,t._cssState,e)}})}),h}),pen.define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(e,t,n,r,i){var s=new e,o;return n(function(){var e=i.getBox();s._rlh=t(window,"resize",function(){var t=i.getBox();if(e.h==t.h&&e.w==t.w)return;e=t,s.emit("resize")});if(r("ie")==8){var n=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=n&&(n=screen.deviceXDPI,s.emit("resize"))},500)}r("ios")&&(t(document,"focusin",function(e){o=e.target}),t(document,"focusout",function(e){o=null}))}),s.getEffectiveBox=function(e){var t=i.getBox(e),n=o&&o.tagName&&o.tagName.toLowerCase();if(r("ios")&&o&&!o.readOnly&&(n=="textarea"||n=="input"&&/^(color|email|number|password|search|tel|text|url)$/.test(o.type))){t.h*=orientation==0||orientation==180?.66:.4;var s=o.getBoundingClientRect();t.h=Math.max(t.h,s.top+s.height)}return t},s}),pen.define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(e,t,n,r,i,s,o){function u(r,o,u,a){var f=s.getEffectiveBox(r.ownerDocument);(!r.parentNode||String(r.parentNode.tagName).toLowerCase()!="body")&&i.body(r.ownerDocument).appendChild(r);var l=null;e.some(o,function(e){var n=e.corner,i=e.pos,s=0,o={w:{L:f.l+f.w-i.x,R:i.x-f.l,M:f.w}[n.charAt(1)],h:{T:f.t+f.h-i.y,B:i.y-f.t,M:f.h}[n.charAt(0)]},c=r.style;c.left=c.right="auto";if(u){var h=u(r,e.aroundCorner,n,o,a);s=typeof h=="undefined"?0:h}var p=r.style,d=p.display,v=p.visibility;p.display=="none"&&(p.visibility="hidden",p.display="");var m=t.position(r);p.display=d,p.visibility=v;var g={L:i.x,R:i.x-m.w,M:Math.max(f.l,Math.min(f.l+f.w,i.x+(m.w>>1))-m.w)}[n.charAt(1)],y={T:i.y,B:i.y-m.h,M:Math.max(f.t,Math.min(f.t+f.h,i.y+(m.h>>1))-m.h)}[n.charAt(0)],b=Math.max(f.l,g),w=Math.max(f.t,y),E=Math.min(f.l+f.w,g+m.w),S=Math.min(f.t+f.h,y+m.h),x=E-b,T=S-w;s+=m.w-x+(m.h-T);if(l==null||s<l.overflow)l={corner:n,aroundCorner:e.aroundCorner,x:b,y:w,w:x,h:T,overflow:s,spaceAvailable:o};return!s}),l.overflow&&u&&u(r,l.aroundCorner,l.corner,l.spaceAvailable,a);var c=t.isBodyLtr(r.ownerDocument),h=l.y,p=c?l.x:f.w-l.x-l.w;/relative|absolute/.test(n.get(i.body(r.ownerDocument),"position"))&&(h-=n.get(i.body(r.ownerDocument),"marginTop"),p-=(c?1:-1)*n.get(i.body(r.ownerDocument),c?"marginLeft":"marginRight"));var d=r.style;return d.top=h+"px",d[c?"left":"right"]=p+"px",d[c?"right":"left"]="auto",l}var a={TL:"BR",TR:"BL",BL:"TR",BR:"TL"},f={at:function(t,n,r,i,s){var o=e.map(r,function(e){var t={corner:e,aroundCorner:a[e],pos:{x:n.x,y:n.y}};return i&&(t.pos.x+=e.charAt(1)=="L"?i.x:-i.x,t.pos.y+=e.charAt(0)=="T"?i.y:-i.y),t});return u(t,o,s)},around:function(i,s,o,a,f){function C(e,t){N.push({aroundCorner:e,corner:t,pos:{x:{L:E,R:E+x,M:E+(x>>1)}[e.charAt(1)],y:{T:S,B:S+T,M:S+(T>>1)}[e.charAt(0)]}})}var l;if(typeof s=="string"||"offsetWidth"in s){l=t.position(s,!0);if(/^(above|below)/.test(o[0])){var c=t.getBorderExtents(s),h=s.firstChild?t.getBorderExtents(s.firstChild):{t:0,l:0,b:0,r:0},p=t.getBorderExtents(i),d=i.firstChild?t.getBorderExtents(i.firstChild):{t:0,l:0,b:0,r:0};l.y+=Math.min(c.t+h.t,p.t+d.t),l.h-=Math.min(c.t+h.t,p.t+d.t)+Math.min(c.b+h.b,p.b+d.b)}}else l=s;if(s.parentNode){var v=n.getComputedStyle(s).position=="absolute",m=s.parentNode;while(m&&m.nodeType==1&&m.nodeName!="BODY"){var g=t.position(m,!0),y=n.getComputedStyle(m);/relative|absolute/.test(y.position)&&(v=!1);if(!v&&/hidden|auto|scroll/.test(y.overflow)){var b=Math.min(l.y+l.h,g.y+g.h),w=Math.min(l.x+l.w,g.x+g.w);l.x=Math.max(l.x,g.x),l.y=Math.max(l.y,g.y),l.h=b-l.y,l.w=w-l.x}y.position=="absolute"&&(v=!0),m=m.parentNode}}var E=l.x,S=l.y,x="w"in l?l.w:l.w=l.width,T="h"in l?l.h:(r.deprecated("place.around: dijit/place.__Rectangle: { x:"+E+", y:"+S+", height:"+l.height+", width:"+x+" } has been deprecated.  Please use { x:"+E+", y:"+S+", h:"+l.height+", w:"+x+" }","","2.0"),l.h=l.height),N=[];e.forEach(o,function(e){var t=a;switch(e){case"above-centered":C("TM","BM");break;case"below-centered":C("BM","TM");break;case"after-centered":t=!t;case"before-centered":C(t?"ML":"MR",t?"MR":"ML");break;case"after":t=!t;case"before":C(t?"TL":"TR",t?"TR":"TL"),C(t?"BL":"BR",t?"BR":"BL");break;case"below-alt":t=!t;case"below":C(t?"BL":"BR",t?"TL":"TR"),C(t?"BR":"BL",t?"TR":"TL");break;case"above-alt":t=!t;case"above":C(t?"TL":"TR",t?"BL":"BR"),C(t?"TR":"TL",t?"BR":"BL");break;default:C(e.aroundCorner,e.corner)}});var k=u(i,N,f,{w:x,h:T});return k.aroundNodePos=l,k}};return o.place=f}),pen.define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff"],function(e,t,n,r,i,s,o,u){u.add("config-bgIframe",!u("touch"));var a=new function(){var t=[];this.pop=function(){var s;if(t.length)s=t.pop(),s.style.display="";else{if(u("ie")<9){var o=n.dojoBlankHtmlUrl||e.toUrl("dojo/resources/blank.html")||'javascript:""',a="<iframe src='"+o+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+'z-index: -1; filter:Alpha(Opacity="0");\'>';s=document.createElement(a)}else s=r.create("iframe"),s.src='javascript:""',s.className="dijitBackgroundIframe",s.setAttribute("role","presentation"),i.set(s,"opacity",.1);s.tabIndex=-1}return s},this.push=function(e){e.style.display="none",t.push(e)}};return t.BackgroundIframe=function(e){if(!e.id)throw new Error("no id");if(u("config-bgIframe")){var t=this.iframe=a.pop();e.appendChild(t),u("ie")<7||u("quirks")?(this.resize(e),this._conn=o(e,"resize",s.hitch(this,"resize",e))):i.set(t,{width:"100%",height:"100%"})}},s.extend(t.BackgroundIframe,{resize:function(e){this.iframe&&i.set(this.iframe,{width:e.offsetWidth+"px",height:e.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null),this.iframe&&(a.push(this.iframe),delete this.iframe)}}),t.BackgroundIframe}),pen.define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){function m(){this._popupWrapper&&(s.destroy(this._popupWrapper),delete this._popupWrapper)}var g=n(null,{_stack:[],_beginZIndex:1e3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var e=this._firstAroundPosition,t=o.position(this._firstAroundNode,!0),n=t.x-e.x,r=t.y-e.y;if(n||r){this._firstAroundPosition=t;for(var i=0;i<this._stack.length;i++){var s=this._stack[i].wrapper.style;s.top=parseInt(s.top,10)+r+"px",s.right=="auto"?s.left=parseInt(s.left,10)+n+"px":s.right=parseInt(s.right,10)-n+"px"}}this._aroundMoveListener=setTimeout(l.hitch(this,"_repositionAll"),n||r?10:50)}},_createWrapper:function(e){var n=e._popupWrapper,r=e.domNode;if(!n){n=s.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":e["aria-label"]||e.label||e.name||e.id},e.ownerDocumentBody),n.appendChild(r);var i=r.style;i.display="",i.visibility="",i.position="",i.top="0px",e._popupWrapper=n,t.after(e,"destroy",m,!0)}return n},moveOffScreen:function(e){var t=this._createWrapper(e),n=o.isBodyLtr(e.ownerDocument),r={visibility:"hidden",top:"-9999px",display:""};return r[n?"left":"right"]="-9999px",r[n?"right":"left"]="auto",u.set(t,r),t},hide:function(e){var t=this._createWrapper(e);u.set(t,{display:"none",height:"auto",overflow:"visible",border:""});var n=e.domNode;"_originalStyle"in n&&(n.style.cssText=n._originalStyle)},getTopPopup:function(){var e=this._stack;for(var t=e.length-1;t>0&&e[t].parent===e[t-1].widget;t--);return e[t]},open:function(e){var t=this._stack,n=e.popup,s=n.domNode,v=e.orient||["below","below-alt","above","above-alt"],m=e.parent?e.parent.isLeftToRight():o.isBodyLtr(n.ownerDocument),g=e.around,y=e.around&&e.around.id?e.around.id+"_dropdown":"popup_"+this._idGen++;while(t.length&&(!e.parent||!r.isDescendant(e.parent.domNode,t[t.length-1].widget.domNode)))this.close(t[t.length-1].widget);var b=this.moveOffScreen(n);n.startup&&!n._started&&n.startup();var w,E=o.position(s);if("maxHeight"in e&&e.maxHeight!=-1)w=e.maxHeight||Infinity;else{var S=d.getEffectiveBox(this.ownerDocument),x=g?o.position(g,!1):{y:e.y-(e.padding||0),h:(e.padding||0)*2};w=Math.floor(Math.max(x.y,S.h-(x.y+x.h)))}if(E.h>w){var T=u.getComputedStyle(s),N=T.borderLeftWidth+" "+T.borderLeftStyle+" "+T.borderLeftColor;u.set(b,{overflowY:"scroll",height:w+"px",border:N}),s._originalStyle=s.style.cssText,s.style.border="none"}i.set(b,{id:y,style:{zIndex:this._beginZIndex+t.length},"class":"dijitPopup "+(n.baseClass||n["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:e.parent?e.parent.id:""}),t.length==0&&g&&(this._firstAroundNode=g,this._firstAroundPosition=o.position(g,!0),this._aroundMoveListener=setTimeout(l.hitch(this,"_repositionAll"),50)),a("config-bgIframe")&&!n.bgIframe&&(n.bgIframe=new p(b));var C=n.orient?l.hitch(n,"orient"):null,k=g?h.around(b,g,v,m,C):h.at(b,e,v=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],e.padding,C);b.style.visibility="visible",s.style.visibility="visible";var L=[];return L.push(c(b,"keydown",l.hitch(this,function(t){if(t.keyCode==f.ESCAPE&&e.onCancel)t.stopPropagation(),t.preventDefault(),e.onCancel();else if(t.keyCode==f.TAB){t.stopPropagation(),t.preventDefault();var n=this.getTopPopup();n&&n.onCancel&&n.onCancel()}}))),n.onCancel&&e.onCancel&&L.push(n.on("cancel",e.onCancel)),L.push(n.on(n.onExecute?"execute":"change",l.hitch(this,function(){var e=this.getTopPopup();e&&e.onExecute&&e.onExecute()}))),t.push({widget:n,wrapper:b,parent:e.parent,onExecute:e.onExecute,onCancel:e.onCancel,onClose:e.onClose,handlers:L}),n.onOpen&&n.onOpen(k),k},close:function(t){var n=this._stack;while(t&&e.some(n,function(e){return e.widget==t})||!t&&n.length){var r=n.pop(),i=r.widget,s=r.onClose;i.onClose&&i.onClose();var o;while(o=r.handlers.pop())o.remove();i&&i.domNode&&this.hide(i),s&&s()}n.length==0&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return v.popup=new g}),pen.define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(e,t,n,r,i,s,o,u,a,f){return t("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(t){this._set("disabled",t),n.set(this.focusNode,"disabled",t),this.valueNode&&n.set(this.valueNode,"disabled",t),this.focusNode.setAttribute("aria-disabled",t?"true":"false");if(t){this._set("hovering",!1),this._set("active",!1);var r="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode";e.forEach(i.isArray(r)?r:[r],function(e){var t=this[e];u("webkit")||f.hasDefaultTabStop(t)?t.setAttribute("tabIndex","-1"):t.removeAttribute("tabIndex")},this)}else this.tabIndex!=""&&this.set("tabIndex",this.tabIndex)},_onFocus:function(e){if(e=="mouse"&&this.isFocusable())var t=this.own(o(this.focusNode,"focus",function(){n.remove(),t.remove()}))[0],n=this.own(o(this.ownerDocumentBody,"mouseup, touchend",i.hitch(this,function(e){n.remove(),t.remove(),this.focused&&(e.type=="touchend"?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){a.scrollIntoView(this.domNode)}),this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&r.get(this.domNode,"display")!="none"},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(e){}},compare:function(e,t){return typeof e=="number"&&typeof t=="number"?isNaN(e)&&isNaN(t)?0:e-t:e>t?1:e<t?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(e,t){this._lastValueReported==undefined&&(t===null||!this._onChangeActive)&&(this._resetValue=this._lastValueReported=e),this._pendingOnChange=this._pendingOnChange||typeof e!=typeof this._lastValueReported||this.compare(e,this._lastValueReported)!=0,(this.intermediateChanges||t||t===undefined)&&this._pendingOnChange&&(this._lastValueReported=e,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null,this.onChange(e)})))},create:function(){this.inherited(arguments),this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported)),this.inherited(arguments)}})}),pen.define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(e,t,n,r,i,s,o,u){return t("dijit-legacy-requires")&&r(0,function(){var e=["dijit/form/_FormValueWidget"];require(e)}),e("dijit.form._FormWidget",[i,o,s,u],{setDisabled:function(e){n.deprecated("setDisabled("+e+") is deprecated. Use set('disabled',"+e+") instead.","","2.0"),this.set("disabled",e)},setValue:function(e){n.deprecated("dijit.form._FormWidget:setValue("+e+") is deprecated.  Use set('value',"+e+") instead.","","2.0"),this.set("value",e)},getValue:function(){return n.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!t("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"",this.inherited(arguments)},_setTypeAttr:null})}),pen.define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(e,t,n,r){var i=e("dijit.form._ButtonMixin"+(n("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){return e.stopPropagation(),e.preventDefault(),this.disabled||this.valueNode.click(e),!1},_onClick:function(e){if(this.disabled)return e.stopPropagation(),e.preventDefault(),!1;this.onClick(e)===!1&&e.preventDefault();var t=e.defaultPrevented;if(!t&&this.type=="submit"&&!(this.valueNode||this.focusNode).form)for(var n=this.domNode;n.parentNode;n=n.parentNode){var i=r.byNode(n);if(i&&typeof i._onSubmit=="function"){i._onSubmit(e),e.preventDefault(),t=!0;break}}return!t},postCreate:function(){this.inherited(arguments),t.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(e){this._set("label",e);var t=this.containerNode||this.focusNode;t.innerHTML=e}});return n("dojo-bidi")&&(i=e("dijit.form._ButtonMixin",i,{_setLabelAttr:function(){this.inherited(arguments);var e=this.containerNode||this.focusNode;this.applyTextDir(e)}})),i}),pen.define("dojo/text!dijit/form/templates/Button.html",[],function(){return'<span class="dijit dijitReset dijitInline" role="presentation"\n	><span class="dijitReset dijitInline dijitButtonNode pentaho-button"\n		data-dojo-attach-event="ondijitclick:__onClick" role="presentation"\n		><span class="dijitReset dijitStretch dijitButtonContents"\n			data-dojo-attach-point="titleNode,focusNode"\n			role="button" aria-labelledby="${id}_label"\n			><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n			><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n			><span class="dijitReset dijitInline dijitButtonText"\n				id="${id}_label"\n				data-dojo-attach-point="containerNode"\n			></span\n		></span\n	></span\n	><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n		data-dojo-attach-event="onclick:_onClick"\n		tabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n'}),pen.define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(e,t,n,r,i,s,o,u,a,f){r("dijit-legacy-requires")&&o(0,function(){var t=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];e(t)});var l=t("dijit.form.Button"+(r("dojo-bidi")?"_NoBidi":""),[u,a],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:f,_setValueAttr:"valueNode",_setNameAttr:function(e){this.valueNode&&this.valueNode.setAttribute("name",e)},_fillContent:function(e){if(e&&(!this.params||!("label"in this.params))){var t=s.trim(e.innerHTML);t&&(this.label=t)}},_setShowLabelAttr:function(e){this.containerNode&&n.toggle(this.containerNode,"dijitDisplayNone",!e),this._set("showLabel",e)},setLabel:function(e){i.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",e)},_setLabelAttr:function(e){this.inherited(arguments),!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=s.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});return r("dojo-bidi")&&(l=t("dijit.form.Button",l,{_setLabelAttr:function(e){this.inherited(arguments),this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(e){this._created&&this.textDir!=e&&(this._set("textDir",e),this._setLabelAttr(this.label))}})),l}),pen.define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(e,t,n,r){return t("dijit._Container",null,{buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode)},addChild:function(e,t){var r=this.containerNode;if(t>0){r=r.firstChild;while(t>0)r.nodeType==1&&t--,r=r.nextSibling;r?t="before":(r=this.containerNode,t="last")}n.place(e.domNode,r,t),this._started&&!e._started&&e.startup()},removeChild:function(e){typeof e=="number"&&(e=this.getChildren()[e]);if(e){var t=e.domNode;t&&t.parentNode&&t.parentNode.removeChild(t)}},hasChildren:function(){return this.getChildren().length>0},_getSiblingOfChild:function(t,n){r.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var i=this.getChildren(),s=e.indexOf(i,t);return i[s+n]},getIndexOfChild:function(t){return e.indexOf(this.getChildren(),t)}})}),pen.define("dojo/_base/Deferred",["./kernel","../Deferred","../promise/Promise","../errors/CancelError","../has","./lang","../when"],function(e,t,n,r,i,s,o){var u=function(){},a=Object.freeze||function(){},f=e.Deferred=function(e){function g(e){if(l)throw new Error("This deferred has already been resolved");o=e,l=!0,y()}function y(){var e;while(!e&&v){var n=v;v=v.next;if(e=n.progress==u)l=!1;var r=p?n.error:n.resolved;i("config-useDeferredInstrumentation")&&p&&t.instrumentRejected&&t.instrumentRejected(o,!!r);if(r)try{var a=r(o);if(a&&typeof a.then=="function"){a.then(s.hitch(n.deferred,"resolve"),s.hitch(n.deferred,"reject"),s.hitch(n.deferred,"progress"));continue}var f=e&&a===undefined;e&&!f&&(p=a instanceof Error),n.deferred[f&&p?"reject":"resolve"](f?o:a)}catch(c){n.deferred.reject(c)}else p?n.deferred.reject(o):n.deferred.resolve(o)}}var o,l,c,h,p,d,v,m=this.promise=new n;this.isResolved=m.isResolved=function(){return h==0},this.isRejected=m.isRejected=function(){return h==1},this.isFulfilled=m.isFulfilled=function(){return h>=0},this.isCanceled=m.isCanceled=function(){return c},this.resolve=this.callback=function(e){this.fired=h=0,this.results=[e,null],g(e)},this.reject=this.errback=function(e){p=!0,this.fired=h=1,i("config-useDeferredInstrumentation")&&t.instrumentRejected&&t.instrumentRejected(e,!!v),g(e),this.results=[null,e]},this.progress=function(e){var t=v;while(t){var n=t.progress;n&&n(e),t=t.next}},this.addCallbacks=function(e,t){return this.then(e,t,u),this},m.then=this.then=function(e,t,n){var r=n==u?this:new f(m.cancel),i={resolved:e,error:t,progress:n,deferred:r};return v?d=d.next=i:v=d=i,l&&y(),r.promise};var b=this;m.cancel=this.cancel=function(){if(!l){var t=e&&e(b);l||(t instanceof Error||(t=new r(t)),t.log=!1,b.reject(t))}c=!0},a(m)};return s.extend(f,{addCallback:function(t){return this.addCallbacks(s.hitch.apply(e,arguments))},addErrback:function(t){return this.addCallbacks(null,s.hitch.apply(e,arguments))},addBoth:function(t){var n=s.hitch.apply(e,arguments);return this.addCallbacks(n,n)},fired:-1}),f.when=e.when=o,f}),pen.define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){return e("dijit._HasDropDown",v,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly)return;e.type!="MSPointerDown"&&e.type!="pointerdown"&&e.preventDefault(),this._docHandler=this.own(l(this.ownerDocument,c.release,f.hitch(this,"_onDropDownMouseUp")))[0],this.toggleDropDown()},_onDropDownMouseUp:function(e){e&&this._docHandler&&(this._docHandler.remove(),this._docHandler=null);var t=this.dropDown,n=!1;if(e&&this._opened){var r=s.position(this._buttonNode,!0);if(!(e.pageX>=r.x&&e.pageX<=r.x+r.w)||!(e.pageY>=r.y&&e.pageY<=r.y+r.h)){var o=e.target;while(o&&!n)i.contains(o,"dijitPopup")?n=!0:o=o.parentNode;if(n){o=e.target;if(t.onItemClick){var u;while(o&&!(u=h.byNode(o)))o=o.parentNode;u&&u.onClick&&u.getParent&&u.getParent().onItemClick(u,e)}return}}}this._opened?t.focus&&(t.autoFocus!==!1||e.type=="mouseup"&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){t.focus(),delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(e){this._stopClickEvents&&(e.stopPropagation(),e.preventDefault())},buildRendering:function(){this.inherited(arguments),this._buttonNode=this._buttonNode||this.focusNode||this.domNode,this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var e={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";i.add(this._arrowWrapperNode||this._buttonNode,"dijit"+e+"ArrowButton")},postCreate:function(){this.inherited(arguments);var e=this.focusNode||this.domNode;this.own(l(this._buttonNode,c.press,f.hitch(this,"_onDropDownMouseDown")),l(this._buttonNode,"click",f.hitch(this,"_onDropDownClick")),l(e,"keydown",f.hitch(this,"_onKey")),l(e,"keyup",f.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown),this.inherited(arguments)},_onKey:function(e){if(this.disabled||this.readOnly)return;var t=this.dropDown,n=e.target;if(t&&this._opened&&t.handleKey&&t.handleKey(e)===!1){e.stopPropagation(),e.preventDefault();return}t&&this._opened&&e.keyCode==a.ESCAPE?(this.closeDropDown(),e.stopPropagation(),e.preventDefault()):!this._opened&&(e.keyCode==a.DOWN_ARROW||(e.keyCode==a.ENTER||e.keyCode==a.SPACE&&(!this._searchTimer||e.ctrlKey||e.altKey||e.metaKey))&&((n.tagName||"").toLowerCase()!=="input"||n.type&&n.type.toLowerCase()!=="text"))&&(this._toggleOnKeyUp=!0,e.stopPropagation(),e.preventDefault())},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp,this.toggleDropDown();var e=this.dropDown;e&&e.focus&&this.defer(f.hitch(e,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1),this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(e){e()},loadAndOpenDropDown:function(){var e=new t,n=f.hitch(this,function(){this.openDropDown(),e.resolve(this.dropDown)});return this.isLoaded()?n():this.loadDropDown(n),e},toggleDropDown:function(){if(this.disabled||this.readOnly)return;this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown()},openDropDown:function(){var e=this.dropDown,t=e.domNode,n=this._aroundNode||this.domNode,o=this,u=d.open({parent:this,popup:e,around:n,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){o.closeDropDown(!0)},onCancel:function(){o.closeDropDown(!0)},onClose:function(){typeof o._popupStateNode!="undefined"&&o._popupStateNode!=null&&(r.set(o._popupStateNode,"popupActive",!1),i.remove(o._popupStateNode,"dijitHasDropDownOpen")),o._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&n.offsetWidth>e._popupWrapper.offsetWidth){var a={w:n.offsetWidth-(e._popupWrapper.offsetWidth-e.domNode.offsetWidth)};f.isFunction(e.resize)?e.resize(a):s.setMarginBox(t,a)}return typeof o._popupStateNode!="undefined"&&o._popupStateNode!=null&&(r.set(this._popupStateNode,"popupActive","true"),i.add(this._popupStateNode,"dijitHasDropDownOpen")),this._set("_opened",!0),typeof o._popupStateNode!="undefined"&&o._popupStateNode!=null&&(this._popupStateNode.setAttribute("aria-expanded","true"),this._popupStateNode.setAttribute("aria-owns",e.id)),t.getAttribute("role")!=="presentation"&&!t.getAttribute("aria-labelledby")&&t.setAttribute("aria-labelledby",this.id),u},closeDropDown:function(e){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer),this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),e&&this.focus(),d.close(this.dropDown),this._opened=!1)}})}),pen.define("dojo/text!dijit/form/templates/DropDownButton.html",[],function(){return'<span class="dijit dijitReset dijitInline"\n	><span class=\'dijitReset dijitInline dijitButtonNode\'\n		data-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\n		><span class="dijitReset dijitStretch dijitButtonContents"\n			data-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n			role="button" aria-haspopup="true" aria-labelledby="${id}_label"\n			><span class="dijitReset dijitInline dijitIcon"\n				data-dojo-attach-point="iconNode"\n			></span\n			><span class="dijitReset dijitInline dijitButtonText"\n				data-dojo-attach-point="containerNode"\n				id="${id}_label"\n			></span\n			><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n			><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n		></span\n	></span\n	><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n		data-dojo-attach-event="onclick:_onClick"\n		data-dojo-attach-point="valueNode" role="presentation"\n/></span>\n'}),pen.define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(e,t,n,r,i,s,o,u,a){return e("dijit.form.DropDownButton",[s,o,u],{baseClass:"dijitDropDownButton",templateString:a,_fillContent:function(){if(this.srcNodeRef){var e=n("*",this.srcNodeRef);this.inherited(arguments,[e[0]]),this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started)return;if(!this.dropDown&&this.dropDownContainer){var e=n("[widgetId]",this.dropDownContainer)[0];e&&(this.dropDown=r.byNode(e)),delete this.dropDownContainer}this.dropDown&&i.hide(this.dropDown),this.inherited(arguments)},isLoaded:function(){var e=this.dropDown;return!!e&&(!e.href||e.isLoaded)},loadDropDown:function(e){var n=this.dropDown,r=n.on("load",t.hitch(this,function(){r.remove(),e()}));n.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})}),pen.define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=r("dijit.Calendar",[c,h,p],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(e){o.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",e)},_createMonthWidget:function(){return new m._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:a.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments),this.own(f(this.domNode,"keydown",a.hitch(this,"_onKeyDown")),f(this.dateRowsNode,"mouseover",a.hitch(this,"_onDayMouseOver")),f(this.dateRowsNode,"mouseout",a.hitch(this,"_onDayMouseOut")),f(this.dateRowsNode,"mousedown",a.hitch(this,"_onDayMouseDown")),f(this.dateRowsNode,"mouseup",a.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(e){var t=new this.dateClassObj(this.currentFocus);t.setDate(1),t.setMonth(e);var n=this.dateModule.getDaysInMonth(t),r=this.currentFocus.getDate();t.setDate(Math.min(r,n)),this._setCurrentFocusAttr(t)},_onDayMouseOver:function(e){var t=s.contains(e.target,"dijitCalendarDateLabel")?e.target.parentNode:e.target;t&&(t.dijitDateValue&&!s.contains(t,"dijitCalendarDisabledDate")||t==this.previousYearLabelNode||t==this.nextYearLabelNode)&&(s.add(t,"dijitCalendarHoveredDate"),this._currentNode=t)},_onDayMouseOut:function(e){if(!this._currentNode)return;if(e.relatedTarget&&e.relatedTarget.parentNode==this._currentNode)return;var t="dijitCalendarHoveredDate";s.contains(this._currentNode,"dijitCalendarActiveDate")&&(t+=" dijitCalendarActiveDate"),s.remove(this._currentNode,t),this._currentNode=null},_onDayMouseDown:function(e){var t=e.target.parentNode;t&&t.dijitDateValue&&!s.contains(t,"dijitCalendarDisabledDate")&&(s.add(t,"dijitCalendarActiveDate"),this._currentNode=t)},_onDayMouseUp:function(e){var t=e.target.parentNode;t&&t.dijitDateValue&&s.remove(t,"dijitCalendarActiveDate")},handleKey:function(e){var t=-1,n,r=this.currentFocus;switch(e.keyCode){case u.RIGHT_ARROW:t=1;case u.LEFT_ARROW:n="day",this.isLeftToRight()||(t*=-1);break;case u.DOWN_ARROW:t=1;case u.UP_ARROW:n="week";break;case u.PAGE_DOWN:t=1;case u.PAGE_UP:n=e.ctrlKey||e.altKey?"year":"month";break;case u.END:r=this.dateModule.add(r,"month",1),n="day";case u.HOME:r=new this.dateClassObj(r),r.setDate(1);break;default:return!0}return n&&(r=this.dateModule.add(r,n,t)),this._setCurrentFocusAttr(r),!1},_onKeyDown:function(e){this.handleKey(e)||(e.stopPropagation(),e.preventDefault())},onValueSelected:function(){},onChange:function(e){this.onValueSelected(e)},getClassForDate:function(){}});return m._MonthDropDownButton=r("dijit.Calendar._MonthDropDownButton",v,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments),this.dropDown=new m._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(e){var t=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,e);this.dropDown.set("months",t),this.containerNode.innerHTML=(l("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+t[e.getMonth()]+"</div>"}}),m._MonthDropDown=r("dijit.Calendar._MonthDropDown",[h,d],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(t){this.domNode.innerHTML=e.map(t,function(e,t){return e?"<div class='dijitCalendarMonthLabel' month='"+t+"'>"+e+"</div>":""}).join("")},_onClick:function(e){this.onChange(i.get(e.target,"month"))},onChange:function(){},_onMenuHover:function(e){s.toggle(e.target,"dijitCalendarMonthLabelHover",e.type=="mouseover")}}),m}),pen.define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(e,t,n,r){return e("dijit.form.MappedTextBox",r,{postMixInProperties:function(){this.inherited(arguments),this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(e){return e.toString?e.toString():""},toString:function(){var e=this.filter(this.get("value"));return e!=null?typeof e=="string"?e:this.serialize(e,this.constraints):""},validate:function(){return this.valueNode.value=this.toString(),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.valueNode=n.place("<input type='hidden'"+(this.name&&!t("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="",this.inherited(arguments)}})}),pen.define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(e,t,n){var r=e("dijit.form.RangeBoundTextBox",n,{rangeMessage:"",rangeCheck:function(e,t){return("min"in t?this.compare(e,t.min)>=0:!0)&&("max"in t?this.compare(e,t.max)<=0:!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var e=this.get("value");if(e==null)return!1;var t=!1;if("min"in this.constraints){var n=this.constraints.min;t=this.compare(e,typeof n=="number"&&n>=0&&e!=0?0:n)<0}if(!t&&"max"in this.constraints){var r=this.constraints.max;t=this.compare(e,typeof r!="number"||r>0?r:0)>0}return t},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(e){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(e))},getErrorMessage:function(e){var t=this.get("value");return t!=null&&t!==""&&(typeof t!="number"||!isNaN(t))&&!this.isInRange(e)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments),this.rangeMessage||(this.messages=t.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}});return r}),pen.define("dojo/text!dijit/form/templates/DropDownBox.html",[],function(){return'<div class="dijit dijitReset dijitInline dijitLeft"\n	id="widget_${id}"\n	role="combobox"\n	aria-haspopup="true"\n	data-dojo-attach-point="_popupStateNode"\n	><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n		data-dojo-attach-point="_buttonNode" role="presentation"\n		><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n			${_buttonInputDisabled}\n	/></div\n	><div class=\'dijitReset dijitValidationContainer\'\n		><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n	/></div\n	><div class="dijitReset dijitInputField dijitInputContainer"\n		><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n			data-dojo-attach-point="textbox,focusNode" role="textbox"\n	/></div\n></div>\n'}),pen.define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(e,t,n,r,i,s,o,u){new Date("X");var a=r("dijit.form._DateTimeTextBox",[s,o],{templateString:u,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:t.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},compare:function(t,n){var r=this._isInvalidDate(t),i=this._isInvalidDate(n);return r?i?0:-1:i?1:e.compare(t,n,this._selector)},autoWidth:!0,format:function(e,t){return e?this.dateLocaleModule.format(e,t):""},parse:function(e,t){return this.dateLocaleModule.parse(e,t)||(this._isEmpty(e)?null:undefined)},serialize:function(e,t){return e.toGregorian&&(e=e.toGregorian()),n.toISOString(e,t)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(n){this.dateModule=n.datePackage?i.getObject(n.datePackage,!1):e,this.dateClassObj=this.dateModule.Date||Date,this.dateLocaleModule=n.datePackage?i.getObject(n.datePackage+".locale",!1):t,this._set("pattern",this.dateLocaleModule.regexp),this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments),this.hasDownArrow||(this._buttonNode.style.display="none"),this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(e){e.selector=this._selector,e.fullYear=!0;var t=n.fromISOString;typeof e.min=="string"&&(e.min=t(e.min)),typeof e.max=="string"&&(e.max=t(e.max)),this.inherited(arguments)},_isInvalidDate:function(e){return!e||isNaN(e)||typeof e!="object"||e.toString()==this._invalidDate},_setValueAttr:function(e,t,r){e!==undefined&&(typeof e=="string"&&(e=n.fromISOString(e)),this._isInvalidDate(e)&&(e=null),e instanceof Date&&!(this.dateClassObj instanceof Date)&&(e=new this.dateClassObj(e))),this.inherited(arguments),this.value instanceof Date&&(this.filterString=""),this.dropDown&&this.dropDown.set("value",e,!1)},_set:function(e,t){var n=this._get("value");if(e=="value"&&n instanceof Date&&this.compare(t,n)==0)return;this.inherited(arguments)},_setDropDownDefaultValueAttr:function(e){this._isInvalidDate(e)&&(e=new this.dateClassObj),this._set("dropDownDefaultValue",e)},openDropDown:function(e){this.dropDown&&this.dropDown.destroy();var t=i.isString(this.popupClass)?i.getObject(this.popupClass,!1):this.popupClass,n=this,r=this.get("value");this.dropDown=new t({onChange:function(e){n.set("value",e,!0)},id:this.id+"_popup",dir:n.dir,lang:n.lang,value:r,textDir:n.textDir,currentFocus:this._isInvalidDate(r)?this.dropDownDefaultValue:r,constraints:n.constraints,filterString:n.filterString,datePackage:n.params.datePackage,isDisabledDate:function(e){return!n.rangeCheck(e,n.constraints)}}),this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(e,t){this._setValueAttr(this.parse(e,this.constraints),t,e)}});return a}),pen.define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(e,t,n){return e("dijit.form.DateTextBox",n,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:t,_selector:"date",maxHeight:Infinity,value:new Date("")})}),pen.define("common-ui/util/require-css/css!common-ui/prompting/components/DojoDateTextBoxComponent",[],function(){}),pen.define("common-ui/prompting/components/DojoDateTextBoxComponent",["cdf/components/BaseComponent","dojo/date/locale","dijit/form/DateTextBox","dijit/registry","amd!cdf/lib/jquery.ui","css!./DojoDateTextBoxComponent.css"],function(e,t,n,r,i){return e.extend({localeFormatter:t,clear:function(){this.onChangeHandle&&this.onChangeHandle.remove();var e=r.byId(this.dijitId);e&&e.destroyRecursive()},_parseDate:function(e){return this.transportFormatter?this.transportFormatter.parse(e):this.localeFormatter.parse(e,{datePattern:this.dateFormat,selector:"date"})},update:function(){this.dijitId==undefined&&(this.dijitId=this.htmlObject+"_input"),this.clear();var e=this,t=this.dashboard.getParameterValue(this.parameter),r=undefined;this._isLegacyDateFormat()&&this._convertFormat(),t?(i.isArray(t)&&(t=t.length==0?undefined:t.length==1?t[0]:t),t?r=this._parseDate(t):r=new Date):r=new Date,i("#"+this.htmlObject).html(i("<input/>").attr("id",this.dijitId));var s={datePattern:this._getDateFormat(),selector:"date",formatLength:"medium"};e.startDate=="TODAY"?s.min=new Date:e.startDate&&(s.min=this._parseDate(e.startDate)),e.endDate=="TODAY"?s.max=new Date:e.endDate&&(s.max=this._parseDate(e.endDate));var o=new n({name:this.name,constraints:s,onChange:function(){e.dashboard.processChange(e.name)}},this.dijitId);this._getDateFormat().match(/(^|(?!y).)(y{2}(?!y))/)&&(o.constraints.fullYear=!1),o.set("value",r),this._doAutoFocus()},getValue:function(){var e=r.byId(this.dijitId).get("value");return this._getFormattedDate(e)},_getFormattedDate:function(e){return this.transportFormatter?this.transportFormatter.format(e):this.localeFormatter.format(e,{datePattern:this._getDateFormat(),selector:"date"})},_isLegacyDateFormat:function(){var e,t=this._getDateFormat();if(t.match(/(^|(?!y).)(y{1}(?!y))/))return!0;try{e=this.localeFormatter.format(new Date,{datePattern:t,selector:"date"})}catch(n){return!0}return e==i.datepicker.formatDate(t,new Date)},_convertFormat:function(){var e=this;e.dateFormat=this._getDateFormat();var t=[[/(^|(?!y).)(y{1}(?!y))/,"$1yy"],[/(^|(?!y).)(y{2}(?!y))/,"$1yyyy"]],n=[[/(^|(?!M).)(M{1}(?!M))/,"$1MMM"],[/(^|(?!M).)(M{2}(?!M))/,"$1MMMM"]],r=[[/(^|(?!m).)(m{1}(?!m))/,"$1M"],[/(^|(?!m).)(m{2}(?!m))/,"$1MM"]],s=[[/(^|(?!D).)(D{1}(?!D))/,"$1EEE"],[/(^|(?!D).)(D{2}(?!D))/,"$1EEEE"]],o=[[/(^|(?!o).)(o{1}(?!o))/,"$1D"],[/(^|(?!o).)(o{2}(?!o))/,"$1DD"],[/(^|(?!o).)(o{3}(?!o))/,"$1DDD"]],u=function(t,n){if(n[0].test(e.dateFormat))return e.dateFormat=e.dateFormat.replace(n[0],n[1]),!1};i.each(t,u),i.each(n,u),i.each(r,u),i.each(s,u),i.each(o,u)},_getDateFormat:function(){return this.dateFormat?this.dateFormat:this.param&&this.param.attributes["data-format"]?this.param.attributes["data-format"]:"yyyy-MM-dd"}})}),pen.define("common-ui/prompting/builders/DateInputBuilder",["./FormattedParameterWidgetBuilderBase","../components/DojoDateTextBoxComponent"],function(e,t){return e.extend({build:function(e){var n=this.base(e);return $.extend(n,{type:"DojoDateTextBoxComponent"}),new t(n)}})}),pen.define("common-ui/prompting/components/ExternalInputComponent",["cdf/components/BaseComponent","dojo/_base/lang","dijit/registry"],function(e,t,n){return e.extend({clear:function(){this.dijitId&&(this.onChangeHandle&&this.onChangeHandle.remove(),n.byId(this.dijitId).destroyRecursive(),delete this.dijitId)},update:function(){var e=this,n=e.dashboard.getParameterValue(this.parameter),r=$("#"+this.htmlObject).empty(),i=this.htmlObject+"-textButtonCombo",s='<div id="'+i+'"></div>';r.append(s);var o=new pentaho.common.TextButtonCombo({},i);o.set("textPlaceHolder","file path..."),o.set("value",n);var u=this.param.attributes["button-label"];u!=null&&u!=""&&o.set("buttonLabel",u),o.onClickCallback=t.hitch(this,function(t){try{var n=e.dashboard.getComponentByName(this.name),r=function(t){o.set("text",t),e.dashboard.processChange(this.name)};n.param.values=[t],n.promptPanel.getExternalValueForParam(n.param,r)}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}}),this.dijitId=i,o.onChangeCallback=t.hitch(this,function(t){e.dashboard.processChange(this.name)})},getValue:function(){return n.byId(this.dijitId).get("value")}})}),pen.define("common-ui/prompting/builders/ExternalInputBuilder",["./FormattedParameterWidgetBuilderBase","../components/ExternalInputComponent"],function(e,t){return e.extend({build:function(e){var n=this.base(e);return $.extend(n,{type:"ExternalInputComponent",promptPanel:e.promptPanel,paramDefn:e.promptPanel.paramDefn}),new t(n)}})}),pen.define("cdf/components/TextareaInputComponent",["../lib/jquery","./BaseComponent"],function(e,t){var n=t.extend({update:function(){var t=this,n=t.name,r="<textarea id='"+n+"' name='"+n+(t.numRows?"' rows='"+t.numRows:"")+(t.numColumns?"' cols='"+t.numColumns:"")+"'>"+t.dashboard.getParameterValue(t.parameter)+"</textarea>";t.placeholder().html(r);var i=e("#"+n);i.change(function(){t.dashboard.getParameterValue(t.parameter)!==i.val()&&t.dashboard.processChange(n)})},getValue:function(){return e("#"+this.name).val()}});return n}),pen.define("common-ui/prompting/builders/TextAreaBuilder",["./FormattedParameterWidgetBuilderBase","cdf/components/TextareaInputComponent"],function(e,t){return e.extend({build:function(e){var n=this.base(e);$.extend(n,{name:n.name+"-input",type:"TextareaInputComponent",postExecution:function(){var e=$("#"+this.htmlObject+"-input");e.change(function(){}.bind(this)),e.keypress(function(e){e.which===13&&this.dashboard.processChange(this.name)}.bind(this)),e.focusout(function(){this.getValue()}.bind(this)),this._doAutoFocus()}});var r=new t(n);return r.getValue=function(){var e=$("#"+this.name).val();return this.formatter?this.transportFormatter.format(this.formatter.parse(e)):e},r}})}),pen.define("cdf/components/TextInputComponent",["../lib/jquery","./BaseComponent","../Logger"],function(e,t,n){var r=t.extend({update:function(){var t=this,r=t.name,i="<input type='text' id='"+r+"' name='"+r+"' value='"+t.dashboard.getParameterValue(t.parameter)+(t.size?"' size='"+t.size:t.charWidth?"' size='"+t.charWidth:"")+(t.maxLength?"' maxlength='"+t.maxLength:t.maxChars?"' maxlength='"+t.maxChars:"")+"'>";t.size&&n.warn("Attribute 'size' is deprecated"),t.maxLength&&n.warn("Attribute 'maxLength' is deprecated"),t.placeholder().html(i);var s=e("#"+r);s.change(function(){t.dashboard.getParameterValue(t.parameter)!==s.val()&&t.dashboard.processChange(r)}).keyup(function(e){e.keyCode==13&&t.dashboard.getParameterValue(t.parameter)!==s.val()&&t.dashboard.processChange(r)}),t._doAutoFocus()},getValue:function(){return e("#"+this.name).val()}});return r}),pen.define("common-ui/prompting/builders/TextInputBuilder",["common-ui/util/util","dojo/number","cdf/components/TextInputComponent","./FormattedParameterWidgetBuilderBase"],function(e,t,n,r){return r.extend({build:function(r){var i=this.base(r),s=i.name+"-input";return $.extend(i,{name:s,type:"TextInputComponent",preChange:function(){var e=$("#"+this.name).attr("value");this.dashboard.setParameter(this.parameter,t.parse(e,{locale:SESSION_LOCALE.toLowerCase()}))},postExecution:function(){this.base();var n;$.each(this.param.values,function(r,i){if(i.selected){n=this.formatter?this.formatter.format(this.transportFormatter.parse(i.label)):i.label;try{if(isNaN(i.label)||Math.abs(i.label)==Infinity)var s=null;else e.isNumberType(i.type)?s=t.format(i.label,{locale:SESSION_LOCALE.toLowerCase()}):s=i.label}catch(o){s=i.label}s!=null&&(n=i.label=i.value=s)}}),$("#"+this.name).attr("value",n)}}),new n(i)}})}),pen.define("common-ui/prompting/WidgetBuilder",["./builders/PromptPanelBuilder","./builders/ParameterGroupPanelBuilder","./builders/ParameterPanelBuilder","./builders/SubmitPanelBuilder","./builders/SubmitComponentBuilder","./builders/LabelBuilder","./builders/ErrorLabelBuilder","./builders/DropDownBuilder","./builders/RadioBuilder","./builders/CheckBuilder","./builders/MultiButtonBuilder","./builders/ListBuilder","./builders/DateInputBuilder","./builders/ExternalInputBuilder","./builders/TextAreaBuilder","./builders/TextInputBuilder"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){return{mapping:{"prompt-panel":new e,"group-panel":new t,"parameter-panel":new n,"submit-panel":new r,submit:new i,label:new s,"error-label":new o,dropdown:new u,radio:new a,checkbox:new f,togglebutton:new l,list:new c,datepicker:new h,filebrowser:new p,"external-input":new p,"multi-line":new d,"default":new v},_findBuilderFor:function(e,t){return t=t||(e.param&&e.param.attributes?e.param.attributes["parameter-render-type"]:null),this.mapping.hasOwnProperty(t)?this.mapping[t]:this.mapping["default"]},build:function(e,t){var n=this._findBuilderFor(e,t).build(e);return n.parameter&&n.param&&(n.postChange=function(){e.promptPanel.parameterChanged(this.param,this.parameter,this.getValue())}.bind(n)),n}}}),pen.define("cdf/dashboard/RefreshEngine",[],function(){return function(e){var t=0,n=new Array,r=null,i=t,s=null,o=function(){return{nextRefresh:0,component:null}},u=function(n){s!=null&&(clearInterval(s),s=null),i=n>0?n:t,i!=t&&(s=setInterval(e.refreshEngine.fireGlobalRefresh,i*1e3))},a=function(e){for(var t=0;t<n.length;t++)n[t].component==e&&(n.splice(t,1),t--)},f=function(){n.length>0&&n.splice(0,n.length)},l=function(e,t){var n=e.length-1,r=0,i;while(r<=n){i=parseInt((r+n)/2);if(e[i].nextRefresh>t.nextRefresh)n=i-1;else{if(!(e[i].nextRefresh<t.nextRefresh))return i;r=i+1}}return r},c=function(e,t){var n=l(e,t);e.splice(n,0,t)},h=function(){r!=null&&(clearTimeout(r),r=null)},p=function(){h(),e.refreshEngine.fireRefresh()},d=function(){return(new Date).getTime()},v=function(e){return n.length>0&&n[0].component==e},m=function(t){e.update(t)},g=function(e){var r=d();e.refreshPeriod>0||(e.refreshPeriod=t);if(e.refreshPeriod!=t){var i=new o;i.nextRefresh=r+e.refreshPeriod*1e3,i.component=e,c(n,i)}};return{registerComponent:function(e,n){if(!e)return!1;e.refreshPeriod=n>0?n:t;var r=v(e);return a(e),r&&p(),!0},getRefreshPeriod:function(e){return e&&e.refreshPeriod>0?e.refreshPeriod:t},processComponent:function(e){return a(e),g(e),v(e)&&p(),!0},processComponents:function(){f();for(var t=0;t<e.components.length;t++)g(e.components[t]);return p(),!0},fireRefresh:function(){r=null;var e=d();while(n.length>0&&n[0].nextRefresh<=e){var t=n.shift();m(t.component)}n.length>0&&(r=setTimeout(this.fireRefresh,n[0].nextRefresh-e))},fireGlobalRefresh:function(){for(var t=0;t<e.components.length;t++){var n=e.components[t];!(n.refreshPeriod>0)&&n.type!="select"&&m(n)}},setGlobalRefresh:function(e){u(e)},getQueue:function(){return n}}}}),pen.define("common-ui/util/require-css/css!cdf/lib/impromptu/jquery-impromptu",[],function(){}),Object.create||(Object.create=function(){function n(n){e.prototype=n||{};var r=new e;return e.prototype=t,r}var e=function(){},t=e.prototype;return n}()),Function.prototype.method=Function.prototype.method||function(e,t){return this.prototype[e]=t,this},String.prototype.endsWith||(String.prototype.endsWith=function(e){return this.match(e+"$")==e}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if(typeof i!="object"&&typeof i!="function"||i===null)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)e.call(i,o)&&s.push(o);if(t)for(var u=0;u<r;u++)e.call(i,n[u])&&s.push(n[u]);return s}}()),Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));var i=r>=0?Math.min(r,n-1):n-Math.abs(r);for(;i>=0;i--)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n,r=this.length,i;if(typeof t!="function")throw new TypeError("First argument is not callable");if((r==0||r===null)&&arguments.length<=1)throw new TypeError("Array length is 0 and no second argument");arguments.length<=1?(i=this[0],n=1):i=arguments[1];for(n=n||0;n<r;++n)n in this&&(i=t.call(undefined,i,this[n],n,this));return i}),Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Date.now||(Date.now=function(){return(new Date).valueOf()}),pen.define("cdf/lib/shims",function(){}),pen.define("common-ui/util/require-css/css!cdf/lib/cdf",[],function(){}),pen.define("cdf/dashboard/Dashboard",["../lib/Base","../Logger","./RefreshEngine","amd!../lib/underscore","amd!../lib/backbone","../lib/jquery","module","amd!../lib/jquery.impromptu","../lib/shims","css!../lib/cdf.css"],function(e,t,n,r,i,s,o){var u=e.extend({constructor:function(e){function u(e,n){typeof e=="function"?(t.info("Calling init method of module: "+n),e.apply(o)):t.warn("Not calling init method of module: "+n)}function a(){var e=this;typeof s=="function"?(s.ajaxSetup({async:!1,traditional:!0,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=UTF-8",dataFilter:function(t,n){return e.lastServerResponse=Date.now?Date.now():(new Date).getTime(),t}}),s.prompt&&typeof s.prompt.setDefaults=="function"?s.prompt.setDefaults({prefix:"jqi",show:"slideDown"}):t.log("$.prompt plugin not loaded!!"),typeof s.blockUI=="function"?(s.blockUI.defaults.fadeIn=0,s.blockUI.defaults.message='<div class="blockUIDefaultImg"></div>',s.blockUI.defaults.css.left="50%",s.blockUI.defaults.css.top="40%",s.blockUI.defaults.css.marginLeft="-16px",s.blockUI.defaults.css.width="32px",s.blockUI.defaults.css.background="none",s.blockUI.defaults.overlayCSS={backgroundColor:"#FFFFFF",opacity:.8,cursor:"wait"},s.blockUI.defaults.css.border="none"):t.log("$.blockUI plugin not loaded!!")):t.log("jQuery plugin not loaded!!")}var o=this;e&&(e.context&&(this.context=e.context),e.storage&&(!this.context||this.context.user!=="anonymousUser")&&(this.storage=e.storage),e.view&&(this.view=e.view)),r.extend(this,i.Events),a(),typeof CONTEXT_PATH!="undefined"&&(this.webAppPath=CONTEXT_PATH),this.webAppPath===undefined&&(this.webAppPath="/"+window.location.pathname.split("/")[1]),this.webAppPath.endsWith("/")&&(this.webAppPath=this.webAppPath.substr(0,this.webAppPath.length-1)),u(this._initContext,"Context"),u(this._initStorage,"Storage"),u(this._initViews,"Views"),u(this._initParameters,"Parameters"),u(this._initBookmarkables,"Bookmarkables"),u(this._initI18n,"I18n"),u(this._initComponents,"Components"),u(this._initLifecycle,"Lifecycle"),u(this._initNotifications,"Notifications"),u(this._initDataSources,"DataSources"),u(this._initQuery,"Query"),u(this._initAddIns,"AddIns"),this.refreshEngine=new n(this)},globalContext:!1,contextObj:o.config().context||{},storageObj:o.config().storage||{},viewObj:o.config().view,legacyPriority:-1e3,logLifecycle:!0,args:[],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],registerEvent:function(e,t){typeof this.events=="undefined"&&(this.events={}),this.events[e]=t},debug:1,syncDebugLevel:function(){var e=1;try{var t=function(e){return e&&/\bdebug=true\b/.test(e)?e:null},n=t(window.location.href)||t(window.top.location.href);if(n){var r=/\bdebugLevel=(\d+)/.exec(n);e=r?+r[1]:3}}catch(i){}return this.debug=e},setGlobalContext:function(e){this.globalContext=e},getWebAppPath:function(){return this.webAppPath},getWcdfSettings:function(){return t.info("getWcdfSettings was not overriden, returning empty object"),{}}});return u}),pen.define("dojo/io-query",["./_base/lang"],function(e){var t={};return{objectToQuery:function(r){var i=encodeURIComponent,s=[];for(var o in r){var u=r[o];if(u!=t[o]){var a=i(o)+"=";if(e.isArray(u))for(var f=0,l=u.length;f<l;++f)s.push(a+i(u[f]));else s.push(a+i(u))}}return s.join("&")},queryToObject:function(n){var r=decodeURIComponent,i=n.split("&"),s={},o,u;for(var a=0,f=i.length,l;a<f;++a){l=i[a];if(l.length){var c=l.indexOf("=");c<0?(o=r(l),u=""):(o=r(l.slice(0,c)),u=r(l.slice(c+1))),typeof s[o]=="string"&&(s[o]=[s[o]]),e.isArray(s[o])?s[o].push(u):s[o]=u}}return s}}}),pen.define("common-ui/util/URLEncoder",["dojo/_base/lang","dojo/_base/array","dojo/io-query"],function(e,t,n){function i(e){return e.replace(/%5C/g,"%255C").replace(/%2F/g,"%252F")}function s(e){return e.replace(/\\/g,"%5C").replace(/\//g,"%2F")}var r=e.getObject("pho.Encoder",!0);return r.encode=function(r,i,s){"use strict";if(typeof i=="undefined")return r;typeof i=="string"&&(i=[i]);var o=r.split("?")[0],u=(o.match(/\{[\d]+\}/g)||[]).length;i=t.map(i,function(e,t){var n=encodeURIComponent(String(e));return t<u&&(n=n.replace(/%5C/g,"%255C").replace(/%2F/g,"%252F")),n});var a=e.replace(r,i);return s&&(a+=a.indexOf("?")>-1?"&":"?",a+=n.objectToQuery(s)),a},r.encodeRepositoryPath=function(e){"use strict";var t=String(e).replace(new RegExp(":","g"),"	").replace(new RegExp("[\\\\/]","g"),":");return t},r.decodeRepositoryPath=function(e){return String(e).replace(new RegExp(":","g"),"/").replace(new RegExp("\\t","g"),":")},r}),pen.require(["common-ui/util/URLEncoder"]),pen.define("cdf/dashboard/Dashboard.ext",["common-ui/util/URLEncoder"],function(e){var t={pluginName:"pentaho-cdf",samplesBasePath:"/public/plugin-samples/",getPluginBase:function(e){return CONTEXT_PATH+"plugin/"+e+"/api"},getCdfBase:function(){return this.getPluginBase(this.pluginName)},getFilePathFromUrl:function(){var e=window.location.pathname;e.indexOf("/:")==-1&&(e=decodeURIComponent(window.location.pathname));if(e.indexOf("/:")>0){var t=e.match("(/:)(.*)(/)");if(t[2])return"/"+t[2].replace(new RegExp(":","g"),"/")}},getTimestamp:function(){return"ts="+(new Date).getTime()},getFullPath:function(e,t){e=e||"",t=t||"";var n=e.indexOf(this.pluginName)==0?this.samplesBasePath+e:e;return n+=(t?"/"+t:"").replace(/\/\//g,"/"),n},composePath:function(e){var t=function(e){return e.charAt(0)=="/"&&(e=e.substring(1,e.length)),e.charAt(e.length-1)=="/"&&(e=e.substring(0,e.length-1)),e},n="/";return e.solution&&(n+=t(e.solution)+"/"),e.path&&(n+=t(e.path)),e.action&&(n+="/"+t(e.action)),n},getSettings:function(e,t){return t?this.getCdfBase()+"/settings/"+e+"?"+$.param({key:t}):this.getCdfBase()+"/settings/"+e},getServiceAction:function(t,n,r,i){var s={};return s.wrapper=!1,s.action=i,s.url=e.encode(CONTEXT_PATH+"api/repos/{0}/generatedContent",e.encodeRepositoryPath(this.getFullPath(r,i))),s},getStaticResource:function(e){return this.getCdfBase()+"/resources/"+e},getCaptifyZoom:function(){return this.getStaticResource("js/lib/captify/zoom.html")},getExport:function(){return this.getCdfBase()+"/export"},getPluginEndpoint:function(e,t){return this.getPluginBase(e)+"/"+t},getJSONSolution:function(){return this.getCdfBase()+"/getJSONSolution"},getRenderHTML:function(){return this.getCdfBase()+"/RenderHtml"}};return t}),pen.define("cdf/dashboard/Dashboard.context.ext",["./Dashboard.ext"],function(e){var t={getContext:function(){return e.getCdfBase()+"/context/get"}};return t}),pen.define("cdf/dashboard/Dashboard.context",["../lib/jquery","./Dashboard","./Dashboard.ext","./Dashboard.context.ext"],function(e,t,n,r){t.implement({_initContext:function(){this.context||(this.context={},e.extend(this.context,this.contextObj))}})}),pen.define("cdf/dashboard/Container",[],function(){function e(e,t,r){var i;r||(r="instance"),this.build=function(n,s){if(i&&!s)return i;var o=t(e,n);return!s&&r==="singleton"&&(i=o),o},this.dispose=function(){i&&(n(i),i=null)}}function t(e,t,r){r||(r="external"),this.build=function(){return t},this.dispose=function(){t&&(r==="singleton"&&n(t),t=null)}}function n(e){typeof e.dispose=="function"&&e.dispose()}function i(e){for(var t in e)if(r.call(e,t))return!1;return!0}var r=Object.prototype.hasOwnProperty;return function(){function r(e,t){if(!e)throw new Error("Argument 'type' is required.");if(typeof e!="string")throw new Error("Argument 'type' must be a string.");var r=n[e];if(!t&&(!r||i(r)))throw new Error("There are no registrations for type '"+e+"'.");return r}function s(e,t,n){var i,s=r(e,n);if(s){i=s[t||""];if(!i&&!n)throw new Error("There is no registration for type '"+e+"'"+(t?" and name '"+t+"'":"")+".")}return i}function o(e,t,n,r,i){typeof t!="string"&&(n=t,t="");var o=s(e,t,i);return n?r=!0:r||(n={}),o?o.build(n,r):null}function u(e,t){var n=r(e,t),i=[];for(var s in n)i.push(n[s].build({},!1));return i}this.register=function(r,i,s,o){if(!r)throw new Error("Argument 'type' is required.");if(typeof r!="string")throw new Error("Argument 'type' must be a string.");i!=null&&(typeof i!="string"?(o=s,s=i,i=null):i||(i=null));if(!s)throw new Error("Argument 'what' is required.");var u;switch(typeof s){case"function":u=new e(this,s,o);break;case"object":u=new t(this,s,o);break;default:throw new Error("Argument 'what' is of an invalid type.")}i||(i="");var a=n[r]||(n[r]={}),f=a[i];f&&f.dispose(),a[i]=u},this.has=function(e,t){return!!s(e,t,!0)},this.canNew=function(t,n){return s(t,n,!1)instanceof e},this.get=function(e,t){return o(e,t,null,!1,!1)},this.tryGet=function(e,t){return o(e,t,null,!1,!0)},this.getNew=function(e,t,n){return o(e,t,n,!0,!1)},this.tryGetNew=function(e,t,n){return o(e,t,n,!0,!0)},this.getAll=function(e){return u(e,!1)},this.tryGetAll=function(e){return u(e,!0)},this.listType=function(e){return r(e,!1)},this.tryListType=function(e){return r(e,!0)},this.dispose=function(){if(n){for(var e in n){var t=n[e];for(var r in t)t[r].dispose()}n=null}};var n={}}}),pen.define("cdf/dashboard/Dashboard.addIns",["./Dashboard","./Container","./Utils"],function(e,t,n){function i(e,t){return e.indexOf("Component",e.length-"Component".length)!==-1&&(e=e.substring(0,e.length-"Component".length)),e=e.charAt(0).toUpperCase()+e.substring(1),t&&(e+="."+t),e}var r=new t;e.registerGlobalAddIn=function(e,t,n){var e=i(e,t),s=n.getName?n.getName():null;r.register(e,s,n)},e.implement({_initAddIns:function(){this.addIns=n.clone(r)},registerGlobalAddIn:function(t,n,r){e.registerGlobalAddIn(t,n,r)},registerAddIn:function(e,t,n){var e=i(e,t),r=n.getName?n.getName():null;this.addIns.register(e,r,n)},hasAddIn:function(e,t,n){var e=i(e,t);return Boolean(this.addIns&&this.addIns.has(e,n))},getAddIn:function(e,t,n){var e=i(e,t);try{var r=this.addIns.get(e,n);return r}catch(s){return null}},setAddInDefaults:function(e,t,n,r){var i=this.getAddIn(e,t,n);i&&i.setDefaults(r)},listAddIns:function(e,t){var e=i(e,t),n=[];try{return this.addIns.listType(e)}catch(r){return[]}}})}),pen.define("cdf/dashboard/Dashboard.bookmarkable",["./Dashboard","../Logger","./Utils"],function(e,t,n){e.implement({_initBookmarkables:function(){this.bookmarkables={}},getHashValue:function(e){var t=window.location.hash,n;try{n=JSON.parse(t.slice(1))}catch(r){n={}}return arguments.length===0?n:n[e]},setHashValue:function(e,t){var n=this.getHashValue(),r;arguments.length==1?n=e:n[e]=t,r=JSON.stringify(n),r!="{}"?window.location.hash=r:window.location.hash&&(window.location.hash="")},deleteHashValue:function(e){var t=this.getHashValue();arguments.length===0?window.location.hash="":(delete t[e],this.setHashValue(t))},setBookmarkable:function(e,t){arguments.length===1&&(t=!0),this.bookmarkables[e]=t},isBookmarkable:function(e){return Boolean(this.bookmarkables[e])},generateBookmarkState:function(){var e={},t=this.bookmarkables;for(var n in t)t.hasOwnProperty(n)&&t[n]&&(e[n]=this.getParameterValue(n));return e},persistBookmarkables:function(e){var t=this.bookmarkables,n={};if(!t[e])return;if(!this.finishedInit)return;n=this.generateBookmarkState(),this.setBookmarkState({impl:"client",params:n})},setBookmarkState:function(e){if(window.history&&window.history.replaceState){var t=window.location.pathname.split("/").pop(),r=window.location.search.slice(1).split("&").map(function(e){var t=e.split("=");return t[1]=decodeURIComponent(t[1]),t}),i;r=n.propertiesArrayToObject(r),r.bookmarkState=JSON.stringify(e),i=t+"?"+$.param(r),window.history.replaceState({},"",i),this.deleteHashValue("bookmark")}else this.setHashValue("bookmark",e)},getBookmarkState:function(){if(window.location.hash.length>1)try{return this.getHashValue("bookmark")||{}}catch(e){}var t=window.location.search.slice(1).split("&").map(function(e){var t=e.split("=");return t[1]=decodeURIComponent(t[1]),t}),r=n.propertiesArrayToObject(t);return r.bookmarkState?JSON.parse(decodeURIComponent(r.bookmarkState.replace(/\+/g," ")))||{}:{}},restoreBookmarkables:function(){var e;try{e=this.getBookmarkState().params;for(var n in e)e.hasOwnProperty(n)&&this.setParameter(n,e[n])}catch(r){t.log(r,"error")}}})}),function(e,t){if(typeof exports=="object"&&exports)t(exports);else{var n={};t(n),typeof pen.define=="function"&&pen.define.amd?pen.define("cdf/lib/mustache",n):e.Mustache=n}}(this,function(e){function n(e,n){return t.call(e,n)}function i(e){return!n(r,e)}function u(e){return typeof e=="function"}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function l(e){return String(e).replace(/[&<>"'\/]/g,function(e){return f[e]})}function c(e){if(!o(e)||e.length!==2)throw new Error("Invalid tags: "+e);return[new RegExp(a(e[0])+"\\s*"),new RegExp("\\s*"+a(e[1]))]}function g(t,n){function E(){if(l&&!g)while(f.length)delete u[f.pop()];else f=[];l=!1,g=!1}n=n||e.tags,t=t||"",typeof n=="string"&&(n=n.split(p));var r=c(n),s=new w(t),o=[],u=[],f=[],l=!1,g=!1,S,x,T,N,C,k;while(!s.eos()){S=s.pos,T=s.scanUntil(r[0]);if(T)for(var L=0,A=T.length;L<A;++L)N=T.charAt(L),i(N)?f.push(u.length):g=!0,u.push(["text",N,S,S+1]),S+=1,N==="\n"&&E();if(!s.scan(r[0]))break;l=!0,x=s.scan(m)||"name",s.scan(h),x==="="?(T=s.scanUntil(d),s.scan(d),s.scanUntil(r[1])):x==="{"?(T=s.scanUntil(new RegExp("\\s*"+a("}"+n[1]))),s.scan(v),s.scanUntil(r[1]),x="&"):T=s.scanUntil(r[1]);if(!s.scan(r[1]))throw new Error("Unclosed tag at "+s.pos);C=[x,T,S,s.pos],u.push(C);if(x==="#"||x==="^")o.push(C);else if(x==="/"){k=o.pop();if(!k)throw new Error('Unopened section "'+T+'" at '+S);if(k[1]!==T)throw new Error('Unclosed section "'+k[1]+'" at '+S)}else x==="name"||x==="{"||x==="&"?g=!0:x==="="&&(r=c(n=T.split(p)))}k=o.pop();if(k)throw new Error('Unclosed section "'+k[1]+'" at '+s.pos);return b(y(u))}function y(e){var t=[],n,r;for(var i=0,s=e.length;i<s;++i)n=e[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function b(e){var t=[],n=t,r=[],i,s;for(var o=0,u=e.length;o<u;++o){i=e[o];switch(i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":s=r.pop(),s[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}}return t}function w(e){this.string=e,this.tail=e,this.pos=0}function E(e,t){this.view=e==null?{}:e,this.cache={".":this.view},this.parent=t}function S(){this.cache={}}var t=RegExp.prototype.test,r=/\S/,s=Object.prototype.toString,o=Array.isArray||function(e){return s.call(e)==="[object Array]"},f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},h=/\s*/,p=/\s+/,d=/\s*=/,v=/\s*\}/,m=/#|\^|\/|>|\{|&|=|!/;w.prototype.eos=function(){return this.tail===""},w.prototype.scan=function(e){var t=this.tail.match(e);if(t&&t.index===0){var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n}return""},w.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n},E.prototype.push=function(e){return new E(e,this)},E.prototype.lookup=function(e){var t;if(e in this.cache)t=this.cache[e];else{var n=this;while(n){if(e.indexOf(".")>0){t=n.view;var r=e.split("."),i=0;while(t!=null&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}this.cache[e]=t}return u(t)&&(t=t.call(this.view)),t},S.prototype.clearCache=function(){this.cache={}},S.prototype.parse=function(e,t){var n=this.cache,r=n[e];return r==null&&(r=n[e]=g(e,t)),r},S.prototype.render=function(e,t,n){var r=this.parse(e),i=t instanceof E?t:new E(t);return this.renderTokens(r,i,n,e)},S.prototype.renderTokens=function(t,n,r,i){function f(e){return a.render(e,n,r)}var s="",a=this,l,c;for(var h=0,p=t.length;h<p;++h){l=t[h];switch(l[0]){case"#":c=n.lookup(l[1]);if(!c)continue;if(o(c))for(var d=0,v=c.length;d<v;++d)s+=this.renderTokens(l[4],n.push(c[d]),r,i);else if(typeof c=="object"||typeof c=="string")s+=this.renderTokens(l[4],n.push(c),r,i);else if(u(c)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(n.view,i.slice(l[3],l[5]),f),c!=null&&(s+=c)}else s+=this.renderTokens(l[4],n,r,i);break;case"^":c=n.lookup(l[1]);if(!c||o(c)&&c.length===0)s+=this.renderTokens(l[4],n,r,i);break;case">":if(!r)continue;c=u(r)?r(l[1]):r[l[1]],c!=null&&(s+=this.renderTokens(this.parse(c),n,r,c));break;case"&":c=n.lookup(l[1]),c!=null&&(s+=c);break;case"name":c=n.lookup(l[1]),c!=null&&(s+=e.escape(c));break;case"text":s+=l[1]}}return s},e.name="mustache.js",e.version="0.8.1",e.tags=["{{","}}"];var x=new S;e.clearCache=function(){return x.clearCache()},e.parse=function(e,t){return x.parse(e,t)},e.render=function(e,t,n){return x.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(!u(i))return s;i(s)},e.escape=l,e.Scanner=w,e.Context=E,e.Writer=S}),pen.define("cdf/dashboard/Dashboard.components",["./Dashboard","amd!../lib/backbone","../lib/mustache","../Logger","../lib/jquery"],function(e,t,n,r,i){e.implement({_initComponents:function(){this.components=[]},getComponent:function(e){if(!e)return;for(var t in this.components)if(this.components[t].name==e)return this.components[t]},getComp:function(e){return this.getComponent(e)},getComponentByName:function(e){return this.getComponent(e)},addComponents:function(e){if(!i.isArray(e)){r.warn("addComponents: components in a structure other than an array will not be added!");return}e.forEach(function(e){this.addComponent(e)},this)},addComponent:function(e,t){this.removeComponent(e),this._bindControl(e);var n=t&&t.index,r=this.components.length;if(n==null||n<0||n>r)n=r;this.components[n]=e},getComponentIndex:function(e){if(e!=null)switch(typeof e){case"string":for(var t=0,n=this.components,r=n.length;t<r;t++)if(n[t].name===e)return t;break;case"number":if(e>=0&&e<this.components.length)return e;break;default:return this.components.indexOf(e)}return-1},removeComponent:function(e){var t=this.getComponentIndex(e),n=null;if(t>=0){var r=this.components;n=r[t],r.splice(t,1),n.dashboard=null,n.off("cdf:postExecution"),n.off("cdf:preExecution"),n.off("cdf:error"),n.off("all")}return n},_bindControl:function(e){return e.dashboard||(e.dashboard=this,this._addLogLifecycleToControl(e)),e},_bindExistingControl:function(e,n){if(!e.dashboard){e.dashboard=this,delete e.initInstance,typeof e.off=="function"&&e.off("all"),e.on||i.extend(e,t.Events),this._addLogLifecycleToControl(e);if(e.priority==null||e.priority==="")e.priority=this.legacyPriority++}return e},_castControlToClass:function(e,t){if(!(e instanceof t)){var n=this._makeInstance(t);i.extend(e,n)}},_getControlClass:function(e){var t=e.type;typeof t=="function"&&(t=t.call(e));var n=t.substring(0,1).toUpperCase()+t.substring(1),r=[n+"Component",t,n];for(var i=0,s=r.length;i<s;i++){var o=window[r[i]];if(o&&typeof o=="function")return o}},_makeInstance:function(e,t){var n=Object.create(e.prototype);return t?e.apply(n,t):e.apply(n),n},_castControlToComponent:function(e,t){if(!(e instanceof BaseComponent)&&(!t||!(t.prototype instanceof BaseComponent))){var n=BaseComponent.prototype;for(var r in n)if(n.hasOwnProperty(r)&&e[r]===undefined&&typeof n[r]=="function")switch(r){case"base":break;default:e[r]=n[r]}}},_addLogLifecycleToControl:function(e){e.on("all",function(e){var t=this.dashboard;if(t&&t.logLifecycle&&e!=="cdf"&&this.name!=="PostInitMarker"&&typeof console!="undefined"){var i,s=e.substr(4);switch(s){case"preExecution":i=">Start";break;case"postExecution":i="<End  ";break;case"error":i="!Error";break;default:i="      "}var o=n.render("Timing: {{elapsedSinceStartDesc}} since start, {{elapsedSinceStartDesc}} since last event",this.splitTimer());r.log("          [Lifecycle "+i+"] "+this.name+" ["+this.type+"]"+" (P: "+this.priority+" ): "+s+" "+o+" (Running: "+this.dashboard.runningCalls+")","log","color: "+this.getLogColor())}})}})}),pen.define("cdf/lib/cdf.jquery.i18n",["../lib/jquery","amd!./jquery.i18n"],function(e){var t=e.i18n.properties,n=e.i18n.browserLang,r;e.i18n.properties=function(e){if(e.language===null||e.language==""||e.language==undefined)e.language=n();if(e.language===null||e.language==undefined)e.language="";e.language=i(e),r&&t(e)},e.i18n.browserLang=function(){return null};var i=function(t){var n;return e.ajax({url:(t.path!=undefined?t.path:"")+t.name+"_supported_languages.properties",async:!1,cache:t.cache,contentType:"text/plain;charset="+t.encoding,dataType:"text",success:function(e,i){n=s(e,t.language),r=!0},error:function(e,i,s){r=!1,e.status==404&&(n=t.language)}}),n},s=function(e,t){var n,r,i;t.length>=2&&(n=t.substring(0,2)),t.length>=5&&(r=t.substring(0,5));if(e!=undefined){var s=e.split(/\n/);for(var o=0;o<s.length;o++){var u=s[o].substr(0,s[o].indexOf("="));u==n&&i==undefined&&(i=n),u==r&&(i=r)}return i==undefined&&(i=""),i}};return e}),pen.define("cdf/dashboard/Dashboard.i18n",["../Logger","./Dashboard","./Dashboard.ext","../lib/moment","../lib/CCC/cdo","../lib/cdf.jquery.i18n"],function(e,t,n,r,i,s){t.implement({_initI18n:function(){var t=this;t.i18nCurrentLanguageCode=undefined,t.i18nSupport={prop:function(t){return e.warn("i18n support wasn't properly initiated. Is the file messages_supported_languages.properties present?"),t}};var o=function(e){if(!e)return;var t=e.split("-");return t.length>1?t.join("_"):e},u=o(SESSION_LOCALE);s.i18n.properties({name:"messages",path:n.getStaticResource("resources/languages/"),mode:"map",language:u,callback:function(){s.i18n.properties({name:"messages",mode:"map",type:"GET",language:u,callback:function(){t.setI18nSupport(u,s.i18n)}})}});var a=i.format.language(u);i.format.language(a),r.locale(u)},setI18nSupport:function(e,t){this.i18nCurrentLanguageCode=e,s.extend(this.i18nSupport,t)}})}),pen.define("cdf/queries/CdaQuery.ext",["../dashboard/Dashboard.ext","../lib/jquery"],function(e,t){var n={getDoQuery:function(){return e.getPluginBase("cda")+"/doQuery?"},getUnwrapQuery:function(n){return e.getPluginBase("cda")+"/unwrapQuery?"+t.param(n)}};return n}),pen.define("cdf/components/XactionComponent.ext",["../dashboard/Utils","../dashboard/Dashboard.ext","common-ui/util/URLEncoder","../lib/jquery"],function(e,t,n,r){var i={getCdfXaction:function(i,s,o,u){if(u){var a={};for(var f in u)u.hasOwnProperty(f)&&(a[f]=e.ev(u[f]));return n.encode(t.getCdfBase()+"/viewAction",null,r.extend({path:t.getFullPath(i,s),ts:(new Date).getTime()},a))}return n.encode(t.getCdfBase()+"/viewAction",null,{path:t.getFullPath(i,s),ts:(new Date).getTime()})}};return i}),pen.define("cdf/dashboard/Dashboard.legacy",["../queries/CdaQuery.ext","../components/XactionComponent.ext","./Dashboard.ext","./Dashboard","../Logger","../lib/jquery"],function(e,t,n,r,i,s){r.implement({callPentahoAction:function(e,t,n,r,i,s){var o=this;return typeof s=="function"?o.pentahoAction(t,n,r,i,function(t){s(o.parseXActionResult(e,t))}):o.parseXActionResult(e,o.pentahoAction(t,n,r,i,s))},urlAction:function(e,t,n){return this.executeAjax("xml",e,t,n)},executeAjax:function(e,t,n,r){var o=this;if(typeof r=="function")return s.ajax({url:t,type:"POST",traditional:!0,dataType:e,async:!0,data:n,complete:function(e,t){typeof e.responseXML=="undefined"?r(s.parseXML(e.responseText)):r(e.responseXML)},error:function(e,t,n){i.error("Found error: "+e+" - "+t+", Error: "+n)}});var u=s.ajax({url:t,type:"POST",dataType:e,async:!1,data:n,error:function(e,t,n){i.error("Found error: "+e+" - "+t+", Error: "+n)}});return e=="xml"?typeof u.responseXML=="undefined"?s.parseXML(u.responseText):u.responseXML:u.responseText},pentahoAction:function(e,t,n,r,i){return this.pentahoServiceAction("ServiceAction","xml",e,t,n,r,i)},pentahoServiceAction:function(e,t,r,i,o,u,a){var f=n.getServiceAction(e,r,i,o),l=f.url;return delete f.url,s.each(u,function(e,t){f[t[0]]=t[1]}),this.executeAjax(t,l,f,a)},CDF_ERROR_DIV:"cdfErrorDiv",createAndCleanErrorDiv:function(){s("#"+this.CDF_ERROR_DIV).length==0&&s("body").append("<div id='"+this.CDF_ERROR_DIV+"'></div>"),s("#"+this.CDF_ERROR_DIV).empty()},showErrorTooltip:function(){s(function(){s.tooltip&&s(".cdf_error").tooltip({delay:0,track:!0,fade:250,showBody:" -- "})})},parseXActionResult:function(e,t){var n=s(t),r=n.find("SOAP-ENV\\:Fault");if(r.length==0)return n;var i="Error executing component "+e.name,o=new Array;o[0]=" Error details for component execution "+e.name+" -- ",o[1]=r.find("SOAP-ENV\\:faultstring").find("SOAP-ENV\\:Text:eq(0)").text(),r.find("SOAP-ENV\\:Detail").find("message").each(function(){o.push(s(this).text())}),o.length>8&&(o=o.slice(0,7),o.push("..."));var u="<table class='errorMessageTable' border='0'><tr><td class='errorIcon'></td><td><span class='cdf_error' title=\""+o.join("<br/>").replace(/"/g,"'")+'" >'+i+" </span></td></tr></table/>";return e.visible==0?s("#"+this.CDF_ERROR_DIV).append("<br />"+u):s("#"+e.htmlObject).html(u),null},setSettingsValue:function(e,t){var r={method:"set",key:e,value:JSON.stringify(t)};s.post(n.getSettings("set",null),r,function(){})},getSettingsValue:function(e,t){s.ajax({type:"GET",dataType:"json",url:n.getSettings("get",e),data:args,async:!0,xhrFields:{withCredentials:!0}}).done(typeof t=="function"?t:function(e){t=e})},fetchData:function(n,r,o){i.warn("Dashboard fetchData() is deprecated. Use Query objects instead");if(n!=undefined&&n.dataAccessId!=undefined){for(var u in r)n["param"+r[u][0]]=this.getParameterValue(r[u][1]);s.post(e.getDoQuery(),n,function(e){o(e)},"json").error(this.handleServerError)}else if(n!=undefined){var a=n.queryType=="cda"?"jtable-cda.xaction":"jtable.xaction";s.post(t.getCdfXaction("pentaho-cdf/actions",a),n,function(e){o(e.values)},"json")}else o([])}})}),pen.define("cdf/dashboard/Dashboard.lifecycle",["./Dashboard","../Logger","amd!../lib/underscore","../components/UnmanagedComponent","../lib/jquery"],function(e,t,n,r,i){e.implement({_initLifecycle:function(){this.initCounter=0,this.runningCalls=0,this.lastServerResponse=Date.now?Date.now():(new Date).getTime(),this.serverCheckResponseTimeout=Infinity},resetRunningCalls:function(){this.runningCalls=0,setTimeout(n.bind(function(){this.hideProgressIndicator()},this),10)},getRunningCalls:function(){return this.runningCalls},incrementRunningCalls:function(){this.runningCalls++,this.showProgressIndicator(),t.log("+Running calls incremented to: "+this.getRunningCalls())},decrementRunningCalls:function(){this.runningCalls--,t.log("-Running calls decremented to: "+this.getRunningCalls()),setTimeout(n.bind(function(){this.runningCalls<=0&&(this.hideProgressIndicator(),this.runningCalls=0)},this),10)},init:function(e){var r=this,s=r.initCounter++;t.log("InitInstance "+s),s==0&&(r.syncDebugLevel(),r.initialStorage?n.extend(r.storage,r.initialStorage):r.loadStorage(),r.context!=null&&r.context.sessionTimeout!=null&&(r.serverCheckResponseTimeout=r.context.sessionTimeout*900),r.restoreBookmarkables(),r.restoreView(),r.syncParametersInit()),n.isArray(e)&&r.addComponents(e),n.chain(r.components).where({initInstance:undefined}).each(function(e){e.initInstance=s}),i(function(){r._initEngine(s)})},_initEngine:function(e){var s=this;s.waitingForInit&&s.waitingForInit.length&&t.log("Overlapping initEngine!","warn");var o=e!=null?n.where(s.components,{initInstance:e}):s.components;(!s.waitingForInit||s.waitingForInit.length===0)&&!s.finishedInit&&s.incrementRunningCalls(),t.log("          [Lifecycle >Start] Init["+e+"] (Running: "+s.getRunningCalls()+")","log","color: #ddd"),s.createAndCleanErrorDiv(),typeof s.preInit=="function"&&s.preInit(),s.trigger("cdf cdf:preInit",s),i(window).trigger("cdfAboutToLoad");var s=s,u=[],a;for(a=0;a<o.length;a++)o[a].executeAtStart&&u.push(o[a]);if(!u.length){s._handlePostInit();return}var f=new r({name:"PostInitMarker",type:"unmanaged",lifecycle:{silent:!0},executeAtStart:!0,priority:999999999});s.addComponent(f),u.push(f),s.waitingForInit=u.slice();var l=function(t,r){if(arguments.length==2&&r)return;s.waitingForInit=n(s.waitingForInit).without(t),t.off("cdf:postExecution",l),t.off("cdf:preExecution",l),t.off("cdf:error",l),s._handlePostInit(e)};for(var a=0,c=u.length;a<c;a++){var h=u[a];h.on("cdf:postExecution cdf:preExecution cdf:error",l,s)}s.updateAll(u),o.length>0&&s._handlePostInit(e)},_handlePostInit:function(e){var r=this,s=function(){var e=n.filter(r.components,function(e){return e.type=="duplicate"}),t={},s=r.getBookmarkState().params||{};n.map(n.filter(Object.keys(s),function(e){return/(_[0-9]+)+$/.test(e)}),function(e){var n=e.match(/(.*?)((_[0-9]+)+)$/),r=n[1],i=n[2];return t[i]||(t[i]={}),t[i][r]=s[e],e});for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];i.each(e,function(e,t){var n;for(n=0;n<t.parameters.length;n++)if(!s.hasOwnProperty(t.parameters[n])&&r.isBookmarkable(t.parameters[n]))return;t.duplicate(s)})}};(!r.waitingForInit||r.waitingForInit.length===0)&&!r.finishedInit&&(r.trigger("cdf cdf:postInit",r),i(window).trigger("cdfLoaded"),typeof r.postInit=="function"&&r.postInit(),s(),r.finishedInit=!0,r.decrementRunningCalls(),t.log("          [Lifecycle <End  ] Init["+e+"] (Running: "+r.getRunningCalls()+")","log","color: #ddd"))},updateLifecycle:function(e){var r=e.lifecycle?!!e.lifecycle.silent:!1;if(e.disabled)return;r||this.incrementRunningCalls();var s=n.bind(function(){try{var n;typeof e.preExecution!="undefined"&&(n=e.preExecution.apply(e)),n=typeof n!="undefined"?!!n:!0,e.trigger("cdf cdf:preExecution",e,n);if(!n)return;e.tooltip!=undefined&&(e._tooltip=typeof e["tooltip"]=="function"?e.tooltip():e.tooltip),e.update!=undefined&&typeof e["update"]=="function"&&(e.update(),this.refreshEngine.processComponent(e)),typeof e.postExecution!="undefined"&&e.postExecution.apply(e),e._tooltip!=undefined&&i("#"+e.htmlObject).attr("title",e._tooltip).tooltip({delay:0,track:!0,fade:250})}catch(s){var o=e.htmlObject?i("#"+e.htmlObject):undefined,u=this.getErrorObj("COMPONENT_ERROR").msg+" ("+e.name.replace("render_","")+")";this.errorNotification({msg:u},o),t.error("Error updating "+e.name+":"),t.exception(s)}finally{r||this.decrementRunningCalls()}e.trigger("cdf cdf:postExecution",e)},this);setTimeout(s,1)},updateAll:function(e){var t=function(e,t){if(!t)return;for(var r in t)t.hasOwnProperty(r)&&(n.isArray(e[r])?e[r]=n.union(e[r],t[r]):e[r]=t[r])};this.updating||(this.updating={tiers:{},current:null});if(e&&n.isArray(e)&&!n.isArray(e[0])){var r={};n.each(e,function(e){if(e){var t=e.priority||0;r[t]||(r[t]=[]),r[t].push(e)}}),e=r}t(this.updating.tiers,e);var i=this.updating.current,s=!1;if(i===null||i.components.length==0||(s=this.othersAwaitExecution(n.clone(this.updating.tiers),this.updating.current))){var o=this.getFirstTier(this.updating.tiers);if(!o)return;if(s){var u=this.updating.tiers;u[i.priority]=n.difference(u[i.priority],i.components),o.components=n.union(u[i.priority],this.getFirstTier(u).components)}this.updating.current=o;var a=function(e,t){if(arguments.length==2&&typeof t=="boolean"&&t)return;e.off("cdf:postExecution",a),e.off("cdf:preExecution",a),e.off("cdf:error",a);var r=this.updating.current;r.components=n.without(r.components,e);var i=this.updating.tiers;i[r.priority]=n.without(i[r.priority],e),this.updateAll()},r=this.updating.current.components.slice();for(var f=0;f<r.length;f++){var l=r[f];l.startTimer(),l.on("cdf:postExecution cdf:preExecution cdf:error",a,this),this.updateComponent(l)}}},update:function(e){this.updateQueue||(this.updateQueue=[]),this.updateQueue.push(e),this.updateTimeout&&clearTimeout(this.updateTimeout);var t=n.bind(function(){this.updateAll(this.updateQueue),delete this.updateQueue},this);this.updateTimeout=setTimeout(t,5)},updateComponent:function(e){if((Date.now?Date.now():(new Date).getTime())-this.lastServerResponse>this.serverCheckResponseTimeout&&!this.checkServer())throw this.hideProgressIndicator(),this.loginAlert(),"not logged in";e.isManaged===!1&&e.update?(e.update(),this.refreshEngine.processComponent(e)):this.updateLifecycle(e)},getFirstTier:function(e){var t=n.keys(e).sort(function(e,t){return parseInt(e,10)-parseInt(t,10)}),r;for(var i=0;i<t.length;i++){r=e[t[i]];if(r.length>0)return{priority:t[i],components:r.slice()}}return null},resetAll:function(){this.createAndCleanErrorDiv();var e=this.components.length;for(var t=0,n=this.components.length;t<n;t++)this.components[t].clear();var e=this.components.length;for(var t=0,n=this.components.length;t<n;t++)this.components[t].executeAtStart&&this.update(this.components[t])},processChange:function(e){var t=this.getComponentByName(e),n=t.parameter,r;typeof t["getValue"]=="function"&&(r=t.getValue());if(r==null)return;if(typeof t.preChange!="undefined"){var i=t.preChange(r);r=i!=undefined?i:r}n&&this.fireChange(n,r),typeof t.postChange!="undefined"&&t.postChange(r)},fireChange:function(e,t){var r=this;r.createAndCleanErrorDiv(),r.setParameter(e,t,!0),r.trigger("cdf "+e+":fireChange",{parameter:e,value:t});var i=[],s=!1;for(var o=0,u=r.components.length;o<u;o++)if(n.isArray(r.components[o].listeners))for(var a=0;a<r.components[o].listeners.length;a++){var f=r.components[o];if(f.listeners[a]==e&&!f.disabled){i.push(f);break}}r.updateAll(i)},othersAwaitExecution:function(e,t){if(!e||!t||!t.components)return!1;e[t.priority]=n.difference(e[t.priority],t.components);var r=this.getFirstTier(e);return!r||!r.components||r.components.length==0?!1:parseInt(r.priority)>parseInt(t.priority)?!1:!0}})}),pen.define("cdf/dashboard/Dashboard.notifications.ext",["./Dashboard.ext"],function(e){var t={getPing:function(){return e.getCdfBase()+"/ping"}};return t}),pen.define("cdf/dashboard/Popups",["../lib/mustache","amd!../lib/underscore","../lib/jquery","amd!../lib/jquery.blockUI"],function(e,t,n){var r={};return r.okPopup={template:"<div class='cdfPopup'>  <div class='cdfPopupHeader'>{{{header}}}</div>  <div class='cdfPopupBody'>    <div class='cdfPopupDesc'>{{{desc}}}</div>    <div class='cdfPopupButton'>{{{button}}}</div>  </div></div>",defaults:{header:"Title",desc:"Description Text",button:"Button Text",callback:function(){return!0}},$el:undefined,show:function(e){(e||this.firstRender)&&this.render(e),this.$el.show()},hide:function(){this.$el.hide()},render:function(r){var i=t.extend({},this.defaults,r),s=this;this.firstRender&&(this.$el=n("<div/>").addClass("cdfPopupContainer").hide().appendTo("body"),this.firstRender=!1),this.$el.empty().html(e.render(this.template,i)),this.$el.find(".cdfPopupButton").click(function(){i.callback(),s.hide()})},firstRender:!0},r.notificationsComponent={template:"<div class='cdfNotification component {{#isSmallComponent}}small{{/isSmallComponent}}'>  <div class='cdfNotificationBody'>    <div class='cdfNotificationImg'>&nbsp;</div>    <div class='cdfNotificationTitle' title='{{title}}'>{{{title}}}</div>    <div class='cdfNotificationDesc' title='{{desc}}'>{{{desc}}}</div>  </div></div>",defaults:{title:"Component Error",desc:"Error processing component."},render:function(r,i){var s=t.extend({},this.defaults,i);s.isSmallComponent=n(r).width()<300,n(r).empty().html(e.render(this.template,s));var o=n(r).find(".cdfNotification");o.css({"line-height":o.height()+"px"})}},r.notificationsGrowl={template:"<div class='cdfNotification growl'>  <div class='cdfNotificationBody'>    <h1 class='cdfNotificationTitle' title='{{title}}'>{{{title}}}</h1>    <h2 class='cdfNotificationDesc' title='{{desc}}'>{{{desc}}}</h2>  </div></div>",defaults:{title:"Title",desc:"Default CDF notification.",timeout:4e3,onUnblock:function(){return!0},css:n.extend({},n.blockUI.defaults.growlCSS,{position:"absolute",width:"100%",top:"10px"}),showOverlay:!1,fadeIn:700,fadeOut:1e3,centerY:!1},render:function(r){var i=t.extend({},this.defaults,r),s=n(e.render(this.template,i)),o=this;i.message=s;var u=i.onUnblock;i.onUnblock=function(){o.$el.hide(),u.call(this)},this.firstRender&&(this.$el=n("<div/>").addClass("cdfNotificationContainer").hide().appendTo("body"),this.firstRender=!1),this.$el.show().block(i)},firstRender:!0},r}),pen.define("cdf/dashboard/Dashboard.notifications",["./Dashboard","./Dashboard.notifications.ext","./Popups","../Logger","amd!../lib/underscore","../lib/jquery","amd!../lib/jquery.blockUI"],function(e,t,n,r,i,s){e.implement({_initNotifications:function(){this.ERROR_CODES={QUERY_TIMEOUT:{msg:"Query timeout reached"},COMPONENT_ERROR:{msg:"Error processing component"}}},blockUIwithDrag:function(){typeof this.i18nSupport!="undefined"&&this.i18nSupport!=null&&(s.blockUI.defaults.message='<div class="img blockUIDefaultImg" style="padding: 0px;"></div>'),s.blockUI();var e=s('<div id="blockUIDragHandle"></div>');s("div.blockUI.blockMsg").prepend(e),s("div.blockUI.blockMsg").draggable({handle:"#blockUIDragHandle"})},showProgressIndicator:function(){s.blockUI&&this.blockUIwithDrag()},hideProgressIndicator:function(e){e&&this.resetRunningCalls(),s.unblockUI&&s.unblockUI(),this.showErrorTooltip()},getErrorObj:function(e){return this.ERROR_CODES[e]||{}},parseServerError:function(e,t,n){var r=[{match:/Query timeout/,msg:this.getErrorObj("QUERY_TIMEOUT").msg}],o={msg:this.getErrorObj("COMPONENT_ERROR").msg,error:n,errorStatus:t},u=s("<div/>").html(e.responseText).find("h1").text();return i.find(r,function(e){return u.match(e.match)?(o.msg=e.msg,!0):!1}),o},handleServerError:function(){this.errorNotification(this.parseServerError.apply(this,arguments)),this.trigger("cdf cdf:serverError",this),this.resetRunningCalls()},errorNotification:function(e,t){t?n.notificationsComponent.render(s(t),{title:e.msg,desc:""}):n.notificationsGrowl.render({title:e.msg,desc:""})},loginAlert:function(e){var t={header:"Warning",desc:"You are no longer logged in or the connection to the server timed out",button:"Click to reload this page",callback:function(){window.location.reload(!0)}};t=i.extend({},t,e),n.okPopup.show(t),this.trigger("cdf cdf:loginError",this)},checkServer:function(){s.ajax({type:"POST",async:!1,dataType:"json",url:t.getPing(),success:function(e){return e&&e.ping=="ok"},error:function(){return!1}})}})}),pen.define("cdf/dashboard/Utf8Encoder",["../lib/jquery"],function(e){var t={encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},decode:function(e){var t="",n=0,r=0,i=0,s=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|i&63),n+=2):(i=e.charCodeAt(n+1),s=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63),n+=3);return t}},n={encode_prepare:function(e){if(e!=null){e=e.replace(/\+/g," ");if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1||navigator.userAgent.toLowerCase().indexOf("opera")!=-1)return t.decode(e)}return e},encode_prepare_arr:function(t){var n=this;if(typeof t=="number")return t;if(e.isArray(t)){var r=new Array(t.length);return e.each(t,function(e,t){r[e]=n.encode_prepare(t)}),r}return n.encode_prepare(t)}};return n}),pen.define("cdf/dashboard/Dashboard.parameters",["./Dashboard","../Logger","amd!../lib/backbone","./Utf8Encoder"],function(e,t,n,r){e.implement({LEGACY_STORAGE:"Dashboards.storage.",STORAGE:"storage.",_initParameters:function(){this.parameters=[],this.parameterModel=new n.Model,this.chains=[],this.syncedParameters={},this.escapeParameterValues=!1},_isParameterInModel:function(e,t){return this._getValueFromContext(e,t)!==undefined},_getValueFromContext:function(e,t){if(!e)return;if(this.flatParameters)return e[t];if(t!=null){var n,r;if(t instanceof Array)n=t;else{if(t.indexOf(".")<0)return e[t];n=t.split(".")}r=n.length;for(var i=0;i<r;i++){if(!e)return;var s=n[i],o=e[s];if(o===undefined)return;e=o}}return e},_setValueInContext:function(e,t,n){if(!e||t==null||n===undefined)return;if(this.flatParameters)e[t]=n;else{var r,i;if(t instanceof Array)r=t,i=r.pop();else{if(t.indexOf(".")<0)return e[t]=n,e;r=t.split("."),i=r.pop()}e=this._getValueFromContext(e,r),e&&(e[i]=n)}return e},_getParameterStore:function(e){var n;return e.indexOf(this.LEGACY_STORAGE)==0?(t.warn("Legacy storage access for "+e+". Please use storage instead"),e=e.substr(this.LEGACY_STORAGE.length),n=this.storage):e.indexOf(this.STORAGE)==0?(e=e.substr(this.STORAGE.length),n=this.storage):n=this.parameters,{store:n,name:e}},addParameter:function(e,n){if(e==undefined||e=="undefined"){t.warn("Dashboard addParameter: trying to add undefined!!");return}var r=this._getParameterStore(e);return this._isParameterInModel(r.store,r.name)&&(n=this.getParameterValue(r.name)),this.setParameter(e,n),n},getParameterValue:function(e){if(e==undefined||e=="undefined"){t.warn("Dashboard.getParameterValue: trying to get undefined!!");return}var n=this._getParameterStore(e);return this._getValueFromContext(n.store,n.name)},getParam:function(e){return this.getParameterValue(e)},setParameter:function(e,n,i){if(e==undefined||e=="undefined"){t.warn("Dashboard.setParameter: trying to set undefined!!");return}var s=this._getParameterStore(e);this.escapeParameterValues?this._setValueInContext(s.store,s.name,r.encode_prepare_arr(n)):this._setValueInContext(s.store,s.name,n),this._setValueInContext(s.store,s.name,n)!==undefined&&(this.parameterModel.set(s.name,n,{notify:i}),this.persistBookmarkables(s.name))},setParam:function(e,t,n){this.setParameter(e,t,n)},syncParameters:function(e,t){this.setParameter(t,this.getParameterValue(e)),this.parameterModel.on("change:"+e,function(e,n,r){this[r.notify?"fireChange":"setParameter"](t,n)},this),this.parameterModel.on("change:"+t,function(t,n,r){this[r.notify?"fireChange":"setParameter"](e,n)},this)},syncParametersOnInit:function(e,t){var n=this.syncedParameters,r,i,s,o;n[e]||(n[e]=[]),n[e].push(t);for(var u=0;u<this.chains.length;u++)r=this.chains[u],r.indexOf(e)>-1&&(i=r),r.indexOf(t)>-1&&(s=r,o=u);if(s&&i){if(i!=s){var a=s.slice();a.unshift(0),a.unshift(i.length),[].splice.apply(i,a),this.chains.splice(o,1)}}else s?s.unshift(e):i?i.push(t):this.chains.push([e,t])},syncParametersInit:function(){var e=this.syncedParameters,t,n,r,i,s;for(r=0;r<this.chains.length;r++)for(i=0;i<this.chains[r].length;i++){t=this.chains[r][i];if(!e[t])continue;for(s=0;s<e[t].length;s++)n=e[t][s],this.syncParameters(t,n)}}})}),pen.define("cdf/dashboard/Dashboard.storage.ext",["./Dashboard.ext"],function(e){var t={getStorage:function(t){return e.getCdfBase()+"/storage/"+t}};return t}),pen.define("cdf/dashboard/Dashboard.storage",["./Dashboard","../Logger","../lib/jquery","./Dashboard.storage.ext"],function(e,t,n,r){e.implement({_initStorage:function(){this.storage||(this.storage={},n.extend(this.storage,this.storageObj)),this.initialStorage=this.storage},loadStorage:function(){var e=this;if(this.context&&this.context.user==="anonymousUser")return;var t={user:this.context.user,action:"read",ts:Date.now?Date.now():(new Date).getTime()};n.ajax({type:"GET",dataType:"json",url:r.getStorage(t.action),data:t,async:!0,xhrFields:{withCredentials:!0},success:function(t){n.extend(e.storage,t)}})},saveStorage:function(){if(this.context&&this.context.user==="anonymousUser")return;var e={user:this.context.user,action:"store",storageValue:JSON.stringify(this.storage),ts:Date.now?Date.now():(new Date).getTime()};n.ajax({type:"GET",dataType:"json",url:r.getStorage(e.action),data:e,async:!0,xhrFields:{withCredentials:!0}}).done(function(e){e.result!=1&&t.log("Error saving storage","error")})},cleanStorage:function(){this.storage={};if(this.context&&this.context.user==="anonymousUser")return;var e={user:this.context.user,action:"delete"};n.ajax({type:"GET",dataType:"json",url:r.getStorage(e.action),data:e,async:!0,xhrFields:{withCredentials:!0}}).done(function(e){e.result!=1&&t.log("Error deleting storage","error")})}})}),pen.define("cdf/dashboard/Dashboard.dataSources",["./Dashboard","../Logger","amd!../lib/underscore"],function(e,t,n){e.implement({_initDataSources:function(){this.dataSources={}},_getDataSourceName:function(e){var r;n.isObject(e)?r=e.dataSource:r=e;if(n.isString(r)&&!n.isEmpty(r))return r;t.warn("Invalid data source name")},addDataSource:function(e,r,i){n.isObject(e)&&(i=r,r=e,e=r.name);if(!n.isObject(r)){t.error("Invalid data source object");return}if(!n.isString(e)||!!n.isEmpty(e)){t.error("Invalid data source name");return}if(this.dataSources[e]){if(!this.dataSources.hasOwnProperty(e)){t.error("Data source name '"+e+"' is invalid, overwrites an inherited property");return}if(!i){t.warn("Data source name '"+e+"' is already defined, set force flag to true to overwrite it");return}}var s=n.extend({},r);s.name&&delete s.name,this.dataSources[e]=s},getDataSource:function(e){var t=this._getDataSourceName(e);if(t&&this.dataSources.hasOwnProperty(t))return this.dataSources[t]},getDataSourceQuery:function(e){var r=this.getDataSource(e);if(!n.isEmpty(r))return this.getQuery(r);t.error("Invalid data source")},setDataSource:function(e,t){n.isObject(e)?this.addDataSource(e,!0):this.addDataSource(e,t,!0)},removeDataSource:function(e){var n;if(!(n=this._getDataSourceName(e))){t.warn("Invalid data source name");return}n in this.dataSources&&this.dataSources.hasOwnProperty(n)?delete this.dataSources[n]:t.warn("Data source name '"+n+"' not found")}})}),pen.define("cdf/dashboard/Dashboard.query",["../Logger","../lib/Base","./Dashboard","./Container","amd!../lib/underscore","./Utils"],function(e,t,n,r,i,s){var o=t,u=new r;return n.implement({_initQuery:function(){this.queryFactories=s.clone(u)},getBaseQuery:function(){return o},registerQuery:function(e,t){var n=this.getBaseQuery();if(!i.isFunction(t)&&i.isObject(t)){var r={};i.each(n.prototype.deepProperties,function(e){r[e]=i.extend({},n.prototype[e],t[e])})}var s=i.isFunction(t)&&t||i.isObject(t)&&n.extend(i.extend({},t,r));this.queryFactories.register("Query",e,function(e,t){return new s(t)})},hasQuery:function(e){return Boolean(this.queryFactories&&this.queryFactories.has("Query",e))},detectQueryType:function(t){if(t){if(i.isString(t.dataSource)&&!i.isEmpty(t.dataSource)){var n=this.getDataSource(t.dataSource);if(!!i.isUndefined(n)){e.error("Invalid data source name '"+t.dataSource+"'");return}t=n}var r=t.queryType?t.queryType:t.query?"legacy":t.path&&t.dataAccessId?"cda":undefined;return t.queryType=r,this.hasQuery(r)?r:undefined}},getQuery:function(t,n){i.isUndefined(t)?t="cda":i.isObject(t)&&(n=t,t=undefined);if(i.isString(n.dataSource)&&!i.isEmpty(n.dataSource)){var r=this.getDataSource(n.dataSource);if(!!i.isUndefined(r)){e.error("Invalid data source name '"+qd.dataSource+"'");return}n=i.extend({},r,n),delete n.dataSource}t=t||n.queryType||"cda";var s=this.queryFactories.getNew("Query",t,n);return s.dashboard=this,s},listQueries:function(){return i.keys(this.queryFactories.listType("Query"))}}),{setBaseQuery:function(e){i.isFunction(e)&&e.extend&&(o=e)},registerGlobalQuery:function(e,t){var n=o;if(!i.isFunction(t)&&i.isObject(t)){var r={};i.each(n.prototype.deepProperties,function(e){r[e]=i.extend({},n.prototype[e],t[e])})}var s=i.isFunction(t)&&t||i.isObject(t)&&n.extend(i.extend({},t,r));u.register("Query",e,function(e,t){return new s(t)})}}});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=Base64._utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return t},decode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=Base64._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}};pen.define("cdf/lib/base64",function(e){return function(){var t,n;return t||e.Base64}}(this)),pen.define("cdf/dashboard/Dashboard.views.ext",["./Dashboard.ext"],function(e){var t={getView:function(t){return e.getCdfBase()+"/views/"+t},getViewIdFromUrl:function(){var e=window.location.search;if(e.indexOf("viewId")==-1)return"";var t=e.match("[?|&]viewId=([^&]+)");if(t[1])return t[1]}};return t}),pen.define("cdf/dashboard/Dashboard.views",["./Dashboard","../lib/base64","./Dashboard.views.ext","../lib/jquery"],function(e,t,n,r){e.implement({viewFlags:{UNUSED:"unused",UNBOUND:"unbound",VIEW:"view"},_initViews:function(){this.viewParameters={},!this.view&&this.viewObj&&(this.view={},r.extend(this.view,this.viewObj))},restoreView:function(){var e,n;if(!this.view||!this.view.params)return;n=JSON.parse(t.decode(this.view.params));if(!n)return;if(r.isEmptyObject(n))this.view.params=n;else for(e in n)n.hasOwnProperty(e)&&this.setParameter(e,n[e])},setParameterViewMode:function(e,t){arguments.length===1&&(t=this.viewFlags.VIEW),this.viewParameters[e]=t},isViewParameter:function(e){return this.viewParameters[e]},getViewParameters:function(){var e=this.viewParameters,t={};for(var n in e)e.hasOwnProperty(n)&&(e[n]==this.viewFlags.VIEW||e[n]==this.viewFlags.UNBOUND)&&(t[n]=this.getParameterValue(n));return t},getUnboundParameters:function(){var e=this.viewParameters,t=[];for(var n in e)if(e.hasOwnProperty(n))return e[n]==this.viewFlags.UNBOUND&&t.push(n),t}})}),pen.define("cdf/dashboard/OptionsManager",["./Utils","amd!../lib/underscore","../lib/jquery"],function(e,t,n){function r(e,t,n,r){return e&&e[t]&&e[t].hasOwnProperty(n)?e[t][n]:r||undefined}function i(e,t,n,r){e&&t&&n&&(e[t]=e[t]||{},e[t][n]=r)}return function(s){function u(e,t){t=t||{},h(e,t.reader),p(e,t.writer),d(e,t.validator)}function a(e){return r(o._interfaces,e,"reader",o._libraries.mappers.identity)}function f(e){return r(o._interfaces,e,"writer",o._libraries.mappers.identity)}function l(e){return r(o._interfaces,e,"validator",o._libraries.predicates.tautology)}function c(e){return r(o._options,e,"value")}function h(e,n){var r=o._libraries.mappers;return n=t.isFunction(n)&&n||t.isString(n)&&r[n]||a(e)||r.identity,i(o._interfaces,e,"reader",n)}function p(e,n){var r=o._libraries.mappers;return n=t.isFunction(n)&&n||t.isString(n)&&r[n]||f(e)||r.identity,i(o._interfaces,e,"writer",n)}function d(e,n){var r=o._libraries.predicates;return n=t.isFunction(n)&&n||t.isString(n)&&r[n]||l(e)||r.tautology,i(o._interfaces,e,"validator",n)}function v(e,t){return i(o._options,e,"value",t)}var o=this;this._options={},this._interfaces={},this._libraries={predicates:{tautology:function(e){return!0},isFunction:t.isFunction,isPositive:function(e){return t.isNumber(e)&&e>0},isObjectOrPropertiesArray:function(e){return t.isArray(e)||t.isObject(e)},isObject:t.isObject,isArray:t.isArray},mappers:{identity:t.identity,propertiesObject:function(n){return t.isArray(n)?e.propertiesArrayToObject(n):n}}},this.mixin=function(e){e.getOption=this.getOption,e.setOption=this.setOption},this.init=function(e,r,i){var s=this;e=n.extend(!0,{},e),r=n.extend(!0,{},r),this._libraries=n.extend(!0,{},this._libraries,i),t.each(r,function(e,t){u(t,e)}),t.each(e,function(e,t){var n=r&&r[t]||{};u(t,n),v(t,e)})},this.setOption=function(e,t,n){u(e,n);var r=a(e),i=l(e);if(i(t))return t=r(t),v(e,t),!0;throw new Error("Invalid Option "+e.charAt(0).toUpperCase()+e.slice(1))},this.getOption=function(e){var t=f(e),n=c(e);return t(n)},this.init(s.defaults,s.interfaces,s.libraries)}}),pen.define("cdf/queries/BaseQuery",["../lib/jquery","../lib/Base","amd!../lib/underscore","../Logger","../dashboard/OptionsManager","../dashboard/Dashboard.query"],function(e,t,n,r,i,s){var o=t.extend({name:"baseQuery",label:"Base Query",deepProperties:["defaults","interfaces"],dashboard:undefined,defaults:{successCallback:function(){r.log("Query callback not defined. Override.")},errorCallback:function(){dashboard!=undefined&&dashboard.handleServerError!=undefined&&dashboard.handleServerError()},lastResultSet:null,page:0,pageSize:0,params:{},ajaxOptions:{async:!1,type:"POST"},url:""},interfaces:{params:{reader:"propertiesObject",validator:"isObjectOrPropertiesArray"},successCallback:{validator:"isFunction"},errorCallback:{validator:"isFunction"},pageSize:{validator:"isPositive"}},constructor:function(e){this._optionsManager=new i(this),this._optionsManager.mixin(this),this.init(e)},getOption:function(e){return this.defaults[e]},setOption:function(e,t){this.defaults[e]=t},init:function(e){},getSuccessHandler:function(t){var n=this;return function(r){n.setOption("lastResultSet",r);var i=e.extend(!0,{},n.getOption("lastResultSet"));t(i)}},getErrorHandler:function(e){return function(t,n,r){e&&e(t,n,r)}},doQuery:function(t,i){if(typeof this.getOption("successCallback")!="function")throw"QueryNotInitialized";var s=n.extend({},this.getOption("ajaxOptions"),{data:this.buildQueryDefinition(),url:this.getOption("url"),success:this.getSuccessHandler(t?t:this.getOption("successCallback")),error:this.getErrorHandler(i?i:this.getOption("errorCallback"))}),o=s.async==null?e.ajaxSettings.async:s.async;!o&&s.xhrFields&&s.xhrFields.withCredentials&&(r.log("Cross-domain requests are deprecated for synchronous operations."),delete s.xhrFields.withCredentials),e.ajax(s)},exportData:function(){},setAjaxOptions:function(e){this.setOption("ajaxOptions",n.extend({},this.getOption("ajaxOptions"),e))},setSortBy:function(e){},sortBy:function(e,t){},fetchData:function(e,t,r){switch(arguments.length){case 0:if(this.getOption("params")&&this.getOption("successCallback"))return this.doQuery();break;case 1:if(typeof arguments[0]=="function")return this.doQuery(arguments[0]);if(!n.isEmpty(arguments[0])&&(n.isObject(arguments[0])||n.isArray(arguments[0])))return this.setOption("params",arguments[0]||{}),this.doQuery();break;case 2:return typeof arguments[0]=="function"?(this.setOption("successCallback",arguments[0]),this.setOption("errorCallback",arguments[1]),this.doQuery()):(this.setOption("params",arguments[0]||{}),this.setOption("successCallback",arguments[1]),this.doQuery());default:return e&&this.setOption("params",e),this.setOption("successCallback",t),this.setOption("errorCallback",r),this.doQuery()}throw"InvalidInput"},lastResults:function(){if(this.getOption("lastResultSet")!==null)return e.extend(!0,{},this.getOption("lastResultSet"));throw"NoCachedResults"},reprocessLastResults:function(t){if(this.getOption("lastResultSet")!==null){var n=e.extend(!0,{},this.getOption("lastResultSet")),r=t||this.getOption("successCallback");return r(n)}throw"NoCachedResults"},reprocessResults:function(e){return this.reprocessLastResults(e)},setParameters:function(e){this.setOption("params",e)},setCallback:function(e){this.setOption("successCallback",e)},setErrorCallback:function(e){this.setOption("errorCallback",e)},setSearchPattern:function(e){this.setOption("searchPattern",e)},nextPage:function(e){var t=this.getOption("page"),n=this.getOption("pageSize");if(n>0)return t+=n,this.setOption("page",t),this.doQuery(e);throw"InvalidPageSize"},previousPage:function(e){var t=this.getOption("page"),n=this.getOption("pageSize");if(t>n)return t-=n,this.setOption("page",t),this.doQuery(e);if(_pageSize>0)return this.setOption("page",0),this.doQuery(e);throw"AtBeginning"},getPage:function(e,t){var n=this.getOption("page"),r=this.getOption("pageSize");if(e*r==n)return!1;if(typeof e=="number"&&e>=0)return this.setOption("page",e*r),this.doQuery(t);throw"InvalidPage"},setPageStartingAt:function(e){if(e==this.getOption("page"))return!1;if(!(typeof e=="number"&&e>=0))throw"InvalidPage";this.setOption("page",e)},pageStartingAt:function(e,t){return this.setPageStartingAt(e)!==!1?this.doQuery(t):!1},setPageSize:function(e){this.setOption("pageSize",e)},initPage:function(e,t){if(e==this.getOption("pageSize")&&this.getOption("page")==0)return!1;if(typeof e=="number"&&e>0)return this.setOption("page",0),this.setOption("pageSize",e),this.doQuery(t);throw"InvalidPageSize"}});return s.setBaseQuery(o),o}),pen.define("cdf/queries/CpkQuery",["../dashboard/Dashboard.ext","./BaseQuery","../dashboard/Dashboard.query","amd!../lib/underscore","../dashboard/Utils","../Logger","../lib/jquery"],function(e,t,n,r,i,s,o){var u={name:"cpk",label:"CPK Query",defaults:{url:"",pluginId:"",endpoint:"",systemParams:{},ajaxOptions:{dataType:"json",type:"POST",async:!0,xhrFields:{withCredentials:!0}}},init:function(t){r.isString(t.pluginId)&&r.isString(t.endpoint)&&(this.setOption("pluginId",t.pluginId),this.setOption("endpoint",t.endpoint),this.setOption("url",e.getPluginEndpoint(t.pluginId,t.endpoint))),this.setOption("kettleOutput",t.kettleOutput),this.setOption("stepName",t.stepName),this.setOption("systemParams",t.systemParams||{}),this.setOption("ajaxOptions",o.extend({},this.getOption("ajaxOptions"),t.ajaxOptions));var n=this.getOption("ajaxOptions");n.dataType=="json"&&(n.mimeType="application/json; charset utf-8",this.setOption("ajaxOptions",n))},buildQueryDefinition:function(e){var t=this;e=e instanceof Array?i.propertiesArrayToObject(e):e||{};var n={kettleOutput:this.getOption("kettleOutput"),stepName:this.getOption("stepName")};n=o.extend(!0,{},n,this.getOption("systemParams"));var u=this.getOption("params"),a=o.extend({},u,e);return r.each(a,function(e,i){var o,u;try{o=t.dashboard.getParameterValue(e)}catch(a){!r.isObject(e)||r.isFunction(e)?u=e:u=JSON.stringify(e),s.log("BuildQueryDefinition detected static parameter "+i+"="+u+". "+"The parameter will be used as value instead its value obtained from getParameterValue"),o=e}o===undefined&&(o=e),r.isFunction(o)?o=o():r.isObject(o)&&(o=JSON.stringify(o)),n["param"+i]=o}),n},getSuccessHandler:function(e){var t=this;return function(n){t.setOption("lastResultSet",n);var r=o.extend(!0,{},t.getOption("lastResultSet"));if(n&&n.result==0){var i=t.getErrorHandler(t.getOption("errorCallback"));i(r)}else e(r)}}};n.registerGlobalQuery("cpk",u)}),pen.define("cdf/queries/CdaQuery",["./CdaQuery.ext","./BaseQuery","../dashboard/Dashboard.query","amd!../lib/underscore","../dashboard/Utils","../Logger","../lib/jquery"],function(e,t,n,r,i,s,o){var u={name:"cda",label:"CDA Query",defaults:{url:e.getDoQuery(),file:"",id:"",outputIdx:"1",sortBy:"",ajaxOptions:{async:!0,xhrFields:{withCredentials:!0}},searchPattern:""},init:function(e){if(typeof e.path=="undefined"||typeof e.dataAccessId=="undefined")throw"InvalidQuery";this.setOption("file",e.path),this.setOption("id",e.dataAccessId),typeof e.sortBy=="string"&&e.sortBy.match("^(?:[0-9]+[adAD]?,?)*$")&&this.setOption("sortBy",e.sortBy),e.pageSize!=null&&this.setOption("pageSize",e.pageSize),e.outputIndexId!=null&&this.setOption("outputIdx",e.outputIndexId)},buildQueryDefinition:function(e){var t=this;e=e instanceof Array?i.propertiesArrayToObject(e):e||{};var n={},u=this.getOption("params"),a=o.extend({},u,e);return r.each(a,function(e,u){var a;try{a=t.dashboard.getParameterValue(e)}catch(f){var l="";!r.isObject(e)||r.isFunction(e)?l=e:l=JSON.stringify(e),s.log("BuildQueryDefinition detected static parameter "+u+"="+l+". "+"The parameter will be used instead the parameter value"),a=e}a===undefined&&(a=e),o.isArray(a)&&a.length==1&&(""+a[0]).indexOf(";")>=0&&(a=i.doCsvQuoting(a[0],";")),typeof a=="function"&&(a=a()),n["param"+u]=a}),n.path=this.getOption("file"),n.dataAccessId=this.getOption("id"),n.outputIndexId=this.getOption("outputIdx"),n.pageSize=this.getOption("pageSize"),n.pageStart=this.getOption("page"),n.sortBy=this.getOption("sortBy"),n.paramsearchBox=this.getOption("searchPattern"),n},exportData:function(t,n,r){r||(r={});var i=this.buildQueryDefinition(n);i.outputType=t,t=="csv"&&r.separator&&(i.settingcsvSeparator=r.separator),r.filename&&(i.settingattachmentName=r.filename),t=="xls"&&r.template&&(i.settingtemplateName=r.template),r.columnHeaders&&(i.settingcolumnHeaders=r.columnHeaders),r.dtFilter!=null&&(i.settingdtFilter=r.dtFilter,r.dtSearchableColumns!=null&&(i.settingdtSearchableColumns=r.dtSearchableColumns)),i.wrapItUp="true",o.ajax({type:"POST",dataType:"text",async:!0,data:i,url:this.getOption("url"),xhrFields:{withCredentials:!0}}).done(function(t){var n=o('<iframe style="display:none">');n.detach(),n[0].src=e.getUnwrapQuery({path:i.path,uuid:t}),n.appendTo(o("body"))}).fail(function(e,t,n){s.log("Request failed: "+e.responseText+" :: "+t+" ::: "+n)})},setSortBy:function(e){var t,n=this;if(e===null||e===undefined||e==="")t="";else if(typeof e=="string"){if(!e.match("^(?:[0-9]+[adAD]?,?)*$"))throw"InvalidSortExpression";t=e.toUpperCase().split(",").filter(function(e){return e!==""})}else if(e instanceof Array){t=e.map(function(e){return e.toUpperCase()});var r=t.filter(function(e){return!e.match("^[0-9]+[adAD]?,?$")});if(r.length>0)throw"InvalidSortExpression"}var i;return t instanceof Array?(i=t.length!=n.getOption("sortBy").length,o.each(t,function(e,t){i=i&&t==n.getOption("sortBy")[e];if(!i)return!1})):i=t===this.getOption("sortBy"),this.setOption("sortBy",t),!i},sortBy:function(e,t){var n=this.setSortBy(e);if(!n)return!1;if(this.getOption("successCallback")!==null)return this.doQuery(t)}};n.registerGlobalQuery("cda",u)}),pen.define("cdf/queries/XmlaQuery.ext",[],function(){var e={getXmla:function(){return CONTEXT_PATH+"Xmla"}};return e}),pen.define("cdf/queries/XmlaQuery",["amd!../lib/xmla","./XmlaQuery.ext","../lib/Base","./BaseQuery","../dashboard/Dashboard.query","../Logger","../lib/jquery"],function(e,t,n,r,i,s,o){var u=n.extend({xmla:null,datasource:null,catalogs:null,getDataSources:function(){var t=[],n=this.xmla.discoverDataSources();if(!n){s.warn("XML/A DISCOVER_DATASOURCES request failed");return}if(n.hasMoreRows()){t=n.fetchAllAsObject(),this.datasource=t[0];var r=this.datasource[e.PROP_DATASOURCENAME];r&&r.length>0&&(this.datasource[e.PROP_DATASOURCEINFO]=r),n.close()}},getCatalogs:function(){var t={},n={};if(!this.datasource||!this.datasource[e.PROP_DATASOURCEINFO]){s.warn("XML/A DBSCHEMA_CATALOGS request failed, missing "+e.PROP_DATASOURCEINFO);return}t[e.PROP_DATASOURCEINFO]=this.datasource[e.PROP_DATASOURCEINFO];var r=this.xmla.discoverDBCatalogs({properties:t});if(!r){s.warn("XML/A DISCOVER_DATASOURCES request failed");return}if(r.hasMoreRows()){this.catalogs=[];while(n=r.fetchAsObject())this.catalogs[this.catalogs.length]=n;r.close()}},discover:function(t){var n={},r=t.query();n[e.PROP_DATASOURCEINFO]=this.datasource[e.PROP_DATASOURCEINFO],t.catalog&&(n[e.PROP_CATALOG]=t.catalog);var i=this.xmla.discover({properties:n,requestType:r});return i},execute:function(t){for(var n=0,r=a.catalogs.length;n<r;n++)if(a.catalogs[n]["CATALOG_NAME"]==t.catalog){var i={};i[e.PROP_DATASOURCEINFO]=a.datasource[e.PROP_DATASOURCEINFO],i[e.PROP_CATALOG]=t.catalog,i[e.PROP_FORMAT]=a.PROP_FORMAT||e.PROP_FORMAT_TABULAR;var s=this.xmla.execute({statement:t.query(),properties:i});return s}throw new Error("Catalog: "+t.catalog+" was not found on Pentaho server.")}}),a=new u,f={name:"xmla",label:"XML/A Query",queryDefinition:{},defaults:{url:t.getXmla()},init:function(t){this.queryDefinition=o.extend({},this.getOption("params"),t),a.xmla==null&&(a.xmla=new e({async:!1,url:this.getOption("url")})),a.datasource==null&&a.getDataSources(),a.catalogs==null&&a.getCatalogs()},transformXMLAresults:function(t){var n,r,i,s={resultset:[],metadata:[]};t instanceof e.Rowset?(n=t.fetchAllAsArray(),r=t.getFields()):t instanceof e.Dataset;for(var o=0,u=r.length;o<u;o++){i=r[o],s.metadata[o]={colIndex:i.index,colName:i.label};switch(i.jsType){case"string":s.metadata[o].colType="string";break;case"number":s.metadata[o].colType="numeric";break;default:s.metadata[o].colType="string"}}return s.resultset=n,t.close(),s},doQuery:function(e){var t=this.getOption("url"),n=e?e:this.getOption("successCallback"),r=this.getOption("errorCallback");try{var i=a.execute(this.queryDefinition)}catch(o){s.error("unable to execute the XML/A query: "+o+" :")}n(this.transformXMLAresults(i))}};i.registerGlobalQuery("xmla",f);var l={name:"xmlaDiscover",label:"XML/A Discover Query",queryDefinition:{},defaults:{url:t.getXmla()},init:function(t){this.queryDefinition=o.extend({},this.getOption("params"),t),a.xmla==null&&(a.xmla=new e({async:!1,url:this.getOption("url")})),a.datasource==null&&a.getDataSources()},transformDiscoverresults:function(e){var t=e.getFields(),n,r={resultset:[],metadata:[]};for(var i=0,s=t.length;i<s;i++){n=t[i],r.metadata[i]={colIndex:n.index,colName:n.label};switch(n.jsType){case"string":r.metadata[i].colType="string";break;case"number":r.metadata[i].colType="numeric";break;default:r.metadata[i].colType="string"}}return r.resultset=e.fetchAllAsArray(),e.close(),r},doQuery:function(e){var t=this.getOption("url"),n=e?e:this.getOption("successCallback"),r=this.getOption("errorCallback");try{var i=a.discover(this.queryDefinition)}catch(o){s.error("unable to execute the XML/A Discover query: "+o+" :")}n(this.transformDiscoverresults(i))}};i.registerGlobalQuery("xmlaDiscover",l)}),pen.define("cdf/queries/LegacyQuery",["../Logger","../components/XactionComponent.ext","./BaseQuery","../dashboard/Dashboard.query","amd!../lib/underscore","../lib/jquery","../dashboard/Utils"],function(Logger,XactionComponentExt,BaseQuery,Dashboard,_,$,Utils){function makeMetadataElement(e,t,n){return{colIndex:e||0,colType:n||"String",colName:t||"Name"}}var legacyOpts={name:"legacy",label:"Legacy Query",defaults:{url:XactionComponentExt.getCdfXaction("pentaho-cdf/actions","jtable.xaction"),queryDef:{}},interfaces:{lastResultSet:{reader:function(json){json=eval("("+json+")");var result={metadata:[makeMetadataElement(0)],resultset:json.values||[]};return _.each(json.metadata,function(e,t){return result.metadata.push(makeMetadataElement(t+1,e))}),result}}},init:function(e){this.setOption("queryDef",e)},getSuccessHandler:function(e){var t=this;return function(n){try{t.setOption("lastResultSet",n)}catch(r){if(!this.async)throw r;var i=t.dashboard.getErrorObj("COMPONENT_ERROR").msg+":"+r.message;Logger.error(i),n={metadata:[i],values:[]}}var s=$.extend(!0,{},t.getOption("lastResultSet"));e(s)}},buildQueryDefinition:function(e){return _.extend({},this.getOption("queryDef"),e)}};Dashboard.registerGlobalQuery("legacy",legacyOpts),Dashboard.registerGlobalQuery("mdx",legacyOpts),Dashboard.registerGlobalQuery("sql",legacyOpts)}),pen.define("common-ui/util/require-css/css!cdf/Dashboard",[],function(){}),pen.define("cdf/Dashboard",["./dashboard/Dashboard","./dashboard/Dashboard.context","./dashboard/Dashboard.addIns","./dashboard/Dashboard.bookmarkable","./dashboard/Dashboard.components","./dashboard/Dashboard.i18n","./dashboard/Dashboard.legacy","./dashboard/Dashboard.lifecycle","./dashboard/Dashboard.notifications","./dashboard/Dashboard.parameters","./dashboard/Dashboard.storage","./dashboard/Dashboard.dataSources","./dashboard/Dashboard.query","./dashboard/Dashboard.views","./queries/BaseQuery","./queries/CpkQuery","./queries/CdaQuery","./queries/XmlaQuery","./queries/LegacyQuery","./components/BaseComponent","./components/UnmanagedComponent","css!./Dashboard"],function(e){return e}),pen.define("cdf/Dashboard.Clean",["./Dashboard"],function(e){return e}),pen.define("common-ui/prompting/parameters/ParameterDefinitionDiffer",[],function(){return function(){return{_isBehavioralAttrsChanged:function(e,t){var n=JSON.stringify(e.attributes)!==JSON.stringify(t.attributes)||e.list!==t.list||e.mandatory!==t.mandatory||e.multiSelect!==t.multiSelect||e.strict!==t.strict||e.type!==t.type;return n},_isDataChanged:function(e,t){var n=JSON.stringify(e.values)!==JSON.stringify(t.values);return n},_isErrorsChanged:function(e,t,n){var r=t.errors[e],i=n.errors[e];return JSON.stringify(r)!==JSON.stringify(i)},_fillWrapObj:function(e,t,n,r){e[t][n.name]||(e[t][n.name]={group:n,params:[]}),e[t][n.name].params.push(r)},diff:function(e,t,n){if(!e||!t)return!1;var r={toAdd:{},toChangeData:{},toRemove:{}};e.mapParameters(function(e,n){if(!e.attributes.hidden||e.attributes.hidden=="false"){var i=t.getParameter(e.name);(!i||i.attributes.hidden=="true")&&this._fillWrapObj(r,"toRemove",n,e)}},this),t.mapParameters(function(n,i){if(!n.attributes.hidden||n.attributes.hidden=="false"){var s=i.parameters.indexOf(n);s>0&&(n.after=i.parameters[s-1]);var o=e.getParameter(n.name);!o||o.attributes.hidden=="true"?this._fillWrapObj(r,"toAdd",i,n):this._isBehavioralAttrsChanged(o,n)?(this._fillWrapObj(r,"toRemove",i,o),this._fillWrapObj(r,"toAdd",i,n)):this._isDataChanged(o,n)&&(n.isErrorChanged=this._isErrorsChanged(n.name,e,t),this._fillWrapObj(r,"toChangeData",i,n))}},this);for(var i in n){var s=n[i];t.mapParameters(function(e,t){if(s.name==e.name)return e.forceUpdate=!0,this._fillWrapObj(r,"toChangeData",t,e),!1},this)}return r}}}}),pen.define("common-ui/prompting/PromptPanel",["cdf/lib/Base","cdf/Logger","dojo/number","dojo/i18n","common-ui/util/util","common-ui/util/GUIDHelper","./WidgetBuilder","cdf/Dashboard.Clean","./parameters/ParameterDefinitionDiffer"],function(e,t,n,r,i,s,o,u,a){function f(e,t){var n=$.extend(e,{promptPanel:this});return this.widgetBuilder.build(n,t)}function l(e){return e.strict&&e.values.length===0?null:f.call(this,{param:e})}function c(e){return f.call(this,{param:e},"label")}function h(e,t){return f.call(this,{param:e,errorMessage:t},"error-label")}function p(e,t){return f.call(this,{param:e,components:t},"parameter-panel")}function d(e,t){return f.call(this,{paramGroup:e,components:t},"group-panel")}function v(){return f.call(this,{},"submit-panel")}function m(){return this.widgetBuilder.build(this,"prompt-panel")}function g(e,t){t(e),e.components&&y(e.components,t)}function y(e,t){$.each(e,function(e,n){g(n,t)})}var b=function(e,t){var n=this.getParameterName(e);return w.call(this,n,t)},w=function(e,t){for(var n in this.dashboard.components){var r=this.dashboard.components[n];if(r.parameter===e){var i=r.type.search("Panel")>-1;if(t&&i||!t&&!i)return r}}return null},E=function(e){this.dashboard.addComponent(e),this.dashboard.updateComponent(e);for(var t in e.components)E.call(this,e.components[t])},S=function(e){var t=null;for(var n=0;n<e.components.length;n++)if(e.components[n].promptType=="submit"&&e.components[n].type=="FlowPromptLayoutComponent"){t=e.components[n];break}return t},x=function(e){var t=[];return e.components&&(t=e.components.filter(function(e){return e.promptType=="label"&&e.type=="TextComponent"&&e.isErrorIndicator})),t},T=function(e,t){var n=e.components.indexOf(t);n>-1&&e.components.splice(n,1)},N=e.extend({guid:undefined,paramDefn:undefined,autoSubmit:undefined,dashboard:undefined,parametersChanged:!1,onParameterChanged:null,onAfterRender:null,onBeforeRender:null,constructor:function(e,t){if(!e)throw"destinationId is required";this.destinationId=e;if(!t)throw"paramDefn is required";this.paramDefn=t,this.autoSubmit=t.allowAutoSubmit(),this.promptGUIDHelper=new s,this.guid=this.promptGUIDHelper.generateGUID(),this.dashboard=new u,this.paramDiffer=new a,this.widgetBuilder=o},getAutoSubmitSetting:function(){return this.autoSubmit},getString:function(e,t){return t||"!"+e+"!"},getParameterName:function(e){return this.guid+e.name},getParameterValues:function(){var e={};return this.paramDefn.mapParameters(function(t){var s=this.getParameterValue(this.getParameterName(t));if(s===""||typeof s=="undefined")return;t.multiSelect&&!$.isArray(s)&&(s=[s]);if(i.isNumberType(t.type)){var o=r.getLocalization("dojo.cldr","number",SESSION_LOCALE.toLowerCase()),u=r.getLocalization("dojo.cldr","number",null),a;try{s.indexOf(o?o.decimal:u.decimal)>0?(a=n.parse(s,{locale:SESSION_LOCALE.toLowerCase()}),a.toString().indexOf(u.decimal)<0&&(a=n.format(a,{places:s.length-s.indexOf(o?o.decimal:u.decimal)-1}),u=r.getLocalization("dojo.cldr","number",null),a=a.split(u.group).join(""))):a=n.parse(s,{locale:SESSION_LOCALE.toLowerCase()})}catch(f){a=s}}e[t.name]=isNaN(a)?s:a},this),e},createDataTransportFormatter:function(e,t,n,r){},createFormatter:function(e,t,n){},generateWidgetGUID:function(){return this.guid+"-"+this.promptGUIDHelper.generateGUID()},_initializeParameterValue:function(e,t){var n=t.getSelectedValuesValue();n.length===0?n="":n.length===1&&(n=n[0]),this.setParameterValue(t,n)},setParameterValue:function(e,t){this.dashboard.setParameter(this.getParameterName(e),t)},getParameterValue:function(e){return typeof e!="string"&&(e=this.getParameterName(e)),this.dashboard.getParameterValue(e)},_ready:function(){this.ready(this)},_submit:function(e){this.submit(this,e)},_submitStart:function(){this.submitStart(this)},ready:function(e){},submit:function(e,t){this.forceAutoSubmit=!1},submitStart:function(e){},parameterChanged:function(e,t,n){this.onParameterChanged&&this.onParameterChanged(t,n);if(!n||n==""||n=="null")this.nullValueParams||(this.nullValueParams=[]),this.nullValueParams.push(e);this._setTimeoutRefreshPrompt(),this.parametersChanged=!0},_setTimeoutRefreshPrompt:function(){var e=this;setTimeout(function(){e.refreshPrompt()},0)},getParameterDefinition:function(e,t){t()},refreshPrompt:function(e){try{this.isForceRefresh=e,this.getParameterDefinition(this,this.refresh.bind(this))}catch(t){this.isForceRefresh=undefined,console.log(t),alert("Exception caught attempting to execute refreshCallback")}},refresh:function(e,n){var r=this;if(this.dashboard.waitingForInit&&this.dashboard.waitingForInit.length){t.warn("Overlapping refresh!"),setTimeout(function(){r.refresh(e,n)},0);return}if(e){this.diff=this.paramDiffer.diff(this.paramDefn,e,this.nullValueParams),this.isRefresh=!0,this.paramDefn=e,this.nullValueParams=null;if(this.dashboard.components){var i;/android|ipad|iphone/i.test(navigator.userAgent)||(i=this._multiListBoxTopValuesByParam={});var s;y(this.dashboard.components,function(e){if(!e.components&&e.param&&e.promptType==="prompt"){if(!s){var t=e.placeholder();$(":focus",t).length&&(s=e.param.name)}if(i&&e.type==="SelectMultiComponent"){var n=e.topValue();n!=null&&(i["_"+e.param.name]=n)}}else if(i&&e.type==="ScrollingPromptPanelLayoutComponent"){var r=e.placeholder().children(".prompt-panel"),o=r.scrollTop(),u=r.children(".parameter-wrapper"),a=u.scrollLeft();o!=null&&a!=null&&(i["_"+e.name]={scrollTopValue:o,scrollLeftValue:a})}}),this._focusedParam=s}this.init(n)}},_removeComponentsByDiff:function(e){var t=[];for(var n in e){var r=e[n],i=r.params;for(var s=0;s<i.length;s++){var o=i[s],u=b.call(this,o,!0);if(u!=null){t.push(u);var a=this.dashboard.getComponentByName(n);a&&(T.call(this,a,u),a.components.length==0&&t.push(a))}}}var f=this.dashboard.getComponentByName("prompt"+this.guid);if(f){for(var s in t)T.call(this,f,t[s]);if(f.components.length==1){var l=S.call(this,f);l&&(t.push(l),T.call(this,f,l))}this.removeDashboardComponents(t),f.components.length==0&&f.clear()}},_addComponentsByDiff:function(e){var t=this.dashboard.getComponentByName("prompt"+this.guid);for(var n in e){var r=e[n],i=r.params,s=[];for(var o=0;o<i.length;o++){var u=i[o],a=this._buildPanelForParameter(u);u.after&&(a.after=b.call(this,u.after,!0)),s.push(a)}var f=this.dashboard.getComponentByName(n);if(!f)f=d.call(this,r.group,s),t.components.push(f);else for(var l in s){var c=s[l],h=0;if(c.after){var p=f.components.indexOf(c.after);h=p+1}f.components.splice(h,0,c)}}if(t.components.length>0&&!S.call(this,t)){var m=v.call(this);t.components.push(m)}E.call(this,t)},_changeErrors:function(e){if(e.isErrorChanged){var t=this.paramDefn.errors[e.name],n=b.call(this,e,!0),r=x.call(this,n),i=[];for(var s in r){var o=r[s],u=t&&t.some(function(e){return e==o.label});if(!u){for(var a in r)T.call(this,n,o);i.push(o)}}i.length>0&&this.removeDashboardComponents(i);if(t)for(var s in t){var f=t[s],l=r.some(function(e){return e.label==f});if(!l){var s=n.components.length-1,c=h.call(this,e,f);this.dashboard.addComponent(c),n.components.splice(s,0,c)}}var p=x.call(this,n);if(p.length>0){if(!n.cssClass||n.cssClass&&n.cssClass.indexOf("error")==-1)n.cssClass=(n.cssClass||"")+" error"}else n.cssClass=(n.cssClass||"").replace(" error",""),n.removeErrorClass()}},_changeComponentsByDiff:function(e){for(var t in e){var n=e[t],r=n.params;for(var i in r){var s=r[i],o=b.call(this,s);if(o!=null){var u=!1;this._changeErrors(s);var a=this.widgetBuilder.build({param:s,promptPanel:this},s.attributes["parameter-render-type"]).valuesArray;if(JSON.stringify(o.valuesArray)!==JSON.stringify(a)||s.forceUpdate)this._initializeParameterValue(null,s),o.valuesArray=a,u=!0;this.autoSubmit&&(this.forceSubmit=!0);var f=s.getSelectedValuesValue();f.length==1&&(f=f[0]);var l=this.dashboard.getParameterValue(o.parameter);if(l!=f||u){var c=this.dashboard.getComponentByName(t);g(c,function(e){this.dashboard.updateComponent(e)}.bind(this))}}}}},update:function(e){Object.keys(e.toRemove).length>0&&this._removeComponentsByDiff(e.toRemove),Object.keys(e.toAdd).length>0&&this._addComponentsByDiff(e.toAdd),Object.keys(e.toChangeData).length>0&&this._changeComponentsByDiff(e.toChangeData)},init:function(e){this.onBeforeRender&&this.onBeforeRender();var t=this,n=!0,r=this._multiListBoxTopValuesByParam;r&&delete this._multiListBoxTopValuesByParam;var i=this._focusedParam;i&&delete this._focusedParam;var s=[],o=function(e){s.push(e),n&&e.promptType=="submit"&&(n=!1);if(!e.components&&e.param&&e.promptType==="prompt"){var t=e.param.name;i&&i===t&&(i=null,e.autoFocus=!0);if(r&&e.type==="SelectMultiComponent"){var o=r["_"+t];o!=null&&(e.autoTopValue=o)}}else if(r&&e.type==="ScrollingPromptPanelLayoutComponent"){var u=r["_"+e.name];if(u!=null){var a=function(){var t=$("#"+e.htmlObject).children(".prompt-panel");t.scrollTop(u.scrollTopValue),t.children(".parameter-wrapper").scrollLeft(u.scrollLeftValue)};this.isRefresh?setTimeout(function(){a()},50):this.dashboard.postInit(function(){scrollTopValue&&(a(),delete u)})}}}.bind(this);if(!this.isRefresh&&this.paramDefn.showParameterUI()){this.promptGUIDHelper.reset();var u=m.call(this);g(u,o),this.dashboard.addComponents(s),this.dashboard.init()}else if(this.diff){this.update(this.diff);var u=this.dashboard.getComponentByName("prompt"+this.guid),a=function(e){this.isForceRefresh&&this.dashboard.updateComponent(e),o(e)}.bind(this);g(u,a)}else this.paramDefn.mapParameters(function(e){this._initializeParameterValue(this.paramDefn,e)},this),n=!e;(this.forceSubmit||n)&&this.submit(this,{isInit:!this.isRefresh}),this.diff=null,this.isRefresh=null,this.forceSubmit=!1,this.isForceRefresh=undefined,this.onAfterRender&&this.onAfterRender()},hide:function(){$("#"+this.destinationId).css("display","none")},_buildPanelForParameter:function(e){var n=[];this._initializeParameterValue(this.paramDefn,e),n.push(c.call(this,e));var r=this.paramDefn.errors[e.name];r&&$.each(r,function(t,r){n.push(h.call(this,e,r))}.bind(this));var i=l.call(this,e);if(!i)return t.log("No widget created, return"),undefined;n.push(i);var s=p.call(this,e,n);return r&&r.length>0&&(s.cssClass=(s.cssClass||"")+" error"),s},createWidgetForSubmitComponent:function(){return f.call(this,{},"submit")},buildPanelComponents:function(){var e=[];return $.each(this.paramDefn.parameterGroups,function(t,n){var r=[];$.each(n.parameters,function(e,t){if(t.attributes["hidden"]=="true"){this._initializeParameterValue(this.paramDefn,t);return}r.push(this._buildPanelForParameter(t))}.bind(this)),r.length>0&&e.push(d.call(this,n,r))}.bind(this)),e.length>0&&e.push(v.call(this)),e},removeDashboardComponents:function(e,t){var n=this,r=[];y(e,function(e){var t=n.dashboard.removeComponent(e.name);t&&r.push(t)}),$.each(r,function(e,r){t||(r.remove?r.remove():r.clear()),r.parameter&&$.each(n.dashboard.components,function(e,t){$.isArray(t.listeners)&&(t.listeners=$.grep(t.listeners,function(e){return e!==r.parameter}))})})}});return N}),pen.define("reportviewer/reportviewer-prompt",["common-ui/util/util","pentaho/common/Messages","dijit/registry","common-ui/prompting/parameters/ParameterXmlParser","common-ui/prompting/PromptPanel"],function(util,Messages,registry,ParameterXmlParser,PromptPanel){return function(){return logged({mode:"INITIAL",load:function(){Messages.addUrlBundle("reportviewer",CONTEXT_PATH+"i18n?plugin=reporting&name=reportviewer/messages/messages")},createPromptPanel:function(){this.fetchParameterDefinition(null,this._createPromptPanelFetchCallback.bind(this),"INITIAL")},_createPromptPanelFetchCallback:function(e){var t=this.panel=new PromptPanel("promptPanel",e);t.submit=this.submit.bind(this),t.submitStart=this.submitStart.bind(this),t.ready=this.ready.bind(this),t.getParameterDefinition=function(e,t){this.fetchParameterDefinition(e,t,"USERINPUT")}.bind(this),t.getString=Messages.getString,this.initPromptPanel(),this._hideLoadingIndicator()},_hideLoadingIndicator:function(){try{window.top.hideLoadingIndicator?window.top.hideLoadingIndicator():window.parent.hideLoadingIndicator&&window.parent.hideLoadingIndicator()}catch(e){}},initPromptPanel:function(){this.panel.init()},showGlassPane:function(){registry.byId("glassPane").show()},hideGlassPane:function(){registry.byId("glassPane").hide()},ready:function(e){this.hideGlassPane()},submit:function(e,t){alert("submit fired for panel: "+e)},submitStart:function(e){alert("submit start fired for panel: "+e)},parameterParser:new ParameterXmlParser,parseParameterDefinition:function(e){return e=this.removeControlCharacters(e),this.parameterParser.parseParameterXml(e)},removeControlCharacters:function(inStr){for(var i=0;i<=31;i++){var safe=i;i<10&&(safe="0"+i),eval("inStr = inStr.replace(/&#"+safe+';/g, "")')}return inStr},checkSessionTimeout:function(e,t){return e.status==401||this.isSessionTimeoutResponse(e)?(this.handleSessionTimeout(t),!0):!1},isSessionTimeoutResponse:function(e){return String(e).indexOf("j_spring_security_check")!=-1?!0:!1},handleSessionTimeout:function(e){var t=function(){this.fetchParameterDefinition.apply(this,e)}.bind(this);this.reauthenticate(t)},reauthenticate:function(e){var t=null;try{var n=window.parent.mantle_initialized;t=!0}catch(r){t=!1}if(t&&top.mantle_initialized){var i={loginCallback:e};window.parent.authenticate(i)}else this.showMessageBox(Messages.getString("SessionExpiredComment"),Messages.getString("SessionExpired"),Messages.getString("OK"),undefined,undefined,undefined,!0)},_fetchParamDefId:-1,fetchParameterDefinition:function(e,t,n){var r=this,i=++r._fetchParamDefId;r.showGlassPane(),n?n=="USERINPUT"&&r.hideGlassPane():n="MANUAL";if(r.clicking){var s=n==="USERINPUT";r.ignoreNextClickSubmit=s,e&&(e.forceAutoSubmit=s),delete r.clicking}r.mode=n;var o=util.getUrlParameters();e&&$.extend(o,e.getParameterValues()),o.renderMode=this._getParameterDefinitionRenderMode(e,n),delete o["::session"];var u=arguments,a=logged("fetchParameterDefinition_success",function(s){if(r.checkSessionTimeout(s,u))return;if(i!==r._fetchParamDefId)return;try{var o=r.parseParameterDefinition(s);if(n==="INITIAL"&&o.allowAutoSubmit()){r.fetchParameterDefinition(null,t,"MANUAL");return}var a=e&&e.getAutoSubmitSetting();a!=null&&(o.autoSubmitUI=a),t.call(r,o)}catch(f){r.onFatalError(f)}}),f=function(e){r.checkSessionTimeout(e,u)||r.onFatalError(e)};$.ajax({async:!0,traditional:!0,cache:!1,type:"POST",url:r.getParameterUrl(),data:o,dataType:"text",success:a,error:f})},_getParameterDefinitionRenderMode:function(e,t){switch(t){case"INITIAL":return"PARAMETER";case"USERINPUT":if(!e||!e.getAutoSubmitSetting())return"PARAMETER"}return"XML"},getParameterUrl:function(){return"parameter"},showMessageBox:function(e,t,n,r,i,s,o){var u=registry.byId("messageBox");u.setTitle(t),u.setMessage(e);if(o)u.setButtons([]);else{var a=function(){this.panel&&this.panel.dashboard.hideProgressIndicator(),u.hide.call(u)};n||(n=Messages.getString("OK")),r||(r=a),u.onCancel=a,i?(u.callbacks=[r,s],u.setButtons([n,i])):(u.callbacks=[r],u.setButtons([n]))}this.panel&&this.panel.dashboard.showProgressIndicator(),u.show()},onFatalError:function(e){var t=Messages.getString("ErrorParsingParamXmlMessage");typeof console!="undefined"&&console.log&&console.log(t+": "+e),this.showMessageBox(t,Messages.getString("FatalErrorTitle"))}})}}),pen.define("dojo/text!pentaho/common/button.html",[],function(){return'<button type="button" data-dojo-attach-point="button" tabindex="0" class="pentaho-button" id="${id}">\n	${label}\n</button>'}),pen.define("pentaho/common/button",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/_base/lang","dojo/text!pentaho/common/button.html","dojo/on"],function(e,t,n,r,i,s){return e("pentaho.common.button",[t,n],{label:"a button",onClick:function(){this.callback()},callback:null,templateString:i,postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments),s(this.button,"click",r.hitch(this,this.onClick))}})}),pen.define("dojo/text!pentaho/common/SmallImageButton.html",[],function(){return'<img data-dojo-attach-point="buttonImg" src="${_imageSrc}" title="" class="pentaho-addbutton"/>\n'}),pen.define("pentaho/common/SmallImageButton",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/on","dojo/query","dojo/text!pentaho/common/SmallImageButton.html","dojo/dom-class","dojo/_base/lang"],function(e,t,n,r,i,s,o,u,a){return e("pentaho.common.SmallImageButton",[t,n,r],{title:"",baseClass:"",_imageSrc:require.toUrl("pentaho/common/images/spacer.gif"),callback:function(){},disabled:!1,onClick:function(e){this.callback&&!this.get("disabled")&&this.callback(e)},templateString:o,mouseOver:function(){this.disabled||u.add(this.buttonImg,"pentaho-imagebutton-hover")},mouseOut:function(){this.disabled||u.remove(this.buttonImg,"pentaho-imagebutton-hover")},set:function(e,t){this.inherited(arguments),e=="disabled"&&(this.disabled=t,u.toggle(this.buttonImg,"pentaho-imagebutton-disabled",this.disabled),this.disabled?this.buttonImg.title="":this.buttonImg.title=this.title)},postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments),this.buttonImg.className=this.baseClass,u.toggle(this.buttonImg,"pentaho-imagebutton-disabled",this.disabled),i(this.buttonImg,"click",a.hitch(this,this.onClick)),i(this.buttonImg,"mouseover",a.hitch(this,this.mouseOver)),i(this.buttonImg,"mouseout",a.hitch(this,this.mouseOut))}})}),pen.define("pentaho/common/Dialog",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/on","dojo/dom","dojo/query","dojo/dom-construct","dojo/dom-style","dijit/Dialog","pentaho/common/button","pentaho/common/SmallImageButton","pentaho/common/Messages","dojo/dom-class","dojo/_base/lang","dojo/_base/event","dojo/keys"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){return e("pentaho.common.Dialog",[t,n,r],{popup:null,title:"",getLocaleString:pentaho.common.Messages.getString,callbacks:[],shown:!1,buttonsCreated:!1,buttonPanel:null,hasTitleBar:!0,hasBorder:!0,hasCloseIcon:!1,closeIcon:undefined,_onCancelCallback:undefined,setLocalizationLookupFunction:function(e){this.getLocaleString=e,this._localize()},buttonClick:function(e){this.callbacks[e]&&this.callbacks[e]()},buttons:[],_localize:function(){if(this.getLocaleString){for(var e=0;e<this.buttons.length;e++){var t=o("button"+e,this.popup.domNode);this.buttons[e]=this.getLocaleString(this.buttons[e]),t&&(t.innerHTML=this.getLocaleString())}this.hasCloseIcon&&this.closeIcon.domNode.setAttribute("title",this.getLocaleString("CloseIcon_title"))}},templateString:"<div></div>",postMixInProperties:function(){this.inherited(arguments)},_createButtonPanel:function(){this.buttonPanel=u.create("TABLE"),a.set(this.buttonPanel,"width","100%"),u.place(this.buttonPanel,this.popup.domNode),p.add(this.buttonPanel,"button-panel")},_createButtons:function(){this.buttonPanel.rows.length>0&&this.buttonPanel.deleteRow(-1);var e=this.buttonPanel.insertRow(-1),t=e.insertCell(-1);a.set(t,"align","right"),a.set(t,"width","100%");for(var n=0;n<this.buttons.length;n++){t=e.insertCell(-1),a.set(t,"align","right");var r=document.createElement("BUTTON");p.add(r,"pentaho-button"),r.setAttribute("id","button"+n),r.innerHTML=this.buttons[n],t.appendChild(r),r.onclick=d.hitch(this,this.buttonClick,n)}},setButtonEnabled:function(e,t){var n=s.byId("button"+e);typeof n!="undefined"&&n!=null&&(typeof n.set!="undefined"?n.set("disabled",!t):n.disabled=!t)},postCreate:function(){(this.templatePath||this.templateString!="<div></div>")&&this.popup.attr("content",this.domNode),this.inherited(arguments),this.hasTitleBar||p.add(o(".dijitDialogTitleBar",this.popup.domNode)[0],"hidden"),this.hasBorder&&p.add(this.popup.domNode,"pentaho-dialog"),this.hasCloseIcon&&(this.closeIcon=new pentaho.common.SmallImageButton({baseClass:"pentaho-closebutton"}),p.add(this.closeIcon.domNode,"pentahoDialogCloseIcon"),u.place(this.closeIcon.domNode,o(".dijitDialogTitleBar",this.popup.domNode)[0]),this.closeIcon.callback=d.hitch(this,this.onCancel)),p.add(o(".dijitDialogTitleBar",this.popup.domNode)[0],"Caption"),i(this.domNode,"keyPress",d.hitch(this,this.keyUp)),i(this.popup.domNode,"keyPress",d.hitch(this,this.keyUp)),this.onKeyUp=d.hitch(this,this.keyup),i(this.domNode,"keyUp",d.hitch(this,this.keyup)),i(this.popup,"keyUp",d.hitch(this,this.keyup)),i(this.popup.domNode,"keyUp",d.hitch(this,this.keyup)),this.popup.onCancel=d.hitch(this,function(){}),this.popup.onExecute=d.hitch(this,this.okClick),this._localize(),i(this.popup,"Hide",d.hitch(d.hitch(this,"onHide")))},keyup:function(e){v.stop(e),e.keyCode==m.ENTER&&this.execute&&this.execute(),e.keyCode==m.ESCAPE&&this.onCancel&&this.onCancel()},setTitle:function(e){this.title=e,this.popup.set("title",this.title)},show:function(){this.domNode.style.display="",this.popup.set("title",this.title),a.set(this.popup.domNode,"display","none"),this.templateBased?this.shown||(this.width=""+a.get(this.domNode,"width")+"px",a.get(this.domNode,"display")==="block"&&(this.width=a.get(this.domNode,"width")+a.get(this.domNode,"paddingLeft")+a.get(this.domNode,"paddingRight")+a.get(this.domNode,"borderLeftWidth")+a.get(this.domNode,"borderRightWidth")+"px"),a.set(this.popup.domNode,"width",this.width),a.set(o(".dijitDialogPaneContent",this.popup.domNode),"width",this.width),a.set(o(".dijitDialogPaneContent",this.domNode),"width",this.width)):this.shown||(a.set(this.domNode,"width",this.width),a.set(this.popup.domNode,"width",this.width),a.set(o(".dijitDialogPaneContent",this.popup.domNode),"width",this.width),a.set(o(".dijitDialogPaneContent",this.domNode),"width",this.width),a.set(this.domNode,"height",this.height),a.set(this.popup.domNode,"height",this.height),a.set(o(".dijitDialogPaneContent",this.popup.domNode),"height",this.height),a.set(o(".dijitDialogPaneContent",this.domNode),"height",this.height)),this.shown||this._createButtonPanel(),this._createButtons(),this.popup.show(),this.shown=!0},hide:function(){return this.popup.hide()},destroy:function(){this.popup.destroy()},destroyRecursive:function(){this.popup.destroyRecursive(),u.empty(this.domNode)},buildRendering:function(){this.templatePath&&(this.templateString=null),this.inherited(arguments),this.templateString=="<div></div>"&&this.popup.buildRendering()},_attachTemplateNodes:function(e,t){this.inherited(arguments)},_fillContent:function(e){!this.templatePath&&this.templateString=="<div></div>"?(this.templateBased=!1,this.width=""+a.get(e,"width")+"px",this.height=""+a.get(e,"height")+"px",p.contains(e,"hidden")&&p.remove(e,"hidden"),this._attachTemplateNodes(e),this.source=e,this.popup=new f({title:this.title,content:this.source.innerHTML}),p.add(this.popup.domNode,"pentaho-dialog"),p.remove(this.popup.domNode,"hidden"),p.add(o(".dijitDialogTitleBar",this.popup.domNode)[0],"Caption")):(this.templateBased=!0,this.popup=new f),this.inherited(arguments)},registerOnCancelCallback:function(e){this._onCancelCallback=e},onCancel:function(){if(this._onCancelCallback)try{this._onCancelCallback()}catch(e){console.warn("error in onCancelCallback: "+e)}this.hide()},onHide:function(){}})}),pen.define("pentaho/reportviewer/ReportDialog",["dojo/_base/declare","dojo/on","dojo/query","dojo/_base/lang","dijit/_WidgetBase","dijit/_TemplatedMixin","pentaho/common/button","pentaho/common/Dialog","dojo/dom-style","dojo/dom-attr"],function(e,t,n,r,i,s,o,u,a,f){return e("pentaho.reportviewer.ReportDialog",[pentaho.common.Dialog],{hasCloseIcon:!1,width:"800px",height:"600px",buttons:["OK"],templateString:'<div style="padding: 5px 10px 10px 10px;" class="dialog-content"><iframe data-dojo-attach-point="iframe" width="100%" height="100%"></iframe></div>',cleanseSizeAttr:function(e,t){return e===undefined?t:(/.*px$/.exec(e)||(e+="px"),e)},open:function(e,t,n,r){this.setTitle(e),a.set(this.domNode,"width",this.cleanseSizeAttr(n,this.width)),a.set(this.domNode,"height",this.cleanseSizeAttr(r,this.height)),f.set(this.iframe,"src",t),this.show()},postCreate:function(){this.inherited(arguments),this.callbacks=[r.hitch(this,this.onCancel)]}})}),pen.define("reportviewer/reportviewer",["common-ui/util/util","reportviewer/reportviewer-prompt","common-ui/util/timeutil","common-ui/util/formatting","pentaho/common/Messages","dojo/dom","dojo/on","dojo/_base/lang","dijit/registry","dojo/has","dojo/sniff","dojo/dom-class","pentaho/reportviewer/ReportDialog","dojo/dom-style","dojo/query","dojo/dom-geometry","dojo/parser","dojo/window","dojo/_base/window","cdf/lib/jquery","amd!cdf/lib/jquery.ui"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){return function(t){if(!t){alert("report prompt is required");return}var n=logged({prompt:t,load:function(){function e(e){e.setAttribute("style","-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"),typeof e.onselectstart!="undefined"&&(e.setAttribute("unselectable","on"),e.onselectstart=function(){return!1})}i.addUrlBundle("reportviewer",CONTEXT_PATH+"i18n?plugin=reporting&name=reportviewer/messages/messages"),this.view.localize(),this.createRequiredHooks(),this.view.updatePageBackground(),e(s.byId("reportArea")),e(s.byId("reportPageOutline")),e(s.byId("reportContent")),o(a.byId("toolbar-parameterToggle"),"click",u.hitch(this,function(){this.view.togglePromptPanel()}));var t=this._onReportContentLoaded.bind(this),n=logged("onFrameLoaded",function(){setTimeout(t)});f("ie")?o(s.byId("reportContent"),"readystatechange",function(){this.readyState==="complete"&&n()}):o(s.byId("reportContent"),"load",u.hitch(n));var r=this.prompt.ready.bind(this.prompt),l=this.prompt.showGlassPane.bind(this.prompt),c=this.prompt.hideGlassPane.bind(this.prompt);this.prompt.ready=this.view.promptReady.bind(this.view,r),this.prompt.showGlassPane=this.view.showGlassPane.bind(this.view,l),this.prompt.hideGlassPane=this.view.hideGlassPane.bind(this.view,c),this.prompt.submit=this.submitReport.bind(this),this.prompt.submitStart=this.submitReportStart.bind(this),b("body").addClass(_isTopReportViewer?"topViewer leafViewer":"leafViewer").addClass(inMobile?"mobile":"nonMobile"),logger&&b("body").addClass("debug");var h=this.prompt.initPromptPanel.bind(this.prompt);this.prompt.initPromptPanel=logged("prompt.initPromptPanel",function(){var e=this.prompt.panel,t=e.init;e.init=function(e){this.view.initPrompt(t,this.prompt.panel,e)}.bind(this),h()}.bind(this)),this.prompt.createPromptPanel()},view:logged({localize:function(){b("#toolbar-parameterToggle").attr("title",i.getString("parameterToolbarItem_title")),a.byId("pageControl").registerLocalizationLookup(i.getString)},updatePageBackground:function(){var e;try{e=window.top.mantle_initialized}catch(t){e=!1}var n=top!==self;!inSchedulerDialog&&!inMobile&&(!e||n)&&c.add(document.body,"pentaho-page-background")},_showReportContent:function(e,t){var n=this._hasReportContent();n||(e=!1),this._isReportContentVisible()!==!!e&&(!e&&!t&&n&&(logger&&logger.log("Will clear content iframe.data-src"),b("#hiddenReportContentForm").attr("action","about:blank"),b("#hiddenReportContentForm").submit(),b("#reportContent").attr("data-src","about:blank"),this._updatedIFrameSrc=!0),b("body")[e?"removeClass":"addClass"]("contentHidden"))},_calcReportContentVisibility:function(e){var t=this._hasReportContent()&&!e.paramDefn.promptNeeded&&!inSchedulerDialog&&(this._isAutoSubmitAllowed(e)||prompt.mode==="MANUAL");return t},_isAutoSubmitAllowed:function(e){if(e.forceAutoSubmit||e.paramDefn.allowAutoSubmit())return!0;var t=document.getElementsByTagName("IFRAME");if(t.length>0){var n=b(t[0]).attr("data-src");return n!=null&&n.indexOf("dashboard-mode")!==-1}return!1},_hasReportContent:function(){var e=b("#reportContent").attr("data-src");return e!==undefined&&e!=="about:blank"},_isReportContentVisible:function(){return!b("body").hasClass("contentHidden")},initPrompt:function(e,t,n){t.paramDefn.showParameterUI()||this._hideToolbarPromptControls(),this._calcReportContentVisibility(t)||this._showReportContent(!1),this._layoutInited=!1,e.call(t,n),this._initLayout(t),b.widget("ui.autocomplete",b.ui.autocomplete,{_renderItem:function(e,t){return b("<li></li>").data("item.autocomplete",t).append(b("<a></a>").html(t.label)).appendTo(e)}})},_hideToolbarPromptControls:function(){inMobile||c.add("toolbar-parameter-separator","hidden");var e="toolbar-parameterToggle",t=s.byId(e);while(t){if(t.getAttribute("widgetid")===e){c.add(t,"hidden");break}t=t.parentNode}},showGlassPane:function(e){b("#glasspane").css("background",n.reportContentUpdating()?"":"transparent"),e()},hideGlassPane:function(e){n.reportContentUpdating()||e(),b("#glasspane").css("background","")},promptReady:function(e,t){e(t);if(inSchedulerDialog){this.showPromptPanel(!0),a.byId("glassPane").hide(),c.add("reportContent","hidden");var n=d(".submit-panel");typeof n!="undefined"&&n.length>0&&c.add(n[0],"hidden"),c.add("toolbarlinner2","hidden"),c.remove("promptPanel","pentaho-rounded-panel-bottom-lr"),c.remove("reportControlPanel","pentaho-shadow"),c.remove("reportControlPanel","pentaho-rounded-panel-bottom-lr");if(typeof window.parameterValidityCallback!="undefined"){var r=!t.paramDefn.promptNeeded;window.parameterValidityCallback(r)}}},_initLayout:function(e){if(this._layoutInited)return;var t=!!this._initedOnce;this._initedOnce=!0;var n=e.paramDefn.showParameterUI();this.updatePageControl(e);var r=!e.paramDefn.paginate&&!n;c[r?"add":"remove"]("toppanel","hidden");var i;n?t||(i=!inMobile&&_isTopReportViewer||e.paramDefn.promptNeeded||!e.paramDefn.allowAutoSubmit()):i=!1,i!=null&&this.showPromptPanel(i),this._layoutInited=!0},show:function(){this.resize()},updatePageControl:function(e){var t=a.byId("pageControl");t.registerPageNumberChangeCallback(undefined);if(!e.paramDefn.paginate)e.setParameterValue(e.paramDefn.getParameter("accepted-page"),"-1"),t.setPageCount(1),t.setPageNumber(1);else{var n=e.paramDefn.totalPages,r=e.paramDefn.page;r=Math.max(0,Math.min(r,n-1)),e.setParameterValue(e.paramDefn.getParameter("accepted-page"),""+r),t.setPageCount(n),t.setPageNumber(r+1)}t.registerPageNumberChangeCallback(function(t){this.pageChanged(e,t)}.bind(this))},pageChanged:function(e,t){e.setParameterValue(e.paramDefn.getParameter("accepted-page"),""+(t-1)),e.submit(e,{isPageChange:!0})},togglePromptPanel:function(){this.showPromptPanel(a.byId("toolbar-parameterToggle").checked),this.resize()},showPromptPanel:function(e){a.byId("toolbar-parameterToggle").set("checked",!!e),c[e?"remove":"add"]("reportControlPanel","hidden")},isPageStyled:function(){return b("body").hasClass("styled")},setPageStyled:function(e){e=!!e;if(!this._pageStyledOnce||this.isPageStyled()!==e){this._pageStyledOnce=!0;var t=e?"addClass":"removeClass";b("body")[t]("styled")[e?"removeClass":"addClass"]("nonStyled"),e||(b("#reportArea").css({height:""}),b("#reportContent").css({height:"",width:""})),b("#reportPageOutline")[t]("pentaho-rounded-panel2-shadowed pentaho-padding-lg pentaho-background")}},onViewportResize:function(){this.resizeContentArea()},resizeContentArea:function(e){var t=g.getBox(),n=v.getMarginBox("toppanel"),r={h:t.h-n.h-2};logger&&logger.log("viewport=("+t.w+","+t.h+") "+" toppanel=("+n.w+","+n.h+") "),v.setMarginBox("reportArea",r),inMobile&&this._isHtmlReport&&this._resizeMobileHtmlReportHandlesScrolling(r)},_resizeMobileHtmlReportHandlesScrolling:function(e){var t=b("#reportContent"),n=t.contents(),r=n.find('head>meta[name="generator"]').attr("content")||"",i=r.indexOf("Reporting")>=0;if(i){t.attr("scrolling","no");var s=e.h-15,o=n.find("#reportTableDiv");o.length?o.css({height:s,width:window.innerWidth-10+"px",overflow:"auto"}):(n.find("body").css({margin:"2px"}),n.find("body>table").wrap('<div id="reportTableDiv" style="height:'+s+"px; width:"+(window.innerWidth-10)+'px; overflow:auto;"/>'))}},resize:function(){if(!this._hasReportContent())return;var e=this._isReportContentVisible();e&&this._showReportContent(!1,!0),this.isPageStyled()&&this._pollReportContentSize(),this.resizeContentArea(),e&&this._showReportContent(!0)},_pollReportContentSize:function(){var e=10,t=s.byId("reportContent");v.setContentSize(t,{w:e,h:e});var n=document;y.withDoc(t.contentWindow.document,function(){p.set(y.doc.getElementsByTagName("html")[0],{overflow:"hidden"});var r=v.getMarginBox(y.doc.getElementsByTagName("body")[0]);r.w=b("#reportContent").contents().width(),logger&&logger.log("Styled page - polled dimensions = ("+r.w+", "+r.h+")");if(r.w<=e){var i;y.withDoc(n,function(){i=g.getBox()}),r.w=Math.round(2*i.w/3),logger&&logger.log("Width is too small - assuming a default width of "+r.w)}v.setContentSize(t,{w:r.w,h:r.h})})}}),createRequiredHooks:function(e){var t=null;try{var n=window.top.mantle_initialized;t=!0}catch(r){t=!1}t&&(top.mantle_initialized||(top.mantle_openTab=function(e,t,n){window.open(n,"_blank")}),top.mantle_initialized?top.reportViewer_openUrlInDialog=function(e,t,n,r){top.urlCommand(t,e,!0,n,r)}:top.reportViewer_openUrlInDialog=this.openUrlInDialog.bind(this),window.reportViewer_openUrlInDialog=top.reportViewer_openUrlInDialog),window.reportViewer_hide=this.hide.bind(this);var i=this;t&&typeof window.top.addGlassPaneListener!="undefined"&&window.top.addGlassPaneListener({glassPaneHidden:function(){i.view.show()}})},openUrlInDialog:function(e,t,n,r){this.dialog===undefined&&(this.dialog=new pentaho.reportviewer.ReportDialog,this.dialog.setLocalizationLookupFunction(i.getString)),this.dialog.open(e,t,n,r)},hide:function(){b("#toppanel").empty(),this.view.resize()},submitReportStart:function(){this.prompt.clicking=!0},submitReport:function(e,t){var n=t&&t.isInit;if(!n){if(this.prompt.ignoreNextClickSubmit){delete this.prompt.ignoreNextClickSubmit,logger&&logger.log("Ignored submit click");return}this.prompt.mode="MANUAL"}try{if(inSchedulerDialog){this._submitReportEnded(e);return}this.view._initLayout(e);var r=!e.paramDefn.promptNeeded;if(!r){logger&&logger.log("Prompt is needed. Will clear htmlObject.data-src"),b("#"+this.htmlObject).attr("data-src","about:blank"),this._submitReportEnded(e);return}this._updateReportContent(e,t)}catch(i){throw this._submitReportEnded(e),i}},_updatedIFrameSrc:!1,_updateReportTimeout:-1,reportContentUpdating:function(){return this._updateReportTimeout>=0},_updateReportContent:function(e,t){var n=this;if(!e.getAutoSubmitSetting()){var r=logged("_updateReportContent_fetchParameterCallback",function(r){delete e.forceAutoSubmit,e.refresh(r,!0),n._updateReportContentCore(e,t)});n.prompt.fetchParameterDefinition(e,r,"MANUAL")}else n._updateReportContentCore(e,t)},_updateReportContentCore:function(e,t){var n=this;n._updateReportTimeout=setTimeout(logged("updateReportTimeout",function(){n._submitReportEnded(e,!0)}),5e3),n.prompt.showGlassPane();var r=n._buildReportContentOptions(e),i=n._buildReportContentUrl(r),s=r["output-target"],o=s.indexOf("html")!=-1,u=o&&r["htmlProportionalWidth"]=="true",a=c.contains("toppanel","hidden"),f=_isTopReportViewer&&!a&&o&&!u&&!inMobile;n.view.isPageStyled()!==f&&(logger&&logger.log("Page style will change to "+(f?"":"non-")+"styled. Will hide report before iframe update."),n.view._showReportContent(!1,!0)),logger&&logger.log("Will set iframe url to "+i.substr(0,50)+"... "),b("#hiddenReportContentForm").attr("action",i),b("#hiddenReportContentForm").submit(),b("#reportContent").attr("data-src",i),this._updatedIFrameSrc=!0,n._submitLoadCallback=logged("_submitLoadCallback",function(){n._isHtmlReport=n.view._isHtmlReport=o,n._outputFormat=s;var t=n.view._calcReportContentVisibility(e);t&&(n.view.setPageStyled(f&&!this._isParentViewer),n.view.resize()),n.view._showReportContent(t),n._submitReportEnded(e)})},_submitReportEnded:function(e,t){delete this.prompt.clicking,e&&delete e.forceAutoSubmit,delete this.prompt.ignoreNextClickSubmit,this._updateReportTimeout>=0&&(clearTimeout(this._updateReportTimeout),this._updateReportTimeout=-1,t&&this.view._showReportContent(!1,!0)),this.prompt.hideGlassPane()},_onReportContentLoaded:function(){var e=this._isParentViewer;this._detectLoadedContent();var t=this.view;if(!this._updatedIFrameSrc)t._hasReportContent()?this._isParentViewer&&!e?(t.setPageStyled(!1),t.resize()):logger&&logger.log("Unrequested IFrame load."):logger&&logger.log("Empty IFrame loaded.");else{this._updatedIFrameSrc=!1;var n=this._submitLoadCallback;n&&t._hasReportContent()?(delete this._submitLoadCallback,n.call(this)):t.resize()}},_detectLoadedContent:function(){var e=!1;try{var t=s.byId("reportContent").contentWindow;t&&(t._isReportViewer?e=!0:b(t.document).find("body area").each(function(){this.href=this.href.replace("http://localhost:8080","")}))}catch(n){logger&&logger.log("ERROR"+String(n))}this._isParentViewer=e,b("body")[e?"addClass":"removeClass"]("parentViewer")[e?"removeClass":"addClass"]("leafViewer")},_buildReportContentOptions:function(t){var n=e.getUrlParameters();return b.extend(n,t.getParameterValues()),n.renderMode="REPORT",n.name===undefined&&(n.name=n.action),delete n["::session"],n},_buildReportContentUrl:function(e){var t=window.location.href.split("?")[0];t=t.substring(0,t.lastIndexOf("/"))+"/report?";var n=[],r=function(e,t){typeof t!="undefined"&&n.push(e+"="+encodeURIComponent(t))};return b.each(e,function(e,t){if(t==null)return;var n=encodeURIComponent(e);b.isArray(t)?b.each(t,function(e,t){r(n,t)}):r(n,t)}),t+n.join("&")}});return t.load=n.load.bind(n),n}}),pen.define("reportviewer/reportviewer-logging",[],function(){var e="&nbsp;&nbsp;&nbsp;&nbsp;",t=function(e){return e==null?"":String(e)},n=function(e){return t(e).replace("&","&amp;").replace("<","&lt;")},r=function(e,t,r){if(t.__logwrapper__)return t;var i=function(){r.group(e);var i=r.count(),s,o;try{return s=t.apply(this,arguments)}catch(u){throw o=u,r.raw("$*? "+n(u),null,i),console.log(u),u}finally{!o&&s!==undefined&&r.raw("&rarr; "+n(s),null,i),r.groupEnd(e)}};return i.__logwrapper__=!0,i},i=function(r,i){i||(i={}),r||(r="unnamed");var s=i.parent;if(s)return{id:r,raw:function(e,t,n){s.raw(e,t||r,n)},log:function(e,t,n){s.log(e,t||r,n)},group:function(e,t,n){s.group(e,t||r,n)},groupEnd:function(){s.groupEnd()},count:function(){return s.count()}};var o=!!i.enabled;if(!o)return null;var u=window.open("",i.winname||"report_viewer_log");if(!u)return null;var a=u.document;a.open(),a.write('<h1>LOG</h1><table id="logTable"><tbody /></table>'),a.close();var f=$(a).find("#logTable > tbody"),l=[],c=1,h={},p=["green","blue","red"],d=0,v=function(e){return h[e]||(h[e]=p[d++%p.length])},m=function(e,n,i){n==null&&(n=r);var s=i!=null&&i===c;c++;try{s?$("<span>&nbsp;"+t(e)+"</span>",a).appendTo(f.children().last().children().last()):$('<tr><td style="color:'+v(n)+';">'+n+"</td>"+"<td>"+l.join("")+t(e)+"</td>"+"</tr>",a).appendTo(f)}catch(o){alert("["+n+"] log - "+o)}};return{raw:function(e,t,n){m(e,t,n)},log:function(e,t,r){m("&bull; "+n(e),t,r)},group:function(t,r,i){m("&rsaquo; "+n(t),r,i),l.push(e)},groupEnd:function(){c++,l.pop()},count:function(){return c}}},s=function(e){var t;return e?t=function(t,n){switch(typeof t){case"string":return r(t,n,e);case"function":return r("anonymous",t,e)}for(var i in t){var n=t[i];typeof n=="function"&&(t[i]=r(i,n,e))}return t}:t=function(e,t){return typeof e=="string"?t:e},t.logger=e,t};return{create:function(e,t){var n=i(e,t);return s(n)}}}),pen.define("dojo/text!pentaho/common/MessageBox.html",[],function(){return'<div class="dialog-content pentaho-padding-sm" style="width:100%; overflow: auto">\n	<table width="100%">\n    <tbody>\n      <tr>\n        <td>\n          <div data-dojo-attach-point="typeIcon"></div>\n        </td>\n        <td width="100%" valign="middle">\n          <div data-dojo-attach-point="messagelbl" class="label pentaho-padding-lg"></div>\n        </td>\n      </tr>\n    </tbody>\n	</table>\n</div>'}),pen.define("pentaho/common/MessageBox",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/on","dojo/query","pentaho/common/button","pentaho/common/Dialog","dojo/dom-class","dojo/text!pentaho/common/MessageBox.html"],function(e,t,n,r,i,s,o,u,a){return e("pentaho.common.MessageBox",[o],{buttons:["btn1","btn2","btn3"],messageType:null,setTitle:function(e){this.set("title",e)},postCreate:function(){this.inherited(arguments),this.setMessageType(this.messageType)},setMessageType:function(e){this.messageType=e,e!=null?e=="ERR"||e=="ERROR"?u.replace(this.typeIcon,"error-large-icon","warning-large-icon info-large-icon"):e=="WARN"||e=="WARNING"?u.replace(this.typeIcon,"warning-large-icon","error-large-icon info-large-icon"):u.replace(this.typeIcon,"info-large-icon","error-large-icon warning-large-icon"):u.remove(this.typeIcon,"error-large-icon info-large-icon warning-large-icon")},setMessage:function(e){this.messagelbl.innerHTML=e},setButtons:function(e){this.buttons=e;for(var t=0;t<3;t++){var n=i("button"+t,this.popup.domNode);n&&(t<this.buttons.length?(n.innerHTML=this.buttons[t],u.remove(n,"hidden")):u.add(n,"hidden"))}},templateString:a})}),pen.define("dojo/text!dijit/templates/Menu.html",[],function(){return'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n	   cellspacing="0">\n	<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n'}),pen.define("dijit/_KeyNavMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(e,t,n,r,i,s,o,u){return t("dijit._KeyNavMixin",u,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments),n.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var e=this._keyNavCodes={};e[r.HOME]=i.hitch(this,"focusFirstChild"),e[r.END]=i.hitch(this,"focusLastChild"),e[this.isLeftToRight()?r.LEFT_ARROW:r.RIGHT_ARROW]=i.hitch(this,"_onLeftArrow"),e[this.isLeftToRight()?r.RIGHT_ARROW:r.LEFT_ARROW]=i.hitch(this,"_onRightArrow"),e[r.UP_ARROW]=i.hitch(this,"_onUpArrow"),e[r.DOWN_ARROW]=i.hitch(this,"_onDownArrow")}var t=this,u=typeof this.childSelector=="string"?this.childSelector:i.hitch(this,"childSelector");this.own(s(this.domNode,"keypress",i.hitch(this,"_onContainerKeypress")),s(this.domNode,"keydown",i.hitch(this,"_onContainerKeydown")),s(this.domNode,"focus",i.hitch(this,"_onContainerFocus")),s(this.containerNode,s.selector(u,"focusin"),function(e){t._onChildFocus(o.getEnclosingWidget(this),e)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(e,t){if(!e)return;this.focusedChild&&e!==this.focusedChild&&this._onChildBlur(this.focusedChild),e.set("tabIndex",this.tabIndex),e.focus(t?"end":"start")},_onContainerFocus:function(e){if(e.target!==this.domNode||this.focusedChild)return;this.focus()},_onFocus:function(){n.set(this.domNode,"tabIndex","-1"),this.inherited(arguments)},_onBlur:function(e){n.set(this.domNode,"tabIndex",this.tabIndex),this.focusedChild&&(this.focusedChild.set("tabIndex","-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null)),this.inherited(arguments)},_onChildFocus:function(e){e&&e!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),e.set("tabIndex",this.tabIndex),this.lastFocused=e,this._set("focusedChild",e))},_searchString:"",multiCharSearchDuration:1e3,onKeyboardSearch:function(e,t,n,r){e&&this.focusChild(e)},_keyboardSearchCompare:function(e,t){var n=e.domNode,r=e.label||(n.focusNode?n.focusNode.label:"")||n.innerText||n.textContent||"",i=r.replace(/^\s+/,"").substr(0,t.length).toLowerCase();return!t.length||i!=t?0:-1},_onContainerKeydown:function(e){var t=this._keyNavCodes[e.keyCode];t?(t(e,this.focusedChild),e.stopPropagation(),e.preventDefault(),this._searchString=""):e.keyCode==r.SPACE&&this._searchTimer&&!(e.ctrlKey||e.altKey||e.metaKey)&&(e.stopImmediatePropagation(),e.preventDefault(),this._keyboardSearch(e," "))},_onContainerKeypress:function(e){if(e.charCode<r.SPACE||e.ctrlKey||e.altKey||e.metaKey||e.charCode==r.SPACE&&this._searchTimer)return;e.preventDefault(),e.stopPropagation(),this._keyboardSearch(e,String.fromCharCode(e.charCode).toLowerCase())},_keyboardSearch:function(e,t){var n=null,r,s=0,o=i.hitch(this,function(){this._searchTimer&&this._searchTimer.remove(),this._searchString+=t;var e=/^(.)\1*$/.test(this._searchString),i=e?1:this._searchString.length;r=this._searchString.substr(0,i),this._searchTimer=this.defer(function(){this._searchTimer=null,this._searchString=""},this.multiCharSearchDuration);var o=this.focusedChild||null;if(i==1||!o){o=this._getNextFocusableChild(o,1);if(!o)return}var u=o;do{var a=this._keyboardSearchCompare(o,r);!!a&&s++==0&&(n=o);if(a==-1){s=-1;break}o=this._getNextFocusableChild(o,1)}while(o!=u)});o(),this.onKeyboardSearch(n,e,r,s)},_onChildBlur:function(){},_getNextFocusableChild:function(e,t){var n=e;do{if(!e){e=this[t>0?"_getFirst":"_getLast"]();if(!e)break}else e=this._getNext(e,t);if(e!=null&&e!=n&&e.isFocusable())return e}while(e!=n);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(e,t){if(e){e=e.domNode;while(e){e=e[t<0?"previousSibling":"nextSibling"];if(e&&"getAttribute"in e){var n=o.byNode(e);if(n)return n}}}return null}})}),pen.define("dijit/_KeyNavContainer",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(e,t,n,r,i,s,o,u,a,f){return t("dijit._KeyNavContainer",[a,f,u],{connectKeyNavHandlers:function(t,n){var r=this._keyNavCodes={},o=s.hitch(this,"focusPrev"),u=s.hitch(this,"focusNext");e.forEach(t,function(e){r[e]=o}),e.forEach(n,function(e){r[e]=u}),r[i.HOME]=s.hitch(this,"focusFirstChild"),r[i.END]=s.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){r.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments),e.forEach(this.getChildren(),s.hitch(this,"_startupChild"))},addChild:function(e,t){this.inherited(arguments),this._startupChild(e)},_startupChild:function(e){e.set("tabIndex","-1")},_getFirst:function(){var e=this.getChildren();return e.length?e[0]:null},_getLast:function(){var e=this.getChildren();return e.length?e[e.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(e){var e=o.byNode(e);return e&&e.getParent()==this}})}),pen.define("dijit/_MenuBase",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){return t("dijit._MenuBase",[c,d,p,h],{selected:null,_setSelectedAttr:function(e){this.selected!=e&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),e&&e._setSelected(!0),this._set("selected",e))},activated:!1,_setActivatedAttr:function(e){i.toggle(this.domNode,"dijitMenuActive",e),i.toggle(this.domNode,"dijitMenuPassive",!e),this._set("activated",e)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(e){var t=l.byNode(e);return e.parentNode==this.containerNode&&t&&t.focus},postCreate:function(){var e=this,t=typeof this.childSelector=="string"?this.childSelector:s.hitch(this,"childSelector");this.own(u(this.containerNode,u.selector(t,o.enter),function(){e.onItemHover(l.byNode(this))}),u(this.containerNode,u.selector(t,o.leave),function(){e.onItemUnhover(l.byNode(this))}),u(this.containerNode,u.selector(t,f),function(t){e.onItemClick(l.byNode(this),t),t.stopPropagation(),t.preventDefault()})),this.inherited(arguments)},onKeyboardSearch:function(e,t,n,r){this.inherited(arguments),!!e&&(r==-1||!!e.popup&&r==1)&&this.onItemClick(e,t)},_keyboardSearchCompare:function(e,t){return e.shortcutKey?t==e.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(e){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,e);else{var t=this._getTopMenu();t&&t._isMenuBar&&t.focusNext()}},_onPopupHover:function(){this.set("selected",this.currentPopupItem),this._stopPendingCloseTimer()},onItemHover:function(e){this.activated?(this.set("selected",e),e.popup&&!e.disabled&&!this.hover_timer&&(this.hover_timer=this.defer(function(){this._openItemPopup(e)},this.popupDelay))):this.passivePopupDelay<Infinity&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(e,{type:"click"})},this.passivePopupDelay)),this._hoveredChild=e,e._set("hovering",!0)},_onChildDeselect:function(e){this._stopPopupTimer(),this.currentPopupItem==e&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null,this.currentPopupItem=null,e._closePopup()},this.popupDelay))},onItemUnhover:function(e){this._hoveredChild==e&&(this._hoveredChild=null),this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null),e._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var e=this;e.parentMenu;e=e.parentMenu);return e},onItemClick:function(e,t){this.passive_hover_timer&&this.passive_hover_timer.remove(),this.focusChild(e);if(e.disabled)return!1;if(e.popup){this.set("selected",e),this.set("activated",!0);var n=/^key/.test(t._origType||t.type)||t.clientX==0&&t.clientY==0;this._openItemPopup(e,n)}else this.onExecute(),e._onClick?e._onClick(t):e.onClick(t)},_openItemPopup:function(e,t){if(e==this.currentPopupItem)return;this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup()),this._stopPopupTimer();var n=e.popup;n.parentMenu=this,this.own(this._mouseoverHandle=u.once(n.domNode,"mouseover",s.hitch(this,"_onPopupHover")));var r=this;e._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){t&&r.focusChild(e),r._cleanUp()},onExecute:s.hitch(this,"_cleanUp",!0),onClose:function(){r._mouseoverHandle&&(r._mouseoverHandle.remove(),delete r._mouseoverHandle)}},t),this.currentPopupItem=e},onOpen:function(){this.isShowingNow=!0,this.set("activated",!0)},onClose:function(){this.set("activated",!1),this.set("selected",null),this.isShowingNow=!1,this.parentMenu=null},_closeChild:function(){this._stopPopupTimer(),this.currentPopupItem&&(this.focused&&(r.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(e){this._hoveredChild&&this._hoveredChild!=e&&this.onItemUnhover(this._hoveredChild),this.set("selected",e)},_onBlur:function(){this._cleanUp(!0),this.inherited(arguments)},_cleanUp:function(e){this._closeChild(),typeof this.isShowingNow=="undefined"&&this.set("activated",!1),e&&this.set("selected",null)}})}),pen.define("dijit/DropDownMenu",["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(e,t,n,r,i){return e("dijit.DropDownMenu",[i,r],{templateString:n,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(e){this._moveToPopup(e),e.stopPropagation(),e.preventDefault()},_onLeftArrow:function(e){this.parentMenu?this.parentMenu._isMenuBar?this.parentMenu.focusPrev():this.onCancel(!1):(e.stopPropagation(),e.preventDefault())}})}),pen.define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){return l("dijit-legacy-requires")&&v(0,function(){var t=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];e(t)}),n("dijit.Menu",d,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):t.forEach(this.targetNodeIds,this.bindDomNode,this),this.inherited(arguments)},_iframeContentWindow:function(e){return h.get(this._iframeContentDocument(e))||this._iframeContentDocument(e).__parent__||e.name&&document.frames[e.name]||null},_iframeContentDocument:function(e){return e.contentDocument||e.contentWindow&&e.contentWindow.document||e.name&&document.frames[e.name]&&document.frames[e.name].document||null},bindDomNode:function(e){e=r.byId(e,this.ownerDocument);var t;if(e.tagName.toLowerCase()=="iframe"){var n=e,s=this._iframeContentWindow(n);t=c.body(s.document)}else t=e==c.body(this.ownerDocument)?this.ownerDocument.documentElement:e;var o={node:e,iframe:n};i.set(e,"_dijitMenu"+this.id,this._bindings.push(o));var l=a.hitch(this,function(e){var t=this.selector,r=t?function(e){return f.selector(t,e)}:function(e){return e},i=this;return[f(e,r(this.leftClickToOpen?"click":"contextmenu"),function(e){e.stopPropagation(),e.preventDefault(),i._scheduleOpen(this,n,{x:e.pageX,y:e.pageY})}),f(e,r("keydown"),function(e){e.shiftKey&&e.keyCode==u.F10&&(e.stopPropagation(),e.preventDefault(),i._scheduleOpen(this,n))})]});o.connects=t?l(t):[],n&&(o.onloadHandler=a.hitch(this,function(){var e=this._iframeContentWindow(n),t=c.body(e.document);o.connects=l(t)}),n.addEventListener?n.addEventListener("load",o.onloadHandler,!1):n.attachEvent("onload",o.onloadHandler))},unBindDomNode:function(e){var t;try{t=r.byId(e,this.ownerDocument)}catch(n){return}var s="_dijitMenu"+this.id;if(t&&i.has(t,s)){var o=i.get(t,s)-1,u=this._bindings[o],a;while(a=u.connects.pop())a.remove();var f=u.iframe;f&&(f.removeEventListener?f.removeEventListener("load",u.onloadHandler,!1):f.detachEvent("onload",u.onloadHandler)),i.remove(t,s),delete this._bindings[o]}},_scheduleOpen:function(e,t,n){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer,this._openMyself({target:e,iframe:t,coords:n})},1))},_openMyself:function(e){function E(){g.refocus&&w&&w.focus(),p.close(g)}var t=e.target,n=e.iframe,i=e.coords,u=!i;this.currentTarget=t;if(i){if(n){var a=s.position(n,!0),f=this._iframeContentWindow(n),c=s.docScroll(f.document),h=o.getComputedStyle(n),d=o.toPixelValue,v=(l("ie")&&l("quirks")?0:d(n,h.paddingLeft))+(l("ie")&&l("quirks")?d(n,h.borderLeftWidth):0),m=(l("ie")&&l("quirks")?0:d(n,h.paddingTop))+(l("ie")&&l("quirks")?d(n,h.borderTopWidth):0);i.x+=a.x+v-c.x,i.y+=a.y+m-c.y}}else i=s.position(t,!0),i.x+=10,i.y+=10;var g=this,y=this._focusManager.get("prevNode"),b=this._focusManager.get("curNode"),w=!b||r.isDescendant(b,this.domNode)?y:b;p.open({popup:this,x:i.x,y:i.y,onExecute:E,onCancel:E,orient:this.isLeftToRight()?"L":"R"}),this.focus(),u||this.defer(function(){this._cleanUp(!0)}),this._onBlur=function(){this.inherited("_onBlur",arguments),p.close(this)}},destroy:function(){t.forEach(this._bindings,function(e){e&&this.unBindDomNode(e.node)},this),this.inherited(arguments)}})}),pen.define("dojo/text!pentaho/common/Menu.html",[],function(){return'<table class="pentaho-menu-outer" role="menu" tabIndex="${tabIndex}" dojoAttachEvent="onkeypress:_onContainerKeypress" cellspacing="0">\n	<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n'}),pen.define("pentaho/common/Menu",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/on","dojo/query","dijit/Menu","dojo/text!pentaho/common/Menu.html"],function(e,t,n,r,i,s,o){return e("pentaho.common.Menu",[s],{baseClass:"pentaho-menu",templateString:o})}),pen.define("dijit/_Contained",["dojo/_base/declare","./registry"],function(e,t){return e("dijit._Contained",null,{_getSibling:function(e){var n=this.domNode;do n=n[e+"Sibling"];while(n&&n.nodeType!=1);return n&&t.byNode(n)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var e=this.getParent();return!e||!e.getIndexOfChild?-1:e.getIndexOfChild(this)}})}),pen.define("dojo/text!dijit/templates/MenuItem.html",[],function(){return'<tr class="dijitReset dijitMenuItem pentaho-menuitem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n	<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n		<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>\n	</td>\n	<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"></td>\n	<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n	<td class="dijitReset dijitMenuArrowCell" role="presentation">\n		<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n			<span class="dijitInline dijitIcon dijitMenuExpand"></span>\n			<span class="dijitMenuExpandA11y">+</span>\n		</span>\n	</td>\n</tr>\n'}),pen.define("dijit/MenuItem",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e("dijit.MenuItem"+(s("dojo-bidi")?"_NoBidi":""),[u,a,f,l],{templateString:c,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(e){this._set("label",e);var t="",n,r=e.search(/{\S}/);if(r>=0){t=e.charAt(r+1);var i=e.substr(0,r),s=e.substr(r+3);n=i+t+s,e=i+'<span class="dijitMenuItemShortcutKey">'+t+"</span>"+s}else n=e;this.domNode.setAttribute("aria-label",n+" "+this.accelKey),this.containerNode.innerHTML=e,this._set("shortcutKey",t)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(e){e&&!("label"in this.params)&&this._set("label",e.innerHTML)},buildRendering:function(){this.inherited(arguments);var e=this.id+"_text";n.set(this.containerNode,"id",e),this.accelKeyNode&&n.set(this.accelKeyNode,"id",this.id+"_accel"),t.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{s("ie")==8&&this.containerNode.focus(),this.focusNode.focus()}catch(e){}},_onFocus:function(){this.getParent()._onItemFocus(this),this.inherited(arguments)},_setSelected:function(e){r.toggle(this.domNode,"dijitMenuItemSelected",e)},setLabel:function(e){i.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",e)},setDisabled:function(e){i.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0"),this.set("disabled",e)},_setDisabledAttr:function(e){this.focusNode.setAttribute("aria-disabled",e?"true":"false"),this._set("disabled",e)},_setAccelKeyAttr:function(e){this.accelKeyNode&&(this.accelKeyNode.style.display=e?"":"none",this.accelKeyNode.innerHTML=e,n.set(this.containerNode,"colSpan",e?"1":"2")),this._set("accelKey",e)}});return s("dojo-bidi")&&(h=e("dijit.MenuItem",h,{_setLabelAttr:function(e){this.inherited(arguments),this.textDir==="auto"&&this.applyTextDir(this.textDirNode)}})),h}),pen.define("dojo/text!pentaho/common/MenuItem.html",[],function(){return'<tr class="dijitReset pentaho-menuitem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1"\n		>\n	<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n		<img src="${_blankGif}" alt="" class="pentaho-checkmenuitem" data-dojo-attach-point="iconNode"/>\n	</td>\n	<td class="dijitReset pentaho-menuitem-label" colspan="2" data-dojo-attach-point="containerNode"></td>\n	<td class="dijitReset dijitMenuArrowCell" role="presentation">\n		<div data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n			<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\n			<span class="dijitMenuExpandA11y">+</span>\n		</div>\n	</td>\n</tr>\n'}),pen.define("pentaho/common/MenuItem",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/on","dojo/query","dijit/MenuItem","dojo/text!pentaho/common/MenuItem.html","dojo/dom-class"],function(e,t,n,r,i,s,o,u){return e("pentaho.common.MenuItem",[s],{baseClass:"pentaho-menuitem",templateString:o,_setSelected:function(e){this.disabled||u.toggle(this.domNode,"pentaho-menuitem-hover",e)},setDisabled:function(e){this.set("disabled",e),u.toggle(this.domNode,"pentaho-menuitem-disabled",e)},_setDisabledAttr:function(e){this.focusNode.setAttribute("aria-disabled",e?"true":"false"),this._set("disabled",e),u.toggle(this.domNode,"pentaho-menuitem-disabled",e)},_onHover:function(){this.getParent().onItemHover(this),this.disabled||u.add(this.domNode,"pentaho-menuitem-hover")},_onUnhover:function(){this.getParent().onItemUnhover(this),this._set("hovering",!1),this.disabled||u.remove(this.domNode,"pentaho-menuitem-hover")}})}),pen.define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(e,t,n,r){var i=e("dijit.form.NumberTextBoxMixin",null,{pattern:function(e){return"("+(this.focused&&this.editOptions?this._regExpGenerator(t.delegate(e,this.editOptions))+"|":"")+this._regExpGenerator(e)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:n.format,_regExpGenerator:n.regexp,postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},_setConstraintsAttr:function(e){var t=typeof e.places=="number"?e.places:0;t&&t++,typeof e.max!="number"&&(e.max=9*Math.pow(10,15-t)),typeof e.min!="number"&&(e.min=-9*Math.pow(10,15-t)),this.inherited(arguments,[e]),this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value)},_onFocus:function(){if(this.disabled||this.readOnly)return;var e=this.get("value");if(typeof e=="number"&&!isNaN(e)){var t=this.format(e,this.constraints);t!==undefined&&(this.textbox.value=t)}this.inherited(arguments)},format:function(e,n){var r=String(e);return typeof e!="number"?r:isNaN(e)?"":!("rangeCheck"in this&&this.rangeCheck(e,n))&&n.exponent!==!1&&/\de[-+]?\d/i.test(r)?r:(this.editOptions&&this.focused&&(n=t.mixin({},n,this.editOptions)),this._formatter(e,n))},_parser:n.parse,parse:function(e,n){var r=this._parser(e,t.mixin({},n,this.editOptions&&this.focused?this.editOptions:{}));return this.editOptions&&this.focused&&isNaN(r)&&(r=this._parser(e,n)),r},_getDisplayedValueAttr:function(){var e=this.inherited(arguments);return isNaN(e)?this.textbox.value:e},filter:function(e){return e==null||e===""?NaN:this.inherited(arguments)},serialize:function(e,t){return typeof e!="number"||isNaN(e)?"":this.inherited(arguments)},_setBlurValue:function(){var e=t.hitch(t.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(e,!0)},_setValueAttr:function(e,t,n){if(e!==undefined&&n===undefined){n=String(e);if(typeof e=="number"){if(isNaN(e))n="";else if("rangeCheck"in this&&this.rangeCheck(e,this.constraints)||this.constraints.exponent===!1||!/\de[-+]?\d/i.test(n))n=undefined}else e?e=undefined:(n="",e=NaN)}this.inherited(arguments,[e,t,n])},_getValueAttr:function(){var e=this.inherited(arguments);if(isNaN(e)&&this.textbox.value!==""){if(this.constraints.exponent!==!1&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+n._realNumberRegexp(t.delegate(this.constraints))+"$")).test(this.textbox.value)){var r=Number(this.textbox.value);return isNaN(r)?undefined:r}return undefined}return e},isValid:function(e){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var t=this.get("value");return!isNaN(t)&&this.rangeCheck(t,this.constraints)?this.constraints.exponent!==!1&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1}}),s=e("dijit.form.NumberTextBox",[r,i],{baseClass:"dijitTextBox dijitNumberTextBox"});return s.Mixin=i,s}),pen.define("pentaho/common/PageControl",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/NumberTextBox","dojo/dom-class","dojo/keys"],function(e,t,n,r,i,s,o){return e("pentaho.common.PageControl",[t,n,r],{templateString:"<div class='pc_pageControlContainer' data-dojo-attach-point='containerNode'><div class='pc_pagePrev' data-dojo-attach-point='prevPageControl'></div><div class='pc_pageNext' data-dojo-attach-point='nextPageControl'></div><div data-dojo-attach-point='pageNumberInput' data-dojo-type='dijit.form.NumberTextBox' class='pc_pageNumberInput' constraints='{min:1}'></div><div class='pc_pageTotal contrast-color' data-dojo-attach-point='pageTotalSpan'>/ ##</div></div>",getLocaleString:null,changePageNumberCallback:null,pageNumber:1,pageTotal:1,postCreate:function(){this.inherited(arguments),this._resetPageNumber(),this.setPageCount(this.pageTotal),this.connect(this.pageNumberInput,"onChange",this._changePageNumber),this.connect(this.pageNumberInput,"onKeyUp",this._pageNumberKeyUp),this.connect(this.prevPageControl,"onclick",this._prevPage),this.connect(this.nextPageControl,"onclick",this._nextPage)},registerLocalizationLookup:function(e){this.getLocaleString=e,this._localize()},registerPageNumberChangeCallback:function(e){this.changePageNumberCallback=e},setPageNumber:function(e){if(e<1||e>this.pageTotal){this._resetPageNumber();return}if(this.pageNumber===e)return;try{this._updateInternalPageNumber(e)}catch(t){console.error("Unable to update page number: "+t),this._resetPageNumber()}},getPageNumber:function(){return this.pageNumberInput.get("value")},getPageTotal:function(){return this.pageTotal},setPageCount:function(e){typeof e=="number"?this.pageTotal=e:this.pageTotal=1,this.pageTotalSpan.innerHTML="/ "+e,this._updatePageButtonState()},reset:function(){this._updateInternalPageNumber(1)},_localize:function(){this.prevPageControl.setAttribute("title",this.getLocaleString("PageControlPreviousPage_title")),this.nextPageControl.setAttribute("title",this.getLocaleString("PageControlNextPage_title"))},_updatePageButtonState:function(){this.pagePrevDisabled=this.pageNumber==1,this.pageNextDisabled=this.pageTotal==this.pageNumber,this.pagePrevDisabled?s.add(this.prevPageControl,"pc_pagePrevDisabled"):s.remove(this.prevPageControl,"pc_pagePrevDisabled"),this.pageNextDisabled?s.add(this.nextPageControl,"pc_pageNextDisabled"):s.remove(this.nextPageControl,"pc_pageNextDisabled")},_changePageNumber:function(){if(!this.pageNumberInput.isValid()){this._resetPageNumber();return}this.setPageNumber(this.pageNumberInput.get("value"))},_updateInternalPageNumber:function(e){this.changePageNumberCallback&&this.changePageNumberCallback(e),this.pageNumber=e,this.pageNumberInput.set("value",this.pageNumber,!1),this._updatePageButtonState()},_pageNumberKeyUp:function(e){switch(e.keyCode){case o.ENTER:this._changePageNumber();break;case o.ESCAPE:this._resetPageNumber();break;default:}},_resetPageNumber:function(){this.pageNumberInput.set("value",this.pageNumber),this._updatePageButtonState()},_prevPage:function(){if(this.pagePrevDisabled)return;this.setPageNumber(this.pageNumber-1)},_nextPage:function(){if(this.pageNextDisabled)return;this.setPageNumber(this.pageNumber+1)}})}),pen.define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(e,t,n,r,i,s,o,u){return n("dijit-legacy-requires")&&i(0,function(){var t=["dijit/ToolbarSeparator"];e(t)}),t("dijit.Toolbar",[s,u,o],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})}),pen.define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(e,t,n,r){return e("dijit.ToolbarSeparator",[n,r],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments),t.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})}),pen.define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(e,t){return e("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(e){var t=this.checked;this._set("checked",!t);var n=this.inherited(arguments);return this.set("checked",n?this.checked:t),n},_setCheckedAttr:function(e,n){this._set("checked",e);var r=this.focusNode||this.domNode;this._created&&t.get(r,"checked")!=!!e&&t.set(r,"checked",!!e),r.setAttribute(this._aria_attr,String(e)),this._handleOnChange(e,n)},postCreate:function(){this.inherited(arguments);var e=this.focusNode||this.domNode;this.checked&&e.setAttribute("checked","checked")},reset:function(){this._hasBeenBlurred=!1,this.set("checked",this.params.checked||!1)}})}),pen.define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(e,t,n,r){return e("dijit.form.ToggleButton",[n,r],{baseClass:"dijitToggleButton",setChecked:function(e){t.deprecated("setChecked("+e+") is deprecated. Use set('checked',"+e+") instead.","","2.0"),this.set("checked",e)}})}),pen.define("pentaho/common/GlassPane",["dojo/_base/declare","dijit/_WidgetBase","dijit/_Templated","dojo/on","dojo/query","dojo/dom-construct","dojo/dom-style"],function(e,t,n,r,i,s,o){return e("pentaho.common.GlassPane",[t],{_glassPaneDiv:null,create:function(e,t){this.inherited(arguments),this._glassPaneDiv=s.create("div",{id:"glasspane",className:"glasspane"}),document.body.appendChild(this._glassPaneDiv)},show:function(){o.set(this._glassPaneDiv,"display","block")},hide:function(){o.set(this._glassPaneDiv,"display","none")}})}),pen.define("reportviewer/reportviewer-main-module",["common-repo/pentaho-ajax","reportviewer/reportviewer","reportviewer/reportviewer-prompt","reportviewer/reportviewer-logging","reportviewer/formatter","dojo/parser","pentaho/common/Messages","pentaho/common/MessageBox","pentaho/common/Menu","pentaho/common/MenuItem","pentaho/common/PageControl","dijit/Toolbar","dijit/ToolbarSeparator","dijit/form/ToggleButton","pentaho/common/GlassPane"],function(e,t,n,r,i,s,o,u,a,f,l){}),function(e){var t=document,n="appendChild",r="styleSheet",i=t.createElement("style");i.type="text/css",t.getElementsByTagName("head")[0][n](i),i[r]?i[r].cssText=e:i[n](t.createTextNode(e))}("/* @group Base */\n.chzn-container {\n  font-size: 13px;\n  position: relative;\n  display: inline-block;\n  zoom: 1;\n  *display: inline;\n}\n.chzn-container .chzn-drop {\n  background: #fff;\n  border: 1px solid #aaa;\n  border-top: 0;\n  position: absolute;\n  top: 29px;\n  left: 0;\n  -webkit-box-shadow: 0 4px 5px rgba(0,0,0,.15);\n  -moz-box-shadow   : 0 4px 5px rgba(0,0,0,.15);\n  -o-box-shadow     : 0 4px 5px rgba(0,0,0,.15);\n  box-shadow        : 0 4px 5px rgba(0,0,0,.15);\n  z-index: 999;\n}\n/* @end */\n\n/* @group Single Chosen */\n.chzn-container-single .chzn-single {\n  background-color: #fff;\n  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eeeeee), color-stop(0.5, white));\n  background-image: -webkit-linear-gradient(center bottom, #eeeeee 0%, white 50%);\n  background-image: -moz-linear-gradient(center bottom, #eeeeee 0%, white 50%);\n  background-image: -o-linear-gradient(top, #eeeeee 0%,#ffffff 50%);\n  background-image: -ms-linear-gradient(top, #eeeeee 0%,#ffffff 50%);\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#ffffff',GradientType=0 );\n  background-image: linear-gradient(top, #eeeeee 0%,#ffffff 50%);\n  -webkit-border-radius: 4px;\n  -moz-border-radius   : 4px;\n  border-radius        : 4px;\n  -moz-background-clip   : padding;\n  -webkit-background-clip: padding-box;\n  background-clip        : padding-box;\n  border: 1px solid #aaa;\n  display: block;\n  overflow: hidden;\n  white-space: nowrap;\n  position: relative;\n  height: 26px;\n  line-height: 26px;\n  padding: 0 0 0 8px;\n  color: #444;\n  text-decoration: none;\n}\n.chzn-container-single .chzn-single span {\n  margin-right: 26px;\n  display: block;\n  overflow: hidden;\n  white-space: nowrap;\n  -o-text-overflow: ellipsis;\n  -ms-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n}\n.chzn-container-single .chzn-single div {\n  -webkit-border-radius: 0 4px 4px 0;\n  -moz-border-radius   : 0 4px 4px 0;\n  border-radius        : 0 4px 4px 0;\n  -moz-background-clip   : padding;\n  -webkit-background-clip: padding-box;\n  background-clip        : padding-box;\n  background: #ccc;\n  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #ccc), color-stop(0.6, #eee));\n  background-image: -webkit-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n  background-image: -moz-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n  background-image: -o-linear-gradient(bottom, #ccc 0%, #eee 60%);\n  background-image: -ms-linear-gradient(top, #cccccc 0%,#eeeeee 60%);\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cccccc', endColorstr='#eeeeee',GradientType=0 );\n  background-image: linear-gradient(top, #cccccc 0%,#eeeeee 60%);\n  border-left: 1px solid #aaa;\n  position: absolute;\n  right: 0;\n  top: 0;\n  display: block;\n  height: 100%;\n  width: 18px;\n}\n.chzn-container-single .chzn-single div b {\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 0 1px;\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n.chzn-container-single .chzn-search {\n  padding: 3px 4px;\n  margin: 0;\n  white-space: nowrap;\n}\n.chzn-container-single .chzn-search input {\n  background: #fff url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px;\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, white), color-stop(0.99, #eeeeee));\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -webkit-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -moz-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -o-linear-gradient(bottom, white 85%, #eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -ms-linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, -ms-linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat 100% -20px, linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  margin: 1px 0;\n  padding: 4px 20px 4px 5px;\n  outline: 0;\n  border: 1px solid #aaa;\n  font-family: sans-serif;\n  font-size: 1em;\n}\n.chzn-container-single .chzn-drop {\n  -webkit-border-radius: 0 0 4px 4px;\n  -moz-border-radius   : 0 0 4px 4px;\n  border-radius        : 0 0 4px 4px;\n  -moz-background-clip   : padding;\n  -webkit-background-clip: padding-box;\n  background-clip        : padding-box;\n}\n/* @end */\n\n/* @group Multi Chosen */\n.chzn-container-multi .chzn-choices {\n  background-color: #fff;\n  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0.85, white), color-stop(0.99, #eeeeee));\n  background-image: -webkit-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n  background-image: -moz-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n  background-image: -o-linear-gradient(bottom, white 85%, #eeeeee 99%);\n  background-image: -ms-linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eeeeee',GradientType=0 );\n  background-image: linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  border: 1px solid #aaa;\n  margin: 0;\n  padding: 0;\n  cursor: text;\n  overflow: hidden;\n  height: auto !important;\n  height: 1%;\n  position: relative;\n}\n.chzn-container-multi .chzn-choices li {\n  float: left;\n  list-style: none;\n}\n.chzn-container-multi .chzn-choices .search-field {\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n}\n.chzn-container-multi .chzn-choices .search-field input {\n  color: #666;\n  background: transparent !important;\n  border: 0 !important;\n  padding: 5px;\n  margin: 1px 0;\n  outline: 0;\n  -webkit-box-shadow: none;\n  -moz-box-shadow   : none;\n  -o-box-shadow     : none;\n  box-shadow        : none;\n}\n.chzn-container-multi .chzn-choices .search-field .default {\n  color: #999;\n}\n.chzn-container-multi .chzn-choices .search-choice {\n  -webkit-border-radius: 3px;\n  -moz-border-radius   : 3px;\n  border-radius        : 3px;\n  -moz-background-clip   : padding;\n  -webkit-background-clip: padding-box;\n  background-clip        : padding-box;\n  background-color: #e4e4e4;\n  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #e4e4e4), color-stop(0.7, #eeeeee));\n  background-image: -webkit-linear-gradient(center bottom, #e4e4e4 0%, #eeeeee 70%);\n  background-image: -moz-linear-gradient(center bottom, #e4e4e4 0%, #eeeeee 70%);\n  background-image: -o-linear-gradient(bottom, #e4e4e4 0%, #eeeeee 70%);\n  background-image: -ms-linear-gradient(top, #e4e4e4 0%,#eeeeee 70%);\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e4e4e4', endColorstr='#eeeeee',GradientType=0 );\n  background-image: linear-gradient(top, #e4e4e4 0%,#eeeeee 70%);\n  color: #333;\n  border: 1px solid #b4b4b4;\n  line-height: 13px;\n  padding: 3px 19px 3px 6px;\n  margin: 3px 0 3px 5px;\n  position: relative;\n}\n.chzn-container-multi .chzn-choices .search-choice span {\n  cursor: default;\n}\n.chzn-container-multi .chzn-choices .search-choice-focus {\n  background: #d4d4d4;\n}\n.chzn-container-multi .chzn-choices .search-choice .search-choice-close {\n  display: block;\n  position: absolute;\n  right: 5px;\n  top: 6px;\n  width: 8px;\n  height: 9px;\n  font-size: 1px;\n  background: url(cdf/js/lib/chosen/chosen-sprite.png) right top no-repeat;\n}\n.chzn-container-multi .chzn-choices .search-choice .search-choice-close:hover {\n  background-position: right -9px;\n}\n.chzn-container-multi .chzn-choices .search-choice-focus .search-choice-close {\n  background-position: right -9px;\n}\n/* @end */\n\n/* @group Results */\n.chzn-container .chzn-results {\n  margin: 0 4px 4px 0;\n  max-height: 190px;\n  padding: 0 0 0 4px;\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.chzn-container-multi .chzn-results {\n  margin: -1px 0 0;\n  padding: 0;\n}\n.chzn-container .chzn-results li {\n  line-height: 80%;\n  padding: 7px 7px 8px;\n  margin: 0;\n  list-style: none;\n}\n.chzn-container .chzn-results .active-result {\n  cursor: pointer;\n}\n.chzn-container .chzn-results .highlighted {\n  background: #3875d7;\n  color: #fff;\n}\n.chzn-container .chzn-results li em {\n  background: #feffde;\n  font-style: normal;\n}\n.chzn-container .chzn-results .highlighted em {\n  background: transparent;\n}\n.chzn-container .chzn-results .no-results {\n  background: #f4f4f4;\n}\n.chzn-container .chzn-results .group-result {\n  cursor: default;\n  color: #999;\n  font-weight: bold;\n}\n.chzn-container .chzn-results .group-option {\n  padding-left: 20px;\n}\n.chzn-container-multi .chzn-drop .result-selected {\n  display: none;\n}\n/* @end */\n\n/* @group Active  */\n.chzn-container-active .chzn-single {\n  -webkit-box-shadow: 0 0 5px rgba(0,0,0,.3);\n  -moz-box-shadow   : 0 0 5px rgba(0,0,0,.3);\n  -o-box-shadow     : 0 0 5px rgba(0,0,0,.3);\n  box-shadow        : 0 0 5px rgba(0,0,0,.3);\n  border: 1px solid #5897fb;\n}\n.chzn-container-active .chzn-single-with-drop {\n  border: 1px solid #aaa;\n  -webkit-box-shadow: 0 1px 0 #fff inset;\n  -moz-box-shadow   : 0 1px 0 #fff inset;\n  -o-box-shadow     : 0 1px 0 #fff inset;\n  box-shadow        : 0 1px 0 #fff inset;\n  background-color: #eee;\n  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, white), color-stop(0.5, #eeeeee));\n  background-image: -webkit-linear-gradient(center bottom, white 0%, #eeeeee 50%);\n  background-image: -moz-linear-gradient(center bottom, white 0%, #eeeeee 50%);\n  background-image: -o-linear-gradient(bottom, white 0%, #eeeeee 50%);\n  background-image: -ms-linear-gradient(top, #ffffff 0%,#eeeeee 50%);\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eeeeee',GradientType=0 );\n  background-image: linear-gradient(top, #ffffff 0%,#eeeeee 50%);\n  -webkit-border-bottom-left-radius : 0;\n  -webkit-border-bottom-right-radius: 0;\n  -moz-border-radius-bottomleft : 0;\n  -moz-border-radius-bottomright: 0;\n  border-bottom-left-radius : 0;\n  border-bottom-right-radius: 0;\n}\n.chzn-container-active .chzn-single-with-drop div {\n  background: transparent;\n  border-left: none;\n}\n.chzn-container-active .chzn-single-with-drop div b {\n  background-position: -18px 1px;\n}\n.chzn-container-active .chzn-choices {\n  -webkit-box-shadow: 0 0 5px rgba(0,0,0,.3);\n  -moz-box-shadow   : 0 0 5px rgba(0,0,0,.3);\n  -o-box-shadow     : 0 0 5px rgba(0,0,0,.3);\n  box-shadow        : 0 0 5px rgba(0,0,0,.3);\n  border: 1px solid #5897fb;\n}\n.chzn-container-active .chzn-choices .search-field input {\n  color: #111 !important;\n}\n/* @end */\n\n/* @group Right to Left */\n.chzn-rtl { direction:rtl;text-align: right; }\n.chzn-rtl .chzn-single { padding-left: 0; padding-right: 8px; }\n.chzn-rtl .chzn-single span { margin-left: 26px; margin-right: 0; }\n.chzn-rtl .chzn-single div { \n  left: 0; right: auto; \n  border-left: none; border-right: 1px solid #aaaaaa;\n  -webkit-border-radius: 4px 0 0 4px;\n  -moz-border-radius   : 4px 0 0 4px;\n  border-radius        : 4px 0 0 4px; \n}\n.chzn-rtl .chzn-choices li { float: right; }\n.chzn-rtl .chzn-choices .search-choice { padding: 3px 6px 3px 19px; margin: 3px 5px 3px 0; }\n.chzn-rtl .chzn-choices .search-choice .search-choice-close { left: 5px; right: auto; background-position: right top;}\n.chzn-rtl.chzn-container-single .chzn-results { margin-left: 4px; margin-right: 0; padding-left: 0; padding-right: 4px; }\n.chzn-rtl .chzn-results .group-option { padding-left: 0; padding-right: 20px; }\n.chzn-rtl.chzn-container-active .chzn-single-with-drop div { border-right: none; }\n.chzn-rtl .chzn-search input {\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, #ffffff;\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, white), color-stop(0.99, #eeeeee));\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -webkit-linear-gradient(center bottom, white 85%, #eeeeee 99%);  \n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -moz-linear-gradient(center bottom, white 85%, #eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -o-linear-gradient(bottom, white 85%, #eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -ms-linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, -ms-linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  background: url('cdf/js/lib/chosen/chosen-sprite.png') no-repeat -38px -20px, linear-gradient(top, #ffffff 85%,#eeeeee 99%);\n  padding: 4px 5px 4px 20px;\n}\n/* @end *//*! jQuery UI - v1.10.4 - 2014-06-19\n* http://jqueryui.com\n* Includes: jquery.ui.core.css, jquery.ui.resizable.css, jquery.ui.selectable.css, jquery.ui.accordion.css, jquery.ui.autocomplete.css, jquery.ui.button.css, jquery.ui.datepicker.css, jquery.ui.dialog.css, jquery.ui.menu.css, jquery.ui.progressbar.css, jquery.ui.slider.css, jquery.ui.spinner.css, jquery.ui.tabs.css, jquery.ui.tooltip.css, jquery.ui.theme.css\n* To view and modify this theme, visit http://jqueryui.com/themeroller/?ffDefault=Lucida%20Grande%2CLucida%20Sans%2CArial%2Csans-serif&fwDefault=bold&fsDefault=1.1em&cornerRadius=6px&bgColorHeader=deedf7&bgTextureHeader=highlight_soft&bgImgOpacityHeader=100&borderColorHeader=aed0ea&fcHeader=222222&iconColorHeader=72a7cf&bgColorContent=f2f5f7&bgTextureContent=highlight_hard&bgImgOpacityContent=100&borderColorContent=dddddd&fcContent=362b36&iconColorContent=72a7cf&bgColorDefault=d7ebf9&bgTextureDefault=glass&bgImgOpacityDefault=80&borderColorDefault=aed0ea&fcDefault=2779aa&iconColorDefault=3d80b3&bgColorHover=e4f1fb&bgTextureHover=glass&bgImgOpacityHover=100&borderColorHover=74b2e2&fcHover=0070a3&iconColorHover=2694e8&bgColorActive=3baae3&bgTextureActive=glass&bgImgOpacityActive=50&borderColorActive=2694e8&fcActive=ffffff&iconColorActive=ffffff&bgColorHighlight=ffef8f&bgTextureHighlight=highlight_soft&bgImgOpacityHighlight=25&borderColorHighlight=f9dd34&fcHighlight=363636&iconColorHighlight=2e83ff&bgColorError=cd0a0a&bgTextureError=flat&bgImgOpacityError=15&borderColorError=cd0a0a&fcError=ffffff&iconColorError=ffffff&bgColorOverlay=eeeeee&bgTextureOverlay=diagonals_thick&bgImgOpacityOverlay=90&opacityOverlay=80&bgColorShadow=000000&bgTextureShadow=highlight_hard&bgImgOpacityShadow=70&opacityShadow=30&thicknessShadow=7px&offsetTopShadow=-7px&offsetLeftShadow=-7px&cornerRadiusShadow=8px\n* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */\n\n/* Layout helpers\n----------------------------------*/\n.ui-helper-hidden {\n	display: none;\n}\n.ui-helper-hidden-accessible {\n	border: 0;\n	clip: rect(0 0 0 0);\n	height: 1px;\n	margin: -1px;\n	overflow: hidden;\n	padding: 0;\n	position: absolute;\n	width: 1px;\n}\n.ui-helper-reset {\n	margin: 0;\n	padding: 0;\n	border: 0;\n	outline: 0;\n	line-height: 1.3;\n	text-decoration: none;\n	font-size: 100%;\n	list-style: none;\n}\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n	content: \"\";\n	display: table;\n	border-collapse: collapse;\n}\n.ui-helper-clearfix:after {\n	clear: both;\n}\n.ui-helper-clearfix {\n	min-height: 0; /* support: IE7 */\n}\n.ui-helper-zfix {\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	position: absolute;\n	opacity: 0;\n	filter:Alpha(Opacity=0);\n}\n\n.ui-front {\n	z-index: 100;\n}\n\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-disabled {\n	cursor: default !important;\n}\n\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n.ui-icon {\n	display: block;\n	text-indent: -99999px;\n	overflow: hidden;\n	background-repeat: no-repeat;\n}\n\n\n/* Misc visuals\n----------------------------------*/\n\n/* Overlays */\n.ui-widget-overlay {\n	position: fixed;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n}\n.ui-resizable {\n	position: relative;\n}\n.ui-resizable-handle {\n	position: absolute;\n	font-size: 0.1px;\n	display: block;\n}\n.ui-resizable-disabled .ui-resizable-handle,\n.ui-resizable-autohide .ui-resizable-handle {\n	display: none;\n}\n.ui-resizable-n {\n	cursor: n-resize;\n	height: 7px;\n	width: 100%;\n	top: -5px;\n	left: 0;\n}\n.ui-resizable-s {\n	cursor: s-resize;\n	height: 7px;\n	width: 100%;\n	bottom: -5px;\n	left: 0;\n}\n.ui-resizable-e {\n	cursor: e-resize;\n	width: 7px;\n	right: -5px;\n	top: 0;\n	height: 100%;\n}\n.ui-resizable-w {\n	cursor: w-resize;\n	width: 7px;\n	left: -5px;\n	top: 0;\n	height: 100%;\n}\n.ui-resizable-se {\n	cursor: se-resize;\n	width: 12px;\n	height: 12px;\n	right: 1px;\n	bottom: 1px;\n}\n.ui-resizable-sw {\n	cursor: sw-resize;\n	width: 9px;\n	height: 9px;\n	left: -5px;\n	bottom: -5px;\n}\n.ui-resizable-nw {\n	cursor: nw-resize;\n	width: 9px;\n	height: 9px;\n	left: -5px;\n	top: -5px;\n}\n.ui-resizable-ne {\n	cursor: ne-resize;\n	width: 9px;\n	height: 9px;\n	right: -5px;\n	top: -5px;\n}\n.ui-selectable-helper {\n	position: absolute;\n	z-index: 100;\n	border: 1px dotted black;\n}\n.ui-accordion .ui-accordion-header {\n	display: block;\n	cursor: pointer;\n	position: relative;\n	margin-top: 2px;\n	padding: .5em .5em .5em .7em;\n	min-height: 0; /* support: IE7 */\n}\n.ui-accordion .ui-accordion-icons {\n	padding-left: 2.2em;\n}\n.ui-accordion .ui-accordion-noicons {\n	padding-left: .7em;\n}\n.ui-accordion .ui-accordion-icons .ui-accordion-icons {\n	padding-left: 2.2em;\n}\n.ui-accordion .ui-accordion-header .ui-accordion-header-icon {\n	position: absolute;\n	left: .5em;\n	top: 50%;\n	margin-top: -8px;\n}\n.ui-accordion .ui-accordion-content {\n	padding: 1em 2.2em;\n	border-top: 0;\n	overflow: auto;\n}\n.ui-autocomplete {\n	position: absolute;\n	top: 0;\n	left: 0;\n	cursor: default;\n}\n.ui-button {\n	display: inline-block;\n	position: relative;\n	padding: 0;\n	line-height: normal;\n	margin-right: .1em;\n	cursor: pointer;\n	vertical-align: middle;\n	text-align: center;\n	overflow: visible; /* removes extra width in IE */\n}\n.ui-button,\n.ui-button:link,\n.ui-button:visited,\n.ui-button:hover,\n.ui-button:active {\n	text-decoration: none;\n}\n/* to make room for the icon, a width needs to be set here */\n.ui-button-icon-only {\n	width: 2.2em;\n}\n/* button elements seem to need a little more width */\nbutton.ui-button-icon-only {\n	width: 2.4em;\n}\n.ui-button-icons-only {\n	width: 3.4em;\n}\nbutton.ui-button-icons-only {\n	width: 3.7em;\n}\n\n/* button text element */\n.ui-button .ui-button-text {\n	display: block;\n	line-height: normal;\n}\n.ui-button-text-only .ui-button-text {\n	padding: .4em 1em;\n}\n.ui-button-icon-only .ui-button-text,\n.ui-button-icons-only .ui-button-text {\n	padding: .4em;\n	text-indent: -9999999px;\n}\n.ui-button-text-icon-primary .ui-button-text,\n.ui-button-text-icons .ui-button-text {\n	padding: .4em 1em .4em 2.1em;\n}\n.ui-button-text-icon-secondary .ui-button-text,\n.ui-button-text-icons .ui-button-text {\n	padding: .4em 2.1em .4em 1em;\n}\n.ui-button-text-icons .ui-button-text {\n	padding-left: 2.1em;\n	padding-right: 2.1em;\n}\n/* no icon support for input elements, provide padding by default */\ninput.ui-button {\n	padding: .4em 1em;\n}\n\n/* button icon element(s) */\n.ui-button-icon-only .ui-icon,\n.ui-button-text-icon-primary .ui-icon,\n.ui-button-text-icon-secondary .ui-icon,\n.ui-button-text-icons .ui-icon,\n.ui-button-icons-only .ui-icon {\n	position: absolute;\n	top: 50%;\n	margin-top: -8px;\n}\n.ui-button-icon-only .ui-icon {\n	left: 50%;\n	margin-left: -8px;\n}\n.ui-button-text-icon-primary .ui-button-icon-primary,\n.ui-button-text-icons .ui-button-icon-primary,\n.ui-button-icons-only .ui-button-icon-primary {\n	left: .5em;\n}\n.ui-button-text-icon-secondary .ui-button-icon-secondary,\n.ui-button-text-icons .ui-button-icon-secondary,\n.ui-button-icons-only .ui-button-icon-secondary {\n	right: .5em;\n}\n\n/* button sets */\n.ui-buttonset {\n	margin-right: 7px;\n}\n.ui-buttonset .ui-button {\n	margin-left: 0;\n	margin-right: -.3em;\n}\n\n/* workarounds */\n/* reset extra padding in Firefox, see h5bp.com/l */\ninput.ui-button::-moz-focus-inner,\nbutton.ui-button::-moz-focus-inner {\n	border: 0;\n	padding: 0;\n}\n.ui-datepicker {\n	width: 17em;\n	padding: .2em .2em 0;\n	display: none;\n}\n.ui-datepicker .ui-datepicker-header {\n	position: relative;\n	padding: .2em 0;\n}\n.ui-datepicker .ui-datepicker-prev,\n.ui-datepicker .ui-datepicker-next {\n	position: absolute;\n	top: 2px;\n	width: 1.8em;\n	height: 1.8em;\n}\n.ui-datepicker .ui-datepicker-prev-hover,\n.ui-datepicker .ui-datepicker-next-hover {\n	top: 1px;\n}\n.ui-datepicker .ui-datepicker-prev {\n	left: 2px;\n}\n.ui-datepicker .ui-datepicker-next {\n	right: 2px;\n}\n.ui-datepicker .ui-datepicker-prev-hover {\n	left: 1px;\n}\n.ui-datepicker .ui-datepicker-next-hover {\n	right: 1px;\n}\n.ui-datepicker .ui-datepicker-prev span,\n.ui-datepicker .ui-datepicker-next span {\n	display: block;\n	position: absolute;\n	left: 50%;\n	margin-left: -8px;\n	top: 50%;\n	margin-top: -8px;\n}\n.ui-datepicker .ui-datepicker-title {\n	margin: 0 2.3em;\n	line-height: 1.8em;\n	text-align: center;\n}\n.ui-datepicker .ui-datepicker-title select {\n	font-size: 1em;\n	margin: 1px 0;\n}\n.ui-datepicker select.ui-datepicker-month,\n.ui-datepicker select.ui-datepicker-year {\n	width: 49%;\n}\n.ui-datepicker table {\n	width: 100%;\n	font-size: .9em;\n	border-collapse: collapse;\n	margin: 0 0 .4em;\n}\n.ui-datepicker th {\n	padding: .7em .3em;\n	text-align: center;\n	font-weight: bold;\n	border: 0;\n}\n.ui-datepicker td {\n	border: 0;\n	padding: 1px;\n}\n.ui-datepicker td span,\n.ui-datepicker td a {\n	display: block;\n	padding: .2em;\n	text-align: right;\n	text-decoration: none;\n}\n.ui-datepicker .ui-datepicker-buttonpane {\n	background-image: none;\n	margin: .7em 0 0 0;\n	padding: 0 .2em;\n	border-left: 0;\n	border-right: 0;\n	border-bottom: 0;\n}\n.ui-datepicker .ui-datepicker-buttonpane button {\n	float: right;\n	margin: .5em .2em .4em;\n	cursor: pointer;\n	padding: .2em .6em .3em .6em;\n	width: auto;\n	overflow: visible;\n}\n.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {\n	float: left;\n}\n\n/* with multiple calendars */\n.ui-datepicker.ui-datepicker-multi {\n	width: auto;\n}\n.ui-datepicker-multi .ui-datepicker-group {\n	float: left;\n}\n.ui-datepicker-multi .ui-datepicker-group table {\n	width: 95%;\n	margin: 0 auto .4em;\n}\n.ui-datepicker-multi-2 .ui-datepicker-group {\n	width: 50%;\n}\n.ui-datepicker-multi-3 .ui-datepicker-group {\n	width: 33.3%;\n}\n.ui-datepicker-multi-4 .ui-datepicker-group {\n	width: 25%;\n}\n.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {\n	border-left-width: 0;\n}\n.ui-datepicker-multi .ui-datepicker-buttonpane {\n	clear: left;\n}\n.ui-datepicker-row-break {\n	clear: both;\n	width: 100%;\n	font-size: 0;\n}\n\n/* RTL support */\n.ui-datepicker-rtl {\n	direction: rtl;\n}\n.ui-datepicker-rtl .ui-datepicker-prev {\n	right: 2px;\n	left: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next {\n	left: 2px;\n	right: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-prev:hover {\n	right: 1px;\n	left: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next:hover {\n	left: 1px;\n	right: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane {\n	clear: right;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button {\n	float: left;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,\n.ui-datepicker-rtl .ui-datepicker-group {\n	float: right;\n}\n.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {\n	border-right-width: 0;\n	border-left-width: 1px;\n}\n.ui-dialog {\n	overflow: hidden;\n	position: absolute;\n	top: 0;\n	left: 0;\n	padding: .2em;\n	outline: 0;\n}\n.ui-dialog .ui-dialog-titlebar {\n	padding: .4em 1em;\n	position: relative;\n}\n.ui-dialog .ui-dialog-title {\n	float: left;\n	margin: .1em 0;\n	white-space: nowrap;\n	width: 90%;\n	overflow: hidden;\n	text-overflow: ellipsis;\n}\n.ui-dialog .ui-dialog-titlebar-close {\n	position: absolute;\n	right: .3em;\n	top: 50%;\n	width: 20px;\n	margin: -10px 0 0 0;\n	padding: 1px;\n	height: 20px;\n}\n.ui-dialog .ui-dialog-content {\n	position: relative;\n	border: 0;\n	padding: .5em 1em;\n	background: none;\n	overflow: auto;\n}\n.ui-dialog .ui-dialog-buttonpane {\n	text-align: left;\n	border-width: 1px 0 0 0;\n	background-image: none;\n	margin-top: .5em;\n	padding: .3em 1em .5em .4em;\n}\n.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {\n	float: right;\n}\n.ui-dialog .ui-dialog-buttonpane button {\n	margin: .5em .4em .5em 0;\n	cursor: pointer;\n}\n.ui-dialog .ui-resizable-se {\n	width: 12px;\n	height: 12px;\n	right: -5px;\n	bottom: -5px;\n	background-position: 16px 16px;\n}\n.ui-draggable .ui-dialog-titlebar {\n	cursor: move;\n}\n.ui-menu {\n	list-style: none;\n	padding: 2px;\n	margin: 0;\n	display: block;\n	outline: none;\n}\n.ui-menu .ui-menu {\n	margin-top: -3px;\n	position: absolute;\n}\n.ui-menu .ui-menu-item {\n	margin: 0;\n	padding: 0;\n	width: 100%;\n	/* support: IE10, see #8844 */\n	list-style-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);\n}\n.ui-menu .ui-menu-divider {\n	margin: 5px -2px 5px -2px;\n	height: 0;\n	font-size: 0;\n	line-height: 0;\n	border-width: 1px 0 0 0;\n}\n.ui-menu .ui-menu-item a {\n	text-decoration: none;\n	display: block;\n	padding: 2px .4em;\n	line-height: 1.5;\n	min-height: 0; /* support: IE7 */\n	font-weight: normal;\n}\n.ui-menu .ui-menu-item a.ui-state-focus,\n.ui-menu .ui-menu-item a.ui-state-active {\n	font-weight: normal;\n	margin: -1px;\n}\n\n.ui-menu .ui-state-disabled {\n	font-weight: normal;\n	margin: .4em 0 .2em;\n	line-height: 1.5;\n}\n.ui-menu .ui-state-disabled a {\n	cursor: default;\n}\n\n/* icon support */\n.ui-menu-icons {\n	position: relative;\n}\n.ui-menu-icons .ui-menu-item a {\n	position: relative;\n	padding-left: 2em;\n}\n\n/* left-aligned */\n.ui-menu .ui-icon {\n	position: absolute;\n	top: .2em;\n	left: .2em;\n}\n\n/* right-aligned */\n.ui-menu .ui-menu-icon {\n	position: static;\n	float: right;\n}\n.ui-progressbar {\n	height: 2em;\n	text-align: left;\n	overflow: hidden;\n}\n.ui-progressbar .ui-progressbar-value {\n	margin: -1px;\n	height: 100%;\n}\n.ui-progressbar .ui-progressbar-overlay {\n	background: url(\"cdf/js/lib/theme/cupertino/images/animated-overlay.gif\");\n	height: 100%;\n	filter: alpha(opacity=25);\n	opacity: 0.25;\n}\n.ui-progressbar-indeterminate .ui-progressbar-value {\n	background-image: none;\n}\n.ui-slider {\n	position: relative;\n	text-align: left;\n}\n.ui-slider .ui-slider-handle {\n	position: absolute;\n	z-index: 2;\n	width: 1.2em;\n	height: 1.2em;\n	cursor: default;\n}\n.ui-slider .ui-slider-range {\n	position: absolute;\n	z-index: 1;\n	font-size: .7em;\n	display: block;\n	border: 0;\n	background-position: 0 0;\n}\n\n/* For IE8 - See #6727 */\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n	filter: inherit;\n}\n\n.ui-slider-horizontal {\n	height: .8em;\n}\n.ui-slider-horizontal .ui-slider-handle {\n	top: -.3em;\n	margin-left: -.6em;\n}\n.ui-slider-horizontal .ui-slider-range {\n	top: 0;\n	height: 100%;\n}\n.ui-slider-horizontal .ui-slider-range-min {\n	left: 0;\n}\n.ui-slider-horizontal .ui-slider-range-max {\n	right: 0;\n}\n\n.ui-slider-vertical {\n	width: .8em;\n	height: 100px;\n}\n.ui-slider-vertical .ui-slider-handle {\n	left: -.3em;\n	margin-left: 0;\n	margin-bottom: -.6em;\n}\n.ui-slider-vertical .ui-slider-range {\n	left: 0;\n	width: 100%;\n}\n.ui-slider-vertical .ui-slider-range-min {\n	bottom: 0;\n}\n.ui-slider-vertical .ui-slider-range-max {\n	top: 0;\n}\n.ui-spinner {\n	position: relative;\n	display: inline-block;\n	overflow: hidden;\n	padding: 0;\n	vertical-align: middle;\n}\n.ui-spinner-input {\n	border: none;\n	background: none;\n	color: inherit;\n	padding: 0;\n	margin: .2em 0;\n	vertical-align: middle;\n	margin-left: .4em;\n	margin-right: 22px;\n}\n.ui-spinner-button {\n	width: 16px;\n	height: 50%;\n	font-size: .5em;\n	padding: 0;\n	margin: 0;\n	text-align: center;\n	position: absolute;\n	cursor: default;\n	display: block;\n	overflow: hidden;\n	right: 0;\n}\n/* more specificity required here to override default borders */\n.ui-spinner a.ui-spinner-button {\n	border-top: none;\n	border-bottom: none;\n	border-right: none;\n}\n/* vertically center icon */\n.ui-spinner .ui-icon {\n	position: absolute;\n	margin-top: -8px;\n	top: 50%;\n	left: 0;\n}\n.ui-spinner-up {\n	top: 0;\n}\n.ui-spinner-down {\n	bottom: 0;\n}\n\n/* TR overrides */\n.ui-spinner .ui-icon-triangle-1-s {\n	/* need to fix icons sprite */\n	background-position: -65px -16px;\n}\n.ui-tabs {\n	position: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as \"fixed\") */\n	padding: .2em;\n}\n.ui-tabs .ui-tabs-nav {\n	margin: 0;\n	padding: .2em .2em 0;\n}\n.ui-tabs .ui-tabs-nav li {\n	list-style: none;\n	float: left;\n	position: relative;\n	top: 0;\n	margin: 1px .2em 0 0;\n	border-bottom-width: 0;\n	padding: 0;\n	white-space: nowrap;\n}\n.ui-tabs .ui-tabs-nav .ui-tabs-anchor {\n	float: left;\n	padding: .5em 1em;\n	text-decoration: none;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active {\n	margin-bottom: -1px;\n	padding-bottom: 1px;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor {\n	cursor: text;\n}\n.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor {\n	cursor: pointer;\n}\n.ui-tabs .ui-tabs-panel {\n	display: block;\n	border-width: 0;\n	padding: 1em 1.4em;\n	background: none;\n}\n.ui-tooltip {\n	padding: 8px;\n	position: absolute;\n	z-index: 9999;\n	max-width: 300px;\n	-webkit-box-shadow: 0 0 5px #aaa;\n	box-shadow: 0 0 5px #aaa;\n}\nbody .ui-tooltip {\n	border-width: 2px;\n}\n\n/* Component containers\n----------------------------------*/\n.ui-widget {\n	font-family: Lucida Grande,Lucida Sans,Arial,sans-serif;\n	font-size: 1.1em;\n}\n.ui-widget .ui-widget {\n	font-size: 1em;\n}\n.ui-widget input,\n.ui-widget select,\n.ui-widget textarea,\n.ui-widget button {\n	font-family: Lucida Grande,Lucida Sans,Arial,sans-serif;\n	font-size: 1em;\n}\n.ui-widget-content {\n	border: 1px solid #dddddd;\n	background: #f2f5f7 url(\"cdf/js/lib/theme/cupertino/images/ui-bg_highlight-hard_100_f2f5f7_1x100.png\") 50% top repeat-x;\n	color: #362b36;\n}\n.ui-widget-content a {\n	color: #362b36;\n}\n.ui-widget-header {\n	border: 1px solid #aed0ea;\n	background: #deedf7 url(\"cdf/js/lib/theme/cupertino/images/ui-bg_highlight-soft_100_deedf7_1x100.png\") 50% 50% repeat-x;\n	color: #222222;\n	font-weight: bold;\n}\n.ui-widget-header a {\n	color: #222222;\n}\n\n/* Interaction states\n----------------------------------*/\n.ui-state-default,\n.ui-widget-content .ui-state-default,\n.ui-widget-header .ui-state-default {\n	border: 1px solid #aed0ea;\n	background: #d7ebf9 url(\"cdf/js/lib/theme/cupertino/images/ui-bg_glass_80_d7ebf9_1x400.png\") 50% 50% repeat-x;\n	font-weight: bold;\n	color: #2779aa;\n}\n.ui-state-default a,\n.ui-state-default a:link,\n.ui-state-default a:visited {\n	color: #2779aa;\n	text-decoration: none;\n}\n.ui-state-hover,\n.ui-widget-content .ui-state-hover,\n.ui-widget-header .ui-state-hover,\n.ui-state-focus,\n.ui-widget-content .ui-state-focus,\n.ui-widget-header .ui-state-focus {\n	border: 1px solid #74b2e2;\n	background: #e4f1fb url(\"cdf/js/lib/theme/cupertino/images/ui-bg_glass_100_e4f1fb_1x400.png\") 50% 50% repeat-x;\n	font-weight: bold;\n	color: #0070a3;\n}\n.ui-state-hover a,\n.ui-state-hover a:hover,\n.ui-state-hover a:link,\n.ui-state-hover a:visited,\n.ui-state-focus a,\n.ui-state-focus a:hover,\n.ui-state-focus a:link,\n.ui-state-focus a:visited {\n	color: #0070a3;\n	text-decoration: none;\n}\n.ui-state-active,\n.ui-widget-content .ui-state-active,\n.ui-widget-header .ui-state-active {\n	border: 1px solid #2694e8;\n	background: #3baae3 url(\"cdf/js/lib/theme/cupertino/images/ui-bg_glass_50_3baae3_1x400.png\") 50% 50% repeat-x;\n	font-weight: bold;\n	color: #ffffff;\n}\n.ui-state-active a,\n.ui-state-active a:link,\n.ui-state-active a:visited {\n	color: #ffffff;\n	text-decoration: none;\n}\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-highlight,\n.ui-widget-content .ui-state-highlight,\n.ui-widget-header .ui-state-highlight {\n	border: 1px solid #f9dd34;\n	background: #ffef8f url(\"cdf/js/lib/theme/cupertino/images/ui-bg_highlight-soft_25_ffef8f_1x100.png\") 50% top repeat-x;\n	color: #363636;\n}\n.ui-state-highlight a,\n.ui-widget-content .ui-state-highlight a,\n.ui-widget-header .ui-state-highlight a {\n	color: #363636;\n}\n.ui-state-error,\n.ui-widget-content .ui-state-error,\n.ui-widget-header .ui-state-error {\n	border: 1px solid #cd0a0a;\n	background: #cd0a0a url(\"cdf/js/lib/theme/cupertino/images/ui-bg_flat_15_cd0a0a_40x100.png\") 50% 50% repeat-x;\n	color: #ffffff;\n}\n.ui-state-error a,\n.ui-widget-content .ui-state-error a,\n.ui-widget-header .ui-state-error a {\n	color: #ffffff;\n}\n.ui-state-error-text,\n.ui-widget-content .ui-state-error-text,\n.ui-widget-header .ui-state-error-text {\n	color: #ffffff;\n}\n.ui-priority-primary,\n.ui-widget-content .ui-priority-primary,\n.ui-widget-header .ui-priority-primary {\n	font-weight: bold;\n}\n.ui-priority-secondary,\n.ui-widget-content .ui-priority-secondary,\n.ui-widget-header .ui-priority-secondary {\n	opacity: .7;\n	filter:Alpha(Opacity=70);\n	font-weight: normal;\n}\n.ui-state-disabled,\n.ui-widget-content .ui-state-disabled,\n.ui-widget-header .ui-state-disabled {\n	opacity: .35;\n	filter:Alpha(Opacity=35);\n	background-image: none;\n}\n.ui-state-disabled .ui-icon {\n	filter:Alpha(Opacity=35); /* For IE8 - See #6059 */\n}\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n.ui-icon {\n	width: 16px;\n	height: 16px;\n}\n.ui-icon,\n.ui-widget-content .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_72a7cf_256x240.png\");\n}\n.ui-widget-header .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_72a7cf_256x240.png\");\n}\n.ui-state-default .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_3d80b3_256x240.png\");\n}\n.ui-state-hover .ui-icon,\n.ui-state-focus .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_2694e8_256x240.png\");\n}\n.ui-state-active .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_ffffff_256x240.png\");\n}\n.ui-state-highlight .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_2e83ff_256x240.png\");\n}\n.ui-state-error .ui-icon,\n.ui-state-error-text .ui-icon {\n	background-image: url(\"cdf/js/lib/theme/cupertino/images/ui-icons_ffffff_256x240.png\");\n}\n\n/* positioning */\n.ui-icon-blank { background-position: 16px 16px; }\n.ui-icon-carat-1-n { background-position: 0 0; }\n.ui-icon-carat-1-ne { background-position: -16px 0; }\n.ui-icon-carat-1-e { background-position: -32px 0; }\n.ui-icon-carat-1-se { background-position: -48px 0; }\n.ui-icon-carat-1-s { background-position: -64px 0; }\n.ui-icon-carat-1-sw { background-position: -80px 0; }\n.ui-icon-carat-1-w { background-position: -96px 0; }\n.ui-icon-carat-1-nw { background-position: -112px 0; }\n.ui-icon-carat-2-n-s { background-position: -128px 0; }\n.ui-icon-carat-2-e-w { background-position: -144px 0; }\n.ui-icon-triangle-1-n { background-position: 0 -16px; }\n.ui-icon-triangle-1-ne { background-position: -16px -16px; }\n.ui-icon-triangle-1-e { background-position: -32px -16px; }\n.ui-icon-triangle-1-se { background-position: -48px -16px; }\n.ui-icon-triangle-1-s { background-position: -64px -16px; }\n.ui-icon-triangle-1-sw { background-position: -80px -16px; }\n.ui-icon-triangle-1-w { background-position: -96px -16px; }\n.ui-icon-triangle-1-nw { background-position: -112px -16px; }\n.ui-icon-triangle-2-n-s { background-position: -128px -16px; }\n.ui-icon-triangle-2-e-w { background-position: -144px -16px; }\n.ui-icon-arrow-1-n { background-position: 0 -32px; }\n.ui-icon-arrow-1-ne { background-position: -16px -32px; }\n.ui-icon-arrow-1-e { background-position: -32px -32px; }\n.ui-icon-arrow-1-se { background-position: -48px -32px; }\n.ui-icon-arrow-1-s { background-position: -64px -32px; }\n.ui-icon-arrow-1-sw { background-position: -80px -32px; }\n.ui-icon-arrow-1-w { background-position: -96px -32px; }\n.ui-icon-arrow-1-nw { background-position: -112px -32px; }\n.ui-icon-arrow-2-n-s { background-position: -128px -32px; }\n.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }\n.ui-icon-arrow-2-e-w { background-position: -160px -32px; }\n.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }\n.ui-icon-arrowstop-1-n { background-position: -192px -32px; }\n.ui-icon-arrowstop-1-e { background-position: -208px -32px; }\n.ui-icon-arrowstop-1-s { background-position: -224px -32px; }\n.ui-icon-arrowstop-1-w { background-position: -240px -32px; }\n.ui-icon-arrowthick-1-n { background-position: 0 -48px; }\n.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }\n.ui-icon-arrowthick-1-e { background-position: -32px -48px; }\n.ui-icon-arrowthick-1-se { background-position: -48px -48px; }\n.ui-icon-arrowthick-1-s { background-position: -64px -48px; }\n.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }\n.ui-icon-arrowthick-1-w { background-position: -96px -48px; }\n.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }\n.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }\n.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }\n.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }\n.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }\n.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }\n.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }\n.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }\n.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }\n.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }\n.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }\n.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }\n.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }\n.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }\n.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }\n.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }\n.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }\n.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }\n.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }\n.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }\n.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }\n.ui-icon-arrow-4 { background-position: 0 -80px; }\n.ui-icon-arrow-4-diag { background-position: -16px -80px; }\n.ui-icon-extlink { background-position: -32px -80px; }\n.ui-icon-newwin { background-position: -48px -80px; }\n.ui-icon-refresh { background-position: -64px -80px; }\n.ui-icon-shuffle { background-position: -80px -80px; }\n.ui-icon-transfer-e-w { background-position: -96px -80px; }\n.ui-icon-transferthick-e-w { background-position: -112px -80px; }\n.ui-icon-folder-collapsed { background-position: 0 -96px; }\n.ui-icon-folder-open { background-position: -16px -96px; }\n.ui-icon-document { background-position: -32px -96px; }\n.ui-icon-document-b { background-position: -48px -96px; }\n.ui-icon-note { background-position: -64px -96px; }\n.ui-icon-mail-closed { background-position: -80px -96px; }\n.ui-icon-mail-open { background-position: -96px -96px; }\n.ui-icon-suitcase { background-position: -112px -96px; }\n.ui-icon-comment { background-position: -128px -96px; }\n.ui-icon-person { background-position: -144px -96px; }\n.ui-icon-print { background-position: -160px -96px; }\n.ui-icon-trash { background-position: -176px -96px; }\n.ui-icon-locked { background-position: -192px -96px; }\n.ui-icon-unlocked { background-position: -208px -96px; }\n.ui-icon-bookmark { background-position: -224px -96px; }\n.ui-icon-tag { background-position: -240px -96px; }\n.ui-icon-home { background-position: 0 -112px; }\n.ui-icon-flag { background-position: -16px -112px; }\n.ui-icon-calendar { background-position: -32px -112px; }\n.ui-icon-cart { background-position: -48px -112px; }\n.ui-icon-pencil { background-position: -64px -112px; }\n.ui-icon-clock { background-position: -80px -112px; }\n.ui-icon-disk { background-position: -96px -112px; }\n.ui-icon-calculator { background-position: -112px -112px; }\n.ui-icon-zoomin { background-position: -128px -112px; }\n.ui-icon-zoomout { background-position: -144px -112px; }\n.ui-icon-search { background-position: -160px -112px; }\n.ui-icon-wrench { background-position: -176px -112px; }\n.ui-icon-gear { background-position: -192px -112px; }\n.ui-icon-heart { background-position: -208px -112px; }\n.ui-icon-star { background-position: -224px -112px; }\n.ui-icon-link { background-position: -240px -112px; }\n.ui-icon-cancel { background-position: 0 -128px; }\n.ui-icon-plus { background-position: -16px -128px; }\n.ui-icon-plusthick { background-position: -32px -128px; }\n.ui-icon-minus { background-position: -48px -128px; }\n.ui-icon-minusthick { background-position: -64px -128px; }\n.ui-icon-close { background-position: -80px -128px; }\n.ui-icon-closethick { background-position: -96px -128px; }\n.ui-icon-key { background-position: -112px -128px; }\n.ui-icon-lightbulb { background-position: -128px -128px; }\n.ui-icon-scissors { background-position: -144px -128px; }\n.ui-icon-clipboard { background-position: -160px -128px; }\n.ui-icon-copy { background-position: -176px -128px; }\n.ui-icon-contact { background-position: -192px -128px; }\n.ui-icon-image { background-position: -208px -128px; }\n.ui-icon-video { background-position: -224px -128px; }\n.ui-icon-script { background-position: -240px -128px; }\n.ui-icon-alert { background-position: 0 -144px; }\n.ui-icon-info { background-position: -16px -144px; }\n.ui-icon-notice { background-position: -32px -144px; }\n.ui-icon-help { background-position: -48px -144px; }\n.ui-icon-check { background-position: -64px -144px; }\n.ui-icon-bullet { background-position: -80px -144px; }\n.ui-icon-radio-on { background-position: -96px -144px; }\n.ui-icon-radio-off { background-position: -112px -144px; }\n.ui-icon-pin-w { background-position: -128px -144px; }\n.ui-icon-pin-s { background-position: -144px -144px; }\n.ui-icon-play { background-position: 0 -160px; }\n.ui-icon-pause { background-position: -16px -160px; }\n.ui-icon-seek-next { background-position: -32px -160px; }\n.ui-icon-seek-prev { background-position: -48px -160px; }\n.ui-icon-seek-end { background-position: -64px -160px; }\n.ui-icon-seek-start { background-position: -80px -160px; }\n/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */\n.ui-icon-seek-first { background-position: -80px -160px; }\n.ui-icon-stop { background-position: -96px -160px; }\n.ui-icon-eject { background-position: -112px -160px; }\n.ui-icon-volume-off { background-position: -128px -160px; }\n.ui-icon-volume-on { background-position: -144px -160px; }\n.ui-icon-power { background-position: 0 -176px; }\n.ui-icon-signal-diag { background-position: -16px -176px; }\n.ui-icon-signal { background-position: -32px -176px; }\n.ui-icon-battery-0 { background-position: -48px -176px; }\n.ui-icon-battery-1 { background-position: -64px -176px; }\n.ui-icon-battery-2 { background-position: -80px -176px; }\n.ui-icon-battery-3 { background-position: -96px -176px; }\n.ui-icon-circle-plus { background-position: 0 -192px; }\n.ui-icon-circle-minus { background-position: -16px -192px; }\n.ui-icon-circle-close { background-position: -32px -192px; }\n.ui-icon-circle-triangle-e { background-position: -48px -192px; }\n.ui-icon-circle-triangle-s { background-position: -64px -192px; }\n.ui-icon-circle-triangle-w { background-position: -80px -192px; }\n.ui-icon-circle-triangle-n { background-position: -96px -192px; }\n.ui-icon-circle-arrow-e { background-position: -112px -192px; }\n.ui-icon-circle-arrow-s { background-position: -128px -192px; }\n.ui-icon-circle-arrow-w { background-position: -144px -192px; }\n.ui-icon-circle-arrow-n { background-position: -160px -192px; }\n.ui-icon-circle-zoomin { background-position: -176px -192px; }\n.ui-icon-circle-zoomout { background-position: -192px -192px; }\n.ui-icon-circle-check { background-position: -208px -192px; }\n.ui-icon-circlesmall-plus { background-position: 0 -208px; }\n.ui-icon-circlesmall-minus { background-position: -16px -208px; }\n.ui-icon-circlesmall-close { background-position: -32px -208px; }\n.ui-icon-squaresmall-plus { background-position: -48px -208px; }\n.ui-icon-squaresmall-minus { background-position: -64px -208px; }\n.ui-icon-squaresmall-close { background-position: -80px -208px; }\n.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }\n.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }\n.ui-icon-grip-solid-vertical { background-position: -32px -224px; }\n.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }\n.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }\n.ui-icon-grip-diagonal-se { background-position: -80px -224px; }\n\n\n/* Misc visuals\n----------------------------------*/\n\n/* Corner radius */\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-left,\n.ui-corner-tl {\n	border-top-left-radius: 6px;\n}\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-right,\n.ui-corner-tr {\n	border-top-right-radius: 6px;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-left,\n.ui-corner-bl {\n	border-bottom-left-radius: 6px;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-right,\n.ui-corner-br {\n	border-bottom-right-radius: 6px;\n}\n\n/* Overlays */\n.ui-widget-overlay {\n	background: #eeeeee url(\"cdf/js/lib/theme/cupertino/images/ui-bg_diagonals-thick_90_eeeeee_40x40.png\") 50% 50% repeat;\n	opacity: .8;\n	filter: Alpha(Opacity=80);\n}\n.ui-widget-shadow {\n	margin: -7px 0 0 -7px;\n	padding: 7px;\n	background: #000000 url(\"cdf/js/lib/theme/cupertino/images/ui-bg_highlight-hard_70_000000_1x100.png\") 50% top repeat-x;\n	opacity: .3;\n	filter: Alpha(Opacity=30);\n	border-radius: 8px;\n}\n.ui-multiselect { padding:2px 0 2px 4px; text-align:left }\n.ui-multiselect span.ui-icon { float:right }\n.ui-multiselect-single .ui-multiselect-checkboxes input { position:absolute !important; top: auto !important; left:-9999px; }\n.ui-multiselect-single .ui-multiselect-checkboxes label { padding:5px !important }\n\n.ui-multiselect-header { margin-bottom:3px; padding:3px 0 3px 4px }\n.ui-multiselect-header ul { font-size:0.9em }\n.ui-multiselect-header ul li { float:left; padding:0 10px 0 0 }\n.ui-multiselect-header a { text-decoration:none }\n.ui-multiselect-header a:hover { text-decoration:underline }\n.ui-multiselect-header span.ui-icon { float:left }\n.ui-multiselect-header li.ui-multiselect-close { float:right; text-align:right; padding-right:0 }\n\n.ui-multiselect-menu { display:none; padding:3px; position:absolute; z-index:10000 }\n.ui-multiselect-checkboxes { position:relative /* fixes bug in IE6/7 */; overflow-y:scroll }\n.ui-multiselect-checkboxes label { cursor:default; display:block; border:1px solid transparent; padding:3px 1px }\n.ui-multiselect-checkboxes label input { position:relative; top:1px }\n.ui-multiselect-checkboxes li { clear:both; font-size:0.9em; padding-right:3px }\n.ui-multiselect-checkboxes li.ui-multiselect-optgroup-label { text-align:center; font-weight:bold; border-bottom:1px solid }\n.ui-multiselect-checkboxes li.ui-multiselect-optgroup-label a { display:block; padding:3px; margin:1px 0; text-decoration:none }\n\n/* remove label borders in IE6 because IE6 does not support transparency */\n* html .ui-multiselect-checkboxes label { border:none }\n/*\nVersion: 3.5.0 Timestamp: Mon Jun 16 19:29:44 EDT 2014\n*/\n.select2-container {\n    margin: 0;\n    position: relative;\n    display: inline-block;\n    /* inline-block for ie7 */\n    zoom: 1;\n    *display: inline;\n    vertical-align: middle;\n}\n\n.select2-container,\n.select2-drop,\n.select2-search,\n.select2-search input {\n  /*\n    Force border-box so that % widths fit the parent\n    container without overlap because of margin/padding.\n    More Info : http://www.quirksmode.org/css/box.html\n  */\n  -webkit-box-sizing: border-box; /* webkit */\n     -moz-box-sizing: border-box; /* firefox */\n          box-sizing: border-box; /* css3 */\n}\n\n.select2-container .select2-choice {\n    display: block;\n    height: 26px;\n    padding: 0 0 0 8px;\n    overflow: hidden;\n    position: relative;\n\n    border: 1px solid #aaa;\n    white-space: nowrap;\n    line-height: 26px;\n    color: #444;\n    text-decoration: none;\n\n    border-radius: 4px;\n\n    background-clip: padding-box;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n\n    background-color: #fff;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eee), color-stop(0.5, #fff));\n    background-image: -webkit-linear-gradient(center bottom, #eee 0%, #fff 50%);\n    background-image: -moz-linear-gradient(center bottom, #eee 0%, #fff 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#ffffff', endColorstr = '#eeeeee', GradientType = 0);\n    background-image: linear-gradient(to top, #eee 0%, #fff 50%);\n}\n\nhtml[dir=\"rtl\"] .select2-container .select2-choice {\n    padding: 0 8px 0 0;\n}\n\n.select2-container.select2-drop-above .select2-choice {\n    border-bottom-color: #aaa;\n\n    border-radius: 0 0 4px 4px;\n\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eee), color-stop(0.9, #fff));\n    background-image: -webkit-linear-gradient(center bottom, #eee 0%, #fff 90%);\n    background-image: -moz-linear-gradient(center bottom, #eee 0%, #fff 90%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#eeeeee', GradientType=0);\n    background-image: linear-gradient(to bottom, #eee 0%, #fff 90%);\n}\n\n.select2-container.select2-allowclear .select2-choice .select2-chosen {\n    margin-right: 42px;\n}\n\n.select2-container .select2-choice > .select2-chosen {\n    margin-right: 26px;\n    display: block;\n    overflow: hidden;\n\n    white-space: nowrap;\n\n    text-overflow: ellipsis;\n    float: none;\n    width: auto;\n}\n\nhtml[dir=\"rtl\"] .select2-container .select2-choice > .select2-chosen {\n    margin-left: 26px;\n    margin-right: 0;\n}\n\n.select2-container .select2-choice abbr {\n    display: none;\n    width: 12px;\n    height: 12px;\n    position: absolute;\n    right: 24px;\n    top: 8px;\n\n    font-size: 1px;\n    text-decoration: none;\n\n    border: 0;\n    background: url('cdf/js/lib/select2/select2.png') right top no-repeat;\n    cursor: pointer;\n    outline: 0;\n}\n\n.select2-container.select2-allowclear .select2-choice abbr {\n    display: inline-block;\n}\n\n.select2-container .select2-choice abbr:hover {\n    background-position: right -11px;\n    cursor: pointer;\n}\n\n.select2-drop-mask {\n    border: 0;\n    margin: 0;\n    padding: 0;\n    position: fixed;\n    left: 0;\n    top: 0;\n    min-height: 100%;\n    min-width: 100%;\n    height: auto;\n    width: auto;\n    opacity: 0;\n    z-index: 9998;\n    /* styles required for IE to work */\n    background-color: #fff;\n    filter: alpha(opacity=0);\n}\n\n.select2-drop {\n    width: 100%;\n    margin-top: -1px;\n    position: absolute;\n    z-index: 9999;\n    top: 100%;\n\n    background: #fff;\n    color: #000;\n    border: 1px solid #aaa;\n    border-top: 0;\n\n    border-radius: 0 0 4px 4px;\n\n    -webkit-box-shadow: 0 4px 5px rgba(0, 0, 0, .15);\n            box-shadow: 0 4px 5px rgba(0, 0, 0, .15);\n}\n\n.select2-drop.select2-drop-above {\n    margin-top: 1px;\n    border-top: 1px solid #aaa;\n    border-bottom: 0;\n\n    border-radius: 4px 4px 0 0;\n\n    -webkit-box-shadow: 0 -4px 5px rgba(0, 0, 0, .15);\n            box-shadow: 0 -4px 5px rgba(0, 0, 0, .15);\n}\n\n.select2-drop-active {\n    border: 1px solid #5897fb;\n    border-top: none;\n}\n\n.select2-drop.select2-drop-above.select2-drop-active {\n    border-top: 1px solid #5897fb;\n}\n\n.select2-drop-auto-width {\n    border-top: 1px solid #aaa;\n    width: auto;\n}\n\n.select2-drop-auto-width .select2-search {\n    padding-top: 4px;\n}\n\n.select2-container .select2-choice .select2-arrow {\n    display: inline-block;\n    width: 18px;\n    height: 100%;\n    position: absolute;\n    right: 0;\n    top: 0;\n\n    border-left: 1px solid #aaa;\n    border-radius: 0 4px 4px 0;\n\n    background-clip: padding-box;\n\n    background: #ccc;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #ccc), color-stop(0.6, #eee));\n    background-image: -webkit-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n    background-image: -moz-linear-gradient(center bottom, #ccc 0%, #eee 60%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#eeeeee', endColorstr = '#cccccc', GradientType = 0);\n    background-image: linear-gradient(to top, #ccc 0%, #eee 60%);\n}\n\nhtml[dir=\"rtl\"] .select2-container .select2-choice .select2-arrow {\n    left: 0;\n    right: auto;\n\n    border-left: none;\n    border-right: 1px solid #aaa;\n    border-radius: 4px 0 0 4px;\n}\n\n.select2-container .select2-choice .select2-arrow b {\n    display: block;\n    width: 100%;\n    height: 100%;\n    background: url('cdf/js/lib/select2/select2.png') no-repeat 0 1px;\n}\n\nhtml[dir=\"rtl\"] .select2-container .select2-choice .select2-arrow b {\n    background-position: 2px 1px;\n}\n\n.select2-search {\n    display: inline-block;\n    width: 100%;\n    min-height: 26px;\n    margin: 0;\n    padding-left: 4px;\n    padding-right: 4px;\n\n    position: relative;\n    z-index: 10000;\n\n    white-space: nowrap;\n}\n\n.select2-search input {\n    width: 100%;\n    height: auto !important;\n    min-height: 26px;\n    padding: 4px 20px 4px 5px;\n    margin: 0;\n\n    outline: 0;\n    font-family: sans-serif;\n    font-size: 1em;\n\n    border: 1px solid #aaa;\n    border-radius: 0;\n\n    -webkit-box-shadow: none;\n            box-shadow: none;\n\n    background: #fff url('cdf/js/lib/select2/select2.png') no-repeat 100% -22px;\n    background: url('cdf/js/lib/select2/select2.png') no-repeat 100% -22px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, #fff), color-stop(0.99, #eee));\n    background: url('cdf/js/lib/select2/select2.png') no-repeat 100% -22px, -webkit-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url('cdf/js/lib/select2/select2.png') no-repeat 100% -22px, -moz-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url('cdf/js/lib/select2/select2.png') no-repeat 100% -22px, linear-gradient(to bottom, #fff 85%, #eee 99%) 0 0;\n}\n\nhtml[dir=\"rtl\"] .select2-search input {\n    padding: 4px 5px 4px 20px;\n\n    background: #fff url('cdf/js/lib/select2/select2.png') no-repeat -37px -22px;\n    background: url('cdf/js/lib/select2/select2.png') no-repeat -37px -22px, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, #fff), color-stop(0.99, #eee));\n    background: url('cdf/js/lib/select2/select2.png') no-repeat -37px -22px, -webkit-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url('cdf/js/lib/select2/select2.png') no-repeat -37px -22px, -moz-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url('cdf/js/lib/select2/select2.png') no-repeat -37px -22px, linear-gradient(to bottom, #fff 85%, #eee 99%) 0 0;\n}\n\n.select2-drop.select2-drop-above .select2-search input {\n    margin-top: 4px;\n}\n\n.select2-search input.select2-active {\n    background: #fff url('cdf/js/lib/select2/select2-spinner.gif') no-repeat 100%;\n    background: url('cdf/js/lib/select2/select2-spinner.gif') no-repeat 100%, -webkit-gradient(linear, left bottom, left top, color-stop(0.85, #fff), color-stop(0.99, #eee));\n    background: url('cdf/js/lib/select2/select2-spinner.gif') no-repeat 100%, -webkit-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url('cdf/js/lib/select2/select2-spinner.gif') no-repeat 100%, -moz-linear-gradient(center bottom, #fff 85%, #eee 99%);\n    background: url('cdf/js/lib/select2/select2-spinner.gif') no-repeat 100%, linear-gradient(to bottom, #fff 85%, #eee 99%) 0 0;\n}\n\n.select2-container-active .select2-choice,\n.select2-container-active .select2-choices {\n    border: 1px solid #5897fb;\n    outline: none;\n\n    -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n            box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n}\n\n.select2-dropdown-open .select2-choice {\n    border-bottom-color: transparent;\n    -webkit-box-shadow: 0 1px 0 #fff inset;\n            box-shadow: 0 1px 0 #fff inset;\n\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n\n    background-color: #eee;\n    background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #fff), color-stop(0.5, #eee));\n    background-image: -webkit-linear-gradient(center bottom, #fff 0%, #eee 50%);\n    background-image: -moz-linear-gradient(center bottom, #fff 0%, #eee 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#eeeeee', endColorstr='#ffffff', GradientType=0);\n    background-image: linear-gradient(to top, #fff 0%, #eee 50%);\n}\n\n.select2-dropdown-open.select2-drop-above .select2-choice,\n.select2-dropdown-open.select2-drop-above .select2-choices {\n    border: 1px solid #5897fb;\n    border-top-color: transparent;\n\n    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #fff), color-stop(0.5, #eee));\n    background-image: -webkit-linear-gradient(center top, #fff 0%, #eee 50%);\n    background-image: -moz-linear-gradient(center top, #fff 0%, #eee 50%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#eeeeee', endColorstr='#ffffff', GradientType=0);\n    background-image: linear-gradient(to bottom, #fff 0%, #eee 50%);\n}\n\n.select2-dropdown-open .select2-choice .select2-arrow {\n    background: transparent;\n    border-left: none;\n    filter: none;\n}\nhtml[dir=\"rtl\"] .select2-dropdown-open .select2-choice .select2-arrow {\n    border-right: none;\n}\n\n.select2-dropdown-open .select2-choice .select2-arrow b {\n    background-position: -18px 1px;\n}\n\nhtml[dir=\"rtl\"] .select2-dropdown-open .select2-choice .select2-arrow b {\n    background-position: -16px 1px;\n}\n\n.select2-hidden-accessible {\n    border: 0;\n    clip: rect(0 0 0 0);\n    height: 1px;\n    margin: -1px;\n    overflow: hidden;\n    padding: 0;\n    position: absolute;\n    width: 1px;\n}\n\n/* results */\n.select2-results {\n    max-height: 200px;\n    padding: 0 0 0 4px;\n    margin: 4px 4px 4px 0;\n    position: relative;\n    overflow-x: hidden;\n    overflow-y: auto;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\nhtml[dir=\"rtl\"] .select2-results {\n    padding: 0 4px 0 0;\n    margin: 4px 0 4px 4px;\n}\n\n.select2-results ul.select2-result-sub {\n    margin: 0;\n    padding-left: 0;\n}\n\n.select2-results li {\n    list-style: none;\n    display: list-item;\n    background-image: none;\n}\n\n.select2-results li.select2-result-with-children > .select2-result-label {\n    font-weight: bold;\n}\n\n.select2-results .select2-result-label {\n    padding: 3px 7px 4px;\n    margin: 0;\n    cursor: pointer;\n\n    min-height: 1em;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n}\n\n.select2-results-dept-1 .select2-result-label { padding-left: 20px }\n.select2-results-dept-2 .select2-result-label { padding-left: 40px }\n.select2-results-dept-3 .select2-result-label { padding-left: 60px }\n.select2-results-dept-4 .select2-result-label { padding-left: 80px }\n.select2-results-dept-5 .select2-result-label { padding-left: 100px }\n.select2-results-dept-6 .select2-result-label { padding-left: 110px }\n.select2-results-dept-7 .select2-result-label { padding-left: 120px }\n\n.select2-results .select2-highlighted {\n    background: #3875d7;\n    color: #fff;\n}\n\n.select2-results li em {\n    background: #feffde;\n    font-style: normal;\n}\n\n.select2-results .select2-highlighted em {\n    background: transparent;\n}\n\n.select2-results .select2-highlighted ul {\n    background: #fff;\n    color: #000;\n}\n\n\n.select2-results .select2-no-results,\n.select2-results .select2-searching,\n.select2-results .select2-selection-limit {\n    background: #f4f4f4;\n    display: list-item;\n    padding-left: 5px;\n}\n\n/*\ndisabled look for disabled choices in the results dropdown\n*/\n.select2-results .select2-disabled.select2-highlighted {\n    color: #666;\n    background: #f4f4f4;\n    display: list-item;\n    cursor: default;\n}\n.select2-results .select2-disabled {\n  background: #f4f4f4;\n  display: list-item;\n  cursor: default;\n}\n\n.select2-results .select2-selected {\n    display: none;\n}\n\n.select2-more-results.select2-active {\n    background: #f4f4f4 url('cdf/js/lib/select2/select2-spinner.gif') no-repeat 100%;\n}\n\n.select2-more-results {\n    background: #f4f4f4;\n    display: list-item;\n}\n\n/* disabled styles */\n\n.select2-container.select2-container-disabled .select2-choice {\n    background-color: #f4f4f4;\n    background-image: none;\n    border: 1px solid #ddd;\n    cursor: default;\n}\n\n.select2-container.select2-container-disabled .select2-choice .select2-arrow {\n    background-color: #f4f4f4;\n    background-image: none;\n    border-left: 0;\n}\n\n.select2-container.select2-container-disabled .select2-choice abbr {\n    display: none;\n}\n\n\n/* multiselect */\n\n.select2-container-multi .select2-choices {\n    height: auto !important;\n    height: 1%;\n    margin: 0;\n    padding: 0 5px 0 0;\n    position: relative;\n\n    border: 1px solid #aaa;\n    cursor: text;\n    overflow: hidden;\n\n    background-color: #fff;\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(1%, #eee), color-stop(15%, #fff));\n    background-image: -webkit-linear-gradient(top, #eee 1%, #fff 15%);\n    background-image: -moz-linear-gradient(top, #eee 1%, #fff 15%);\n    background-image: linear-gradient(to bottom, #eee 1%, #fff 15%);\n}\n\nhtml[dir=\"rtl\"] .select2-container-multi .select2-choices {\n    padding: 0 0 0 5px;\n}\n\n.select2-locked {\n  padding: 3px 5px 3px 5px !important;\n}\n\n.select2-container-multi .select2-choices {\n    min-height: 26px;\n}\n\n.select2-container-multi.select2-container-active .select2-choices {\n    border: 1px solid #5897fb;\n    outline: none;\n\n    -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n            box-shadow: 0 0 5px rgba(0, 0, 0, .3);\n}\n.select2-container-multi .select2-choices li {\n    float: left;\n    list-style: none;\n}\nhtml[dir=\"rtl\"] .select2-container-multi .select2-choices li\n{\n    float: right;\n}\n.select2-container-multi .select2-choices .select2-search-field {\n    margin: 0;\n    padding: 0;\n    white-space: nowrap;\n}\n\n.select2-container-multi .select2-choices .select2-search-field input {\n    padding: 5px;\n    margin: 1px 0;\n\n    font-family: sans-serif;\n    font-size: 100%;\n    color: #666;\n    outline: 0;\n    border: 0;\n    -webkit-box-shadow: none;\n            box-shadow: none;\n    background: transparent !important;\n}\n\n.select2-container-multi .select2-choices .select2-search-field input.select2-active {\n    background: #fff url('cdf/js/lib/select2/select2-spinner.gif') no-repeat 100% !important;\n}\n\n.select2-default {\n    color: #999 !important;\n}\n\n.select2-container-multi .select2-choices .select2-search-choice {\n    padding: 3px 5px 3px 18px;\n    margin: 3px 0 3px 5px;\n    position: relative;\n\n    line-height: 13px;\n    color: #333;\n    cursor: default;\n    border: 1px solid #aaaaaa;\n\n    border-radius: 3px;\n\n    -webkit-box-shadow: 0 0 2px #fff inset, 0 1px 0 rgba(0, 0, 0, 0.05);\n            box-shadow: 0 0 2px #fff inset, 0 1px 0 rgba(0, 0, 0, 0.05);\n\n    background-clip: padding-box;\n\n    -webkit-touch-callout: none;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n\n    background-color: #e4e4e4;\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#eeeeee', endColorstr='#f4f4f4', GradientType=0);\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(20%, #f4f4f4), color-stop(50%, #f0f0f0), color-stop(52%, #e8e8e8), color-stop(100%, #eee));\n    background-image: -webkit-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eee 100%);\n    background-image: -moz-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eee 100%);\n    background-image: linear-gradient(to top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eee 100%);\n}\nhtml[dir=\"rtl\"] .select2-container-multi .select2-choices .select2-search-choice\n{\n    margin: 3px 5px 3px 0;\n    padding: 3px 18px 3px 5px;\n}\n.select2-container-multi .select2-choices .select2-search-choice .select2-chosen {\n    cursor: default;\n}\n.select2-container-multi .select2-choices .select2-search-choice-focus {\n    background: #d4d4d4;\n}\n\n.select2-search-choice-close {\n    display: block;\n    width: 12px;\n    height: 13px;\n    position: absolute;\n    right: 3px;\n    top: 4px;\n\n    font-size: 1px;\n    outline: none;\n    background: url('cdf/js/lib/select2/select2.png') right top no-repeat;\n}\nhtml[dir=\"rtl\"] .select2-search-choice-close {\n    right: auto;\n    left: 3px;\n}\n\n.select2-container-multi .select2-search-choice-close {\n    left: 3px;\n}\n\nhtml[dir=\"rtl\"] .select2-container-multi .select2-search-choice-close {\n    left: auto;\n    right: 2px;\n}\n\n.select2-container-multi .select2-choices .select2-search-choice .select2-search-choice-close:hover {\n  background-position: right -11px;\n}\n.select2-container-multi .select2-choices .select2-search-choice-focus .select2-search-choice-close {\n    background-position: right -11px;\n}\n\n/* disabled styles */\n.select2-container-multi.select2-container-disabled .select2-choices {\n    background-color: #f4f4f4;\n    background-image: none;\n    border: 1px solid #ddd;\n    cursor: default;\n}\n\n.select2-container-multi.select2-container-disabled .select2-choices .select2-search-choice {\n    padding: 3px 5px 3px 5px;\n    border: 1px solid #ddd;\n    background-image: none;\n    background-color: #f4f4f4;\n}\n\n.select2-container-multi.select2-container-disabled .select2-choices .select2-search-choice .select2-search-choice-close {    display: none;\n    background: none;\n}\n/* end multiselect */\n\n\n.select2-result-selectable .select2-match,\n.select2-result-unselectable .select2-match {\n    text-decoration: underline;\n}\n\n.select2-offscreen, .select2-offscreen:focus {\n    clip: rect(0 0 0 0) !important;\n    width: 1px !important;\n    height: 1px !important;\n    border: 0 !important;\n    margin: 0 !important;\n    padding: 0 !important;\n    overflow: hidden !important;\n    position: absolute !important;\n    outline: 0 !important;\n    left: 0px !important;\n    top: 0px !important;\n}\n\n.select2-display-none {\n    display: none;\n}\n\n.select2-measure-scrollbar {\n    position: absolute;\n    top: -10000px;\n    left: -10000px;\n    width: 100px;\n    height: 100px;\n    overflow: scroll;\n}\n\n/* Retina-ize icons */\n\n@media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (min-resolution: 2dppx)  {\n    .select2-search input,\n    .select2-search-choice-close,\n    .select2-container .select2-choice abbr,\n    .select2-container .select2-choice .select2-arrow b {\n        background-image: url('cdf/js/lib/select2/select2x2.png') !important;\n        background-repeat: no-repeat !important;\n        background-size: 60px 40px !important;\n    }\n\n    .select2-search input {\n        background-position: 100% -21px !important;\n    }\n}\n.form-control .select2-choice {\n    border: 0;\n    border-radius: 2px;\n}\n\n.form-control .select2-choice .select2-arrow {\n    border-radius: 0 2px 2px 0;   \n}\n\n.form-control.select2-container {\n    height: auto !important;\n    padding: 0;\n}\n\n.form-control.select2-container.select2-dropdown-open {\n    border-color: #5897FB;\n    border-radius: 3px 3px 0 0;\n}\n\n.form-control .select2-container.select2-dropdown-open .select2-choices {\n    border-radius: 3px 3px 0 0;\n}\n\n.form-control.select2-container .select2-choices {\n    border: 0 !important;\n    border-radius: 3px;\n}\n\n.control-group.warning .select2-container .select2-choice,\n.control-group.warning .select2-container .select2-choices,\n.control-group.warning .select2-container-active .select2-choice,\n.control-group.warning .select2-container-active .select2-choices,\n.control-group.warning .select2-dropdown-open.select2-drop-above .select2-choice,\n.control-group.warning .select2-dropdown-open.select2-drop-above .select2-choices,\n.control-group.warning .select2-container-multi.select2-container-active .select2-choices {\n    border: 1px solid #C09853 !important;\n}\n\n.control-group.warning .select2-container .select2-choice div {\n    border-left: 1px solid #C09853 !important;\n    background: #FCF8E3 !important;\n}\n\n.control-group.error .select2-container .select2-choice,\n.control-group.error .select2-container .select2-choices,\n.control-group.error .select2-container-active .select2-choice,\n.control-group.error .select2-container-active .select2-choices,\n.control-group.error .select2-dropdown-open.select2-drop-above .select2-choice,\n.control-group.error .select2-dropdown-open.select2-drop-above .select2-choices,\n.control-group.error .select2-container-multi.select2-container-active .select2-choices {\n    border: 1px solid #B94A48 !important;\n}\n\n.control-group.error .select2-container .select2-choice div {\n    border-left: 1px solid #B94A48 !important;\n    background: #F2DEDE !important;\n}\n\n.control-group.info .select2-container .select2-choice,\n.control-group.info .select2-container .select2-choices,\n.control-group.info .select2-container-active .select2-choice,\n.control-group.info .select2-container-active .select2-choices,\n.control-group.info .select2-dropdown-open.select2-drop-above .select2-choice,\n.control-group.info .select2-dropdown-open.select2-drop-above .select2-choices,\n.control-group.info .select2-container-multi.select2-container-active .select2-choices {\n    border: 1px solid #3A87AD !important;\n}\n\n.control-group.info .select2-container .select2-choice div {\n    border-left: 1px solid #3A87AD !important;\n    background: #D9EDF7 !important;\n}\n\n.control-group.success .select2-container .select2-choice,\n.control-group.success .select2-container .select2-choices,\n.control-group.success .select2-container-active .select2-choice,\n.control-group.success .select2-container-active .select2-choices,\n.control-group.success .select2-dropdown-open.select2-drop-above .select2-choice,\n.control-group.success .select2-dropdown-open.select2-drop-above .select2-choices,\n.control-group.success .select2-container-multi.select2-container-active .select2-choices {\n    border: 1px solid #468847 !important;\n}\n\n.control-group.success .select2-container .select2-choice div {\n    border-left: 1px solid #468847 !important;\n    background: #DFF0D8 !important;\n}\n.tundra input.dijitArrowButtonInner {\n  width: 16px;\n  margin: 0;\n}\n\n.dialog-content .dijitComboBox .dijitArrowButton,\ndiv.dijitDateTextBox.dijitComboBox .dijitArrowButton {\n  /* fallback color */\n  background: transparent;\n  /* Safari/Chrome */\n  background: -webkit-gradient(linear, left top, left bottom, color-stop(0, #AAA), color-stop(0.10, #888), color-stop(0.50, #3f3f3f), color-stop(0.55, #000), color-stop(0.90, #121212));\n  /* Firefox */\n  background: -moz-linear-gradient(#AAAAAA, #888888 10%, #3F3F3F 50%, #000000 55%, #121212 90%) repeat scroll 0 0 transparent;\n}\n/*! jQuery-Impromptu - v5.2.4 - 2014-05-26\n* http://trentrichardson.com/Impromptu\n* Copyright (c) 2014 Trent Richardson; Licensed MIT */\n.jqifade{\n	position: absolute; \n	background-color: #777777; \n}\ndiv.jqi{ \n	width: 400px; \n	max-width:90%;\n	font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; \n	position: absolute; \n	background-color: #ffffff; \n	font-size: 11px; \n	text-align: left; \n	border: solid 1px #eeeeee;\n	border-radius: 6px;\n	-moz-border-radius: 6px;\n	-webkit-border-radius: 6px;\n	padding: 7px;\n}\ndiv.jqi .jqicontainer{ \n}\ndiv.jqi .jqiclose{ \n	position: absolute;\n	top: 4px; right: -2px; \n	width: 18px; \n	cursor: default; \n	color: #bbbbbb; \n	font-weight: bold; \n}\ndiv.jqi .jqistate{\n	background-color: #fff;\n}\ndiv.jqi .jqititle{\n	padding: 5px 10px;\n	font-size: 16px; \n	line-height: 20px; \n	border-bottom: solid 1px #eeeeee;\n}\ndiv.jqi .jqimessage{ \n	padding: 10px; \n	line-height: 20px; \n	color: #444444; \n}\ndiv.jqi .jqibuttons{ \n	text-align: right; \n	margin: 0 -7px -7px -7px;\n	border-top: solid 1px #e4e4e4; \n	background-color: #f4f4f4;\n	border-radius: 0 0 6px 6px;\n	-moz-border-radius: 0 0 6px 6px;\n	-webkit-border-radius: 0 0 6px 6px;\n}\ndiv.jqi .jqibuttons button{ \n	margin: 0;\n	padding: 15px 20px;\n	background-color: transparent;\n	font-weight: normal; \n	border: none;\n	border-left: solid 1px #e4e4e4; \n	color: #777; \n	font-weight: bold; \n	font-size: 12px; \n}\ndiv.jqi .jqibuttons button.jqidefaultbutton{\n	color: #489afe;\n}\ndiv.jqi .jqibuttons button:hover,\ndiv.jqi .jqibuttons button:focus{\n	color: #287ade;\n	outline: none;\n}\n.jqiwarning .jqi .jqibuttons{ \n	background-color: #b95656;\n}\n\n/* sub states */\ndiv.jqi .jqiparentstate::after{ \n	background-color: #777;\n	opacity: 0.6;\n	filter: alpha(opacity=60);\n	content: '';\n	position: absolute;\n	top:0;left:0;bottom:0;right:0;\n	border-radius: 6px;\n	-moz-border-radius: 6px;\n	-webkit-border-radius: 6px;\n}\ndiv.jqi .jqisubstate{\n	position: absolute;\n	top:0;\n	left: 20%;\n	width: 60%;\n	padding: 7px;\n	border: solid 1px #eeeeee;\n	border-top: none;\n	border-radius: 0 0 6px 6px;\n	-moz-border-radius: 0 0 6px 6px;\n	-webkit-border-radius: 0 0 6px 6px;\n}\ndiv.jqi .jqisubstate .jqibuttons button{\n	padding: 10px 18px;\n}\n\n/* arrows for tooltips/tours */\n.jqi .jqiarrow{ position: absolute; height: 0; width:0; line-height: 0; font-size: 0; border: solid 10px transparent;}\n\n.jqi .jqiarrowtl{ left: 10px; top: -20px; border-bottom-color: #ffffff; }\n.jqi .jqiarrowtc{ left: 50%; top: -20px; border-bottom-color: #ffffff; margin-left: -10px; }\n.jqi .jqiarrowtr{ right: 10px; top: -20px; border-bottom-color: #ffffff; }\n\n.jqi .jqiarrowbl{ left: 10px; bottom: -20px; border-top-color: #ffffff; }\n.jqi .jqiarrowbc{ left: 50%; bottom: -20px; border-top-color: #ffffff; margin-left: -10px; }\n.jqi .jqiarrowbr{ right: 10px; bottom: -20px; border-top-color: #ffffff; }\n\n.jqi .jqiarrowlt{ left: -20px; top: 10px; border-right-color: #ffffff; }\n.jqi .jqiarrowlm{ left: -20px; top: 50%; border-right-color: #ffffff; margin-top: -10px; }\n.jqi .jqiarrowlb{ left: -20px; bottom: 10px; border-right-color: #ffffff; }\n\n.jqi .jqiarrowrt{ right: -20px; top: 10px; border-left-color: #ffffff; }\n.jqi .jqiarrowrm{ right: -20px; top: 50%; border-left-color: #ffffff; margin-top: -10px; }\n.jqi .jqiarrowrb{ right: -20px; bottom: 10px; border-left-color: #ffffff; }\n\n/*!\n * Copyright 2002 - 2015 Webdetails, a Pentaho company. All rights reserved.\n *\n * This software was developed by Webdetails and is provided under the terms\n * of the Mozilla Public License, Version 2.0, or any later version. You may not use\n * this file except in compliance with the license. If you need a copy of the license,\n * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.\n *\n * Software distributed under the Mozilla Public License is distributed on an \"AS IS\"\n * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to\n * the license for the specific language governing your rights and limitations.\n */\n \n.pentaho-toggle-button-up button {\n    background: #eee;\n    border: 1px outset white;\n}\n\n.pentaho-toggle-button-down button {\n    background: silver;\n    border: 1px inset gray;\n}\n\n\n.boxshadow .pentaho-toggle-button-up button {\n    background: #eee;\n    border: 1px solid gray;\n    box-shadow: inset 1px 1px 4px white,\n                inset -1px -1px 3px silver;\n    -webkit-box-shadow: inset 1px 1px 4px white,\n                inset -1px -1px 3px silver;\n    -moz-box-shadow: inset 1px 1px 4px white,\n                inset -1px -1px 3px silver;\n    -o-box-shadow: inset 1px 1px 4px white,\n                inset -1px -1px 3px silver;\n    -ms-box-shadow: inset 1px 1px 4px white,\n                inset -1px -1px 3px silver;\n}\n\n.boxshadow .pentaho-toggle-button-down button {\n    background: silver;\n    border: 1px solid black;\n    box-shadow: inset 1px 1px 1px gray;\n    -webkit-box-shadow: inset 1px 1px 1px gray;\n    -moz-box-shadow: inset 1px 1px 1px gray;\n    -o-box-shadow: inset 1px 1px 1px gray;\n    -ms-box-shadow: inset 1px 1px 1px gray;\n}\n\n.tableComponent{\n	margin-bottom:0em;\n}\n\n.tableComponent th{\n	text-align: center;\n}\n\n.tableComponent td.numeric{\n	text-align: right;\n	font-family: monospace;\n}\n\n.tableComponent td.string{\n	text-align: left;\n}\n\n.tableComponent td.sparkline{\n	text-align: center;\n}\n\n/* Overriding jquery.dataTable.css table.dataTable box-sizing style*/\n.dataTables_wrapper table.dataTable, .dataTables_wrapper table.dataTable th, .dataTables_wrapper table.dataTable td {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n\n.dataTables_wrapper table.dataTable thead th, .dataTables_wrapper table.dataTable thead td {\n  border-bottom: 0;\n} \n\n/* Two-Button Classic Pagination */\n.paginate_disabled_previous, .paginate_enabled_previous,\n.paginate_disabled_next, .paginate_enabled_next {\n  height: 19px;\n  float: left;\n  cursor: pointer;\n  *cursor: hand;\n  color: #111;\n}\n.paginate_disabled_previous:hover, .paginate_enabled_previous:hover,\n.paginate_disabled_next:hover, .paginate_enabled_next:hover {\n  text-decoration: none !important;\n}\n.paginate_disabled_previous:active, .paginate_enabled_previous:active,\n.paginate_disabled_next:active, .paginate_enabled_next:active {\n  outline: none;\n}\n\n.paginate_disabled_previous,\n.paginate_disabled_next {\n  color: #666;\n}\n.paginate_disabled_previous, .paginate_enabled_previous {\n  padding-left: 23px;\n}\n.paginate_disabled_next, .paginate_enabled_next {\n  padding-right: 23px;\n  margin-left: 10px;\n}\n\n.paginate_disabled_previous {\n  background: url('cdf/js/lib/dataTables/images/back_disabled.png') no-repeat top left;\n}\n\n.paginate_enabled_previous {\n  background: url('cdf/js/lib/dataTables/images/back_enabled.png') no-repeat top left;\n}\n.paginate_enabled_previous:hover {\n  background: url('cdf/js/lib/dataTables/images/back_enabled_hover.png') no-repeat top left;\n}\n\n.paginate_disabled_next {\n  background: url('cdf/js/lib/dataTables/images/forward_disabled.png') no-repeat top right;\n}\n\n.paginate_enabled_next {\n  background: url('cdf/js/lib/dataTables/images/forward_enabled.png') no-repeat top right;\n}\n.paginate_enabled_next:hover {\n  background: url('cdf/js/lib/dataTables/images/forward_enabled_hover.png') no-repeat top right;\n}\n\n/**************\n*/\n\n.cdfClickable{\n	cursor: pointer;\n}\n\n#GB_window {\n    left: 0;\n    top: 0;\n    font-size: 1px;\n    position: absolute;\n    overflow: visible;\n    z-index: 1500;\n}\n\n a.resetFilterButton {\n  color: #0000FF;\n  font-weight: bold;\n  font-size: 12px;\n  text-align: center;\n  text-decoration: none;\n}\n\n\n\n/* Overriding the inner .containers that are generated by widgets */\n.container .container{\n  width: auto;\n}\n\n\n\n/* Popups */\n\n.cdfPopupContainer * {\n  -moz-box-sizing: border-box; \n  box-sizing: border-box; \n  -webkit-box-sizing:border-box;    \n}\n.cdfPopupContainer {\n  position:fixed;\n  top: 30%;\n  left:50%;\n  z-index:2000;\n}\n.cdfPopup {\n  width: 390px;\n  margin-left: -195px;\n  background: #D0D0D1;\n  border:solid 2px #000000;\n  overflow:hidden;\n}\n.cdfPopupHeader {\n  height:42px;\n  line-height:42px;\n  width:100%;\n  text-align:center;\n  cursor:default;\n  font-size: 14px;\n  font-weight:bold;\n}\n.cdfPopupBody {\n  height:150px;\n  font-size:12px;\n}\n.cdfPopupDesc {\n  height: 90px;\n  padding-left:20px;\n  padding-right:20px;\n  text-align:center;\n  cursor:default;\n  text-overflow:ellipsis;\n  overflow:hidden;\n  white-space:pre;\n  margin-bottom:10px;\n}\n.cdfPopupButton {\n  height:35px;\n  line-height:35px;\n  border: solid 1px #000000;\n  border-radius: 2px;\n  margin-left:27px;\n  margin-right:27px;\n  text-align:center;\n  cursor:pointer;\n}\n.cdfPopupButton:hover {\n  background-color: #000000;\n  color: #FFFFFF;\n}\n\n\n\n/* Notifications */\n\n.cdfNotification.component * {\n  -moz-box-sizing: border-box; \n  box-sizing: border-box; \n  -webkit-box-sizing:border-box;    \n}\n\n.cdfNotification.component {\n  text-align:center;\n  padding:10px;\n  min-height:100%;\n}\n.cdfNotificationBody{\n  display:inline-block;\n  padding-left:33px;\n  text-align: left;\n  max-width:100%;\n  position:relative;\n  min-height:30px;\n}\n.cdfNotificationImg {\n  width:30px;\n  height:30px;\n  position:absolute;\n  top:0px;\n  left:0px;\n}\n.cdfNotificationTitle {\n  font-size:14px;\n  line-height:1.2;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n.cdfNotificationDesc {\n  font-size:11px;\n  line-height:1.2;\n  overflow:hidden;\n  text-overflow:ellipsis;\n}\n\n.cdfNotification.small {\n  padding:5px;\n}\n\n.cdfNotification.small .cdfNotificationBody{\n  display:inline-block;\n  padding-left:17px;\n  text-align: left;\n  min-height:15px;\n}\n\n.cdfNotification.small .cdfNotificationImg {\n  height:15px;\n  width:15px;\n}\n\n.cdfNotification.small .cdfNotificationTitle {\n  font-size:11px;\n  line-height:1.1;\n  white-space:nowrap;}\n\n.cdfNotification.small .cdfNotificationDesc {\n  font-size:9px;\n  line-height:1.1;\n  white-space:nowrap;\n}\n\n.cdfNotificationContainer {\n  z-index:2100;\n  position:fixed;\n  top:0px;\n  right:0px;\n  width:100%;\n}\n\n.cdfNotificationContainer .cdfNotification.growl {\n  float: right;\n}\n\n.img {\n  /* img class for divs posing as img ( TODO: use an alt-text replacement? ) */\n  display:inline-block;\n}\n\n/**\n * Dashboard.legacy.js\n **/\n.errorMessageTable .errorIcon {\n  background-image: url('cdf/js/lib/images/error.png');\n  height:16px;\n  width:16px;\n  display:inline-block;\n}\n\n/**\n * Block UI\n **/\n.blockUIDefaultImg {\n  background-image: url('cdf/js/lib/blockUI/images/processing_transparent.gif');\n  padding: 0px;\n  height:32px;\n  width:32px;\n  display:inline-block;\n}\n\n/*******************/\n\n/*\n  [CDE-471] This hack can be removed when jquery.ui in common-ui is updated to 1.11.*\n  where the bug causing this issue has been fixed\n*/\n\n/* IE9- */\nbody.draggable-popup-fix {\n  position: relative\\9;\n}\n\n/* IE10+ */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  body.draggable-popup-fix {\n    position: relative;\n  }\n}\n\n@-moz-document url-prefix() { /* firefox */\n  body.draggable-popup-fix {\n    position: relative;\n  }\n}\n/*******************/\n\n\n/*******\n * Button Component\n ********/\n\n.buttonComponent.enabled {\n  opacity: 1;\n}\n\n.buttonComponent.disabled {\n  opacity: 0.5;\n}/*!\n * Copyright 2002 - 2015 Webdetails, a Pentaho company. All rights reserved.\n *\n * This software was developed by Webdetails and is provided under the terms\n * of the Mozilla Public License, Version 2.0, or any later version. You may not use\n * this file except in compliance with the license. If you need a copy of the license,\n * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.\n *\n * Software distributed under the Mozilla Public License is distributed on an \"AS IS\"\n * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to\n * the license for the specific language governing your rights and limitations.\n */\n\n/* empty file to be loaded in debug allowing the r build to run */"),pen.define("reportviewer/reportviewer-main-module",function(){});